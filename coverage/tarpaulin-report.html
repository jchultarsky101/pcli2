<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>:root {
  --color: black;
  --bg: white;
  --head-bg: white;
  --link: #338;

  --blue: #ccf;
  --red: #fcc;
  --yellow: #ffc;
  --green: #cfc;
}

[data-theme='dark'] {
  --color: white;
  --bg: black;
  --head-bg: #333;
  --link: #aaf;

  --blue: #225;
  --red: #522;
  --yellow: #552;
  --green: #252;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--color);
  background: var(--bg);
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: var(--head-bg);
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: var(--blue);
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: var(--red);
}
.files-list__file_medium {
  background: var(--yellow);
}
.files-list__file_high {
  background: var(--green);
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: var(--bg);
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: var(--link);
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
  content: counter(line);
  margin-right: 72px;
}
.code-line {
  margin: 0;
  height: 1em;
  counter-increment: line;

  position: absolute;
  padding: 0 0.3em 0.3em 0.3em;
  display: inherit;
  width: 100%;
}
.code-line_covered {
  background: var(--green);
}
.code-line_uncovered {
  background: var(--red);
}

.code-text-container {
  position: relative;
  height: 1em;
  padding: 0.3em 0;
}

.cover-indicator {
  display: flex;
  width: 100%;
  position: absolute;
  justify-content: end;
  height: 1em;
  align-items: center;
  padding: 0 0.3em 0.3em 0.3em;
}

.cover-indicator.check-cover::after {
  content: "\2713";
  font-weight: bold;
  background-color: var(--green);
  height: 1em;
}

.cover-indicator.no-cover::after {
  content: "\2716";
  font-weight: bold;
  background-color: var(--red);
  height: 1em;
}

.stat-line-hit {
  max-width: 48px;
  overflow: hidden;
  font-weight: bold;
  margin-right: 4px;
  background-color: var(--green);
  position: relative;
  top: 0.1em;
}

#theme-toggle-label {
  margin-left: 1ch;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","Users","julian","projects","physna","pcli2","src","actions","assets.rs"],"content":"use std::{path::PathBuf, str::FromStr};\nuse clap::ArgMatches;\nuse uuid::Uuid;\nuse crate::actions::CliActionError;\nuse crate::{actions::folders::resolve_folder_uuid_by_path, commands::params::{PARAMETER_FILE, PARAMETER_FILES, PARAMETER_FOLDER_PATH, PARAMETER_FOLDER_UUID, PARAMETER_PATH, PARAMETER_UUID}, configuration::Configuration, error::CliError, error_utils, format::{OutputFormatter, CsvRecordProducer}, metadata::convert_single_metadata_to_json_value, model::{AssetList, Folder, normalize_path}, param_utils::{get_format_parameter_value, get_tenant}, physna_v3::{PhysnaApiClient, TryDefault}};\nuse indicatif::{MultiProgress, ProgressBar, ProgressStyle};\nuse tracing::{debug, trace};\n\npub async fn list_assets(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Listing assets...\");\n    \n    let format = get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // If a path is specified, get assets filtered by folder path\n    if let Some(path) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH) {\n        trace!(\"Listing assets for folder path: {}\", path);\n        \n        let path = normalize_path(path);\n        trace!(\"Normalized folder path: {}\", \u0026path);\n        \n        let assets = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, path.as_str()).await?;\n\n        println!(\"{}\", assets.format(format)?);\n    };\n    \n\n\tOk(())\n}\n\npub async fn print_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset get\\\" command...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let format = get_format_parameter_value(sub_matches).await;\n    \n    let asset_uuid_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n    \n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        let uuid = Uuid::from_str(uuid).unwrap(); \n        api.get_asset_by_uuid(\u0026tenant.uuid, \u0026uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset cache or fetch assets from API\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    println!(\"{}\", asset.format(format)?);        \n\n\tOk(())\n}\n\npub async fn create_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Executing file upload...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    // Check if the folder exists\n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n\n    let file_path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_FILE).ok_or(CliError::MissingRequiredArgument(\"file\".to_string()))?;\n                \n    // Extract filename from path for use in asset path construction\n    let file_name = file_path\n        .file_name()\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"Invalid file path\".to_string()))?\n        .to_str()\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"Invalid file name\".to_string()))?\n        .to_string();\n\n    \n    // Construct the full asset path by combining folder path with filename\n    let asset_path = match folder_path_param {\n        Some(folder_path) =\u003e {\n            if folder_path.is_empty() {\n                file_name.clone()\n            } else {\n                format!(\"{}/{}\", folder_path, file_name)\n            }\n        },\n        None =\u003e file_name.clone(),\n    };\n    \n    debug!(\"Creating asset with path: {}\", asset_path);\n\n    let asset = api.create_asset(\u0026tenant.uuid, \u0026file_path, \u0026asset_path, \u0026folder_uuid).await?;\n    println!(\"{}\", asset.format(format)?);\n\n    Ok(())\n}\n\npub async fn create_asset_batch(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n     trace!(\"Executing \\\"create asset batch\\\" command...\");\n    \n    let glob_pattern = sub_matches.get_one::\u003cString\u003e(PARAMETER_FILES)\n        .ok_or(CliError::MissingRequiredArgument(\"files\".to_string()))?\n        .clone();\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\")\n        .unwrap_or(\u00265);\n    let concurrent = *concurrent_param;\n    let show_progress = sub_matches.get_flag(\"progress\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    // Check if the folder exists\n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n\n    let assets = api.create_assets_batch(\u0026tenant.uuid, \u0026glob_pattern, Some(folder.path().as_str()), Some(\u0026folder_uuid), concurrent, show_progress).await?;\n    println!(\"{}\", AssetList::from(assets).format(format)?);\n        \n    Ok(())\n}\n\n\nuse std::collections::HashMap;\n\n/// Create metadata for multiple assets from a CSV file.\n///\n/// This function handles the \"asset metadata create-batch\" command, which creates or updates\n/// metadata for multiple assets from a CSV file.\npub async fn create_asset_metadata_batch(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"create asset metadata batch\\\" command...\");\n\n    let csv_file_path = sub_matches.get_one::\u003cstd::path::PathBuf\u003e(\"csv-file\")\n        .ok_or(CliError::MissingRequiredArgument(\"csv-file\".to_string()))?;\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Read the CSV file\n    let file = std::fs::File::open(csv_file_path)\n        .map_err(|e| CliError::ActionError(CliActionError::IoError(e)))?;\n    let mut reader = csv::Reader::from_reader(file);\n\n    // Parse the CSV records\n    let mut asset_metadata_map: HashMap\u003cString, HashMap\u003cString, serde_json::Value\u003e\u003e = HashMap::new();\n\n    for result in reader.records() {\n        let record: csv::StringRecord = result.map_err(|e| CliError::FormattingError(crate::format::FormattingError::CsvError(e)))?;\n\n        if record.len() \u003e= 3 {\n            let asset_path: \u0026str = record[0].trim();\n            let metadata_name: \u0026str = record[1].trim();\n            let metadata_value: \u0026str = record[2].trim();\n\n            // Use the same conversion logic as individual metadata command (default to text type)\n            let json_value = crate::metadata::convert_single_metadata_to_json_value(\n                metadata_name,  // name parameter (not used in function)\n                metadata_value,\n                \"text\"  // default to text type since CSV doesn't specify type\n            );\n\n            // Group metadata by asset path (strip leading slash if present for consistency with asset paths in system)\n            let clean_asset_path = asset_path.strip_prefix('/').unwrap_or(asset_path);\n            asset_metadata_map.entry(clean_asset_path.to_string())\n                .or_insert_with(HashMap::new)\n                .insert(metadata_name.to_string(), json_value);\n        }\n    }\n\n    // Process each asset with its metadata\n    let total_assets = asset_metadata_map.len();\n    let mut current_asset = 0;\n\n    for (asset_path, metadata) in \u0026asset_metadata_map {\n        if show_progress {\n            current_asset += 1;\n            eprint!(\"\\rProcessing asset {}/{}: {}\", current_asset, total_assets, asset_path);\n        }\n\n        // Get the asset by the normalized path\n        match api.get_asset_by_path(\u0026tenant.uuid, asset_path).await {\n            Ok(asset) =\u003e {\n                // Update the asset's metadata with automatic registration of new keys\n                if let Err(e) = api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026asset.uuid(), metadata).await {\n                    error_utils::report_error_with_remediation(\n                        \u0026format!(\"Failed to update metadata for asset '{}': {}\", asset_path, e),\n                        \u0026[\n                            \"Verify metadata field names and values are valid\",\n                            \"Check that you have sufficient permissions to modify this asset\",\n                            \"Verify your network connectivity\",\n                            \"Confirm the asset hasn't been deleted or modified recently\"\n                        ]\n                    );\n                }\n            }\n            Err(_e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Asset not found: '{}'\", asset_path),\n                    \u0026[\n                        \"Verify the asset path in your CSV file matches the actual asset path in Physna\",\n                        \"Check that the asset hasn't been deleted from the system\",\n                        \"Verify you're using the correct tenant for this asset\",\n                        \"Check for path format mismatches (e.g., leading slash differences)\",\n                        \"Verify the asset exists using 'pcli2 asset list --folder-path /' or similar command\"\n                    ]\n                );\n            }\n        }\n    }\n\n    if show_progress {\n        eprintln!(); // New line after progress indicator\n    }\n\n    // No output on success (per UNIX best practices)\n    Ok(())\n}\n\n/// Update an asset's metadata with the specified key-value pair.\n///\n/// This function handles the \"asset metadata create\" command, which adds or updates\n/// metadata for a specific asset identified by either its UUID or path.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the metadata was updated successfully\n/// * `Err(CliError)` - If an error occurred during the update\npub async fn update_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Execute \\\"asset metadata create\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n\n    // Get metadata parameters from command line\n    let metadata_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n        .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n    let metadata_value = sub_matches.get_one::\u003cString\u003e(\"value\")\n        .ok_or(CliError::MissingRequiredArgument(\"value\".to_string()))?;\n    let metadata_type = sub_matches.get_one::\u003cString\u003e(\"type\")\n        .map(|s| s.as_str())\n        .unwrap_or(\"text\");\n\n    // Convert the single metadata entry to JSON value using shared function\n    let json_value = convert_single_metadata_to_json_value(\n        metadata_name,\n        metadata_value,\n        metadata_type\n    );\n\n    // Create a HashMap with the single metadata entry\n    // This hashmap represents the desired metadata fields to update\n    let mut metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e =\n        std::collections::HashMap::new();\n    metadata.insert(metadata_name.clone(), json_value);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Update the asset's metadata with automatic registration of new keys\n    api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026asset.uuid(), \u0026metadata).await?;\n\n    // No output on success (per requirements)\n\n    Ok(())\n}\n\npub async fn print_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let format = get_format_parameter_value(sub_matches).await;\n    \n    let asset_uuid_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n    \n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        let uuid = Uuid::from_str(uuid).unwrap(); \n        api.get_asset_by_uuid(\u0026tenant.uuid, \u0026uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset cache or fetch assets from API\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n    \n    match asset.metadata() {\n        Some(metadata) =\u003e println!(\"{}\", metadata.format(format)?),\n        None =\u003e ()\n    };\n            \n    Ok(())\n\n}\n\n/// Delete an asset by UUID or path.\n///\n/// This function handles the \"asset delete\" command, removing a specific asset\n/// identified by either its UUID or path from the Physna API.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the asset was deleted successfully\n/// * `Err(CliError)` - If an error occurred during deletion\npub async fn delete_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset delete\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Delete the asset\n    api.delete_asset(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string()).await?;\n\n    Ok(())\n}\n\n/// Download an asset by UUID or path to a local file.\n///\n/// This function handles the \"asset download\" command, retrieving a specific asset\n/// identified by either its UUID or path from the Physna API and saving it to a local file.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the asset was downloaded successfully\n/// * `Err(CliError)` - If an error occurred during download\npub async fn download_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset download\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Get the output file path\n    let output_file_path = if let Some(output_path) = sub_matches.get_one::\u003cPathBuf\u003e(crate::commands::params::PARAMETER_FILE) {\n        output_path.clone()\n    } else {\n        // Use the asset name as the default output file name\n        let asset_name = asset.name();\n        let mut path = std::path::PathBuf::new();\n        path.push(asset_name);\n        path\n    };\n\n    // Download the asset file\n    let file_content = api.download_asset(\n        \u0026tenant.uuid.to_string(),\n        \u0026asset.uuid().to_string()\n    ).await?;\n\n    // Write the file content to the output file\n    std::fs::write(\u0026output_file_path, file_content).map_err(|e| CliActionError::IoError(e))?;\n\n    Ok(())\n}\n\npub async fn geometric_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing geometric match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters directly from sub_matches since geometric match commands have all format flags\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT).unwrap();\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform geometric search\n    let mut search_results = api.geometric_search(\u0026tenant.uuid, \u0026asset.uuid(), threshold).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.match_percentage\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.match_percentage\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    let enhanced_response = crate::model::EnhancedGeometricSearchResponse {\n        reference_asset: reference_asset_response,\n        matches: search_results.matches,\n    };\n\n    println!(\"{}\", enhanced_response.format(format)?);\n\n    Ok(())\n}\n\npub async fn part_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing part match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters directly from sub_matches since part match commands have all format flags\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform part search\n    let mut search_results = api.part_search(\u0026tenant.uuid, \u0026asset.uuid(), threshold).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.forward_match_percentage.unwrap_or(0.0),\n                match_result.reverse_match_percentage.unwrap_or(0.0)\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.forward_match_percentage.unwrap_or(0.0),\n                match_result.reverse_match_percentage.unwrap_or(0.0)\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    let enhanced_response = crate::model::EnhancedPartSearchResponse {\n        reference_asset: reference_asset_response,\n        matches: search_results.matches,\n    };\n\n    // Format the response considering the metadata flag\n    println!(\"{}\", enhanced_response.format_with_metadata_flag(format, with_metadata)?);\n\n    Ok(())\n}\n\npub async fn geometric_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing geometric match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .map(|s| s.to_string())\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT).unwrap_or(\u0026\"json\".to_string()).clone();\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedGeometricSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting geometric search...\");\n            }\n\n            let result = match api_clone.geometric_search(\u0026tenant_uuid, \u0026asset_uuid, threshold).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.match_percentage\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.match_percentage\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedGeometricSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform geometric search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::GeometricMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    format!(\"{}\", match_pair.match_percentage),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn part_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing part match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .cloned()\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedPartSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting part search...\");\n            }\n\n            let result = match api_clone.part_search(\u0026tenant_uuid, \u0026asset_uuid, threshold).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.forward_match_percentage.unwrap_or(0.0),\n                                match_result.reverse_match_percentage.unwrap_or(0.0)\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.forward_match_percentage.unwrap_or(0.0),\n                                match_result.reverse_match_percentage.unwrap_or(0.0)\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedPartSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform part search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::PartMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.forward_match_percentage.map_or_else(|| \"0.0\".to_string(), |val| format!(\"{}\", val)),\n                    match_pair.reverse_match_percentage.map_or_else(|| \"0.0\".to_string(), |val| format!(\"{}\", val)),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn visual_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing visual match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get format parameters directly from sub_matches since visual match commands have all format flags\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform visual search\n    let mut search_results = api.visual_search(\u0026tenant.uuid, \u0026asset.uuid()).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    // Create visual match pairs that exclude match percentages since visual search doesn't have them\n    let visual_match_pairs: Vec\u003ccrate::model::VisualMatchPair\u003e = search_results.matches\n        .into_iter()\n        .map(|match_result| crate::model::VisualMatchPair {\n            reference_asset: reference_asset_response.clone(),\n            candidate_asset: match_result.asset,\n            comparison_url: match_result.comparison_url,\n        })\n        .collect();\n\n    // Format the response based on the output format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            println!(\"{}\", serde_json::to_string_pretty(\u0026visual_match_pairs)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            let mut wtr = csv::Writer::from_writer(vec![]);\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026visual_match_pairs {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::VisualMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in \u0026visual_match_pairs {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            let output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            println!(\"{}\", serde_json::to_string_pretty(\u0026visual_match_pairs)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn visual_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing visual match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .cloned()\n        .collect();\n\n    // Get format parameters\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedPartSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting visual search...\");\n            }\n\n            let result = match api_clone.visual_search(\u0026tenant_uuid, \u0026asset_uuid).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedPartSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform visual search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::VisualMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\n/// Delete specific metadata fields from an asset.\n///\n/// This function handles the \"asset metadata delete\" command, which removes\n/// specified metadata fields from a specific asset identified by either its UUID or path.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the metadata was deleted successfully\n/// * `Err(CliError)` - If an error occurred during the deletion\npub async fn delete_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Execute \\\"asset metadata delete\\\" command...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get metadata name parameter from command line\n    let metadata_names = sub_matches.get_many::\u003cString\u003e(\"field_name\")\n        .ok_or(CliError::MissingRequiredArgument(\"field_name\".to_string()))?\n        .map(|s| s.as_str())\n        .collect::\u003cVec\u003c_\u003e\u003e();\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Delete the specified metadata fields using the dedicated API endpoint\n    let metadata_keys: Vec\u003c\u0026str\u003e = metadata_names.iter().map(|s| s.as_ref()).collect();\n    api.delete_asset_metadata(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string(), metadata_keys).await?;\n\n    Ok(())\n}\n\n/// Apply metadata inference from a reference asset to geometrically similar assets\n///\n/// This function finds geometrically similar assets to a reference asset and copies specified metadata fields\n/// from the reference to the similar assets.\n///\n/// # Arguments\n/// * `sub_matches` - The command line arguments\n///\n/// # Returns\n/// * `Ok(())` - If the operation completed successfully\n/// * `Err(CliError)` - If an error occurred during the operation\npub async fn metadata_inference(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing metadata inference command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get the reference asset path\n    let asset_path = sub_matches.get_one::\u003cString\u003e(\"path\")\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"path\".to_string()))?;\n\n    // Get the metadata field names to copy\n    let metadata_names: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(\"inference_name\")\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"name\".to_string()))?\n        .map(|s| s.to_string())\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get format parameters\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n        .map(|s| s.as_str())\n        .unwrap_or(\"json\");\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(format_str, format_options.clone())\n        .map_err(|e| CliActionError::FormattingError(crate::format::FormattingError::FormatFailure { cause: Box::new(e) }))?;\n\n    // Get the reference asset\n    let reference_asset = api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?;\n\n    // Check if the reference asset has any of the requested metadata fields BEFORE performing expensive geometric search\n    let reference_metadata = reference_asset.metadata();\n    let mut available_fields = Vec::new();\n    if let Some(asset_metadata) = reference_metadata {\n        for field_name in \u0026metadata_names {\n            if asset_metadata.get(field_name).is_some() {\n                available_fields.push(field_name.clone());\n            }\n        }\n    }\n\n    // Fail fast if no requested fields exist in the reference asset\n    if available_fields.is_empty() {\n        return Err(CliError::from(CliActionError::MissingRequiredArgument(format!(\n            \"Reference asset '{}' has no metadata fields matching: {:?}\", asset_path, metadata_names\n        ))));\n    }\n\n    // Only perform expensive geometric search if we know we have fields to copy\n    let search_results = api.geometric_search(\u0026tenant.uuid, \u0026reference_asset.uuid(), threshold).await?;\n\n    let mut assets_updated = Vec::new();\n\n    // Extract the parent folder path from the reference asset\n    let reference_parent_folder_path = {\n        let path_str = reference_asset.path().to_string();\n        let path_parts: Vec\u003c\u0026str\u003e = path_str.split('/').collect();\n        if path_parts.len() \u003e 1 {\n            // Join all parts except the last one (filename) to get the parent folder path\n            path_parts[..path_parts.len()-1].join(\"/\")\n        } else {\n            // If there's only one part, the parent is root\n            \"\".to_string()\n        }\n    };\n\n    for match_result in search_results.matches {\n        // If exclusive flag is set, only process assets in the same parent folder\n        if exclusive {\n            let candidate_parent_folder_path = {\n                let path_str = match_result.asset.path.clone();\n                let path_parts: Vec\u003c\u0026str\u003e = path_str.split('/').collect();\n                if path_parts.len() \u003e 1 {\n                    path_parts[..path_parts.len()-1].join(\"/\")\n                } else {\n                    \"\".to_string()\n                }\n            };\n\n            // Skip if the candidate asset is not in the same parent folder as the reference\n            if candidate_parent_folder_path != reference_parent_folder_path {\n                continue;\n            }\n        }\n\n        // Create a new metadata map with only the specified fields from the reference asset\n        let mut new_metadata_map = std::collections::HashMap::new();\n\n        if let Some(asset_metadata) = reference_metadata {\n            for field_name in \u0026available_fields {\n                if let Some(value) = asset_metadata.get(field_name) {\n                    new_metadata_map.insert(field_name.clone(), serde_json::Value::String(value.clone()));\n                }\n            }\n        }\n\n        // Update the similar asset with the copied metadata with automatic registration of new keys\n        if !new_metadata_map.is_empty() {\n            api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026match_result.asset.uuid, \u0026new_metadata_map).await?;\n\n            // Track which assets were updated\n            assets_updated.push((match_result.asset.path.clone(), new_metadata_map.clone()));\n        }\n    }\n\n    // Create a response structure to output the results\n    let response = serde_json::json!({\n        \"reference_asset_path\": asset_path,\n        \"reference_asset_uuid\": reference_asset.uuid(),\n        \"threshold\": threshold,\n        \"fields_copied\": metadata_names,\n        \"assets_updated\": assets_updated.len(),\n        \"updated_assets\": assets_updated\n    });\n\n    match format {\n        crate::format::OutputFormat::Json(options) =\u003e {\n            if options.pretty {\n                println!(\"{}\", serde_json::to_string_pretty(\u0026response)?);\n            } else {\n                println!(\"{}\", serde_json::to_string(\u0026response)?);\n            }\n        }\n        crate::format::OutputFormat::Csv(options) =\u003e {\n            // For CSV output, create a simple table\n            let mut wtr = csv::Writer::from_writer(vec![]);\n\n            if options.with_headers {\n                if let Err(e) = wtr.serialize(\u0026[\"REFERENCE_ASSET_PATH\", \"CANDIDATE_ASSET_PATH\", \"FIELD_NAME\", \"FIELD_VALUE\", \"THRESHOLD\"]) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for (candidate_asset_path, metadata_map) in \u0026assets_updated {\n                for (field_name, field_value) in metadata_map {\n                    if let Err(e) = wtr.serialize(\u0026[\n                        asset_path,  // REFERENCE_ASSET_PATH - the reference asset path\n                        candidate_asset_path,  // CANDIDATE_ASSET_PATH - the asset that received the metadata\n                        field_name,  // FIELD_NAME\n                        field_value.as_str().unwrap_or(\"\"), // FIELD_VALUE\n                        \u0026threshold.to_string() // THRESHOLD\n                    ]) {\n                        return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                    }\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            let csv_string = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n            print!(\"{}\", csv_string);\n        }\n        _ =\u003e {\n            // Default to JSON\n            if format_options.pretty {\n                println!(\"{}\", serde_json::to_string_pretty(\u0026response)?);\n            } else {\n                println!(\"{}\", serde_json::to_string(\u0026response)?);\n            }\n        }\n    }\n\n    Ok(())\n}","traces":[{"line":9,"address":[],"length":0,"stats":{"Line":0}},{"line":10,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":13,"address":[],"length":0,"stats":{"Line":0}},{"line":14,"address":[],"length":0,"stats":{"Line":0}},{"line":15,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":8}},{"line":34,"address":[],"length":0,"stats":{"Line":4}},{"line":36,"address":[],"length":0,"stats":{"Line":8}},{"line":37,"address":[],"length":0,"stats":{"Line":8}},{"line":38,"address":[],"length":0,"stats":{"Line":20}},{"line":39,"address":[],"length":0,"stats":{"Line":12}},{"line":41,"address":[],"length":0,"stats":{"Line":16}},{"line":42,"address":[],"length":0,"stats":{"Line":16}},{"line":45,"address":[],"length":0,"stats":{"Line":8}},{"line":46,"address":[],"length":0,"stats":{"Line":16}},{"line":47,"address":[],"length":0,"stats":{"Line":16}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":245,"address":[],"length":0,"stats":{"Line":0}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":295,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":330,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":396,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":415,"address":[],"length":0,"stats":{"Line":0}},{"line":417,"address":[],"length":0,"stats":{"Line":0}},{"line":418,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":421,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":437,"address":[],"length":0,"stats":{"Line":0}},{"line":440,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":462,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":476,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":497,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":504,"address":[],"length":0,"stats":{"Line":0}},{"line":505,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}},{"line":557,"address":[],"length":0,"stats":{"Line":0}},{"line":558,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":561,"address":[],"length":0,"stats":{"Line":0}},{"line":562,"address":[],"length":0,"stats":{"Line":0}},{"line":563,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":576,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":581,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":585,"address":[],"length":0,"stats":{"Line":0}},{"line":586,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":589,"address":[],"length":0,"stats":{"Line":0}},{"line":592,"address":[],"length":0,"stats":{"Line":0}},{"line":597,"address":[],"length":0,"stats":{"Line":0}},{"line":598,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":602,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":618,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":0}},{"line":636,"address":[],"length":0,"stats":{"Line":0}},{"line":637,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":642,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":652,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":678,"address":[],"length":0,"stats":{"Line":0}},{"line":679,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":684,"address":[],"length":0,"stats":{"Line":0}},{"line":686,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":695,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":0}},{"line":697,"address":[],"length":0,"stats":{"Line":0}},{"line":707,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":724,"address":[],"length":0,"stats":{"Line":0}},{"line":725,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":740,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":757,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":761,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":769,"address":[],"length":0,"stats":{"Line":0}},{"line":771,"address":[],"length":0,"stats":{"Line":0}},{"line":772,"address":[],"length":0,"stats":{"Line":0}},{"line":773,"address":[],"length":0,"stats":{"Line":0}},{"line":775,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":784,"address":[],"length":0,"stats":{"Line":0}},{"line":785,"address":[],"length":0,"stats":{"Line":0}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}},{"line":788,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":799,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":801,"address":[],"length":0,"stats":{"Line":0}},{"line":802,"address":[],"length":0,"stats":{"Line":0}},{"line":803,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":806,"address":[],"length":0,"stats":{"Line":0}},{"line":808,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":815,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":823,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":827,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":829,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":831,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":841,"address":[],"length":0,"stats":{"Line":0}},{"line":842,"address":[],"length":0,"stats":{"Line":0}},{"line":844,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":850,"address":[],"length":0,"stats":{"Line":0}},{"line":851,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":857,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":861,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":865,"address":[],"length":0,"stats":{"Line":0}},{"line":866,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":872,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":879,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":892,"address":[],"length":0,"stats":{"Line":0}},{"line":893,"address":[],"length":0,"stats":{"Line":0}},{"line":903,"address":[],"length":0,"stats":{"Line":0}},{"line":906,"address":[],"length":0,"stats":{"Line":0}},{"line":907,"address":[],"length":0,"stats":{"Line":0}},{"line":910,"address":[],"length":0,"stats":{"Line":0}},{"line":911,"address":[],"length":0,"stats":{"Line":0}},{"line":915,"address":[],"length":0,"stats":{"Line":0}},{"line":917,"address":[],"length":0,"stats":{"Line":0}},{"line":918,"address":[],"length":0,"stats":{"Line":0}},{"line":919,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":928,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":930,"address":[],"length":0,"stats":{"Line":0}},{"line":931,"address":[],"length":0,"stats":{"Line":0}},{"line":932,"address":[],"length":0,"stats":{"Line":0}},{"line":933,"address":[],"length":0,"stats":{"Line":0}},{"line":934,"address":[],"length":0,"stats":{"Line":0}},{"line":935,"address":[],"length":0,"stats":{"Line":0}},{"line":936,"address":[],"length":0,"stats":{"Line":0}},{"line":937,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":939,"address":[],"length":0,"stats":{"Line":0}},{"line":940,"address":[],"length":0,"stats":{"Line":0}},{"line":943,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":958,"address":[],"length":0,"stats":{"Line":0}},{"line":959,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":961,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":968,"address":[],"length":0,"stats":{"Line":0}},{"line":969,"address":[],"length":0,"stats":{"Line":0}},{"line":972,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":979,"address":[],"length":0,"stats":{"Line":0}},{"line":980,"address":[],"length":0,"stats":{"Line":0}},{"line":981,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":990,"address":[],"length":0,"stats":{"Line":0}},{"line":993,"address":[],"length":0,"stats":{"Line":0}},{"line":995,"address":[],"length":0,"stats":{"Line":0}},{"line":996,"address":[],"length":0,"stats":{"Line":0}},{"line":997,"address":[],"length":0,"stats":{"Line":0}},{"line":1002,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1007,"address":[],"length":0,"stats":{"Line":0}},{"line":1008,"address":[],"length":0,"stats":{"Line":0}},{"line":1012,"address":[],"length":0,"stats":{"Line":0}},{"line":1014,"address":[],"length":0,"stats":{"Line":0}},{"line":1015,"address":[],"length":0,"stats":{"Line":0}},{"line":1016,"address":[],"length":0,"stats":{"Line":0}},{"line":1017,"address":[],"length":0,"stats":{"Line":0}},{"line":1018,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1025,"address":[],"length":0,"stats":{"Line":0}},{"line":1029,"address":[],"length":0,"stats":{"Line":0}},{"line":1030,"address":[],"length":0,"stats":{"Line":0}},{"line":1034,"address":[],"length":0,"stats":{"Line":0}},{"line":1037,"address":[],"length":0,"stats":{"Line":0}},{"line":1038,"address":[],"length":0,"stats":{"Line":0}},{"line":1039,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1041,"address":[],"length":0,"stats":{"Line":0}},{"line":1042,"address":[],"length":0,"stats":{"Line":0}},{"line":1046,"address":[],"length":0,"stats":{"Line":0}},{"line":1050,"address":[],"length":0,"stats":{"Line":0}},{"line":1051,"address":[],"length":0,"stats":{"Line":0}},{"line":1052,"address":[],"length":0,"stats":{"Line":0}},{"line":1053,"address":[],"length":0,"stats":{"Line":0}},{"line":1054,"address":[],"length":0,"stats":{"Line":0}},{"line":1055,"address":[],"length":0,"stats":{"Line":0}},{"line":1061,"address":[],"length":0,"stats":{"Line":0}},{"line":1065,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1070,"address":[],"length":0,"stats":{"Line":0}},{"line":1071,"address":[],"length":0,"stats":{"Line":0}},{"line":1073,"address":[],"length":0,"stats":{"Line":0}},{"line":1074,"address":[],"length":0,"stats":{"Line":0}},{"line":1079,"address":[],"length":0,"stats":{"Line":0}},{"line":1080,"address":[],"length":0,"stats":{"Line":0}},{"line":1081,"address":[],"length":0,"stats":{"Line":0}},{"line":1084,"address":[],"length":0,"stats":{"Line":0}},{"line":1086,"address":[],"length":0,"stats":{"Line":0}},{"line":1088,"address":[],"length":0,"stats":{"Line":0}},{"line":1090,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1092,"address":[],"length":0,"stats":{"Line":0}},{"line":1096,"address":[],"length":0,"stats":{"Line":0}},{"line":1097,"address":[],"length":0,"stats":{"Line":0}},{"line":1101,"address":[],"length":0,"stats":{"Line":0}},{"line":1102,"address":[],"length":0,"stats":{"Line":0}},{"line":1103,"address":[],"length":0,"stats":{"Line":0}},{"line":1104,"address":[],"length":0,"stats":{"Line":0}},{"line":1105,"address":[],"length":0,"stats":{"Line":0}},{"line":1106,"address":[],"length":0,"stats":{"Line":0}},{"line":1107,"address":[],"length":0,"stats":{"Line":0}},{"line":1108,"address":[],"length":0,"stats":{"Line":0}},{"line":1111,"address":[],"length":0,"stats":{"Line":0}},{"line":1113,"address":[],"length":0,"stats":{"Line":0}},{"line":1115,"address":[],"length":0,"stats":{"Line":0}},{"line":1116,"address":[],"length":0,"stats":{"Line":0}},{"line":1117,"address":[],"length":0,"stats":{"Line":0}},{"line":1119,"address":[],"length":0,"stats":{"Line":0}},{"line":1122,"address":[],"length":0,"stats":{"Line":0}},{"line":1123,"address":[],"length":0,"stats":{"Line":0}},{"line":1124,"address":[],"length":0,"stats":{"Line":0}},{"line":1126,"address":[],"length":0,"stats":{"Line":0}},{"line":1130,"address":[],"length":0,"stats":{"Line":0}},{"line":1131,"address":[],"length":0,"stats":{"Line":0}},{"line":1135,"address":[],"length":0,"stats":{"Line":0}},{"line":1136,"address":[],"length":0,"stats":{"Line":0}},{"line":1137,"address":[],"length":0,"stats":{"Line":0}},{"line":1138,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1142,"address":[],"length":0,"stats":{"Line":0}},{"line":1143,"address":[],"length":0,"stats":{"Line":0}},{"line":1144,"address":[],"length":0,"stats":{"Line":0}},{"line":1148,"address":[],"length":0,"stats":{"Line":0}},{"line":1152,"address":[],"length":0,"stats":{"Line":0}},{"line":1153,"address":[],"length":0,"stats":{"Line":0}},{"line":1154,"address":[],"length":0,"stats":{"Line":0}},{"line":1155,"address":[],"length":0,"stats":{"Line":0}},{"line":1156,"address":[],"length":0,"stats":{"Line":0}},{"line":1157,"address":[],"length":0,"stats":{"Line":0}},{"line":1161,"address":[],"length":0,"stats":{"Line":0}},{"line":1165,"address":[],"length":0,"stats":{"Line":0}},{"line":1168,"address":[],"length":0,"stats":{"Line":0}},{"line":1169,"address":[],"length":0,"stats":{"Line":0}},{"line":1171,"address":[],"length":0,"stats":{"Line":0}},{"line":1172,"address":[],"length":0,"stats":{"Line":0}},{"line":1173,"address":[],"length":0,"stats":{"Line":0}},{"line":1176,"address":[],"length":0,"stats":{"Line":0}},{"line":1177,"address":[],"length":0,"stats":{"Line":0}},{"line":1178,"address":[],"length":0,"stats":{"Line":0}},{"line":1183,"address":[],"length":0,"stats":{"Line":0}},{"line":1188,"address":[],"length":0,"stats":{"Line":0}},{"line":1189,"address":[],"length":0,"stats":{"Line":0}},{"line":1192,"address":[],"length":0,"stats":{"Line":0}},{"line":1193,"address":[],"length":0,"stats":{"Line":0}},{"line":1195,"address":[],"length":0,"stats":{"Line":0}},{"line":1199,"address":[],"length":0,"stats":{"Line":0}},{"line":1200,"address":[],"length":0,"stats":{"Line":0}},{"line":1201,"address":[],"length":0,"stats":{"Line":0}},{"line":1209,"address":[],"length":0,"stats":{"Line":0}},{"line":1210,"address":[],"length":0,"stats":{"Line":0}},{"line":1213,"address":[],"length":0,"stats":{"Line":0}},{"line":1216,"address":[],"length":0,"stats":{"Line":0}},{"line":1217,"address":[],"length":0,"stats":{"Line":0}},{"line":1218,"address":[],"length":0,"stats":{"Line":0}},{"line":1219,"address":[],"length":0,"stats":{"Line":0}},{"line":1220,"address":[],"length":0,"stats":{"Line":0}},{"line":1222,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1227,"address":[],"length":0,"stats":{"Line":0}},{"line":1230,"address":[],"length":0,"stats":{"Line":0}},{"line":1232,"address":[],"length":0,"stats":{"Line":0}},{"line":1233,"address":[],"length":0,"stats":{"Line":0}},{"line":1234,"address":[],"length":0,"stats":{"Line":0}},{"line":1236,"address":[],"length":0,"stats":{"Line":0}},{"line":1237,"address":[],"length":0,"stats":{"Line":0}},{"line":1241,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1245,"address":[],"length":0,"stats":{"Line":0}},{"line":1246,"address":[],"length":0,"stats":{"Line":0}},{"line":1247,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1252,"address":[],"length":0,"stats":{"Line":0}},{"line":1256,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1260,"address":[],"length":0,"stats":{"Line":0}},{"line":1261,"address":[],"length":0,"stats":{"Line":0}},{"line":1262,"address":[],"length":0,"stats":{"Line":0}},{"line":1263,"address":[],"length":0,"stats":{"Line":0}},{"line":1264,"address":[],"length":0,"stats":{"Line":0}},{"line":1265,"address":[],"length":0,"stats":{"Line":0}},{"line":1267,"address":[],"length":0,"stats":{"Line":0}},{"line":1269,"address":[],"length":0,"stats":{"Line":0}},{"line":1273,"address":[],"length":0,"stats":{"Line":0}},{"line":1276,"address":[],"length":0,"stats":{"Line":0}},{"line":1279,"address":[],"length":0,"stats":{"Line":0}},{"line":1283,"address":[],"length":0,"stats":{"Line":0}},{"line":1284,"address":[],"length":0,"stats":{"Line":0}},{"line":1285,"address":[],"length":0,"stats":{"Line":0}},{"line":1286,"address":[],"length":0,"stats":{"Line":0}},{"line":1287,"address":[],"length":0,"stats":{"Line":0}},{"line":1288,"address":[],"length":0,"stats":{"Line":0}},{"line":1289,"address":[],"length":0,"stats":{"Line":0}},{"line":1290,"address":[],"length":0,"stats":{"Line":0}},{"line":1291,"address":[],"length":0,"stats":{"Line":0}},{"line":1292,"address":[],"length":0,"stats":{"Line":0}},{"line":1294,"address":[],"length":0,"stats":{"Line":0}},{"line":1295,"address":[],"length":0,"stats":{"Line":0}},{"line":1298,"address":[],"length":0,"stats":{"Line":0}},{"line":1299,"address":[],"length":0,"stats":{"Line":0}},{"line":1300,"address":[],"length":0,"stats":{"Line":0}},{"line":1301,"address":[],"length":0,"stats":{"Line":0}},{"line":1302,"address":[],"length":0,"stats":{"Line":0}},{"line":1303,"address":[],"length":0,"stats":{"Line":0}},{"line":1305,"address":[],"length":0,"stats":{"Line":0}},{"line":1307,"address":[],"length":0,"stats":{"Line":0}},{"line":1311,"address":[],"length":0,"stats":{"Line":0}},{"line":1312,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1316,"address":[],"length":0,"stats":{"Line":0}},{"line":1318,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1322,"address":[],"length":0,"stats":{"Line":0}},{"line":1324,"address":[],"length":0,"stats":{"Line":0}},{"line":1326,"address":[],"length":0,"stats":{"Line":0}},{"line":1327,"address":[],"length":0,"stats":{"Line":0}},{"line":1331,"address":[],"length":0,"stats":{"Line":0}},{"line":1332,"address":[],"length":0,"stats":{"Line":0}},{"line":1333,"address":[],"length":0,"stats":{"Line":0}},{"line":1334,"address":[],"length":0,"stats":{"Line":0}},{"line":1337,"address":[],"length":0,"stats":{"Line":0}},{"line":1340,"address":[],"length":0,"stats":{"Line":0}},{"line":1341,"address":[],"length":0,"stats":{"Line":0}},{"line":1342,"address":[],"length":0,"stats":{"Line":0}},{"line":1343,"address":[],"length":0,"stats":{"Line":0}},{"line":1350,"address":[],"length":0,"stats":{"Line":0}},{"line":1351,"address":[],"length":0,"stats":{"Line":0}},{"line":1354,"address":[],"length":0,"stats":{"Line":0}},{"line":1355,"address":[],"length":0,"stats":{"Line":0}},{"line":1362,"address":[],"length":0,"stats":{"Line":0}},{"line":1363,"address":[],"length":0,"stats":{"Line":0}},{"line":1366,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1370,"address":[],"length":0,"stats":{"Line":0}},{"line":1373,"address":[],"length":0,"stats":{"Line":0}},{"line":1374,"address":[],"length":0,"stats":{"Line":0}},{"line":1378,"address":[],"length":0,"stats":{"Line":0}},{"line":1380,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1382,"address":[],"length":0,"stats":{"Line":0}},{"line":1383,"address":[],"length":0,"stats":{"Line":0}},{"line":1386,"address":[],"length":0,"stats":{"Line":0}},{"line":1388,"address":[],"length":0,"stats":{"Line":0}},{"line":1391,"address":[],"length":0,"stats":{"Line":0}},{"line":1392,"address":[],"length":0,"stats":{"Line":0}},{"line":1393,"address":[],"length":0,"stats":{"Line":0}},{"line":1394,"address":[],"length":0,"stats":{"Line":0}},{"line":1395,"address":[],"length":0,"stats":{"Line":0}},{"line":1396,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1398,"address":[],"length":0,"stats":{"Line":0}},{"line":1399,"address":[],"length":0,"stats":{"Line":0}},{"line":1400,"address":[],"length":0,"stats":{"Line":0}},{"line":1401,"address":[],"length":0,"stats":{"Line":0}},{"line":1402,"address":[],"length":0,"stats":{"Line":0}},{"line":1403,"address":[],"length":0,"stats":{"Line":0}},{"line":1406,"address":[],"length":0,"stats":{"Line":0}},{"line":1407,"address":[],"length":0,"stats":{"Line":0}},{"line":1408,"address":[],"length":0,"stats":{"Line":0}},{"line":1411,"address":[],"length":0,"stats":{"Line":0}},{"line":1415,"address":[],"length":0,"stats":{"Line":0}},{"line":1416,"address":[],"length":0,"stats":{"Line":0}},{"line":1419,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1422,"address":[],"length":0,"stats":{"Line":0}},{"line":1423,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1426,"address":[],"length":0,"stats":{"Line":0}},{"line":1431,"address":[],"length":0,"stats":{"Line":0}},{"line":1432,"address":[],"length":0,"stats":{"Line":0}},{"line":1435,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1443,"address":[],"length":0,"stats":{"Line":0}},{"line":1444,"address":[],"length":0,"stats":{"Line":0}},{"line":1445,"address":[],"length":0,"stats":{"Line":0}},{"line":1447,"address":[],"length":0,"stats":{"Line":0}},{"line":1450,"address":[],"length":0,"stats":{"Line":0}},{"line":1451,"address":[],"length":0,"stats":{"Line":0}},{"line":1453,"address":[],"length":0,"stats":{"Line":0}},{"line":1456,"address":[],"length":0,"stats":{"Line":0}},{"line":1458,"address":[],"length":0,"stats":{"Line":0}},{"line":1459,"address":[],"length":0,"stats":{"Line":0}},{"line":1460,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1467,"address":[],"length":0,"stats":{"Line":0}},{"line":1468,"address":[],"length":0,"stats":{"Line":0}},{"line":1469,"address":[],"length":0,"stats":{"Line":0}},{"line":1470,"address":[],"length":0,"stats":{"Line":0}},{"line":1471,"address":[],"length":0,"stats":{"Line":0}},{"line":1475,"address":[],"length":0,"stats":{"Line":0}},{"line":1477,"address":[],"length":0,"stats":{"Line":0}},{"line":1478,"address":[],"length":0,"stats":{"Line":0}},{"line":1479,"address":[],"length":0,"stats":{"Line":0}},{"line":1480,"address":[],"length":0,"stats":{"Line":0}},{"line":1481,"address":[],"length":0,"stats":{"Line":0}},{"line":1487,"address":[],"length":0,"stats":{"Line":0}},{"line":1488,"address":[],"length":0,"stats":{"Line":0}},{"line":1492,"address":[],"length":0,"stats":{"Line":0}},{"line":1493,"address":[],"length":0,"stats":{"Line":0}},{"line":1497,"address":[],"length":0,"stats":{"Line":0}},{"line":1500,"address":[],"length":0,"stats":{"Line":0}},{"line":1501,"address":[],"length":0,"stats":{"Line":0}},{"line":1502,"address":[],"length":0,"stats":{"Line":0}},{"line":1503,"address":[],"length":0,"stats":{"Line":0}},{"line":1504,"address":[],"length":0,"stats":{"Line":0}},{"line":1505,"address":[],"length":0,"stats":{"Line":0}},{"line":1509,"address":[],"length":0,"stats":{"Line":0}},{"line":1513,"address":[],"length":0,"stats":{"Line":0}},{"line":1514,"address":[],"length":0,"stats":{"Line":0}},{"line":1515,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1518,"address":[],"length":0,"stats":{"Line":0}},{"line":1524,"address":[],"length":0,"stats":{"Line":0}},{"line":1528,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1531,"address":[],"length":0,"stats":{"Line":0}},{"line":1532,"address":[],"length":0,"stats":{"Line":0}},{"line":1533,"address":[],"length":0,"stats":{"Line":0}},{"line":1534,"address":[],"length":0,"stats":{"Line":0}},{"line":1536,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1542,"address":[],"length":0,"stats":{"Line":0}},{"line":1543,"address":[],"length":0,"stats":{"Line":0}},{"line":1544,"address":[],"length":0,"stats":{"Line":0}},{"line":1547,"address":[],"length":0,"stats":{"Line":0}},{"line":1549,"address":[],"length":0,"stats":{"Line":0}},{"line":1551,"address":[],"length":0,"stats":{"Line":0}},{"line":1553,"address":[],"length":0,"stats":{"Line":0}},{"line":1554,"address":[],"length":0,"stats":{"Line":0}},{"line":1555,"address":[],"length":0,"stats":{"Line":0}},{"line":1559,"address":[],"length":0,"stats":{"Line":0}},{"line":1560,"address":[],"length":0,"stats":{"Line":0}},{"line":1564,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1566,"address":[],"length":0,"stats":{"Line":0}},{"line":1567,"address":[],"length":0,"stats":{"Line":0}},{"line":1568,"address":[],"length":0,"stats":{"Line":0}},{"line":1569,"address":[],"length":0,"stats":{"Line":0}},{"line":1570,"address":[],"length":0,"stats":{"Line":0}},{"line":1571,"address":[],"length":0,"stats":{"Line":0}},{"line":1572,"address":[],"length":0,"stats":{"Line":0}},{"line":1575,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1579,"address":[],"length":0,"stats":{"Line":0}},{"line":1580,"address":[],"length":0,"stats":{"Line":0}},{"line":1581,"address":[],"length":0,"stats":{"Line":0}},{"line":1583,"address":[],"length":0,"stats":{"Line":0}},{"line":1586,"address":[],"length":0,"stats":{"Line":0}},{"line":1587,"address":[],"length":0,"stats":{"Line":0}},{"line":1588,"address":[],"length":0,"stats":{"Line":0}},{"line":1590,"address":[],"length":0,"stats":{"Line":0}},{"line":1594,"address":[],"length":0,"stats":{"Line":0}},{"line":1595,"address":[],"length":0,"stats":{"Line":0}},{"line":1599,"address":[],"length":0,"stats":{"Line":0}},{"line":1600,"address":[],"length":0,"stats":{"Line":0}},{"line":1601,"address":[],"length":0,"stats":{"Line":0}},{"line":1602,"address":[],"length":0,"stats":{"Line":0}},{"line":1605,"address":[],"length":0,"stats":{"Line":0}},{"line":1606,"address":[],"length":0,"stats":{"Line":0}},{"line":1607,"address":[],"length":0,"stats":{"Line":0}},{"line":1608,"address":[],"length":0,"stats":{"Line":0}},{"line":1612,"address":[],"length":0,"stats":{"Line":0}},{"line":1616,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1618,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1620,"address":[],"length":0,"stats":{"Line":0}},{"line":1621,"address":[],"length":0,"stats":{"Line":0}},{"line":1625,"address":[],"length":0,"stats":{"Line":0}},{"line":1629,"address":[],"length":0,"stats":{"Line":0}},{"line":1632,"address":[],"length":0,"stats":{"Line":0}},{"line":1633,"address":[],"length":0,"stats":{"Line":0}},{"line":1635,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1637,"address":[],"length":0,"stats":{"Line":0}},{"line":1639,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1643,"address":[],"length":0,"stats":{"Line":0}},{"line":1644,"address":[],"length":0,"stats":{"Line":0}},{"line":1647,"address":[],"length":0,"stats":{"Line":0}},{"line":1648,"address":[],"length":0,"stats":{"Line":0}},{"line":1650,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1655,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1664,"address":[],"length":0,"stats":{"Line":0}},{"line":1665,"address":[],"length":0,"stats":{"Line":0}},{"line":1668,"address":[],"length":0,"stats":{"Line":0}},{"line":1669,"address":[],"length":0,"stats":{"Line":0}},{"line":1670,"address":[],"length":0,"stats":{"Line":0}},{"line":1672,"address":[],"length":0,"stats":{"Line":0}},{"line":1675,"address":[],"length":0,"stats":{"Line":0}},{"line":1679,"address":[],"length":0,"stats":{"Line":0}},{"line":1682,"address":[],"length":0,"stats":{"Line":0}},{"line":1683,"address":[],"length":0,"stats":{"Line":0}},{"line":1684,"address":[],"length":0,"stats":{"Line":0}},{"line":1685,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1691,"address":[],"length":0,"stats":{"Line":0}},{"line":1692,"address":[],"length":0,"stats":{"Line":0}},{"line":1693,"address":[],"length":0,"stats":{"Line":0}},{"line":1694,"address":[],"length":0,"stats":{"Line":0}},{"line":1698,"address":[],"length":0,"stats":{"Line":0}},{"line":1704,"address":[],"length":0,"stats":{"Line":0}},{"line":1708,"address":[],"length":0,"stats":{"Line":0}},{"line":1714,"address":[],"length":0,"stats":{"Line":0}},{"line":1718,"address":[],"length":0,"stats":{"Line":0}},{"line":1720,"address":[],"length":0,"stats":{"Line":0}},{"line":1721,"address":[],"length":0,"stats":{"Line":0}},{"line":1722,"address":[],"length":0,"stats":{"Line":0}},{"line":1723,"address":[],"length":0,"stats":{"Line":0}},{"line":1726,"address":[],"length":0,"stats":{"Line":0}},{"line":1728,"address":[],"length":0,"stats":{"Line":0}},{"line":1732,"address":[],"length":0,"stats":{"Line":0}},{"line":1733,"address":[],"length":0,"stats":{"Line":0}},{"line":1734,"address":[],"length":0,"stats":{"Line":0}},{"line":1736,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1738,"address":[],"length":0,"stats":{"Line":0}},{"line":1739,"address":[],"length":0,"stats":{"Line":0}},{"line":1748,"address":[],"length":0,"stats":{"Line":0}},{"line":1750,"address":[],"length":0,"stats":{"Line":0}},{"line":1751,"address":[],"length":0,"stats":{"Line":0}},{"line":1752,"address":[],"length":0,"stats":{"Line":0}},{"line":1753,"address":[],"length":0,"stats":{"Line":0}},{"line":1758,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1766,"address":[],"length":0,"stats":{"Line":0}},{"line":1767,"address":[],"length":0,"stats":{"Line":0}},{"line":1769,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1771,"address":[],"length":0,"stats":{"Line":0}},{"line":1772,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1780,"address":[],"length":0,"stats":{"Line":0}},{"line":1781,"address":[],"length":0,"stats":{"Line":0}},{"line":1782,"address":[],"length":0,"stats":{"Line":0}},{"line":1785,"address":[],"length":0,"stats":{"Line":0}},{"line":1787,"address":[],"length":0,"stats":{"Line":0}},{"line":1789,"address":[],"length":0,"stats":{"Line":0}},{"line":1791,"address":[],"length":0,"stats":{"Line":0}},{"line":1792,"address":[],"length":0,"stats":{"Line":0}},{"line":1793,"address":[],"length":0,"stats":{"Line":0}},{"line":1797,"address":[],"length":0,"stats":{"Line":0}},{"line":1798,"address":[],"length":0,"stats":{"Line":0}},{"line":1802,"address":[],"length":0,"stats":{"Line":0}},{"line":1803,"address":[],"length":0,"stats":{"Line":0}},{"line":1804,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1806,"address":[],"length":0,"stats":{"Line":0}},{"line":1807,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1811,"address":[],"length":0,"stats":{"Line":0}},{"line":1813,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1816,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1822,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1824,"address":[],"length":0,"stats":{"Line":0}},{"line":1826,"address":[],"length":0,"stats":{"Line":0}},{"line":1830,"address":[],"length":0,"stats":{"Line":0}},{"line":1831,"address":[],"length":0,"stats":{"Line":0}},{"line":1835,"address":[],"length":0,"stats":{"Line":0}},{"line":1836,"address":[],"length":0,"stats":{"Line":0}},{"line":1837,"address":[],"length":0,"stats":{"Line":0}},{"line":1838,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1842,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1848,"address":[],"length":0,"stats":{"Line":0}},{"line":1852,"address":[],"length":0,"stats":{"Line":0}},{"line":1856,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1860,"address":[],"length":0,"stats":{"Line":0}},{"line":1862,"address":[],"length":0,"stats":{"Line":0}},{"line":1863,"address":[],"length":0,"stats":{"Line":0}},{"line":1864,"address":[],"length":0,"stats":{"Line":0}},{"line":1867,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1878,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1881,"address":[],"length":0,"stats":{"Line":0}},{"line":1885,"address":[],"length":0,"stats":{"Line":0}},{"line":1886,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1895,"address":[],"length":0,"stats":{"Line":0}},{"line":1896,"address":[],"length":0,"stats":{"Line":0}},{"line":1899,"address":[],"length":0,"stats":{"Line":0}},{"line":1902,"address":[],"length":0,"stats":{"Line":0}},{"line":1903,"address":[],"length":0,"stats":{"Line":0}},{"line":1904,"address":[],"length":0,"stats":{"Line":0}},{"line":1905,"address":[],"length":0,"stats":{"Line":0}},{"line":1906,"address":[],"length":0,"stats":{"Line":0}},{"line":1908,"address":[],"length":0,"stats":{"Line":0}},{"line":1910,"address":[],"length":0,"stats":{"Line":0}},{"line":1913,"address":[],"length":0,"stats":{"Line":0}},{"line":1916,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1919,"address":[],"length":0,"stats":{"Line":0}},{"line":1920,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1923,"address":[],"length":0,"stats":{"Line":0}},{"line":1927,"address":[],"length":0,"stats":{"Line":0}},{"line":1929,"address":[],"length":0,"stats":{"Line":0}},{"line":1931,"address":[],"length":0,"stats":{"Line":0}},{"line":1932,"address":[],"length":0,"stats":{"Line":0}},{"line":1933,"address":[],"length":0,"stats":{"Line":0}},{"line":1934,"address":[],"length":0,"stats":{"Line":0}},{"line":1935,"address":[],"length":0,"stats":{"Line":0}},{"line":1938,"address":[],"length":0,"stats":{"Line":0}},{"line":1942,"address":[],"length":0,"stats":{"Line":0}},{"line":1943,"address":[],"length":0,"stats":{"Line":0}},{"line":1946,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1948,"address":[],"length":0,"stats":{"Line":0}},{"line":1949,"address":[],"length":0,"stats":{"Line":0}},{"line":1950,"address":[],"length":0,"stats":{"Line":0}},{"line":1951,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1955,"address":[],"length":0,"stats":{"Line":0}},{"line":1959,"address":[],"length":0,"stats":{"Line":0}},{"line":1962,"address":[],"length":0,"stats":{"Line":0}},{"line":1965,"address":[],"length":0,"stats":{"Line":0}},{"line":1969,"address":[],"length":0,"stats":{"Line":0}},{"line":1970,"address":[],"length":0,"stats":{"Line":0}},{"line":1971,"address":[],"length":0,"stats":{"Line":0}},{"line":1972,"address":[],"length":0,"stats":{"Line":0}},{"line":1973,"address":[],"length":0,"stats":{"Line":0}},{"line":1974,"address":[],"length":0,"stats":{"Line":0}},{"line":1975,"address":[],"length":0,"stats":{"Line":0}},{"line":1976,"address":[],"length":0,"stats":{"Line":0}},{"line":1977,"address":[],"length":0,"stats":{"Line":0}},{"line":1978,"address":[],"length":0,"stats":{"Line":0}},{"line":1980,"address":[],"length":0,"stats":{"Line":0}},{"line":1981,"address":[],"length":0,"stats":{"Line":0}},{"line":1984,"address":[],"length":0,"stats":{"Line":0}},{"line":1985,"address":[],"length":0,"stats":{"Line":0}},{"line":1986,"address":[],"length":0,"stats":{"Line":0}},{"line":1987,"address":[],"length":0,"stats":{"Line":0}},{"line":1988,"address":[],"length":0,"stats":{"Line":0}},{"line":1989,"address":[],"length":0,"stats":{"Line":0}},{"line":1991,"address":[],"length":0,"stats":{"Line":0}},{"line":1993,"address":[],"length":0,"stats":{"Line":0}},{"line":1997,"address":[],"length":0,"stats":{"Line":0}},{"line":1998,"address":[],"length":0,"stats":{"Line":0}},{"line":2001,"address":[],"length":0,"stats":{"Line":0}},{"line":2002,"address":[],"length":0,"stats":{"Line":0}},{"line":2004,"address":[],"length":0,"stats":{"Line":0}},{"line":2005,"address":[],"length":0,"stats":{"Line":0}},{"line":2008,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2012,"address":[],"length":0,"stats":{"Line":0}},{"line":2013,"address":[],"length":0,"stats":{"Line":0}},{"line":2017,"address":[],"length":0,"stats":{"Line":0}},{"line":2018,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2023,"address":[],"length":0,"stats":{"Line":0}},{"line":2026,"address":[],"length":0,"stats":{"Line":0}},{"line":2027,"address":[],"length":0,"stats":{"Line":0}},{"line":2028,"address":[],"length":0,"stats":{"Line":0}},{"line":2029,"address":[],"length":0,"stats":{"Line":0}},{"line":2038,"address":[],"length":0,"stats":{"Line":0}},{"line":2039,"address":[],"length":0,"stats":{"Line":0}},{"line":2048,"address":[],"length":0,"stats":{"Line":0}},{"line":2051,"address":[],"length":0,"stats":{"Line":0}},{"line":2052,"address":[],"length":0,"stats":{"Line":0}},{"line":2055,"address":[],"length":0,"stats":{"Line":0}},{"line":2056,"address":[],"length":0,"stats":{"Line":0}},{"line":2060,"address":[],"length":0,"stats":{"Line":0}},{"line":2062,"address":[],"length":0,"stats":{"Line":0}},{"line":2063,"address":[],"length":0,"stats":{"Line":0}},{"line":2064,"address":[],"length":0,"stats":{"Line":0}},{"line":2065,"address":[],"length":0,"stats":{"Line":0}},{"line":2068,"address":[],"length":0,"stats":{"Line":0}},{"line":2070,"address":[],"length":0,"stats":{"Line":0}},{"line":2073,"address":[],"length":0,"stats":{"Line":0}},{"line":2074,"address":[],"length":0,"stats":{"Line":0}},{"line":2075,"address":[],"length":0,"stats":{"Line":0}},{"line":2076,"address":[],"length":0,"stats":{"Line":0}},{"line":2077,"address":[],"length":0,"stats":{"Line":0}},{"line":2078,"address":[],"length":0,"stats":{"Line":0}},{"line":2079,"address":[],"length":0,"stats":{"Line":0}},{"line":2080,"address":[],"length":0,"stats":{"Line":0}},{"line":2081,"address":[],"length":0,"stats":{"Line":0}},{"line":2082,"address":[],"length":0,"stats":{"Line":0}},{"line":2083,"address":[],"length":0,"stats":{"Line":0}},{"line":2084,"address":[],"length":0,"stats":{"Line":0}},{"line":2085,"address":[],"length":0,"stats":{"Line":0}},{"line":2088,"address":[],"length":0,"stats":{"Line":0}},{"line":2089,"address":[],"length":0,"stats":{"Line":0}},{"line":2090,"address":[],"length":0,"stats":{"Line":0}},{"line":2093,"address":[],"length":0,"stats":{"Line":0}},{"line":2097,"address":[],"length":0,"stats":{"Line":0}},{"line":2098,"address":[],"length":0,"stats":{"Line":0}},{"line":2101,"address":[],"length":0,"stats":{"Line":0}},{"line":2103,"address":[],"length":0,"stats":{"Line":0}},{"line":2104,"address":[],"length":0,"stats":{"Line":0}},{"line":2105,"address":[],"length":0,"stats":{"Line":0}},{"line":2106,"address":[],"length":0,"stats":{"Line":0}},{"line":2108,"address":[],"length":0,"stats":{"Line":0}},{"line":2113,"address":[],"length":0,"stats":{"Line":0}},{"line":2114,"address":[],"length":0,"stats":{"Line":0}},{"line":2117,"address":[],"length":0,"stats":{"Line":0}},{"line":2120,"address":[],"length":0,"stats":{"Line":0}},{"line":2124,"address":[],"length":0,"stats":{"Line":0}},{"line":2125,"address":[],"length":0,"stats":{"Line":0}},{"line":2126,"address":[],"length":0,"stats":{"Line":0}},{"line":2127,"address":[],"length":0,"stats":{"Line":0}},{"line":2129,"address":[],"length":0,"stats":{"Line":0}},{"line":2132,"address":[],"length":0,"stats":{"Line":0}},{"line":2133,"address":[],"length":0,"stats":{"Line":0}},{"line":2135,"address":[],"length":0,"stats":{"Line":0}},{"line":2138,"address":[],"length":0,"stats":{"Line":0}},{"line":2140,"address":[],"length":0,"stats":{"Line":0}},{"line":2141,"address":[],"length":0,"stats":{"Line":0}},{"line":2142,"address":[],"length":0,"stats":{"Line":0}},{"line":2147,"address":[],"length":0,"stats":{"Line":0}},{"line":2149,"address":[],"length":0,"stats":{"Line":0}},{"line":2150,"address":[],"length":0,"stats":{"Line":0}},{"line":2151,"address":[],"length":0,"stats":{"Line":0}},{"line":2152,"address":[],"length":0,"stats":{"Line":0}},{"line":2153,"address":[],"length":0,"stats":{"Line":0}},{"line":2157,"address":[],"length":0,"stats":{"Line":0}},{"line":2159,"address":[],"length":0,"stats":{"Line":0}},{"line":2160,"address":[],"length":0,"stats":{"Line":0}},{"line":2161,"address":[],"length":0,"stats":{"Line":0}},{"line":2162,"address":[],"length":0,"stats":{"Line":0}},{"line":2163,"address":[],"length":0,"stats":{"Line":0}},{"line":2169,"address":[],"length":0,"stats":{"Line":0}},{"line":2170,"address":[],"length":0,"stats":{"Line":0}},{"line":2174,"address":[],"length":0,"stats":{"Line":0}},{"line":2175,"address":[],"length":0,"stats":{"Line":0}},{"line":2179,"address":[],"length":0,"stats":{"Line":0}},{"line":2182,"address":[],"length":0,"stats":{"Line":0}},{"line":2183,"address":[],"length":0,"stats":{"Line":0}},{"line":2184,"address":[],"length":0,"stats":{"Line":0}},{"line":2185,"address":[],"length":0,"stats":{"Line":0}},{"line":2186,"address":[],"length":0,"stats":{"Line":0}},{"line":2187,"address":[],"length":0,"stats":{"Line":0}},{"line":2188,"address":[],"length":0,"stats":{"Line":0}},{"line":2192,"address":[],"length":0,"stats":{"Line":0}},{"line":2196,"address":[],"length":0,"stats":{"Line":0}},{"line":2197,"address":[],"length":0,"stats":{"Line":0}},{"line":2198,"address":[],"length":0,"stats":{"Line":0}},{"line":2199,"address":[],"length":0,"stats":{"Line":0}},{"line":2200,"address":[],"length":0,"stats":{"Line":0}},{"line":2201,"address":[],"length":0,"stats":{"Line":0}},{"line":2202,"address":[],"length":0,"stats":{"Line":0}},{"line":2208,"address":[],"length":0,"stats":{"Line":0}},{"line":2212,"address":[],"length":0,"stats":{"Line":0}},{"line":2213,"address":[],"length":0,"stats":{"Line":0}},{"line":2215,"address":[],"length":0,"stats":{"Line":0}},{"line":2216,"address":[],"length":0,"stats":{"Line":0}},{"line":2217,"address":[],"length":0,"stats":{"Line":0}},{"line":2218,"address":[],"length":0,"stats":{"Line":0}},{"line":2220,"address":[],"length":0,"stats":{"Line":0}},{"line":2221,"address":[],"length":0,"stats":{"Line":0}},{"line":2226,"address":[],"length":0,"stats":{"Line":0}},{"line":2227,"address":[],"length":0,"stats":{"Line":0}},{"line":2228,"address":[],"length":0,"stats":{"Line":0}},{"line":2231,"address":[],"length":0,"stats":{"Line":0}},{"line":2233,"address":[],"length":0,"stats":{"Line":0}},{"line":2235,"address":[],"length":0,"stats":{"Line":0}},{"line":2237,"address":[],"length":0,"stats":{"Line":0}},{"line":2238,"address":[],"length":0,"stats":{"Line":0}},{"line":2239,"address":[],"length":0,"stats":{"Line":0}},{"line":2243,"address":[],"length":0,"stats":{"Line":0}},{"line":2244,"address":[],"length":0,"stats":{"Line":0}},{"line":2248,"address":[],"length":0,"stats":{"Line":0}},{"line":2249,"address":[],"length":0,"stats":{"Line":0}},{"line":2250,"address":[],"length":0,"stats":{"Line":0}},{"line":2251,"address":[],"length":0,"stats":{"Line":0}},{"line":2252,"address":[],"length":0,"stats":{"Line":0}},{"line":2253,"address":[],"length":0,"stats":{"Line":0}},{"line":2254,"address":[],"length":0,"stats":{"Line":0}},{"line":2257,"address":[],"length":0,"stats":{"Line":0}},{"line":2259,"address":[],"length":0,"stats":{"Line":0}},{"line":2261,"address":[],"length":0,"stats":{"Line":0}},{"line":2262,"address":[],"length":0,"stats":{"Line":0}},{"line":2263,"address":[],"length":0,"stats":{"Line":0}},{"line":2265,"address":[],"length":0,"stats":{"Line":0}},{"line":2268,"address":[],"length":0,"stats":{"Line":0}},{"line":2269,"address":[],"length":0,"stats":{"Line":0}},{"line":2270,"address":[],"length":0,"stats":{"Line":0}},{"line":2272,"address":[],"length":0,"stats":{"Line":0}},{"line":2276,"address":[],"length":0,"stats":{"Line":0}},{"line":2277,"address":[],"length":0,"stats":{"Line":0}},{"line":2281,"address":[],"length":0,"stats":{"Line":0}},{"line":2282,"address":[],"length":0,"stats":{"Line":0}},{"line":2283,"address":[],"length":0,"stats":{"Line":0}},{"line":2284,"address":[],"length":0,"stats":{"Line":0}},{"line":2287,"address":[],"length":0,"stats":{"Line":0}},{"line":2288,"address":[],"length":0,"stats":{"Line":0}},{"line":2289,"address":[],"length":0,"stats":{"Line":0}},{"line":2290,"address":[],"length":0,"stats":{"Line":0}},{"line":2294,"address":[],"length":0,"stats":{"Line":0}},{"line":2298,"address":[],"length":0,"stats":{"Line":0}},{"line":2299,"address":[],"length":0,"stats":{"Line":0}},{"line":2300,"address":[],"length":0,"stats":{"Line":0}},{"line":2301,"address":[],"length":0,"stats":{"Line":0}},{"line":2302,"address":[],"length":0,"stats":{"Line":0}},{"line":2303,"address":[],"length":0,"stats":{"Line":0}},{"line":2304,"address":[],"length":0,"stats":{"Line":0}},{"line":2308,"address":[],"length":0,"stats":{"Line":0}},{"line":2312,"address":[],"length":0,"stats":{"Line":0}},{"line":2328,"address":[],"length":0,"stats":{"Line":0}},{"line":2330,"address":[],"length":0,"stats":{"Line":0}},{"line":2332,"address":[],"length":0,"stats":{"Line":0}},{"line":2333,"address":[],"length":0,"stats":{"Line":0}},{"line":2334,"address":[],"length":0,"stats":{"Line":0}},{"line":2336,"address":[],"length":0,"stats":{"Line":0}},{"line":2337,"address":[],"length":0,"stats":{"Line":0}},{"line":2340,"address":[],"length":0,"stats":{"Line":0}},{"line":2341,"address":[],"length":0,"stats":{"Line":0}},{"line":2342,"address":[],"length":0,"stats":{"Line":0}},{"line":2346,"address":[],"length":0,"stats":{"Line":0}},{"line":2347,"address":[],"length":0,"stats":{"Line":0}},{"line":2348,"address":[],"length":0,"stats":{"Line":0}},{"line":2350,"address":[],"length":0,"stats":{"Line":0}},{"line":2353,"address":[],"length":0,"stats":{"Line":0}},{"line":2357,"address":[],"length":0,"stats":{"Line":0}},{"line":2358,"address":[],"length":0,"stats":{"Line":0}},{"line":2360,"address":[],"length":0,"stats":{"Line":0}},{"line":2374,"address":[],"length":0,"stats":{"Line":0}},{"line":2375,"address":[],"length":0,"stats":{"Line":0}},{"line":2377,"address":[],"length":0,"stats":{"Line":0}},{"line":2378,"address":[],"length":0,"stats":{"Line":0}},{"line":2379,"address":[],"length":0,"stats":{"Line":0}},{"line":2382,"address":[],"length":0,"stats":{"Line":0}},{"line":2383,"address":[],"length":0,"stats":{"Line":0}},{"line":2386,"address":[],"length":0,"stats":{"Line":0}},{"line":2388,"address":[],"length":0,"stats":{"Line":0}},{"line":2389,"address":[],"length":0,"stats":{"Line":0}},{"line":2393,"address":[],"length":0,"stats":{"Line":0}},{"line":2398,"address":[],"length":0,"stats":{"Line":0}},{"line":2401,"address":[],"length":0,"stats":{"Line":0}},{"line":2402,"address":[],"length":0,"stats":{"Line":0}},{"line":2405,"address":[],"length":0,"stats":{"Line":0}},{"line":2406,"address":[],"length":0,"stats":{"Line":0}},{"line":2414,"address":[],"length":0,"stats":{"Line":0}},{"line":2415,"address":[],"length":0,"stats":{"Line":0}},{"line":2418,"address":[],"length":0,"stats":{"Line":0}},{"line":2421,"address":[],"length":0,"stats":{"Line":0}},{"line":2422,"address":[],"length":0,"stats":{"Line":0}},{"line":2423,"address":[],"length":0,"stats":{"Line":0}},{"line":2424,"address":[],"length":0,"stats":{"Line":0}},{"line":2425,"address":[],"length":0,"stats":{"Line":0}},{"line":2426,"address":[],"length":0,"stats":{"Line":0}},{"line":2432,"address":[],"length":0,"stats":{"Line":0}},{"line":2433,"address":[],"length":0,"stats":{"Line":0}},{"line":2434,"address":[],"length":0,"stats":{"Line":0}},{"line":2439,"address":[],"length":0,"stats":{"Line":0}},{"line":2441,"address":[],"length":0,"stats":{"Line":0}},{"line":2444,"address":[],"length":0,"stats":{"Line":0}},{"line":2445,"address":[],"length":0,"stats":{"Line":0}},{"line":2446,"address":[],"length":0,"stats":{"Line":0}},{"line":2447,"address":[],"length":0,"stats":{"Line":0}},{"line":2449,"address":[],"length":0,"stats":{"Line":0}},{"line":2452,"address":[],"length":0,"stats":{"Line":0}},{"line":2456,"address":[],"length":0,"stats":{"Line":0}},{"line":2458,"address":[],"length":0,"stats":{"Line":0}},{"line":2459,"address":[],"length":0,"stats":{"Line":0}},{"line":2460,"address":[],"length":0,"stats":{"Line":0}},{"line":2461,"address":[],"length":0,"stats":{"Line":0}},{"line":2462,"address":[],"length":0,"stats":{"Line":0}},{"line":2463,"address":[],"length":0,"stats":{"Line":0}},{"line":2465,"address":[],"length":0,"stats":{"Line":0}},{"line":2470,"address":[],"length":0,"stats":{"Line":0}},{"line":2471,"address":[],"length":0,"stats":{"Line":0}},{"line":2476,"address":[],"length":0,"stats":{"Line":0}},{"line":2478,"address":[],"length":0,"stats":{"Line":0}},{"line":2479,"address":[],"length":0,"stats":{"Line":0}},{"line":2480,"address":[],"length":0,"stats":{"Line":0}},{"line":2481,"address":[],"length":0,"stats":{"Line":0}},{"line":2487,"address":[],"length":0,"stats":{"Line":0}},{"line":2488,"address":[],"length":0,"stats":{"Line":0}},{"line":2491,"address":[],"length":0,"stats":{"Line":0}},{"line":2496,"address":[],"length":0,"stats":{"Line":0}},{"line":2497,"address":[],"length":0,"stats":{"Line":0}},{"line":2498,"address":[],"length":0,"stats":{"Line":0}},{"line":2499,"address":[],"length":0,"stats":{"Line":0}},{"line":2500,"address":[],"length":0,"stats":{"Line":0}},{"line":2501,"address":[],"length":0,"stats":{"Line":0}},{"line":2502,"address":[],"length":0,"stats":{"Line":0}},{"line":2505,"address":[],"length":0,"stats":{"Line":0}},{"line":2506,"address":[],"length":0,"stats":{"Line":0}},{"line":2507,"address":[],"length":0,"stats":{"Line":0}},{"line":2508,"address":[],"length":0,"stats":{"Line":0}},{"line":2510,"address":[],"length":0,"stats":{"Line":0}},{"line":2513,"address":[],"length":0,"stats":{"Line":0}},{"line":2515,"address":[],"length":0,"stats":{"Line":0}},{"line":2517,"address":[],"length":0,"stats":{"Line":0}},{"line":2518,"address":[],"length":0,"stats":{"Line":0}},{"line":2519,"address":[],"length":0,"stats":{"Line":0}},{"line":2523,"address":[],"length":0,"stats":{"Line":0}},{"line":2524,"address":[],"length":0,"stats":{"Line":0}},{"line":2525,"address":[],"length":0,"stats":{"Line":0}},{"line":2526,"address":[],"length":0,"stats":{"Line":0}},{"line":2527,"address":[],"length":0,"stats":{"Line":0}},{"line":2528,"address":[],"length":0,"stats":{"Line":0}},{"line":2529,"address":[],"length":0,"stats":{"Line":0}},{"line":2530,"address":[],"length":0,"stats":{"Line":0}},{"line":2532,"address":[],"length":0,"stats":{"Line":0}},{"line":2537,"address":[],"length":0,"stats":{"Line":0}},{"line":2538,"address":[],"length":0,"stats":{"Line":0}},{"line":2539,"address":[],"length":0,"stats":{"Line":0}},{"line":2540,"address":[],"length":0,"stats":{"Line":0}},{"line":2543,"address":[],"length":0,"stats":{"Line":0}},{"line":2544,"address":[],"length":0,"stats":{"Line":0}},{"line":2545,"address":[],"length":0,"stats":{"Line":0}},{"line":2546,"address":[],"length":0,"stats":{"Line":0}},{"line":2549,"address":[],"length":0,"stats":{"Line":0}},{"line":2553,"address":[],"length":0,"stats":{"Line":0}},{"line":2554,"address":[],"length":0,"stats":{"Line":0}},{"line":2556,"address":[],"length":0,"stats":{"Line":0}},{"line":2561,"address":[],"length":0,"stats":{"Line":0}}],"covered":11,"coverable":1255},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","folders.rs"],"content":"use clap::ArgMatches;\nuse tracing::trace;\nuse uuid::Uuid;\nuse crate::{commands::params::{PARAMETER_FOLDER_PATH, PARAMETER_FOLDER_UUID, PARAMETER_NAME, PARAMETER_PARENT_FOLDER_PATH, PARAMETER_PARENT_FOLDER_UUID}, configuration::Configuration, error::CliError, folder_hierarchy::FolderHierarchy, format::{OutputFormat, OutputFormatter}, model::{Folder, Tenant, normalize_path}, param_utils::{get_format_parameter_value, get_tenant}, physna_v3::{PhysnaApiClient, TryDefault}};\n\n\npub async fn resolve_folder_uuid_by_path(api: \u0026mut PhysnaApiClient, tenant: \u0026Tenant, path: \u0026str) -\u003e Result\u003cUuid, CliError\u003e {\n    trace!(\"Resolving the UUID for folder path {}...\", path);\n    if let Some(folder_uuid) = api.get_folder_uuid_by_path(\u0026tenant.uuid, path).await? {\n        Ok(folder_uuid)\n    } else {\n        Err(CliError::FolderNotFound(path.to_string()))\n    }\n}\n\npub async fn list_folders(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Listing folders...\");\n    \n    let format = get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let path = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    let path = normalize_path(path.cloned().unwrap_or_default());\n    trace!(\"Path requested: \\\"{}\\\"\", \u0026path);\n\n    // It is not efficient, but the only option is to read the full directory hieratchy from the API\n    let hierarchy = FolderHierarchy::build_from_api(\u0026mut api, \u0026tenant.uuid).await?;\n\n    \n    // If tree format is requested, display the hierarchical tree structure\n    match format {\n        OutputFormat::Tree(_) =\u003e {\n                let hierarchy = if path.eq(\"/\") {\n                        hierarchy\n                    } else {\n                        hierarchy.filter_by_path(path.as_str()).ok_or(CliError::FolderNotFound(path))?\n                    };\n                hierarchy.print_tree();\n            }\n        _ =\u003e {\n                // Convert to folder list with only direct children if not recursive\n                let folder_list = if path.eq(\"/\") {\n                        hierarchy.to_direct_children_list()\n                    } else {\n                        hierarchy.filter_by_path(path.as_str()).ok_or(CliError::FolderNotFound(path))?.to_folder_list()\n                    };\n\n                println!(\"{}\", folder_list.format(format)?);\n            }\n    }\n\n\tOk(())\n}\n\npub async fn print_folder_details(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Must provide either UUID or path\n    if folder_uuid_param.is_none() \u0026\u0026 folder_path_param.is_none() {\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    }\n\n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n    println!(\"{}\", folder.format(format)?);\n\n    Ok(())\n}\n\npub async fn create_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let name = sub_matches.get_one::\u003cString\u003e(PARAMETER_NAME)\n        .ok_or(CliError::MissingRequiredArgument(PARAMETER_NAME.to_string()))?\n        .clone();\n    let parent_folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_PARENT_FOLDER_UUID);\n    let parent_folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PARENT_FOLDER_PATH);\n\n    // Validate that only one parent parameter is provided (mutual exclusivity handled by clap group)\n    if parent_folder_uuid_param.is_some() \u0026\u0026 parent_folder_path_param.is_some() {\n        return Err(CliError::MissingRequiredArgument(\"Only one of --parent-folder-uuid or --parent-folder-path can be specified, not both\".to_string()));\n    }\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Resolve parent folder ID from either ID parameter or path\n    let parent_folder_uuid = if let Some(uuid) = parent_folder_uuid_param {\n        Some(uuid.clone())\n    } else if let Some(path) = parent_folder_path_param {\n        Some(resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?)\n    } else {\n        None\n    };\n\n    api.create_folder(\u0026tenant.uuid, name.as_str(), parent_folder_uuid).await?;\n    \n    Ok(())\n}\n\npub async fn delete_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    let force_flag = sub_matches.get_flag(\"force\");\n\n    // Validate that only one parent parameter is provided (mutual exclusivity handled by clap group)\n    if folder_uuid_param.is_some() \u0026\u0026 folder_path_param.is_some() {\n        return Err(CliError::MissingRequiredArgument(\"Only one of --folder-uuid or --folder-path can be specified, not both\".to_string()));\n    }\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Resolve parent folder ID from either ID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        return Err(CliError::MissingRequiredArgument(format!(\"Missing folder path\")));\n    };\n\n    if force_flag {\n        // Recursively delete all contents before deleting the folder\n        delete_folder_contents(\u0026mut api, \u0026tenant, \u0026folder_uuid).await?;\n    }\n\n    api.delete_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n\n    Ok(())\n}\n\nuse std::collections::VecDeque;\n\n/// Delete all assets and subfolders in a folder using iterative approach to avoid recursion\nasync fn delete_folder_contents(api: \u0026mut PhysnaApiClient, tenant: \u0026crate::model::Tenant, folder_uuid: \u0026Uuid) -\u003e Result\u003c(), CliError\u003e {\n    // Use BFS to collect all folders in the hierarchy\n    let mut all_folders = Vec::new();\n    let mut queue = VecDeque::new();\n    queue.push_back(*folder_uuid);\n\n    while let Some(current_folder_uuid) = queue.pop_front() {\n        all_folders.push(current_folder_uuid);\n\n        // Get subfolders of current folder\n        let folders_response = api.list_folders_in_parent(\u0026tenant.uuid, Some(\u0026current_folder_uuid.to_string()), None, None).await?;\n        for folder in folders_response.folders {\n            queue.push_back(folder.uuid);\n        }\n    }\n\n    // Process folders in reverse order (deepest first, then parent)\n    for folder_uuid in all_folders.iter().rev() {\n        // List and delete all assets in this folder\n        let assets = api.list_assets_by_parent_folder_uuid(\u0026tenant.uuid, Some(folder_uuid)).await?;\n        for asset in assets.get_all_assets() {\n            api.delete_asset(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string()).await?;\n        }\n    }\n\n    // Now delete the folders in reverse order (children first, then parents)\n    // Skip the original folder since that will be deleted by the caller\n    for folder_uuid in all_folders.iter().skip(1).rev() {\n        api.delete_folder(\u0026tenant.uuid, folder_uuid).await?;\n    }\n\n    Ok(())\n}\n","traces":[{"line":7,"address":[],"length":0,"stats":{"Line":0}},{"line":8,"address":[],"length":0,"stats":{"Line":0}},{"line":9,"address":[],"length":0,"stats":{"Line":0}},{"line":10,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":97},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","mod.rs"],"content":"use thiserror::Error;\n\npub mod assets;\npub mod folders;\npub mod tenants;\n\n#[derive(Debug, Error)]\npub enum CliActionError {\n    #[error(\"{0}\")]\n    JsonError(#[from] serde_json::Error),\n\n    #[error(\"{0}\")]\n    ApiError(#[from] crate::physna_v3::ApiError),\n\n    #[error(\"{0}\")]\n    CsvError(#[from] csv::Error),\n\n    #[error(\"{0}\")]\n    CsvIntoError(#[from] csv::IntoInnerError\u003ccsv::Writer\u003cVec\u003cu8\u003e\u003e\u003e),\n\n    #[error(\"{0}\")]\n    UtfError(#[from] std::string::FromUtf8Error),\n\n    #[error(\"{0}\")]\n    UuidPartsinError(#[from] uuid::Error),\n\n    #[error(\"{0}\")]\n    ConfigurationError(#[from] crate::configuration::ConfigurationError),\n\n    #[error(\"ERROR: Unsupported output format: {0}\")]\n    UnsupportedOutputFormat(String),\n\n    #[error(\"{0}\")]\n    FormattingError(#[from] crate::format::FormattingError),\n\n    #[error(\"Missing required argument: {0}\")]\n    MissingRequiredArgument(String),\n\n    #[error(\"Tenant not found: {identifier}\")]\n    TenantNotFound { identifier: String },\n\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","tenants.rs"],"content":"use clap::ArgMatches;\nuse tracing::trace;\nuse crate::{\n    commands::params::{PARAMETER_NAME, PARAMETER_REFRESH},\n    configuration::Configuration,\n    error_utils,\n    format::{OutputFormat, Formattable, FormattingError, OutputFormatter},\n    model::Tenant,\n    physna_v3::{PhysnaApiClient, TryDefault},\n    actions::CliActionError\n};\n\n#[derive(Debug, Clone, serde::Serialize)]\npub struct ContextInfo {\n    pub active_tenant_uuid: Option\u003cuuid::Uuid\u003e,\n    pub active_tenant_short_name: Option\u003cString\u003e,\n    pub active_tenant_display_name: Option\u003cString\u003e,\n}\n\nimpl ContextInfo {\n    pub async fn from_configuration(configuration: \u0026Configuration) -\u003e Result\u003cContextInfo, CliActionError\u003e {\n        if let Some(active_tenant_uuid) = configuration.active_tenant_uuid() {\n            let mut api = PhysnaApiClient::try_default()?;\n            let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n            let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(active_tenant_uuid));\n\n            match active_tenant {\n                Some(active_tenant) =\u003e {\n                    Ok(ContextInfo {\n                        active_tenant_uuid: Some(active_tenant.tenant_uuid),\n                        active_tenant_short_name: Some(active_tenant.tenant_short_name),\n                        active_tenant_display_name: Some(active_tenant.tenant_display_name),\n                    })\n                },\n                None =\u003e {\n                    Ok(ContextInfo {\n                        active_tenant_uuid: Some(*active_tenant_uuid),\n                        active_tenant_short_name: None,\n                        active_tenant_display_name: None,\n                    })\n                }\n            }\n        } else {\n            Ok(ContextInfo {\n                active_tenant_uuid: None,\n                active_tenant_short_name: None,\n                active_tenant_display_name: None,\n            })\n        }\n    }\n}\n\nimpl Formattable for ContextInfo {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                // For CSV format, output with or without header based on options\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    wtr.write_record(\u0026[\"ACTIVE_TENANT_UUID\", \"ACTIVE_TENANT_SHORT_NAME\", \"ACTIVE_TENANT_DISPLAY_NAME\"])?;\n                }\n\n                wtr.serialize((\n                    self.active_tenant_uuid.map(|uuid| uuid.to_string()).unwrap_or_default(),\n                    self.active_tenant_short_name.as_deref().unwrap_or(\"\"),\n                    self.active_tenant_display_name.as_deref().unwrap_or(\"\"),\n                ))?;\n\n                let csv_string = String::from_utf8(wtr.into_inner()?)?;\n                Ok(csv_string)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For tree format, just return the same as default text format\n                let tenant_info = if let Some(uuid) = self.active_tenant_uuid {\n                    if let (Some(short_name), Some(display_name)) = (\u0026self.active_tenant_short_name, \u0026self.active_tenant_display_name) {\n                        format!(\"Active Tenant: {} ({})\", short_name, display_name)\n                    } else {\n                        format!(\"Active Tenant: \u003cunknown tenant UUID: {}\u003e\", uuid)\n                    }\n                } else {\n                    \"Active Tenant: \u003cnot set\u003e\".to_string()\n                };\n                Ok(tenant_info)\n            }\n        }\n    }\n}\n\n\npub async fn list_all_tenants(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n\n    // Get format parameters directly from sub_matches\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n        .cloned()\n        .unwrap_or_else(|| \"json\".to_string());\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n    // Create format options with metadata set to false since tenants don't have metadata\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    let mut api = PhysnaApiClient::try_default()?;\n\n    match crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await {\n        Ok(tenant_settings) =\u003e {\n            // Convert to a format that can be handled by the Formattable trait\n            let tenant_list = crate::model::TenantList::from(tenant_settings);\n\n            println!(\"{}\", tenant_list.format(format)?);\n            Ok(())\n        }\n        Err(e) =\u003e {\n            error_utils::report_error(\u0026e);\n            Ok(())\n        }\n    }\n}\n\npub async fn print_active_tenant_name() -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get' command\");\n\n    let configuration = Configuration::load_default()?;\n\n    if let Some(active_tenant_uuid) = configuration.active_tenant_uuid() {\n        let mut api = PhysnaApiClient::try_default()?;\n        let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n        let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(active_tenant_uuid));\n        match active_tenant {\n            Some(active_tenant) =\u003e {\n                println!(\"{}\", active_tenant.tenant_short_name);\n            },\n            None =\u003e {\n                println!(\"No active tenant selected\");\n            }\n        }\n    } else {\n        println!(\"No active tenant selected\");\n    }\n\n    Ok(())\n}\n\npub async fn set_active_tenant(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n\n    let name = sub_matches.get_one::\u003cString\u003e(PARAMETER_NAME);\n    let refresh = sub_matches.get_flag(PARAMETER_REFRESH);\n    let mut api = PhysnaApiClient::try_default()?;\n\n    // Get tenants from cache or API depending on refresh flag\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, refresh).await\n        .map_err(|e| CliActionError::ApiError(e))?;\n            \n    // If no name was provided, show interactive selection\n    let selected_tenant = if let Some(name) = name {\n        // Find tenant by name (existing logic)\n        tenants.iter().find(|t| t.tenant_short_name == *name).cloned()\n    } else {\n        // Interactive selection using TUI\n        if tenants.is_empty() {\n            error_utils::report_error_with_remediation(\n                \u0026\"No tenants available\",\n                \u0026[\n                    \"Verify your authentication credentials are valid\",\n                    \"Check that you have access to at least one tenant\",\n                    \"Log in again with 'pcli2 auth login'\"\n                ]\n            );\n            return Ok(());\n        }\n        \n        // Create options for the select menu\n        let options: Vec\u003cString\u003e = tenants.iter()\n            .map(|tenant| format!(\"{}: {} ({})\", tenant.tenant_short_name, tenant.tenant_display_name, tenant.tenant_uuid))\n            .collect();\n        \n        // Use inquire to create an interactive selection\n        let ans = inquire::Select::new(\"Select a tenant:\", options)\n            .with_help_message(\"Choose the tenant you want to set as active\")\n            .prompt();\n            \n        match ans {\n            Ok(choice) =\u003e {\n                let tenant_name = choice.split_once(':').map(|(before, _)| before.trim()).unwrap();\n                trace!(\"User selected tenant: {}\", tenant_name);\n                // Find the tenant that matches the selection\n                tenants.iter().find(|t| t.tenant_short_name == tenant_name).cloned()\n            }\n            Err(_) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026\"No tenant selected\",\n                    \u0026[\n                        \"Run 'pcli2 context set tenant' again to select a tenant\",\n                        \"Verify you have access to at least one tenant\",\n                        \"Check your authentication credentials\"\n                    ]\n                );\n                return Ok(());\n            }\n        }\n    };\n                    \n    // Set the active tenant in configuration\n    let mut configuration = Configuration::load_default()?;\n    if let Some(selected_tenant) = selected_tenant {\n        let tenant = Tenant::try_from(\u0026selected_tenant)?;\n        configuration.set_active_tenant(\u0026tenant);\n                \n        // Save configuration\n        configuration.save_to_default()?;\n    } else {\n            error_utils::report_error_with_remediation(\n                \u0026format!(\"Tenant '{}' not found\", name.unwrap()),\n                \u0026[\n                    \"Check the tenant name spelling\",\n                    \"List available tenants with 'pcli2 tenant list'\",\n                    \"Verify you have access to this tenant\"\n                ]\n            ); // Safe to unwrap since we checked above\n    }\n\n    Ok(())\n}\n\npub async fn get_tenant_details(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    let tenant_uuid_param = sub_matches.get_one::\u003cuuid::Uuid\u003e(crate::commands::params::PARAMETER_TENANT_UUID);\n    let tenant_name_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_TENANT_NAME);\n\n    let mut api = PhysnaApiClient::try_default()?;\n\n    // Get all tenants to search through\n    let all_tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n\n    // Find the specific tenant based on either UUID or name\n    let tenant_setting = if let Some(uuid) = tenant_uuid_param {\n        all_tenants.iter().find(|t| \u0026t.tenant_uuid == uuid)\n    } else if let Some(name) = tenant_name_param {\n        all_tenants.iter().find(|t| \u0026t.tenant_short_name == name)\n    } else {\n        return Err(CliActionError::MissingRequiredArgument(\"Either tenant UUID (--id) or tenant name (--tenant-name) must be provided\".to_string()));\n    };\n\n    match tenant_setting {\n        Some(tenant_setting) =\u003e {\n            // Convert to Tenant for formatting\n            let tenant: Tenant = tenant_setting.try_into()?;\n\n            // Get format parameters directly from sub_matches\n            let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n                .cloned()\n                .unwrap_or_else(|| \"json\".to_string());\n\n            let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n            let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n            // Create format options (no metadata for tenants)\n            let format_options = crate::format::OutputFormatOptions {\n                with_metadata: false,  // No metadata for tenants\n                with_headers,\n                pretty,\n            };\n\n            let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n                .map_err(|e| CliActionError::FormattingError(e))?;\n\n            println!(\"{}\", tenant.format(\u0026format)?);\n        },\n        None =\u003e {\n            if let Some(uuid) = tenant_uuid_param {\n                return Err(CliActionError::TenantNotFound { identifier: uuid.to_string() });\n            } else if let Some(name) = tenant_name_param {\n                return Err(CliActionError::TenantNotFound { identifier: name.clone() });\n            }\n            // This shouldn't happen due to the argument group validation, but just in case\n            return Err(CliActionError::MissingRequiredArgument(\"Either tenant UUID (--id) or tenant name (--tenant-name) must be provided\".to_string()));\n        }\n    }\n\n    Ok(())\n}\n\npub async fn print_active_tenant_name_with_format(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get tenant' with format options\");\n\n    // Get format parameters directly from sub_matches since context commands don't have all format flags\n    let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        \"json\".to_string()\n    };\n    let format_str = \u0026format_str_owned;\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    // Note: context commands don't have metadata flag for tenant\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,  // No metadata for context tenant\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    let configuration = Configuration::load_default()?;\n\n    if let Some(active_tenant_uuid) = configuration.get_active_tenant_uuid() {\n        let mut api = PhysnaApiClient::try_default()?;\n        let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n        let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(\u0026active_tenant_uuid));\n\n        match active_tenant {\n            Some(tenant_setting) =\u003e {\n                // Convert to Tenant for formatting\n                let tenant = Tenant {\n                    uuid: tenant_setting.tenant_uuid,\n                    name: tenant_setting.tenant_short_name.clone(),\n                    description: tenant_setting.tenant_display_name.clone(),\n                };\n                println!(\"{}\", tenant.format(\u0026format)?);\n            },\n            None =\u003e {\n                // Create a minimal tenant for formatting when UUID exists but tenant not found\n                let tenant = Tenant {\n                    uuid: active_tenant_uuid,\n                    name: \"Unknown Tenant\".to_string(),\n                    description: \"Tenant not found in current user's tenants\".to_string(),\n                };\n                println!(\"{}\", tenant.format(\u0026format)?);\n            }\n        }\n    } else {\n        // Create a minimal tenant for formatting when no active tenant is set\n        let tenant = Tenant {\n            uuid: uuid::Uuid::nil(), // Use nil UUID for no tenant\n            name: \"No active tenant\".to_string(),\n            description: \"No tenant selected\".to_string(),\n        };\n        println!(\"{}\", tenant.format(\u0026format)?);\n    }\n\n    Ok(())\n}\n\npub async fn clear_active_tenant() -\u003e Result\u003c(), CliActionError\u003e {\n\n    let mut configuration = Configuration::load_default()?;\n    configuration.clear_active_tenant();\n    match configuration.save_to_default() {\n        Ok(()) =\u003e {\n            Ok(())\n        }\n        Err(e) =\u003e {\n            error_utils::report_error_with_remediation(\n                \u0026format!(\"Error saving configuration: {}\", e),\n                \u0026[\n                    \"Check that you have write permissions to the configuration directory\",\n                    \"Verify the configuration file is not locked by another process\",\n                    \"Ensure you have sufficient disk space\"\n                ]\n            );\n            Err(CliActionError::ConfigurationError(e))\n        }\n    }\n}\n\npub async fn print_current_context(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get' command\");\n\n    let format = crate::param_utils::get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let context_info = ContextInfo::from_configuration(\u0026configuration).await?;\n\n    println!(\"{}\", context_info.format(\u0026format)?);\n\n    Ok(())\n}\n","traces":[{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":225,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":368,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":185},{"path":["/","Users","julian","projects","physna","pcli2","src","auth.rs"],"content":"use reqwest;\nuse serde::{Deserialize, Serialize};\nuse thiserror::Error;\n\n#[derive(Debug, Error)]\npub enum AuthError {\n    #[error(\"HTTP error: {0}\")]\n    HttpError(#[from] reqwest::Error),\n    #[error(\"JSON parsing error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    #[error(\"Authentication failed: {0}\")]\n    AuthFailed(String),\n    #[error(\"Token validation error: {0}\")]\n    TokenValidationError(String),\n}\n\n#[derive(Debug, Clone, Deserialize, Serialize)]\npub struct TokenResponse {\n    #[serde(rename = \"access_token\")]\n    pub access_token: String,\n    #[serde(rename = \"expires_in\")]\n    pub expires_in: u64,\n    #[serde(rename = \"token_type\")]\n    pub token_type: String,\n}\n\npub struct AuthClient {\n    token_url: String,\n    client_id: String,\n    client_secret: String,\n}\n\nimpl AuthClient {\n    pub fn new(client_id: String, client_secret: String) -\u003e Self {\n        Self {\n            token_url: \"https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token\".to_string(),\n            client_id,\n            client_secret,\n        }\n    }\n\n    pub fn new_with_configuration(client_id: String, client_secret: String, configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            token_url: configuration.get_auth_base_url(),\n            client_id,\n            client_secret,\n        }\n    }\n\n    pub async fn get_access_token(\u0026self) -\u003e Result\u003cString, AuthError\u003e {\n        let client = reqwest::Client::new();\n\n        // Add tracing to see which URL is being used\n        tracing::debug!(\"Authenticating with token URL: {}\", \u0026self.token_url);\n        tracing::debug!(\"Client ID: {}\", \u0026self.client_id);\n\n        // For client credentials flow, we don't need to specify a scope\n        // Only send grant_type in form data, client credentials go in Authorization header\n        let params = [\n            (\"grant_type\", \"client_credentials\"),\n        ];\n\n        let response = client\n            .post(\u0026self.token_url)\n            .header(\"Content-Type\", \"application/x-www-form-urlencoded\")\n            .form(\u0026params)\n            .basic_auth(\u0026self.client_id, Some(\u0026self.client_secret))\n            .send()\n            .await?;\n\n        tracing::debug!(\"Authentication response status: {}\", response.status());\n\n        if response.status().is_success() {\n            match response.json::\u003cTokenResponse\u003e().await {\n                Ok(token_response) =\u003e {\n                    tracing::debug!(\"Authentication successful, received token\");\n                    Ok(token_response.access_token)\n                },\n                Err(e) =\u003e Err(AuthError::HttpError(e))\n            }\n        } else {\n            let status = response.status();\n            // Try to get error details - first as text, then try to parse as JSON if needed\n            let error_text = match response.text().await {\n                Ok(text) =\u003e text,\n                Err(_) =\u003e \"Unknown error\".to_string()\n            };\n\n            tracing::debug!(\"Authentication failed with error text: {}\", \u0026error_text);\n\n            // Try to parse as JSON for better formatting\n            let error_details = match serde_json::from_str::\u003cserde_json::Value\u003e(\u0026error_text) {\n                Ok(error_json) =\u003e {\n                    // Extract specific error information for better user messages\n                    if let Some(error_val) = error_json.get(\"error\") {\n                        let error_str = error_val.as_str().unwrap_or(\"unknown\");\n\n                        match error_str {\n                            \"invalid_client\" =\u003e {\n                                \"Invalid client credentials. Please check your client ID and secret.\".to_string()\n                            },\n                            \"invalid_grant\" =\u003e {\n                                \"Invalid grant. The authorization grant or refresh token is invalid.\".to_string()\n                            },\n                            \"unauthorized_client\" =\u003e {\n                                \"Unauthorized client. The client is not authorized to use this authorization grant type.\".to_string()\n                            },\n                            \"invalid_request\" =\u003e {\n                                \"Invalid request. The request is missing required parameters or contains invalid parameters.\".to_string()\n                            },\n                            _ =\u003e format!(\"{:?}\", error_json),\n                        }\n                    } else {\n                        format!(\"{:?}\", error_json)\n                    }\n                },\n                Err(_) =\u003e error_text\n            };\n\n            Err(AuthError::AuthFailed(format!(\"Authentication failed: HTTP {} {}\", status, error_details)))\n        }\n    }\n}\n\n","traces":[{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":44},{"path":["/","Users","julian","projects","physna","pcli2","src","banner.rs"],"content":"use color_print::cprintln;\n\n/// Display the ASCII art banner for PCLI2\npub fn print_banner() {\n    println!();\n    cprintln!(\"\u003cr\u003ePCLI2\u003c/r\u003e - Physna Command Line Interface v2\");\n    println!();\n    println!();\n    \n    // Print ASCII art spelling out \"PCLI2\" with smooth gradient from light to dark orange (top to bottom)\n    cprintln!(\"\u003c#FFA500\u003e ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà       ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \u003c/#FFA500\u003e\");\n    cprintln!(\"\u003c#FF9500\u003e‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà       ‚ñë‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà\u003c/#FF9500\u003e\");\n    cprintln!(\"\u003c#FF8C00\u003e ‚ñë‚ñà‚ñà‚ñà    ‚ñë‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà     ‚ñë‚ñë‚ñë  ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñë‚ñë    ‚ñë‚ñà‚ñà‚ñà\u003c/#FF8C00\u003e\");\n    cprintln!(\"\u003c#FF8000\u003e ‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà          ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \u003c/#FF8000\u003e\");\n    cprintln!(\"\u003c#FF7200\u003e ‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ñë‚ñà‚ñà‚ñà          ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  \u003c/#FF7200\u003e\");\n    cprintln!(\"\u003c#FF6300\u003e ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñë‚ñà‚ñà‚ñà     ‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà      ‚ñà ‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà      ‚ñà\u003c/#FF6300\u003e\");\n    cprintln!(\"\u003c#FF5500\u003e ‚ñà‚ñà‚ñà‚ñà‚ñà        ‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\u003c/#FF5500\u003e\");\n    cprintln!(\"\u003c#FF4500\u003e‚ñë‚ñë‚ñë‚ñë‚ñë          ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë \u003c/#FF4500\u003e\");\n    println!();\n    println!();\n}\n\n/// Check if the command line arguments include help request\npub fn has_help_flag(args: \u0026[String]) -\u003e bool {\n    for arg in args.iter() {\n        if arg == \"--help\" || arg == \"-h\" || arg == \"help\" {\n            return true;\n        }\n    }\n    false\n}","traces":[{"line":4,"address":[],"length":0,"stats":{"Line":6}},{"line":5,"address":[],"length":0,"stats":{"Line":6}},{"line":6,"address":[],"length":0,"stats":{"Line":6}},{"line":7,"address":[],"length":0,"stats":{"Line":6}},{"line":8,"address":[],"length":0,"stats":{"Line":6}},{"line":11,"address":[],"length":0,"stats":{"Line":6}},{"line":12,"address":[],"length":0,"stats":{"Line":6}},{"line":13,"address":[],"length":0,"stats":{"Line":6}},{"line":14,"address":[],"length":0,"stats":{"Line":6}},{"line":15,"address":[],"length":0,"stats":{"Line":6}},{"line":16,"address":[],"length":0,"stats":{"Line":6}},{"line":17,"address":[],"length":0,"stats":{"Line":6}},{"line":18,"address":[],"length":0,"stats":{"Line":6}},{"line":19,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":6}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":83}},{"line":26,"address":[],"length":0,"stats":{"Line":171}},{"line":27,"address":[],"length":0,"stats":{"Line":6}},{"line":30,"address":[],"length":0,"stats":{"Line":5}}],"covered":20,"coverable":20},{"path":["/","Users","julian","projects","physna","pcli2","src","cache.rs"],"content":"//! Shared caching functionality for the Physna CLI client.\n//!\n//! This module provides common utilities for implementing cache functionality\n//! across different types of data in the application. It reduces code duplication\n//! and provides a consistent interface for cache operations.\n\n/// Common error type for cache operations that implements Send + Sync\n#[derive(Debug)]\npub enum CacheError {\n    IoError(std::io::Error),\n    SerializationError(serde_json::Error),\n    ApiError(Box\u003cdyn std::error::Error + Send + Sync\u003e),\n    Other(String),\n}\n\nimpl std::fmt::Display for CacheError {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            CacheError::IoError(e) =\u003e write!(f, \"IO error: {}\", e),\n            CacheError::SerializationError(e) =\u003e write!(f, \"Serialization error: {}\", e),\n            CacheError::ApiError(e) =\u003e write!(f, \"API error: {}\", e),\n            CacheError::Other(s) =\u003e write!(f, \"Cache error: {}\", s),\n        }\n    }\n}\n\nimpl std::error::Error for CacheError {\n    fn source(\u0026self) -\u003e Option\u003c\u0026(dyn std::error::Error + 'static)\u003e {\n        match self {\n            CacheError::IoError(e) =\u003e Some(e),\n            CacheError::SerializationError(e) =\u003e Some(e),\n            CacheError::ApiError(e) =\u003e Some(e.as_ref()),\n            CacheError::Other(_) =\u003e None,\n        }\n    }\n}\n\nimpl From\u003cstd::io::Error\u003e for CacheError {\n    fn from(error: std::io::Error) -\u003e Self {\n        CacheError::IoError(error)\n    }\n}\n\nimpl From\u003cserde_json::Error\u003e for CacheError {\n    fn from(error: serde_json::Error) -\u003e Self {\n        CacheError::SerializationError(error)\n    }\n}\n\nimpl From\u003cBox\u003cdyn std::error::Error + Send + Sync\u003e\u003e for CacheError {\n    fn from(error: Box\u003cdyn std::error::Error + Send + Sync\u003e) -\u003e Self {\n        CacheError::ApiError(error)\n    }\n}\n\n/// Common cache configuration options\n#[derive(Debug, Clone)]\npub struct CacheConfig {\n    /// Cache expiration time in seconds\n    pub expiration_seconds: u64,\n    /// Whether to compress cached data\n    pub compress: bool,\n    /// The directory where cache files are stored\n    pub cache_dir: std::path::PathBuf,\n}\n\nimpl Default for CacheConfig {\n    fn default() -\u003e Self {\n        Self {\n            expiration_seconds: 24 * 60 * 60, // 24 hours\n            compress: false,\n            cache_dir: dirs::cache_dir()\n                .unwrap_or_else(std::env::temp_dir)\n                .join(\"pcli2\"),\n        }\n    }\n}\n\n/// Base cache functionality that can be shared across different cache implementations\n#[derive(Debug, Default)]\npub struct BaseCache {\n    /// Configuration for the cache\n    pub config: CacheConfig,\n}\n\nimpl BaseCache {\n    /// Create a new BaseCache with default configuration\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    /// Create a new BaseCache with custom configuration\n    pub fn with_config(config: CacheConfig) -\u003e Self {\n        Self { config }\n    }\n\n    /// Get the default cache directory path\n    /// \n    /// In a test environment (when PCLI2_TEST_CACHE_DIR is set), it uses that directory.\n    /// For general cross-platform support (when PCLI2_CACHE_DIR is set), it uses that directory.\n    /// Otherwise, it uses the system's cache directory with a \"pcli2\" subdirectory.\n    pub fn get_cache_dir() -\u003e std::path::PathBuf {\n        // Check if we're in a test environment\n        if let Ok(test_cache_dir) = std::env::var(\"PCLI2_TEST_CACHE_DIR\") {\n            std::path::PathBuf::from(test_cache_dir)\n        } else if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            std::path::PathBuf::from(cache_dir_str)\n        } else {\n            dirs::cache_dir()\n                .unwrap_or_else(std::env::temp_dir)\n                .join(\"pcli2\")\n        }\n    }\n\n    /// Check if a cache file is expired based on file modification time\n    pub fn is_file_expired(cache_file: \u0026std::path::Path) -\u003e bool {\n        match std::fs::metadata(cache_file) {\n            Ok(metadata) =\u003e {\n                match metadata.modified() {\n                    Ok(modified_time) =\u003e {\n                        let now = std::time::SystemTime::now();\n                        match now.duration_since(modified_time) {\n                            Ok(duration) =\u003e {\n                                duration.as_secs() \u003e CacheConfig::default().expiration_seconds\n                            }\n                            Err(_) =\u003e false, // If there's an error calculating duration, don't treat as expired\n                        }\n                    }\n                    Err(_) =\u003e false, // If we can't get the modified time, don't treat as expired\n                }\n            }\n            Err(_) =\u003e true, // If we can't get metadata, treat as expired\n        }\n    }\n\n    /// Get the cache file path for a specific key\n    pub fn get_cache_file_path(cache_dir: \u0026std::path::Path, key: \u0026str, extension: \u0026str) -\u003e std::path::PathBuf {\n        cache_dir.join(format!(\"{}.{}\", key, extension))\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use tempfile::NamedTempFile;\n\n    #[test]\n    fn test_base_cache_creation() {\n        let cache = BaseCache::new();\n        assert_eq!(cache.config.expiration_seconds, 24 * 60 * 60); // 24 hours\n    }\n\n    #[test]\n    fn test_cache_config_default() {\n        let config = CacheConfig::default();\n        assert_eq!(config.expiration_seconds, 24 * 60 * 60); // 24 hours\n        assert!(!config.compress);\n        assert!(config.cache_dir.ends_with(\"pcli2\"));\n    }\n\n    #[test]\n    fn test_is_file_expired_new_file() {\n        let temp_file = NamedTempFile::new().unwrap();\n        assert!(!BaseCache::is_file_expired(temp_file.path()));\n    }\n\n    #[test]\n    fn test_get_cache_file_path() {\n        let cache_dir = std::path::PathBuf::from(\"/tmp/test\");\n        let cache_file = BaseCache::get_cache_file_path(\u0026cache_dir, \"test_tenant\", \"json\");\n        assert!(cache_file.to_string_lossy().contains(\"test_tenant.json\"));\n    }\n}","traces":[{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":3}},{"line":70,"address":[],"length":0,"stats":{"Line":6}},{"line":72,"address":[],"length":0,"stats":{"Line":3}},{"line":88,"address":[],"length":0,"stats":{"Line":1}},{"line":89,"address":[],"length":0,"stats":{"Line":1}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":1}},{"line":117,"address":[],"length":0,"stats":{"Line":1}},{"line":118,"address":[],"length":0,"stats":{"Line":1}},{"line":119,"address":[],"length":0,"stats":{"Line":1}},{"line":120,"address":[],"length":0,"stats":{"Line":1}},{"line":121,"address":[],"length":0,"stats":{"Line":2}},{"line":122,"address":[],"length":0,"stats":{"Line":2}},{"line":123,"address":[],"length":0,"stats":{"Line":1}},{"line":124,"address":[],"length":0,"stats":{"Line":2}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":1}},{"line":138,"address":[],"length":0,"stats":{"Line":4}}],"covered":16,"coverable":45},{"path":["/","Users","julian","projects","physna","pcli2","src","cli.rs"],"content":"//! CLI command execution logic.\n//!\n//! This module contains the core logic for executing CLI commands parsed by the\n//! command definition module. It handles the execution of all supported commands\n//! including tenant, folder, asset, authentication, context, and configuration operations.\n\nuse clap::ArgMatches;\nuse pcli2::{\n    actions::{\n        assets::{\n            create_asset, create_asset_batch, delete_asset, geometric_match_asset, geometric_match_folder, list_assets, print_asset, print_asset_metadata, download_asset, update_asset_metadata, delete_asset_metadata, metadata_inference, create_asset_metadata_batch, part_match_asset, part_match_folder, visual_match_asset, visual_match_folder\n        },\n        folders::{\n            create_folder,\n            delete_folder,\n            list_folders,\n            print_folder_details\n        },\n        tenants::{\n            clear_active_tenant,\n            get_tenant_details,\n            list_all_tenants,\n            print_active_tenant_name_with_format,\n            print_current_context,\n            set_active_tenant\n        }\n    },\n    commands::{\n        create_cli_commands,\n        params::{\n            COMMAND_ASSET,\n            COMMAND_AUTH,\n            COMMAND_CLEAR,\n            COMMAND_CONFIG,\n            COMMAND_CONTEXT,\n            COMMAND_CREATE,\n            COMMAND_CREATE_BATCH,\n            COMMAND_DELETE,\n            COMMAND_DOWNLOAD,\n            COMMAND_EXPORT,\n            COMMAND_FOLDER,\n            COMMAND_GET,\n            COMMAND_IMPORT,\n            COMMAND_LIST,\n            COMMAND_LOGIN,\n            COMMAND_LOGOUT,\n            COMMAND_MATCH,\n            COMMAND_MATCH_FOLDER,\n            COMMAND_METADATA,\n            COMMAND_PART_MATCH,\n            COMMAND_PART_MATCH_FOLDER,\n            COMMAND_VISUAL_MATCH,\n            COMMAND_VISUAL_MATCH_FOLDER,\n            COMMAND_INFERENCE,\n            COMMAND_SET,\n            COMMAND_TENANT,\n            PARAMETER_API_URL,\n            PARAMETER_AUTH_URL,\n            PARAMETER_CLIENT_ID,\n            PARAMETER_CLIENT_SECRET,\n            PARAMETER_FILE,\n            PARAMETER_FORMAT,\n            PARAMETER_HEADERS,\n            PARAMETER_OUTPUT,\n            PARAMETER_PRETTY,\n            PARAMETER_UI_URL\n        }\n    },\n    format::{Formattable, OutputFormat, OutputFormatOptions, FormattingError}};\nuse pcli2::error_utils;\nuse pcli2::auth::AuthClient;\nuse pcli2::configuration::Configuration;\nuse pcli2::keyring::Keyring;\nuse pcli2::error::CliError;\nuse std::path::PathBuf;\nuse tracing::{debug, trace};\n\nfn extract_subcommand_name(sub_matches: \u0026ArgMatches) -\u003e String {\n    let message = match sub_matches.subcommand() {\n        Some(m) =\u003e m.0,\n        None =\u003e \"unknown\",\n    };\n\n    message.to_string()\n}\n\npub async fn execute_command() -\u003e Result\u003c(), CliError\u003e {\n    let commands = create_cli_commands();\n\n    trace!(\"Executing CLI command\");\n\n    match commands.subcommand() {\n        // Tenant resource commands\n        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_TENANT);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_TENANT, COMMAND_LIST);\n\n                    list_all_tenants(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_TENANT, COMMAND_GET);\n\n                    get_tenant_details(sub_matches).await?;\n                    Ok(())\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Folder resource commands\n        Some((COMMAND_FOLDER, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_FOLDER);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_LIST);\n\n                    list_folders(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_GET);\n\n                    print_folder_details(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_CREATE);\n\n                    create_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_DELETE);\n\n                    delete_folder(sub_matches).await?;\n                    Ok(())\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Asset commands\n        Some((COMMAND_ASSET, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_ASSET);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_GET);\n\n                    print_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_CREATE);\n                    trace!(\"Routing to asset create...\");\n\n                    create_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_LIST);\n                    trace!(\"Routing to asset list...\");\n\n                    list_assets(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE_BATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_CREATE_BATCH);\n                    trace!(\"Routing to asset batch create...\");\n\n                    create_asset_batch(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DOWNLOAD, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_DOWNLOAD);\n                    trace!(\"Routing to asset download...\");\n\n                    download_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_DELETE);\n                    trace!(\"Routing to asset delete...\");\n\n                    delete_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_MATCH);\n                    trace!(\"Routing to asset geometric match...\");\n\n                    geometric_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_PART_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_PART_MATCH);\n                    trace!(\"Routing to asset part match...\");\n\n                    part_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_MATCH_FOLDER);\n                    trace!(\"Routing to asset geometric match folder...\");\n\n                    geometric_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_PART_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_PART_MATCH_FOLDER);\n                    trace!(\"Routing to asset part match folder...\");\n\n                    part_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_VISUAL_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_VISUAL_MATCH);\n                    trace!(\"Routing to asset visual match...\");\n\n                    visual_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_VISUAL_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_VISUAL_MATCH_FOLDER);\n                    trace!(\"Routing to asset visual match folder...\");\n\n                    visual_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_METADATA, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_METADATA);\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_CREATE);\n                            trace!(\"Routing to asset metadata create...\");\n\n                            update_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_GET, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_GET);\n                            trace!(\"Routing to asset metadata get...\");\n\n                            print_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_DELETE);\n                            trace!(\"Routing to asset metadata delete...\");\n\n                            delete_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_INFERENCE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_INFERENCE);\n                            trace!(\"Routing to asset metadata inference...\");\n\n                            metadata_inference(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((\"create-batch\", sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} create-batch\", COMMAND_ASSET, COMMAND_METADATA);\n                            trace!(\"Routing to asset metadata create-batch...\");\n\n                            create_asset_metadata_batch(sub_matches).await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        )))\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                )))\n            }\n        }\n        // Authentication commands\n        Some((COMMAND_AUTH, sub_matches)) =\u003e {\n            match sub_matches.subcommand() {\n                Some((COMMAND_LOGIN, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_AUTH, COMMAND_LOGIN);\n\n                    let configuration = Configuration::load_or_create_default()?;\n\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    // Try to get client credentials from command line or stored values\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    let client_id = match sub_matches.get_one::\u003cString\u003e(PARAMETER_CLIENT_ID) {\n                        Some(id) =\u003e id.clone(),\n                        None =\u003e {\n                            // Try to get stored client ID\n                            match keyring.get(\u0026environment_name, \"client-id\".to_string()) {\n                                Ok(Some(stored_id)) =\u003e stored_id,\n                                _ =\u003e {\n                                    return Err(CliError::MissingRequiredArgument(PARAMETER_CLIENT_ID.to_string()));\n                                }\n                            }\n                        }\n                    };\n\n                    let client_secret = match sub_matches.get_one::\u003cString\u003e(PARAMETER_CLIENT_SECRET) {\n                        Some(secret) =\u003e secret.clone(),\n                        None =\u003e {\n                            // Try to get stored client secret\n                            match keyring.get(\u0026environment_name, \"client-secret\".to_string()) {\n                                Ok(Some(stored_secret)) =\u003e stored_secret,\n                                _ =\u003e {\n                                    return Err(CliError::MissingRequiredArgument(PARAMETER_CLIENT_SECRET.to_string()));\n                                }\n                            }\n                        }\n                    };\n\n                    let auth_client = AuthClient::new_with_configuration(client_id.clone(), client_secret.clone(), \u0026configuration);\n\n                    // Store the client credentials so they're available for token refresh\n                    let client_id_result = keyring.put(\u0026environment_name, \"client-id\".to_string(), client_id.clone());\n                    let client_secret_result = keyring.put(\u0026environment_name, \"client-secret\".to_string(), client_secret.clone());\n\n                    if client_id_result.is_err() || client_secret_result.is_err() {\n                        error_utils::report_error_with_remediation(\n                            \u0026CliError::SecurityError(String::from(\"Failed to store client credentials\")),\n                            \u0026[\n                                \"Check that your system's keyring service is running\",\n                                \"Try logging in again with 'pcli2 auth login'\"\n                            ]\n                        );\n                        return Err(CliError::SecurityError(String::from(\"Failed to store client credentials\")));\n                    }\n\n                    match auth_client.get_access_token().await {\n                        Ok(token) =\u003e {\n                            // Store the access token\n                            let token_result = keyring.put(\u0026environment_name, \"access-token\".to_string(), token);\n\n                            if token_result.is_ok() {\n                                Ok(())\n                            } else {\n                                error_utils::report_error_with_remediation(\n                                    \u0026CliError::SecurityError(String::from(\"Failed to store access token\")),\n                                    \u0026[\n                                        \"Check that your system's keyring service is running\",\n                                        \"Try logging in again with 'pcli2 auth login'\"\n                                    ]\n                                );\n                                Err(CliError::SecurityError(String::from(\"Failed to store access token\")))\n                            }\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026format!(\"Login failed: {}\", e),\n                                \u0026[\n                                    \"Verify your client ID and client secret are correct\",\n                                    \"Check your internet connection\",\n                                    \"Ensure your credentials have not expired\"\n                                ]\n                            );\n                            Err(CliError::SecurityError(String::from(\"Login failed\")))\n                        }\n                    }\n                }\n                Some((COMMAND_LOGOUT, _)) =\u003e {\n                    trace!(\"Executing logout command\");\n\n                    let configuration = Configuration::load_or_create_default()?;\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    match keyring.delete(\u0026environment_name, \"access-token\".to_string()) {\n                        Ok(()) =\u003e {\n                            Ok(())\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026format!(\"Error deleting access token: {}\", e),\n                                \u0026[\n                                    \"Check that your system's keyring service is running\",\n                                    \"Try logging in again with 'pcli2 auth login'\"\n                                ]\n                            );\n                            Err(CliError::SecurityError(String::from(\"Failed to delete access token\")))\n                        }\n                    }\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Executing auth token get command\");\n\n                    // Get format parameters directly from sub_matches since auth commands don't have metadata flag\n                    let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                        format_val.clone()\n                    } else {\n                        \"json\".to_string()\n                    };\n                    let format_str = \u0026format_str_owned;\n\n                    let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                    let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                    // Note: auth commands don't have metadata flag\n\n                    let format_options = OutputFormatOptions {\n                        with_metadata: false,  // No metadata for auth\n                        with_headers,\n                        pretty,\n                    };\n\n                    let format = OutputFormat::from_string_with_options(format_str, format_options).unwrap();\n\n                    let configuration = Configuration::load_or_create_default()?;\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    // Try to get access token from keyring\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    match keyring.get(\u0026environment_name, \"access-token\".to_string()) {\n                        Ok(Some(token)) =\u003e {\n                            // Create a simple struct to hold the token for formatting\n                            #[derive(serde::Serialize)]\n                            struct TokenResponse {\n                                access_token: String,\n                            }\n\n                            let token_response = TokenResponse {\n                                access_token: token,\n                            };\n\n                            // Format the response based on the requested format\n                            match format {\n                                OutputFormat::Json(options) =\u003e {\n                                    let json_output = if options.pretty {\n                                        serde_json::to_string_pretty(\u0026token_response)\n                                    } else {\n                                        serde_json::to_string(\u0026token_response)\n                                    };\n                                    match json_output {\n                                        Ok(json) =\u003e println!(\"{}\", json),\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                    }\n                                },\n                                OutputFormat::Csv(options) =\u003e {\n                                    let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                    if options.with_headers {\n                                        if let Err(e) = wtr.serialize((\"ACCESS_TOKEN\",)) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    if let Err(e) = wtr.serialize((\u0026token_response.access_token,)) {\n                                        return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                    }\n\n                                    let data = match wtr.into_inner() {\n                                        Ok(data) =\u003e data,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                    };\n                                    let csv_output = match String::from_utf8(data) {\n                                        Ok(csv_str) =\u003e csv_str,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                    };\n                                    print!(\"{}\", csv_output);\n                                },\n                                OutputFormat::Tree(_) =\u003e {\n                                    // For tree format, just print the token\n                                    println!(\"{}\", token_response.access_token);\n                                }\n                            }\n                            Ok(())\n                        }\n                        Ok(None) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026\"No access token found. Please login first.\",\n                                \u0026[\n                                    \"Log in with 'pcli2 auth login --client-id \u003cid\u003e --client-secret \u003csecret\u003e'\",\n                                    \"Verify your credentials are correct\"\n                                ]\n                            );\n                            Ok(())\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error(\u0026CliError::MissingRequiredArgument(format!(\"Error retrieving access token: {}\", e)));\n                            Ok(())\n                        }\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Context commands\n        Some((COMMAND_CONTEXT, sub_matches)) =\u003e {\n            trace!(\"Command: context\");\n\n            match sub_matches.subcommand() {\n                Some((COMMAND_SET, sub_matches)) =\u003e {\n                    trace!(\"Command: context set\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n                            trace!(\"Command: context set tenant\");\n\n                            set_active_tenant(sub_matches).await?;\n\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: context get\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n                            trace!(\"Command: context get tenant\");\n                            print_active_tenant_name_with_format(sub_matches).await?;\n                            Ok(())\n                        }\n                        None =\u003e {\n                            // Handle context get without subcommand\n                            trace!(\"Command: context get (no subcommand)\");\n                            print_current_context(sub_matches).await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                Some((COMMAND_CLEAR, sub_matches)) =\u003e {\n                    trace!(\"Command: context clear\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, _)) =\u003e {\n                            trace!(\"Command: context clear tenant\");\n                            clear_active_tenant().await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Configuration commands\n        Some((COMMAND_CONFIG, sub_matches)) =\u003e {\n            trace!(\"Executing config command\");\n            match sub_matches.subcommand() {\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Executing config get command\");\n                    match sub_matches.subcommand() {\n                        Some((\"path\", _)) =\u003e {\n                            let path = Configuration::get_default_configuration_file_path()?;\n                            let path = path.into_os_string().into_string()\n                                .map_err(|_| CliError::ConfigurationError(\n                                    pcli2::configuration::ConfigurationError::FailedToFindConfigurationDirectory))?;\n                            println!(\"{}\", path);\n                            Ok(())\n                        }\n                        _ =\u003e {\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n                            let format_str = \u0026format_str_owned;\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: config commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for config\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(format_str, format_options).unwrap();\n\n                            let configuration = Configuration::load_or_create_default()?;\n                            match configuration.format(\u0026format) {\n                                Ok(output) =\u003e {\n                                    println!(\"{}\", output);\n                                    Ok(())\n                                }\n                                Err(e) =\u003e Err(CliError::FormattingError(e)),\n                            }\n                        }\n                    }\n                }\n                Some((COMMAND_EXPORT, sub_matches)) =\u003e {\n                    trace!(\"Executing config export command\");\n                    let path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_OUTPUT)\n                        .ok_or(CliError::MissingRequiredArgument(PARAMETER_OUTPUT.to_string()))?;\n                    let configuration = Configuration::load_or_create_default()?;\n                    configuration.save(path)?;\n                    Ok(())\n                }\n                Some((COMMAND_IMPORT, sub_matches)) =\u003e {\n                    trace!(\"Executing config import command\");\n                    let path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_FILE)\n                        .ok_or(CliError::MissingRequiredArgument(PARAMETER_FILE.to_string()))?;\n                    // Implementation would import configuration\n                    debug!(\"Importing configuration from: {:?}\", path);\n                    Ok(())\n                }\n                Some((\"environment\", sub_matches)) =\u003e {\n                    trace!(\"Executing config environment command\");\n                    match sub_matches.subcommand() {\n                        Some((\"add\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment add command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n                                .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n\n                            let api_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_API_URL).cloned();\n                            let ui_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_UI_URL).cloned();\n                            let auth_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_AUTH_URL).cloned();\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            let env_config = pcli2::configuration::EnvironmentConfig {\n                                api_base_url: api_url.unwrap_or_else(||\n                                    pcli2::configuration::default_api_base_url()),\n                                ui_base_url: ui_url.unwrap_or_else(||\n                                    pcli2::configuration::default_ui_base_url()),\n                                auth_base_url: auth_url.unwrap_or_else(||\n                                    pcli2::configuration::default_auth_base_url()),\n                            };\n\n                            configuration.add_environment(env_name.clone(), env_config);\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment '{}' added successfully\", env_name);\n                            Ok(())\n                        }\n                        Some((\"use\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment use command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\");\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            let selected_env_name = if let Some(name) = env_name {\n                                // Use the provided name\n                                name.clone()\n                            } else {\n                                // Interactive selection using TUI\n                                let available_envs = configuration.list_environments();\n\n                                if available_envs.is_empty() {\n                                    error_utils::report_error_with_remediation(\n                                        \u0026\"No environments available\",\n                                        \u0026[\n                                            \"Add an environment with 'pcli2 config environment add'\",\n                                            \"Check that your configuration file is properly set up\"\n                                        ]\n                                    );\n                                    return Ok(());\n                                }\n\n                                // Create options for the select menu\n                                let options: Vec\u003cString\u003e = available_envs.iter()\n                                    .map(|env_name| {\n                                        let is_active = if let Some(ref active) = configuration.get_active_environment() {\n                                            env_name == active\n                                        } else {\n                                            false\n                                        };\n                                        let active_status = if is_active { \" (active)\" } else { \"\" };\n                                        format!(\"{}{}\", env_name, active_status)\n                                    })\n                                    .collect();\n\n                                // Use inquire to create an interactive selection\n                                let ans = inquire::Select::new(\"Select an environment:\", options)\n                                    .with_help_message(\"Choose the environment you want to set as active\")\n                                    .prompt();\n\n                                match ans {\n                                    Ok(choice) =\u003e {\n                                        // Extract the environment name from the choice (removing \" (active)\" if present)\n                                        let env_name = choice.split_once(\" (active)\").map(|(before, _)| before.trim()).unwrap_or(\u0026choice);\n                                        env_name.to_string()\n                                    }\n                                    Err(_) =\u003e {\n                                        error_utils::report_error_with_remediation(\n                                            \u0026\"No environment selected\",\n                                            \u0026[\n                                                \"Run 'pcli2 config environment use' again to select an environment\",\n                                                \"Add an environment with 'pcli2 config environment add' if none exist\"\n                                            ]\n                                        );\n                                        return Ok(());\n                                    }\n                                }\n                            };\n\n                            configuration.set_active_environment(\u0026selected_env_name)?;\n                            // Clear the active tenant when switching environments to avoid confusion\n                            configuration.clear_active_tenant();\n                            configuration.save_to_default()?;\n\n                            println!(\"Switched to environment '{}' (active tenant cleared)\", selected_env_name);\n                            Ok(())\n                        }\n                        Some((\"remove\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment remove command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n                                .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            configuration.remove_environment(env_name)?;\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment '{}' removed successfully\", env_name);\n                            Ok(())\n                        }\n                        Some((\"list\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment list command\");\n\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: environment list commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for environment list\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(\u0026format_str, format_options).unwrap();\n\n                            let configuration = Configuration::load_or_create_default()?;\n                            let active_env = configuration.get_active_environment();\n\n                            // Create a detailed representation for display\n                            #[derive(serde::Serialize)]\n                            struct EnvironmentDetails {\n                                name: String,\n                                is_active: bool,\n                                api_base_url: String,\n                                ui_base_url: String,\n                                auth_base_url: String,\n                            }\n\n                            let env_details: Vec\u003cEnvironmentDetails\u003e = configuration.list_environments()\n                                .into_iter()\n                                .map(|name| {\n                                    let is_active = if let Some(ref active) = active_env {\n                                        name == *active\n                                    } else {\n                                        false\n                                    };\n\n                                    let env_config = configuration.get_environment_config(\u0026name).unwrap();\n\n                                    EnvironmentDetails {\n                                        name: name.clone(),\n                                        is_active,\n                                        api_base_url: env_config.api_base_url.clone(),\n                                        ui_base_url: env_config.ui_base_url.clone(),\n                                        auth_base_url: env_config.auth_base_url.clone(),\n                                    }\n                                })\n                                .collect();\n\n                            // Format the response based on the requested format\n                            match format {\n                                OutputFormat::Json(options) =\u003e {\n                                    let json_output = if options.pretty {\n                                        serde_json::to_string_pretty(\u0026env_details)\n                                    } else {\n                                        serde_json::to_string(\u0026env_details)\n                                    };\n                                    match json_output {\n                                        Ok(json) =\u003e println!(\"{}\", json),\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                    }\n                                },\n                                OutputFormat::Csv(options) =\u003e {\n                                    let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                    if options.with_headers {\n                                        if let Err(e) = wtr.serialize((\"ENVIRONMENT_NAME\", \"IS_ACTIVE\", \"API_BASE_URL\", \"UI_BASE_URL\", \"AUTH_BASE_URL\")) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    for env_detail in \u0026env_details {\n                                        if let Err(e) = wtr.serialize((\n                                            \u0026env_detail.name,\n                                            \u0026env_detail.is_active,\n                                            \u0026env_detail.api_base_url,\n                                            \u0026env_detail.ui_base_url,\n                                            \u0026env_detail.auth_base_url,\n                                        )) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    let data = match wtr.into_inner() {\n                                        Ok(data) =\u003e data,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                    };\n                                    let csv_output = match String::from_utf8(data) {\n                                        Ok(csv_str) =\u003e csv_str,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                    };\n                                    print!(\"{}\", csv_output);\n                                },\n                                OutputFormat::Tree(_) =\u003e {\n                                    // For tree format, show detailed information\n                                    for env_detail in \u0026env_details {\n                                        let active_status = if env_detail.is_active { \" (active)\" } else { \"\" };\n                                        println!(\"{}{}:\", env_detail.name, active_status);\n                                        println!(\"  API Base URL: {}\", env_detail.api_base_url);\n                                        println!(\"  UI Base URL: {}\", env_detail.ui_base_url);\n                                        println!(\"  Auth Base URL: {}\", env_detail.auth_base_url);\n                                        println!(); // Empty line between environments\n                                    }\n                                }\n                            }\n                            Ok(())\n                        }\n                        Some((\"reset\", _sub_matches)) =\u003e {\n                            trace!(\"Executing config environment reset command\");\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            configuration.reset_environments();\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment configurations reset successfully\");\n                            Ok(())\n                        }\n                        Some((\"get\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment get command\");\n\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: environment get commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for environment get\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(\u0026format_str, format_options).unwrap();\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\");\n\n                            let configuration = Configuration::load_or_create_default()?;\n\n                            let target_env_name = if let Some(name) = env_name {\n                                // Use the provided name\n                                name.clone()\n                            } else {\n                                // Use the active environment\n                                if let Some(active_env) = configuration.get_active_environment() {\n                                    active_env\n                                } else {\n                                    error_utils::report_error_with_remediation(\n                                        \u0026\"No active environment set\",\n                                        \u0026[\n                                            \"Set an active environment with 'pcli2 config environment use'\",\n                                            \"Add an environment with 'pcli2 config environment add' if none exist\"\n                                        ]\n                                    );\n                                    return Ok(());\n                                }\n                            };\n\n                            // Get the environment configuration\n                            if let Some(env_config) = configuration.get_environment_config(\u0026target_env_name) {\n                                // Create a detailed representation for display\n                                #[derive(serde::Serialize)]\n                                struct EnvironmentDetails {\n                                    name: String,\n                                    is_active: bool,\n                                    api_base_url: String,\n                                    ui_base_url: String,\n                                    auth_base_url: String,\n                                }\n\n                                let is_active = if let Some(active_env) = configuration.get_active_environment() {\n                                    active_env == target_env_name\n                                } else {\n                                    false\n                                };\n\n                                let env_details = EnvironmentDetails {\n                                    name: target_env_name,\n                                    is_active,\n                                    api_base_url: env_config.api_base_url.clone(),\n                                    ui_base_url: env_config.ui_base_url.clone(),\n                                    auth_base_url: env_config.auth_base_url.clone(),\n                                };\n\n                                // Format the response based on the requested format\n                                match format {\n                                    OutputFormat::Json(options) =\u003e {\n                                        let json_output = if options.pretty {\n                                            serde_json::to_string_pretty(\u0026env_details)\n                                        } else {\n                                            serde_json::to_string(\u0026env_details)\n                                        };\n                                        match json_output {\n                                            Ok(json) =\u003e println!(\"{}\", json),\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                        }\n                                    },\n                                    OutputFormat::Csv(options) =\u003e {\n                                        let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                        if options.with_headers {\n                                            if let Err(e) = wtr.serialize((\"ENVIRONMENT_NAME\", \"IS_ACTIVE\", \"API_BASE_URL\", \"UI_BASE_URL\", \"AUTH_BASE_URL\")) {\n                                                return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                            }\n                                        }\n\n                                        if let Err(e) = wtr.serialize((\n                                            \u0026env_details.name,\n                                            \u0026env_details.is_active,\n                                            \u0026env_details.api_base_url,\n                                            \u0026env_details.ui_base_url,\n                                            \u0026env_details.auth_base_url,\n                                        )) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n\n                                        let data = match wtr.into_inner() {\n                                            Ok(data) =\u003e data,\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                        };\n                                        let csv_output = match String::from_utf8(data) {\n                                            Ok(csv_str) =\u003e csv_str,\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                        };\n                                        print!(\"{}\", csv_output);\n                                    },\n                                    OutputFormat::Tree(_) =\u003e {\n                                        // For tree format, output as JSON (since tree doesn't make sense for single environment)\n                                        let json_output = serde_json::to_string_pretty(\u0026env_details);\n                                        match json_output {\n                                            Ok(json) =\u003e println!(\"{}\", json),\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                        }\n                                    }\n                                }\n                            } else {\n                                error_utils::report_error_with_remediation(\n                                    \u0026format!(\"Environment '{}' not found\", target_env_name),\n                                    \u0026[\n                                        \"Check the environment name spelling\",\n                                        \"List available environments with 'pcli2 config environment list'\",\n                                        \"Add the environment with 'pcli2 config environment add'\"\n                                    ]\n                                );\n                            }\n\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        _ =\u003e Err(CliError::UnsupportedSubcommand(String::from(\"unknown\"))),\n    }\n}\n\n","traces":[{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":22}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":92,"address":[],"length":0,"stats":{"Line":11}},{"line":94,"address":[],"length":0,"stats":{"Line":4}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":4}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":8}},{"line":151,"address":[],"length":0,"stats":{"Line":4}},{"line":153,"address":[],"length":0,"stats":{"Line":4}},{"line":154,"address":[],"length":0,"stats":{"Line":8}},{"line":155,"address":[],"length":0,"stats":{"Line":4}},{"line":157,"address":[],"length":0,"stats":{"Line":8}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":225,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":245,"address":[],"length":0,"stats":{"Line":0}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":289,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":295,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":305,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":330,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":390,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":395,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":400,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":410,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":430,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":444,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":450,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":457,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":467,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":0}},{"line":488,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":496,"address":[],"length":0,"stats":{"Line":0}},{"line":500,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":509,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":511,"address":[],"length":0,"stats":{"Line":0}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":522,"address":[],"length":0,"stats":{"Line":0}},{"line":526,"address":[],"length":0,"stats":{"Line":0}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":529,"address":[],"length":0,"stats":{"Line":0}},{"line":530,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":532,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":539,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":553,"address":[],"length":0,"stats":{"Line":0}},{"line":555,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":561,"address":[],"length":0,"stats":{"Line":0}},{"line":566,"address":[],"length":0,"stats":{"Line":0}},{"line":567,"address":[],"length":0,"stats":{"Line":0}},{"line":568,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":570,"address":[],"length":0,"stats":{"Line":0}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":572,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":574,"address":[],"length":0,"stats":{"Line":0}},{"line":575,"address":[],"length":0,"stats":{"Line":0}},{"line":576,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":591,"address":[],"length":0,"stats":{"Line":0}},{"line":594,"address":[],"length":0,"stats":{"Line":0}},{"line":596,"address":[],"length":0,"stats":{"Line":0}},{"line":597,"address":[],"length":0,"stats":{"Line":0}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":611,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":614,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":632,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":0}},{"line":635,"address":[],"length":0,"stats":{"Line":0}},{"line":636,"address":[],"length":0,"stats":{"Line":0}},{"line":637,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":641,"address":[],"length":0,"stats":{"Line":0}},{"line":642,"address":[],"length":0,"stats":{"Line":0}},{"line":644,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":0}},{"line":653,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":659,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":662,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":670,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":674,"address":[],"length":0,"stats":{"Line":0}},{"line":677,"address":[],"length":0,"stats":{"Line":0}},{"line":679,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":682,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":684,"address":[],"length":0,"stats":{"Line":0}},{"line":687,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":0}},{"line":693,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":0}},{"line":698,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":708,"address":[],"length":0,"stats":{"Line":0}},{"line":709,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":730,"address":[],"length":0,"stats":{"Line":0}},{"line":732,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":735,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":743,"address":[],"length":0,"stats":{"Line":0}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":747,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":750,"address":[],"length":0,"stats":{"Line":0}},{"line":753,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":767,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":778,"address":[],"length":0,"stats":{"Line":0}},{"line":779,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":793,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":802,"address":[],"length":0,"stats":{"Line":0}},{"line":803,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":805,"address":[],"length":0,"stats":{"Line":0}},{"line":806,"address":[],"length":0,"stats":{"Line":0}},{"line":807,"address":[],"length":0,"stats":{"Line":0}},{"line":813,"address":[],"length":0,"stats":{"Line":0}},{"line":814,"address":[],"length":0,"stats":{"Line":0}},{"line":815,"address":[],"length":0,"stats":{"Line":0}},{"line":816,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":820,"address":[],"length":0,"stats":{"Line":0}},{"line":821,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":829,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":835,"address":[],"length":0,"stats":{"Line":0}},{"line":836,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":842,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":847,"address":[],"length":0,"stats":{"Line":0}},{"line":848,"address":[],"length":0,"stats":{"Line":0}},{"line":850,"address":[],"length":0,"stats":{"Line":0}},{"line":851,"address":[],"length":0,"stats":{"Line":0}},{"line":852,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":859,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":861,"address":[],"length":0,"stats":{"Line":0}},{"line":862,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":864,"address":[],"length":0,"stats":{"Line":0}},{"line":868,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":875,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":878,"address":[],"length":0,"stats":{"Line":0}},{"line":879,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":885,"address":[],"length":0,"stats":{"Line":0}},{"line":887,"address":[],"length":0,"stats":{"Line":0}},{"line":890,"address":[],"length":0,"stats":{"Line":0}},{"line":891,"address":[],"length":0,"stats":{"Line":0}},{"line":894,"address":[],"length":0,"stats":{"Line":0}},{"line":898,"address":[],"length":0,"stats":{"Line":0}},{"line":899,"address":[],"length":0,"stats":{"Line":0}},{"line":908,"address":[],"length":0,"stats":{"Line":0}},{"line":910,"address":[],"length":0,"stats":{"Line":0}},{"line":912,"address":[],"length":0,"stats":{"Line":0}},{"line":914,"address":[],"length":0,"stats":{"Line":0}},{"line":916,"address":[],"length":0,"stats":{"Line":0}},{"line":919,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":924,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":926,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":934,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":946,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":0}},{"line":955,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":961,"address":[],"length":0,"stats":{"Line":0}},{"line":962,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":965,"address":[],"length":0,"stats":{"Line":0}},{"line":967,"address":[],"length":0,"stats":{"Line":0}},{"line":968,"address":[],"length":0,"stats":{"Line":0}},{"line":969,"address":[],"length":0,"stats":{"Line":0}},{"line":972,"address":[],"length":0,"stats":{"Line":0}},{"line":973,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":976,"address":[],"length":0,"stats":{"Line":0}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":981,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":985,"address":[],"length":0,"stats":{"Line":0}},{"line":986,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":991,"address":[],"length":0,"stats":{"Line":0}},{"line":992,"address":[],"length":0,"stats":{"Line":0}},{"line":993,"address":[],"length":0,"stats":{"Line":0}},{"line":995,"address":[],"length":0,"stats":{"Line":0}},{"line":996,"address":[],"length":0,"stats":{"Line":0}},{"line":997,"address":[],"length":0,"stats":{"Line":0}},{"line":999,"address":[],"length":0,"stats":{"Line":0}},{"line":1003,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1012,"address":[],"length":0,"stats":{"Line":0}},{"line":1013,"address":[],"length":0,"stats":{"Line":0}},{"line":1014,"address":[],"length":0,"stats":{"Line":0}},{"line":1015,"address":[],"length":0,"stats":{"Line":0}},{"line":1016,"address":[],"length":0,"stats":{"Line":0}},{"line":1021,"address":[],"length":0,"stats":{"Line":0}},{"line":1023,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1028,"address":[],"length":0,"stats":{"Line":0}},{"line":1029,"address":[],"length":0,"stats":{"Line":0}},{"line":1033,"address":[],"length":0,"stats":{"Line":7}}],"covered":13,"coverable":517},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","assets.rs"],"content":"//! Asset command definitions.\n//!\n//! This module defines CLI commands related to asset management, including\n//! upload, download, geometric matching, and metadata operations.\n\nuse crate::commands::metadata::metadata_command;\nuse crate::commands::params::{\n    asset_identifier_group, asset_identifier_multiple_group, file_parameter,\n    folder_identifier_group, folder_path_parameter, folder_uuid_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter, format_with_metadata_parameter,\n    multiple_files_parameter, path_parameter, recursive_parameter,\n    tenant_parameter, uuid_parameter, COMMAND_ASSET, COMMAND_CREATE, COMMAND_CREATE_BATCH,\n    COMMAND_DELETE, COMMAND_DEPENDENCIES, COMMAND_DOWNLOAD, COMMAND_DOWNLOAD_FOLDER, COMMAND_GET,\n    COMMAND_LIST, COMMAND_MATCH, COMMAND_MATCH_FOLDER, COMMAND_PART_MATCH_FOLDER, COMMAND_VISUAL_MATCH, COMMAND_VISUAL_MATCH_FOLDER, FORMAT_CSV, FORMAT_JSON, FORMAT_TREE, PARAMETER_CONCURRENT,\n    PARAMETER_FILE, PARAMETER_FOLDER_PATH, PARAMETER_PROGRESS,\n};\nuse clap::{Arg, ArgAction, Command};\n\n/// Create the asset command with all its subcommands.\npub fn asset_command() -\u003e Command {\n    Command::new(COMMAND_ASSET)\n        .about(\"Manage assets\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get asset details\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n                .group(asset_identifier_multiple_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Create a new asset by uploading a file\")\n                .arg(tenant_parameter())\n                .arg(file_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV])),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE_BATCH)\n                .about(\"Create multiple assets by uploading files matching a glob pattern\")\n                .arg(tenant_parameter())\n                .arg(multiple_files_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n                .arg(\n                    Arg::new(PARAMETER_CONCURRENT)\n                        .long(PARAMETER_CONCURRENT)\n                        .num_args(1)\n                        .required(false)\n                        .default_value(\"5\")\n                        .help(\"Maximum number of concurrent uploads\")\n                        .value_parser(clap::value_parser!(usize)),\n                )\n                .arg(\n                    Arg::new(PARAMETER_PROGRESS)\n                        .long(PARAMETER_PROGRESS)\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Display progress bar during upload\"),\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete an asset\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all assets in a folder\")\n                .visible_alias(\"ls\")\n                .arg(tenant_parameter())\n                .arg(folder_path_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV])),\n        )\n        .subcommand(metadata_command()) // Add the metadata subcommands\n        .subcommand(\n            Command::new(COMMAND_DEPENDENCIES)\n                .about(\"Get dependencies for an asset\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV, FORMAT_TREE]))\n                .arg(recursive_parameter())\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DOWNLOAD)\n                .about(\"Download asset file\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(PARAMETER_FILE)\n                        .num_args(1)\n                        .required(false)\n                        .help(\"Output file path (default: asset filename in current directory)\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DOWNLOAD_FOLDER)\n                .about(\"Download all assets in a folder as a ZIP archive\")\n                .arg(tenant_parameter())\n                .arg(\n                    Arg::new(PARAMETER_FOLDER_PATH)\n                        .num_args(1..) // Accept one or more values\n                        .required(true)\n                        .help(\"Folder path(s) to download (can be provided multiple times or as comma-separated values)\")\n                        .action(clap::ArgAction::Append), // Allow multiple --path flags\n                )\n                .arg(\n                    Arg::new(PARAMETER_FILE)\n                        .num_args(1)\n                        .required(false)\n                        .help(\"Output file path (default: \u003cfolder_name\u003e.zip in the current directory)\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n        )\n    .subcommand(\n        Command::new(COMMAND_MATCH)\n            .about(\"Find geometrically similar assets\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group()),\n    )\n    .subcommand(\n        Command::new(\"part-match\")\n            .about(\"Find geometrically similar assets using part search algorithm\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group()),\n    )\n    .subcommand(\n        Command::new(COMMAND_MATCH_FOLDER)\n            .about(\"Find geometrically similar assets for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n    .subcommand(\n        Command::new(COMMAND_PART_MATCH_FOLDER)\n            .about(\"Find part matches for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n    .subcommand(\n        Command::new(COMMAND_VISUAL_MATCH)\n            .about(\"Find visually similar assets for a specific reference asset\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group())\n    )\n    .subcommand(\n        Command::new(COMMAND_VISUAL_MATCH_FOLDER)\n            .about(\"Find visually similar assets for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n}\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":11}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":22}},{"line":28,"address":[],"length":0,"stats":{"Line":22}},{"line":29,"address":[],"length":0,"stats":{"Line":22}},{"line":30,"address":[],"length":0,"stats":{"Line":22}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":44}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":11}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":22}},{"line":42,"address":[],"length":0,"stats":{"Line":22}},{"line":43,"address":[],"length":0,"stats":{"Line":22}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":22}},{"line":46,"address":[],"length":0,"stats":{"Line":22}},{"line":47,"address":[],"length":0,"stats":{"Line":44}},{"line":50,"address":[],"length":0,"stats":{"Line":11}},{"line":51,"address":[],"length":0,"stats":{"Line":11}},{"line":52,"address":[],"length":0,"stats":{"Line":22}},{"line":53,"address":[],"length":0,"stats":{"Line":22}},{"line":54,"address":[],"length":0,"stats":{"Line":22}},{"line":55,"address":[],"length":0,"stats":{"Line":22}},{"line":56,"address":[],"length":0,"stats":{"Line":22}},{"line":57,"address":[],"length":0,"stats":{"Line":22}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":22}},{"line":60,"address":[],"length":0,"stats":{"Line":44}},{"line":61,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":11}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":11}},{"line":68,"address":[],"length":0,"stats":{"Line":22}},{"line":70,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":22}},{"line":74,"address":[],"length":0,"stats":{"Line":11}},{"line":75,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":81,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":22}},{"line":83,"address":[],"length":0,"stats":{"Line":22}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":85,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":22}},{"line":92,"address":[],"length":0,"stats":{"Line":22}},{"line":93,"address":[],"length":0,"stats":{"Line":22}},{"line":94,"address":[],"length":0,"stats":{"Line":22}},{"line":95,"address":[],"length":0,"stats":{"Line":22}},{"line":96,"address":[],"length":0,"stats":{"Line":44}},{"line":98,"address":[],"length":0,"stats":{"Line":22}},{"line":100,"address":[],"length":0,"stats":{"Line":11}},{"line":101,"address":[],"length":0,"stats":{"Line":11}},{"line":102,"address":[],"length":0,"stats":{"Line":22}},{"line":103,"address":[],"length":0,"stats":{"Line":22}},{"line":104,"address":[],"length":0,"stats":{"Line":22}},{"line":105,"address":[],"length":0,"stats":{"Line":22}},{"line":106,"address":[],"length":0,"stats":{"Line":22}},{"line":107,"address":[],"length":0,"stats":{"Line":44}},{"line":108,"address":[],"length":0,"stats":{"Line":22}},{"line":109,"address":[],"length":0,"stats":{"Line":22}},{"line":112,"address":[],"length":0,"stats":{"Line":11}},{"line":113,"address":[],"length":0,"stats":{"Line":11}},{"line":114,"address":[],"length":0,"stats":{"Line":22}},{"line":115,"address":[],"length":0,"stats":{"Line":22}},{"line":116,"address":[],"length":0,"stats":{"Line":22}},{"line":117,"address":[],"length":0,"stats":{"Line":11}},{"line":118,"address":[],"length":0,"stats":{"Line":11}},{"line":119,"address":[],"length":0,"stats":{"Line":11}},{"line":120,"address":[],"length":0,"stats":{"Line":11}},{"line":121,"address":[],"length":0,"stats":{"Line":11}},{"line":122,"address":[],"length":0,"stats":{"Line":22}},{"line":124,"address":[],"length":0,"stats":{"Line":22}},{"line":127,"address":[],"length":0,"stats":{"Line":11}},{"line":128,"address":[],"length":0,"stats":{"Line":11}},{"line":129,"address":[],"length":0,"stats":{"Line":22}},{"line":130,"address":[],"length":0,"stats":{"Line":11}},{"line":131,"address":[],"length":0,"stats":{"Line":11}},{"line":132,"address":[],"length":0,"stats":{"Line":22}},{"line":133,"address":[],"length":0,"stats":{"Line":11}},{"line":134,"address":[],"length":0,"stats":{"Line":11}},{"line":135,"address":[],"length":0,"stats":{"Line":22}},{"line":137,"address":[],"length":0,"stats":{"Line":11}},{"line":138,"address":[],"length":0,"stats":{"Line":11}},{"line":139,"address":[],"length":0,"stats":{"Line":11}},{"line":140,"address":[],"length":0,"stats":{"Line":11}},{"line":141,"address":[],"length":0,"stats":{"Line":11}},{"line":142,"address":[],"length":0,"stats":{"Line":22}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":147,"address":[],"length":0,"stats":{"Line":11}},{"line":148,"address":[],"length":0,"stats":{"Line":22}},{"line":149,"address":[],"length":0,"stats":{"Line":22}},{"line":150,"address":[],"length":0,"stats":{"Line":22}},{"line":151,"address":[],"length":0,"stats":{"Line":11}},{"line":152,"address":[],"length":0,"stats":{"Line":11}},{"line":153,"address":[],"length":0,"stats":{"Line":11}},{"line":154,"address":[],"length":0,"stats":{"Line":11}},{"line":155,"address":[],"length":0,"stats":{"Line":11}},{"line":156,"address":[],"length":0,"stats":{"Line":11}},{"line":157,"address":[],"length":0,"stats":{"Line":11}},{"line":158,"address":[],"length":0,"stats":{"Line":11}},{"line":159,"address":[],"length":0,"stats":{"Line":22}},{"line":161,"address":[],"length":0,"stats":{"Line":22}},{"line":162,"address":[],"length":0,"stats":{"Line":22}},{"line":163,"address":[],"length":0,"stats":{"Line":22}},{"line":164,"address":[],"length":0,"stats":{"Line":44}},{"line":165,"address":[],"length":0,"stats":{"Line":22}},{"line":168,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":11}},{"line":170,"address":[],"length":0,"stats":{"Line":22}},{"line":171,"address":[],"length":0,"stats":{"Line":22}},{"line":172,"address":[],"length":0,"stats":{"Line":22}},{"line":173,"address":[],"length":0,"stats":{"Line":11}},{"line":174,"address":[],"length":0,"stats":{"Line":11}},{"line":175,"address":[],"length":0,"stats":{"Line":11}},{"line":176,"address":[],"length":0,"stats":{"Line":11}},{"line":177,"address":[],"length":0,"stats":{"Line":11}},{"line":178,"address":[],"length":0,"stats":{"Line":11}},{"line":179,"address":[],"length":0,"stats":{"Line":11}},{"line":180,"address":[],"length":0,"stats":{"Line":11}},{"line":181,"address":[],"length":0,"stats":{"Line":22}},{"line":183,"address":[],"length":0,"stats":{"Line":22}},{"line":184,"address":[],"length":0,"stats":{"Line":22}},{"line":185,"address":[],"length":0,"stats":{"Line":22}},{"line":186,"address":[],"length":0,"stats":{"Line":44}},{"line":187,"address":[],"length":0,"stats":{"Line":22}},{"line":190,"address":[],"length":0,"stats":{"Line":11}},{"line":191,"address":[],"length":0,"stats":{"Line":11}},{"line":192,"address":[],"length":0,"stats":{"Line":22}},{"line":193,"address":[],"length":0,"stats":{"Line":11}},{"line":194,"address":[],"length":0,"stats":{"Line":11}},{"line":195,"address":[],"length":0,"stats":{"Line":11}},{"line":196,"address":[],"length":0,"stats":{"Line":11}},{"line":197,"address":[],"length":0,"stats":{"Line":22}},{"line":198,"address":[],"length":0,"stats":{"Line":11}},{"line":199,"address":[],"length":0,"stats":{"Line":11}},{"line":200,"address":[],"length":0,"stats":{"Line":22}},{"line":202,"address":[],"length":0,"stats":{"Line":11}},{"line":203,"address":[],"length":0,"stats":{"Line":11}},{"line":204,"address":[],"length":0,"stats":{"Line":11}},{"line":205,"address":[],"length":0,"stats":{"Line":11}},{"line":206,"address":[],"length":0,"stats":{"Line":11}},{"line":207,"address":[],"length":0,"stats":{"Line":11}},{"line":208,"address":[],"length":0,"stats":{"Line":11}},{"line":209,"address":[],"length":0,"stats":{"Line":11}},{"line":210,"address":[],"length":0,"stats":{"Line":22}},{"line":212,"address":[],"length":0,"stats":{"Line":11}},{"line":213,"address":[],"length":0,"stats":{"Line":11}},{"line":214,"address":[],"length":0,"stats":{"Line":11}},{"line":215,"address":[],"length":0,"stats":{"Line":22}},{"line":216,"address":[],"length":0,"stats":{"Line":11}},{"line":217,"address":[],"length":0,"stats":{"Line":11}},{"line":219,"address":[],"length":0,"stats":{"Line":22}},{"line":220,"address":[],"length":0,"stats":{"Line":22}},{"line":221,"address":[],"length":0,"stats":{"Line":22}},{"line":222,"address":[],"length":0,"stats":{"Line":44}},{"line":223,"address":[],"length":0,"stats":{"Line":11}},{"line":224,"address":[],"length":0,"stats":{"Line":11}},{"line":225,"address":[],"length":0,"stats":{"Line":11}},{"line":226,"address":[],"length":0,"stats":{"Line":11}},{"line":227,"address":[],"length":0,"stats":{"Line":11}},{"line":228,"address":[],"length":0,"stats":{"Line":11}},{"line":229,"address":[],"length":0,"stats":{"Line":11}},{"line":230,"address":[],"length":0,"stats":{"Line":22}},{"line":232,"address":[],"length":0,"stats":{"Line":11}},{"line":233,"address":[],"length":0,"stats":{"Line":11}},{"line":234,"address":[],"length":0,"stats":{"Line":11}},{"line":235,"address":[],"length":0,"stats":{"Line":22}},{"line":236,"address":[],"length":0,"stats":{"Line":11}},{"line":237,"address":[],"length":0,"stats":{"Line":11}},{"line":241,"address":[],"length":0,"stats":{"Line":11}},{"line":242,"address":[],"length":0,"stats":{"Line":11}},{"line":243,"address":[],"length":0,"stats":{"Line":22}},{"line":244,"address":[],"length":0,"stats":{"Line":11}},{"line":245,"address":[],"length":0,"stats":{"Line":11}},{"line":246,"address":[],"length":0,"stats":{"Line":11}},{"line":247,"address":[],"length":0,"stats":{"Line":11}},{"line":248,"address":[],"length":0,"stats":{"Line":22}},{"line":249,"address":[],"length":0,"stats":{"Line":11}},{"line":250,"address":[],"length":0,"stats":{"Line":11}},{"line":251,"address":[],"length":0,"stats":{"Line":22}},{"line":253,"address":[],"length":0,"stats":{"Line":11}},{"line":254,"address":[],"length":0,"stats":{"Line":11}},{"line":255,"address":[],"length":0,"stats":{"Line":11}},{"line":256,"address":[],"length":0,"stats":{"Line":11}},{"line":257,"address":[],"length":0,"stats":{"Line":11}},{"line":258,"address":[],"length":0,"stats":{"Line":11}},{"line":259,"address":[],"length":0,"stats":{"Line":11}},{"line":260,"address":[],"length":0,"stats":{"Line":11}},{"line":261,"address":[],"length":0,"stats":{"Line":22}},{"line":263,"address":[],"length":0,"stats":{"Line":11}},{"line":264,"address":[],"length":0,"stats":{"Line":11}},{"line":265,"address":[],"length":0,"stats":{"Line":11}},{"line":266,"address":[],"length":0,"stats":{"Line":22}},{"line":267,"address":[],"length":0,"stats":{"Line":11}},{"line":268,"address":[],"length":0,"stats":{"Line":11}},{"line":270,"address":[],"length":0,"stats":{"Line":22}},{"line":271,"address":[],"length":0,"stats":{"Line":22}},{"line":272,"address":[],"length":0,"stats":{"Line":22}},{"line":273,"address":[],"length":0,"stats":{"Line":44}},{"line":274,"address":[],"length":0,"stats":{"Line":11}},{"line":275,"address":[],"length":0,"stats":{"Line":11}},{"line":276,"address":[],"length":0,"stats":{"Line":11}},{"line":277,"address":[],"length":0,"stats":{"Line":11}},{"line":278,"address":[],"length":0,"stats":{"Line":11}},{"line":279,"address":[],"length":0,"stats":{"Line":11}},{"line":280,"address":[],"length":0,"stats":{"Line":11}},{"line":281,"address":[],"length":0,"stats":{"Line":22}},{"line":283,"address":[],"length":0,"stats":{"Line":11}},{"line":284,"address":[],"length":0,"stats":{"Line":11}},{"line":285,"address":[],"length":0,"stats":{"Line":11}},{"line":286,"address":[],"length":0,"stats":{"Line":22}},{"line":287,"address":[],"length":0,"stats":{"Line":11}},{"line":288,"address":[],"length":0,"stats":{"Line":11}},{"line":292,"address":[],"length":0,"stats":{"Line":11}},{"line":293,"address":[],"length":0,"stats":{"Line":11}},{"line":294,"address":[],"length":0,"stats":{"Line":22}},{"line":295,"address":[],"length":0,"stats":{"Line":22}},{"line":296,"address":[],"length":0,"stats":{"Line":22}},{"line":297,"address":[],"length":0,"stats":{"Line":22}},{"line":298,"address":[],"length":0,"stats":{"Line":22}},{"line":299,"address":[],"length":0,"stats":{"Line":22}},{"line":300,"address":[],"length":0,"stats":{"Line":44}},{"line":301,"address":[],"length":0,"stats":{"Line":22}},{"line":304,"address":[],"length":0,"stats":{"Line":11}},{"line":305,"address":[],"length":0,"stats":{"Line":11}},{"line":306,"address":[],"length":0,"stats":{"Line":22}},{"line":307,"address":[],"length":0,"stats":{"Line":11}},{"line":308,"address":[],"length":0,"stats":{"Line":11}},{"line":309,"address":[],"length":0,"stats":{"Line":11}},{"line":310,"address":[],"length":0,"stats":{"Line":11}},{"line":311,"address":[],"length":0,"stats":{"Line":22}},{"line":312,"address":[],"length":0,"stats":{"Line":11}},{"line":313,"address":[],"length":0,"stats":{"Line":11}},{"line":314,"address":[],"length":0,"stats":{"Line":22}},{"line":316,"address":[],"length":0,"stats":{"Line":11}},{"line":317,"address":[],"length":0,"stats":{"Line":11}},{"line":318,"address":[],"length":0,"stats":{"Line":11}},{"line":319,"address":[],"length":0,"stats":{"Line":22}},{"line":320,"address":[],"length":0,"stats":{"Line":11}},{"line":321,"address":[],"length":0,"stats":{"Line":11}},{"line":323,"address":[],"length":0,"stats":{"Line":22}},{"line":324,"address":[],"length":0,"stats":{"Line":22}},{"line":325,"address":[],"length":0,"stats":{"Line":22}},{"line":326,"address":[],"length":0,"stats":{"Line":44}},{"line":327,"address":[],"length":0,"stats":{"Line":11}},{"line":328,"address":[],"length":0,"stats":{"Line":11}},{"line":329,"address":[],"length":0,"stats":{"Line":11}},{"line":330,"address":[],"length":0,"stats":{"Line":11}},{"line":331,"address":[],"length":0,"stats":{"Line":11}},{"line":332,"address":[],"length":0,"stats":{"Line":11}},{"line":333,"address":[],"length":0,"stats":{"Line":11}},{"line":334,"address":[],"length":0,"stats":{"Line":22}},{"line":336,"address":[],"length":0,"stats":{"Line":11}},{"line":337,"address":[],"length":0,"stats":{"Line":11}},{"line":338,"address":[],"length":0,"stats":{"Line":11}},{"line":339,"address":[],"length":0,"stats":{"Line":22}},{"line":340,"address":[],"length":0,"stats":{"Line":11}},{"line":341,"address":[],"length":0,"stats":{"Line":11}}],"covered":273,"coverable":273},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","auth.rs"],"content":"//! Authentication command definitions.\n//!\n//! This module defines CLI commands related to authentication and session management.\n\nuse crate::commands::params::{\n    client_id_parameter, client_secret_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter,\n    COMMAND_AUTH, COMMAND_GET, COMMAND_LOGIN, COMMAND_LOGOUT\n};\nuse clap::Command;\n\n/// Create the authentication command with all its subcommands.\npub fn auth_command() -\u003e Command {\n    Command::new(COMMAND_AUTH)\n        .about(\"Authentication operations\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_LOGIN)\n                .about(\"Login using client credentials\")\n                .arg(client_id_parameter())\n                .arg(client_secret_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LOGOUT)\n                .about(\"Logout and clear session\"),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get current access token\")\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter()),\n        )\n}","traces":[{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":14,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":44}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}}],"covered":13,"coverable":13},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","config.rs"],"content":"//! Configuration command definitions.\n//!\n//! This module defines CLI commands related to configuration management.\n\nuse crate::commands::params::{\n    file_parameter, format_parameter, format_pretty_parameter, format_with_headers_parameter,\n    output_file_parameter, api_url_parameter, ui_url_parameter, auth_url_parameter,\n    COMMAND_CONFIG, COMMAND_EXPORT, COMMAND_GET, COMMAND_IMPORT, COMMAND_ENVIRONMENT,\n    COMMAND_ADD, COMMAND_USE, COMMAND_REMOVE, COMMAND_ENVIRONMENT_LIST, COMMAND_ENVIRONMENT_GET, COMMAND_RESET, PARAMETER_NAME,\n};\nuse clap::Arg;\nuse clap::Command;\n\n/// Create the config command with all its subcommands.\npub fn config_command() -\u003e Command {\n    Command::new(COMMAND_CONFIG)\n        .about(\"Configuration management\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get configuration details\")\n                .arg(format_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter())\n                .subcommand(Command::new(\"path\").about(\"Show configuration file path\")),\n        )\n        .subcommand(\n            Command::new(COMMAND_EXPORT)\n                .about(\"Export configuration to file\")\n                .arg(output_file_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_IMPORT)\n                .about(\"Import configuration from file\")\n                .arg(file_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_ENVIRONMENT)\n                .about(\"Manage environment configurations\")\n                .subcommand_required(true)\n                .subcommand(\n                    Command::new(COMMAND_ADD)\n                        .about(\"Add a new environment configuration\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(true)\n                            .help(\"Name of the environment\"))\n                        .arg(api_url_parameter())\n                        .arg(ui_url_parameter())\n                        .arg(auth_url_parameter()),\n                )\n                .subcommand(\n                    Command::new(COMMAND_USE)\n                        .about(\"Switch to an environment\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(false)\n                            .help(\"Name of the environment to switch to\")),\n                )\n                .subcommand(\n                    Command::new(COMMAND_REMOVE)\n                        .about(\"Remove an environment\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(true)\n                            .help(\"Name of the environment to remove\")),\n                )\n                .subcommand(\n                    Command::new(COMMAND_ENVIRONMENT_LIST)\n                        .about(\"List all environments\")\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_with_headers_parameter()),\n                )\n                .subcommand(\n                    Command::new(COMMAND_RESET)\n                        .about(\"Reset all environment configurations to blank state\"),\n                )\n                .subcommand(\n                    Command::new(COMMAND_ENVIRONMENT_GET)\n                        .about(\"Get environment details\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(false)\n                            .help(\"Name of the environment to get details for (defaults to active environment)\"))\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_with_headers_parameter()),\n                ),\n        )\n}\n","traces":[{"line":15,"address":[],"length":0,"stats":{"Line":11}},{"line":16,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":25,"address":[],"length":0,"stats":{"Line":33}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":11}},{"line":34,"address":[],"length":0,"stats":{"Line":11}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":11}},{"line":40,"address":[],"length":0,"stats":{"Line":11}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":11}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":11}},{"line":46,"address":[],"length":0,"stats":{"Line":11}},{"line":47,"address":[],"length":0,"stats":{"Line":11}},{"line":48,"address":[],"length":0,"stats":{"Line":11}},{"line":49,"address":[],"length":0,"stats":{"Line":22}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":22}},{"line":53,"address":[],"length":0,"stats":{"Line":11}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":22}},{"line":57,"address":[],"length":0,"stats":{"Line":11}},{"line":58,"address":[],"length":0,"stats":{"Line":11}},{"line":59,"address":[],"length":0,"stats":{"Line":11}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":11}},{"line":65,"address":[],"length":0,"stats":{"Line":22}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":11}},{"line":68,"address":[],"length":0,"stats":{"Line":11}},{"line":69,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":11}},{"line":74,"address":[],"length":0,"stats":{"Line":44}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":76,"address":[],"length":0,"stats":{"Line":22}},{"line":78,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":11}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":11}},{"line":85,"address":[],"length":0,"stats":{"Line":22}},{"line":86,"address":[],"length":0,"stats":{"Line":11}},{"line":87,"address":[],"length":0,"stats":{"Line":11}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":90,"address":[],"length":0,"stats":{"Line":44}},{"line":91,"address":[],"length":0,"stats":{"Line":22}},{"line":92,"address":[],"length":0,"stats":{"Line":22}}],"covered":64,"coverable":64},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","context.rs"],"content":"//! Context command definitions.\n//!\n//! This module defines CLI commands related to context management.\n\nuse crate::commands::params::{\n    tenant_id_parameter, tenant_name_parameter, COMMAND_CLEAR, COMMAND_CONTEXT, COMMAND_GET,\n    COMMAND_SET, COMMAND_TENANT,\n};\nuse clap::Command;\n\n/// Create the context command with all its subcommands.\npub fn context_command() -\u003e Command {\n    Command::new(COMMAND_CONTEXT)\n        .about(\"Context management\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_SET).about(\"Set context\").subcommand(\n                Command::new(COMMAND_TENANT)\n                    .about(\"Set or select an active tenant\")\n                    .arg(tenant_name_parameter().required(false))\n                    .arg(tenant_id_parameter())\n                    .arg(crate::commands::params::refresh_parameter()),\n            ),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get current context\")\n                .subcommand_required(false) // Allow no subcommand for context get\n                .subcommand(\n                    Command::new(COMMAND_TENANT)\n                        .about(\"Print the active tenant\")\n                        .arg(crate::commands::params::format_with_headers_parameter())\n                        .arg(crate::commands::params::format_with_metadata_parameter())\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                )\n                .arg(crate::commands::params::format_with_headers_parameter())\n                .arg(crate::commands::params::format_with_metadata_parameter())\n                .arg(crate::commands::params::format_pretty_parameter())\n                .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n        )\n        .subcommand(\n            Command::new(COMMAND_CLEAR)\n                .about(\"Clear context\")\n                .subcommand(Command::new(COMMAND_TENANT).about(\"Clear the active tenant\")),\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":33}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":33}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":22}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":44}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":44}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":11}},{"line":45,"address":[],"length":0,"stats":{"Line":33}}],"covered":25,"coverable":25},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","folder.rs"],"content":"//! Folder command definitions.\n//!\n//! This module defines CLI commands related to folder management.\n\nuse crate::commands::params::{\n    folder_identifier_group, folder_path_parameter, folder_uuid_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter, format_with_metadata_parameter,\n    name_parameter, parent_folder_identifier_group, parent_folder_path_parameter, parent_folder_uuid_parameter, tenant_parameter,\n    COMMAND_CREATE, COMMAND_DELETE, COMMAND_FOLDER, COMMAND_GET,\n    COMMAND_LIST,\n};\nuse clap::Command;\n\n/// Create the folder command with all its subcommands.\npub fn folder_command() -\u003e Command {\n    Command::new(COMMAND_FOLDER)\n        .about(\"Manage folders\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Create a new folder\")\n                .arg(tenant_parameter())\n                .arg(name_parameter())\n                .arg(parent_folder_path_parameter())\n                .arg(parent_folder_uuid_parameter())\n                .group(parent_folder_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get folder details\")\n                .arg(tenant_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all folders\")\n                .visible_alias(\"ls\")\n                .arg(tenant_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete a folder\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .arg(\n                    clap::Arg::new(\"force\")\n                        .long(\"force\")\n                        .short('f')\n                        .action(clap::ArgAction::SetTrue)\n                        .help(\"Force deletion of non-empty folder by deleting all contents first\"),\n                )\n                .group(folder_identifier_group()),\n        )\n}\n","traces":[{"line":15,"address":[],"length":0,"stats":{"Line":11}},{"line":16,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":25,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":22}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":22}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":36,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":11}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":22}},{"line":46,"address":[],"length":0,"stats":{"Line":22}},{"line":47,"address":[],"length":0,"stats":{"Line":22}},{"line":48,"address":[],"length":0,"stats":{"Line":22}},{"line":49,"address":[],"length":0,"stats":{"Line":22}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":22}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":11}},{"line":57,"address":[],"length":0,"stats":{"Line":22}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":22}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":61,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":22}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":22}}],"covered":43,"coverable":43},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","metadata.rs"],"content":"//! Metadata command definitions.\n//!\n//! This module defines CLI commands related to asset metadata management.\n\nuse crate::commands::params::{\n    format_parameter, format_pretty_parameter, format_with_headers_parameter, path_parameter, tenant_parameter, uuid_parameter, COMMAND_CREATE,\n    COMMAND_DELETE, COMMAND_GET, COMMAND_METADATA,\n};\nuse clap::{Arg, ArgAction, ArgGroup, Command};\n\n/// Create the metadata command with all its subcommands.\npub fn metadata_command() -\u003e Command {\n    Command::new(COMMAND_METADATA)\n        .about(\"Manage asset metadata\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get metadata for an asset\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Add metadata to an asset\")\n                .visible_alias(\"update\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(\"name\")\n                        .long(\"name\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property name\")\n                )\n                .arg(\n                    Arg::new(\"value\")\n                        .long(\"value\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property value\")\n                )\n                .arg(\n                    Arg::new(\"type\")\n                        .long(\"type\")\n                        .num_args(1)\n                        .required(false)\n                        .value_parser([\"text\", \"number\", \"boolean\"])\n                        .default_value(\"text\")\n                        .help(\"Metadata field type (text, number, boolean) - default: text\")\n                )\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete specific metadata fields from an asset\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(\"field_name\")\n                        .short('n')\n                        .long(\"name\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property name (can be provided multiple times or as comma-separated list)\")\n                        .action(ArgAction::Append)\n                )\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(\"create-batch\")\n                .about(\"Create metadata for multiple assets from a CSV file\")\n                .visible_alias(\"update-batch\")\n                .long_about(\n                    \"Create metadata for multiple assets from a CSV file.\\n\\n\\\n                    The CSV file must have the following columns in the specified order:\\n\\\n                    - ASSET_PATH: The full path of the asset in Physna\\n\\\n                    - NAME: The name of the metadata field to set\\n\\\n                    - VALUE: The value to set for the metadata field\\n\\n\\\n                    CSV File Requirements:\\n\\\n                    - The first row must contain the headers ASSET_PATH,NAME,VALUE\\n\\\n                    - The file must be UTF-8 encoded\\n\\\n                    - Values containing commas, quotes, or newlines must be enclosed in double quotes\\n\\\n                    - Empty rows will be ignored\\n\\\n                    - Each row represents a single metadata field assignment for an asset\\n\\n\\\n                    If an asset has multiple metadata fields to update, include multiple rows \\n\\\n                    with the same ASSET_PATH but different NAME and VALUE combinations.\\n\\n\\\n                    Example CSV format:\\n\\\n                    ASSET_PATH,NAME,VALUE\\n\\\n                    folder/subfolder/asset1.stl,Material,Steel\\n\\\n                    folder/subfolder/asset1.stl,Weight,\\\"15.5 kg\\\"\\n\\\n                    folder/subfolder/asset2.ipt,Material,Aluminum\\n\\n\\\n                    The command will group metadata by asset path and update all metadata \\\n                    for each asset in a single API call.\"\n                )\n                .arg(tenant_parameter())\n                .arg(\n                    Arg::new(\"csv-file\")\n                        .long(\"csv-file\")\n                        .num_args(1)\n                        .required(true)\n                        .help(\"Path to the CSV file containing metadata entries\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n                .arg(\n                    Arg::new(\"progress\")\n                        .long(\"progress\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Display progress bar during processing\"),\n                ),\n        )\n        .subcommand(\n            Command::new(\"inference\")\n                .about(\"Apply metadata from a reference asset to geometrically similar assets\")\n                .arg(path_parameter().required(true))\n                .arg(\n                    Arg::new(\"inference_name\")\n                        .long(\"name\")\n                        .num_args(1..)\n                        .action(ArgAction::Append)\n                        .required(true)\n                        .help(\"Metadata field name(s) to copy (can be specified multiple times or comma-separated)\")\n                )\n                .arg(\n                    Arg::new(\"threshold\")\n                        .short('s')\n                        .long(\"threshold\")\n                        .num_args(1)\n                        .required(false)\n                        .default_value(\"80.0\")\n                        .help(\"Similarity threshold (0.00 to 100.00)\")\n                        .value_parser(clap::value_parser!(f64)),\n                )\n                .arg(\n                    Arg::new(\"recursive\")\n                        .long(\"recursive\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Apply inference recursively to all found similar assets\"),\n                )\n                .arg(\n                    Arg::new(\"exclusive\")\n                        .long(\"exclusive\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Only apply inference to assets in the same parent folder as the reference asset\"),\n                )\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(tenant_parameter())\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":22}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":22,"address":[],"length":0,"stats":{"Line":44}},{"line":23,"address":[],"length":0,"stats":{"Line":11}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":11}},{"line":33,"address":[],"length":0,"stats":{"Line":11}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":36,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":11}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":11}},{"line":40,"address":[],"length":0,"stats":{"Line":11}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":22}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":45,"address":[],"length":0,"stats":{"Line":11}},{"line":46,"address":[],"length":0,"stats":{"Line":11}},{"line":47,"address":[],"length":0,"stats":{"Line":11}},{"line":48,"address":[],"length":0,"stats":{"Line":11}},{"line":49,"address":[],"length":0,"stats":{"Line":11}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":11}},{"line":53,"address":[],"length":0,"stats":{"Line":11}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":11}},{"line":57,"address":[],"length":0,"stats":{"Line":11}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":11}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":22}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":70,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":22}},{"line":74,"address":[],"length":0,"stats":{"Line":22}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":76,"address":[],"length":0,"stats":{"Line":11}},{"line":77,"address":[],"length":0,"stats":{"Line":11}},{"line":78,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":81,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":22}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":86,"address":[],"length":0,"stats":{"Line":44}},{"line":87,"address":[],"length":0,"stats":{"Line":11}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":22}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":11}},{"line":95,"address":[],"length":0,"stats":{"Line":11}},{"line":96,"address":[],"length":0,"stats":{"Line":11}},{"line":97,"address":[],"length":0,"stats":{"Line":11}},{"line":98,"address":[],"length":0,"stats":{"Line":11}},{"line":120,"address":[],"length":0,"stats":{"Line":22}},{"line":121,"address":[],"length":0,"stats":{"Line":11}},{"line":122,"address":[],"length":0,"stats":{"Line":11}},{"line":123,"address":[],"length":0,"stats":{"Line":11}},{"line":124,"address":[],"length":0,"stats":{"Line":11}},{"line":125,"address":[],"length":0,"stats":{"Line":11}},{"line":126,"address":[],"length":0,"stats":{"Line":11}},{"line":127,"address":[],"length":0,"stats":{"Line":22}},{"line":129,"address":[],"length":0,"stats":{"Line":11}},{"line":130,"address":[],"length":0,"stats":{"Line":11}},{"line":131,"address":[],"length":0,"stats":{"Line":11}},{"line":132,"address":[],"length":0,"stats":{"Line":22}},{"line":133,"address":[],"length":0,"stats":{"Line":11}},{"line":134,"address":[],"length":0,"stats":{"Line":11}},{"line":138,"address":[],"length":0,"stats":{"Line":11}},{"line":139,"address":[],"length":0,"stats":{"Line":11}},{"line":140,"address":[],"length":0,"stats":{"Line":33}},{"line":141,"address":[],"length":0,"stats":{"Line":11}},{"line":142,"address":[],"length":0,"stats":{"Line":11}},{"line":143,"address":[],"length":0,"stats":{"Line":11}},{"line":144,"address":[],"length":0,"stats":{"Line":22}},{"line":145,"address":[],"length":0,"stats":{"Line":22}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":147,"address":[],"length":0,"stats":{"Line":11}},{"line":149,"address":[],"length":0,"stats":{"Line":11}},{"line":150,"address":[],"length":0,"stats":{"Line":11}},{"line":151,"address":[],"length":0,"stats":{"Line":11}},{"line":152,"address":[],"length":0,"stats":{"Line":11}},{"line":153,"address":[],"length":0,"stats":{"Line":11}},{"line":154,"address":[],"length":0,"stats":{"Line":11}},{"line":155,"address":[],"length":0,"stats":{"Line":11}},{"line":156,"address":[],"length":0,"stats":{"Line":11}},{"line":157,"address":[],"length":0,"stats":{"Line":22}},{"line":159,"address":[],"length":0,"stats":{"Line":11}},{"line":160,"address":[],"length":0,"stats":{"Line":11}},{"line":161,"address":[],"length":0,"stats":{"Line":11}},{"line":162,"address":[],"length":0,"stats":{"Line":22}},{"line":163,"address":[],"length":0,"stats":{"Line":11}},{"line":164,"address":[],"length":0,"stats":{"Line":11}},{"line":166,"address":[],"length":0,"stats":{"Line":11}},{"line":167,"address":[],"length":0,"stats":{"Line":11}},{"line":168,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":22}},{"line":170,"address":[],"length":0,"stats":{"Line":11}},{"line":171,"address":[],"length":0,"stats":{"Line":11}},{"line":173,"address":[],"length":0,"stats":{"Line":44}},{"line":174,"address":[],"length":0,"stats":{"Line":22}},{"line":175,"address":[],"length":0,"stats":{"Line":22}},{"line":176,"address":[],"length":0,"stats":{"Line":22}}],"covered":120,"coverable":120},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","mod.rs"],"content":"//! CLI command definitions and argument parsing.\n//!\n//! This module defines all the CLI commands and their arguments using the clap crate.\n//! It provides a structured way to define the command-line interface for the Physna CLI.\n//! The implementation has been modularized into separate files for better maintainability.\n\nuse clap::{ArgMatches, Command};\n\n// Import all submodules\npub mod assets;\npub mod auth;\npub mod config;\npub mod context;\npub mod folder;\npub mod metadata;\npub mod params;\npub mod tenant;\n\n/// Create and configure all CLI commands and their arguments.\n///\n/// This function defines the entire command-line interface for the Physna CLI,\n/// including all subcommands, arguments, and their relationships by combining\n/// the modularized command definitions.\n///\n/// # Returns\n///\n/// An `ArgMatches` instance containing the parsed command-line arguments.\npub fn create_cli_commands() -\u003e ArgMatches {\n    Command::new(env!(\"CARGO_PKG_NAME\"))\n        .version(env!(\"CARGO_PKG_VERSION\"))\n        .author(env!(\"CARGO_PKG_AUTHORS\"))\n        .about(env!(\"CARGO_PKG_DESCRIPTION\"))\n        .propagate_version(true)\n        .subcommand_required(true)\n        .arg_required_else_help(true)\n        // Add all the modularized command groups\n        .subcommand(tenant::tenant_command())\n        .subcommand(folder::folder_command())\n        .subcommand(auth::auth_command())\n        .subcommand(assets::asset_command())\n        .subcommand(context::context_command())\n        .subcommand(config::config_command())\n        .get_matches()\n}\n","traces":[{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":11}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":22}},{"line":42,"address":[],"length":0,"stats":{"Line":22}}],"covered":11,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","params.rs"],"content":"//! Shared command parameters for all CLI commands.\n//!\n//! This module defines common parameters that are used across multiple command modules.\n//! It provides a centralized place to define parameter names and common argument configurations.\n\nuse crate::format::OutputFormat;\nuse clap::{Arg, ArgAction, ArgGroup};\nuse std::path::PathBuf;\nuse uuid::Uuid;\n\n// CRUD operations\npub const COMMAND_CREATE: \u0026str = \"create\";\npub const COMMAND_CREATE_BATCH: \u0026str = \"create-batch\";\npub const COMMAND_GET: \u0026str = \"get\";\npub const COMMAND_LIST: \u0026str = \"list\";\npub const COMMAND_UPDATE: \u0026str = \"update\";\npub const COMMAND_DELETE: \u0026str = \"delete\";\n\n// Asset commands\npub const COMMAND_ASSET: \u0026str = \"asset\";\npub const COMMAND_MATCH: \u0026str = \"geometric-match\";\npub const COMMAND_MATCH_FOLDER: \u0026str = \"geometric-match-folder\";\npub const COMMAND_PART_MATCH: \u0026str = \"part-match\"; // Allow non snake case since it's used as a command name\npub const COMMAND_PART_MATCH_FOLDER: \u0026str = \"part-match-folder\"; // Allow non snake case since it's used as a command name\npub const COMMAND_VISUAL_MATCH: \u0026str = \"visual-match\"; // Allow non snake case since it's used as a command name\npub const COMMAND_VISUAL_MATCH_FOLDER: \u0026str = \"visual-match-folder\"; // Allow non snake case since it's used as a command name\npub const COMMAND_METADATA: \u0026str = \"metadata\";\npub const COMMAND_INFERENCE: \u0026str = \"inference\"; // Allow non snake case since it's used as a command name\npub const COMMAND_DEPENDENCIES: \u0026str = \"dependencies\";\npub const COMMAND_DOWNLOAD: \u0026str = \"download\";\npub const COMMAND_DOWNLOAD_FOLDER: \u0026str = \"download-folder\";\n\n// Auth commands\npub const COMMAND_AUTH: \u0026str = \"auth\";\npub const COMMAND_LOGIN: \u0026str = \"login\";\npub const COMMAND_LOGOUT: \u0026str = \"logout\";\n//\n// Tenant commands\npub const COMMAND_TENANT: \u0026str = \"tenant\";\n\n// Folder commands\npub const COMMAND_FOLDER: \u0026str = \"folder\";\npub const COMMAND_FILE: \u0026str = \"file\";\n\n// Context commands\npub const COMMAND_CONTEXT: \u0026str = \"context\";\npub const COMMAND_SET: \u0026str = \"set\";\npub const COMMAND_CLEAR: \u0026str = \"clear\";\n\n// Config commands\npub const COMMAND_CONFIG: \u0026str = \"config\";\npub const COMMAND_EXPORT: \u0026str = \"export\";\npub const COMMAND_IMPORT: \u0026str = \"import\";\npub const COMMAND_ENVIRONMENT: \u0026str = \"environment\";\npub const COMMAND_ADD: \u0026str = \"add\";\npub const COMMAND_USE: \u0026str = \"use\";\npub const COMMAND_REMOVE: \u0026str = \"remove\";\npub const COMMAND_ENVIRONMENT_LIST: \u0026str = \"list\";\npub const COMMAND_ENVIRONMENT_GET: \u0026str = \"get\";\npub const COMMAND_RESET: \u0026str = \"reset\";\n\n// Environment parameter names\npub const PARAMETER_API_URL: \u0026str = \"api-url\";\npub const PARAMETER_UI_URL: \u0026str = \"ui-url\";\npub const PARAMETER_AUTH_URL: \u0026str = \"auth-url\";\n\n// Parameter names\npub const PARAMETER_FORMAT: \u0026str = \"format\";\npub const PARAMETER_METADATA: \u0026str = \"metadata\";\npub const PARAMETER_PRETTY: \u0026str = \"pretty\";\npub const PARAMETER_HEADERS: \u0026str = \"headers\";\npub const PARAMETER_OUTPUT: \u0026str = \"output\";\npub const PARAMETER_FILE: \u0026str = \"file\";\npub const PARAMETER_FILES: \u0026str = \"files\";\npub const PARAMETER_CLIENT_ID: \u0026str = \"client-id\";\npub const PARAMETER_CLIENT_SECRET: \u0026str = \"client-secret\";\npub const PARAMETER_UUID: \u0026str = \"uuid\";\npub const PARAMETER_NAME: \u0026str = \"name\";\npub const PARAMETER_TENANT_NAME: \u0026str = PARAMETER_NAME;\npub const PARAMETER_TENANT_ID: \u0026str = \"id\";\npub const PARAMETER_TENANT: \u0026str = \"tenant\";\npub const PARAMETER_TENANT_UUID: \u0026str = \"tenant-uuid\";\npub const PARAMETER_FOLDER_UUID: \u0026str = \"folder-uuid\";\npub const PARAMETER_FOLDER_PATH: \u0026str = \"folder-path\";\npub const PARAMETER_PARENT_FOLDER_UUID: \u0026str = \"parent-folder-uuid\";\npub const PARAMETER_PARENT_FOLDER_PATH: \u0026str = \"parent-folder-path\";\npub const PARAMETER_PATH: \u0026str = \"path\";\npub const PARAMETER_REFRESH: \u0026str = \"refresh\";\npub const PARAMETER_RECURSIVE: \u0026str = \"recursive\";\npub const PARAMETER_CONCURRENT: \u0026str = \"concurrent\";\npub const PARAMETER_PROGRESS: \u0026str = \"progress\";\n\n// Format options\npub const FORMAT_CSV: \u0026str = \"csv\";\npub const FORMAT_JSON: \u0026str = \"json\";\npub const FORMAT_TREE: \u0026str = \"tree\";\n\n/// Create the global format parameter.\n///\n/// This parameter is used across multiple commands for output formatting.\npub fn format_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FORMAT)\n        .short('f')\n        .long(PARAMETER_FORMAT)\n        .num_args(1)\n        .required(false)\n        .env(\"PCLI2_FORMAT\")\n        .default_value(\"json\")\n        .global(true)\n        .help(\"Output data format\")\n        .value_parser(OutputFormat::names())\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_pretty_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PRETTY)\n        .long(PARAMETER_PRETTY)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Format the output pretty\")\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_with_headers_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_HEADERS)\n        .long(PARAMETER_HEADERS)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .env(\"PCLI2_HEADERS\")\n        .help(\"Format the output with headers\")\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_with_metadata_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_METADATA)\n        .long(PARAMETER_METADATA)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Format the output to include metadata\")\n}\n\n/// Create the global output file parameter.\npub fn output_file_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_OUTPUT)\n        .short('o')\n        .long(PARAMETER_OUTPUT)\n        .num_args(1)\n        .required(false)\n        .help(\"Output file path\")\n        .value_parser(clap::value_parser!(PathBuf))\n}\n\n/// Create the global input file parameter.\npub fn file_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FILE)\n        .long(PARAMETER_FILE)\n        .num_args(1)\n        .required(false)\n        .help(\"Input file path\")\n        .value_parser(clap::value_parser!(PathBuf))\n}\n\npub fn multiple_files_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FILES)\n        .long(PARAMETER_FILES)\n        .num_args(1)\n        .required(true)\n        .help(\"Glob pattern to match files to upload (e.g., \\\"data/puzzle/*.STL\\\")\")\n        .value_parser(clap::value_parser!(String))\n}\n\n/// Create the client ID parameter.\npub fn client_id_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_CLIENT_ID)\n        .long(PARAMETER_CLIENT_ID)\n        .num_args(1)\n        .required(false)\n        .help(\"Client ID for OAuth2 authentication\")\n}\n\n/// Create the client secret parameter.\npub fn client_secret_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_CLIENT_SECRET)\n        .long(PARAMETER_CLIENT_SECRET)\n        .num_args(1)\n        .required(false)\n        .help(\"Client secret for OAuth2 authentication\")\n}\n\n/// Create the UUID parameter.\npub fn uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_UUID)\n        .short('u')\n        .long(PARAMETER_UUID)\n        .required(false) // this parameter should be used in a group with the patheee\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Resource UUID\")\n}\n\n/// Create the Folder UUID parameter.\npub fn folder_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FOLDER_UUID)\n        .long(PARAMETER_FOLDER_UUID)\n        .num_args(1)\n        .required(true)\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Resource's folder UUID\")\n}\n\n/// Create the path parameter.\npub fn folder_path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FOLDER_PATH)\n        .long(PARAMETER_FOLDER_PATH)\n        .num_args(1)\n        .required(true)\n        .help(\"Folder path (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create the parent folder UUID parameter.\npub fn parent_folder_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PARENT_FOLDER_UUID)\n        .long(PARAMETER_PARENT_FOLDER_UUID)\n        .num_args(1)\n        .required(true)\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Parent folder UUID where the new folder will be created\")\n}\n\n/// Create the parent folder path parameter.\npub fn parent_folder_path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PARENT_FOLDER_PATH)\n        .long(PARAMETER_PARENT_FOLDER_PATH)\n        .num_args(1)\n        .required(true)\n        .help(\"Parent folder path where the new folder will be created (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create asset idenitfier group: it must be either --uuid or --path\npub fn asset_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"asset-identifier\")\n        .args([PARAMETER_UUID, PARAMETER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\npub fn asset_identifier_multiple_group() -\u003e ArgGroup {\n    ArgGroup::new(\"asset-identifier\")\n        .args([PARAMETER_UUID, PARAMETER_PATH])\n        .multiple(true)\n        .required(true)\n}\n\n/// Create the name parameter.\npub fn name_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_NAME)\n        .short('n')\n        .long(PARAMETER_NAME)\n        .num_args(1)\n        .required(false)\n        .help(\"Resource name\")\n}\n\n/// Create the tenant name parameter.\npub fn tenant_name_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_NAME)\n        .long(PARAMETER_TENANT_NAME)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant short name (as shown in tenant list)\")\n}\n\n/// Create the name parameter.\npub fn tenant_id_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_ID)\n        .long(PARAMETER_TENANT_ID)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant UUID\")\n}\n\n/// Create the tenant UUID parameter.\npub fn tenant_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_UUID)\n        .long(PARAMETER_TENANT_UUID)\n        .num_args(1)\n        .required(false)\n        .value_parser(clap::value_parser!(uuid::Uuid))\n        .help(\"Tenant UUID\")\n}\n\n/// Create the tenant parameter.\npub fn tenant_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT)\n        .short('t')\n        .long(PARAMETER_TENANT)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant ID or alias\")\n}\n\n/// Create folder identifier group: it must be either --folder-uuid or --folder-path\npub fn folder_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"folder-identifier\")\n        .args([PARAMETER_FOLDER_UUID, PARAMETER_FOLDER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\n/// Create parent folder identifier group: it must be either --parent-folder-uuid or --parent-folder-path\npub fn parent_folder_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"parent-folder-identifier\")\n        .args([PARAMETER_PARENT_FOLDER_UUID, PARAMETER_PARENT_FOLDER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\n/// Create tenant identifier group: it must be either --tenant-uuid or --tenant-name\npub fn tenant_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"tenant-identifier\")\n        .args([PARAMETER_TENANT_UUID, PARAMETER_TENANT_NAME])  // Using PARAMETER_TENANT_UUID for UUID and PARAMETER_TENANT_NAME for name\n        .multiple(false)\n        .required(true)\n}\n\n/// Create the path parameter.\npub fn path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PATH)\n        .short('p')\n        .long(PARAMETER_PATH)\n        .num_args(1)\n        .required(false)\n        .help(\"Folder path (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create the refresh parameter.\npub fn refresh_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_REFRESH)\n        .short('r')\n        .long(PARAMETER_REFRESH)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Force refresh cache data from API\")\n}\n\n/// Create the recursive parameter.\npub fn recursive_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_RECURSIVE)\n        .short('R')\n        .long(PARAMETER_RECURSIVE)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Recursively apply operation (default: false for CSV/JSON, true for tree)\")\n}\n\n/// Create the API URL parameter.\npub fn api_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_API_URL)\n        .long(PARAMETER_API_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"API base URL (e.g., https://app-api.physna.com/v3)\")\n}\n\n/// Create the UI URL parameter.\npub fn ui_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_UI_URL)\n        .long(PARAMETER_UI_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"UI base URL (e.g., https://app.physna.com)\")\n}\n\n/// Create the Auth URL parameter.\npub fn auth_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_AUTH_URL)\n        .long(PARAMETER_AUTH_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"Authentication URL (e.g., https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token)\")\n}\n","traces":[{"line":101,"address":[],"length":0,"stats":{"Line":264}},{"line":102,"address":[],"length":0,"stats":{"Line":264}},{"line":104,"address":[],"length":0,"stats":{"Line":264}},{"line":111,"address":[],"length":0,"stats":{"Line":528}},{"line":115,"address":[],"length":0,"stats":{"Line":242}},{"line":116,"address":[],"length":0,"stats":{"Line":242}},{"line":117,"address":[],"length":0,"stats":{"Line":242}},{"line":118,"address":[],"length":0,"stats":{"Line":484}},{"line":124,"address":[],"length":0,"stats":{"Line":242}},{"line":125,"address":[],"length":0,"stats":{"Line":242}},{"line":126,"address":[],"length":0,"stats":{"Line":242}},{"line":127,"address":[],"length":0,"stats":{"Line":484}},{"line":134,"address":[],"length":0,"stats":{"Line":154}},{"line":135,"address":[],"length":0,"stats":{"Line":154}},{"line":136,"address":[],"length":0,"stats":{"Line":154}},{"line":137,"address":[],"length":0,"stats":{"Line":308}},{"line":143,"address":[],"length":0,"stats":{"Line":11}},{"line":144,"address":[],"length":0,"stats":{"Line":11}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":150,"address":[],"length":0,"stats":{"Line":22}},{"line":154,"address":[],"length":0,"stats":{"Line":22}},{"line":155,"address":[],"length":0,"stats":{"Line":22}},{"line":156,"address":[],"length":0,"stats":{"Line":22}},{"line":160,"address":[],"length":0,"stats":{"Line":44}},{"line":163,"address":[],"length":0,"stats":{"Line":11}},{"line":164,"address":[],"length":0,"stats":{"Line":11}},{"line":165,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":22}},{"line":173,"address":[],"length":0,"stats":{"Line":11}},{"line":174,"address":[],"length":0,"stats":{"Line":11}},{"line":175,"address":[],"length":0,"stats":{"Line":11}},{"line":182,"address":[],"length":0,"stats":{"Line":11}},{"line":183,"address":[],"length":0,"stats":{"Line":11}},{"line":184,"address":[],"length":0,"stats":{"Line":11}},{"line":191,"address":[],"length":0,"stats":{"Line":110}},{"line":192,"address":[],"length":0,"stats":{"Line":110}},{"line":194,"address":[],"length":0,"stats":{"Line":110}},{"line":196,"address":[],"length":0,"stats":{"Line":220}},{"line":201,"address":[],"length":0,"stats":{"Line":55}},{"line":202,"address":[],"length":0,"stats":{"Line":55}},{"line":203,"address":[],"length":0,"stats":{"Line":55}},{"line":206,"address":[],"length":0,"stats":{"Line":110}},{"line":211,"address":[],"length":0,"stats":{"Line":66}},{"line":212,"address":[],"length":0,"stats":{"Line":66}},{"line":213,"address":[],"length":0,"stats":{"Line":66}},{"line":220,"address":[],"length":0,"stats":{"Line":11}},{"line":221,"address":[],"length":0,"stats":{"Line":11}},{"line":222,"address":[],"length":0,"stats":{"Line":11}},{"line":225,"address":[],"length":0,"stats":{"Line":22}},{"line":230,"address":[],"length":0,"stats":{"Line":11}},{"line":231,"address":[],"length":0,"stats":{"Line":11}},{"line":232,"address":[],"length":0,"stats":{"Line":11}},{"line":239,"address":[],"length":0,"stats":{"Line":66}},{"line":240,"address":[],"length":0,"stats":{"Line":66}},{"line":241,"address":[],"length":0,"stats":{"Line":132}},{"line":246,"address":[],"length":0,"stats":{"Line":11}},{"line":247,"address":[],"length":0,"stats":{"Line":11}},{"line":248,"address":[],"length":0,"stats":{"Line":22}},{"line":254,"address":[],"length":0,"stats":{"Line":11}},{"line":255,"address":[],"length":0,"stats":{"Line":11}},{"line":257,"address":[],"length":0,"stats":{"Line":11}},{"line":264,"address":[],"length":0,"stats":{"Line":22}},{"line":265,"address":[],"length":0,"stats":{"Line":22}},{"line":266,"address":[],"length":0,"stats":{"Line":22}},{"line":273,"address":[],"length":0,"stats":{"Line":11}},{"line":274,"address":[],"length":0,"stats":{"Line":11}},{"line":275,"address":[],"length":0,"stats":{"Line":11}},{"line":282,"address":[],"length":0,"stats":{"Line":11}},{"line":283,"address":[],"length":0,"stats":{"Line":11}},{"line":284,"address":[],"length":0,"stats":{"Line":11}},{"line":287,"address":[],"length":0,"stats":{"Line":22}},{"line":292,"address":[],"length":0,"stats":{"Line":253}},{"line":293,"address":[],"length":0,"stats":{"Line":253}},{"line":295,"address":[],"length":0,"stats":{"Line":253}},{"line":302,"address":[],"length":0,"stats":{"Line":55}},{"line":303,"address":[],"length":0,"stats":{"Line":55}},{"line":304,"address":[],"length":0,"stats":{"Line":110}},{"line":310,"address":[],"length":0,"stats":{"Line":11}},{"line":311,"address":[],"length":0,"stats":{"Line":11}},{"line":312,"address":[],"length":0,"stats":{"Line":22}},{"line":318,"address":[],"length":0,"stats":{"Line":11}},{"line":319,"address":[],"length":0,"stats":{"Line":11}},{"line":320,"address":[],"length":0,"stats":{"Line":22}},{"line":326,"address":[],"length":0,"stats":{"Line":121}},{"line":327,"address":[],"length":0,"stats":{"Line":121}},{"line":329,"address":[],"length":0,"stats":{"Line":121}},{"line":336,"address":[],"length":0,"stats":{"Line":11}},{"line":337,"address":[],"length":0,"stats":{"Line":11}},{"line":339,"address":[],"length":0,"stats":{"Line":11}},{"line":340,"address":[],"length":0,"stats":{"Line":22}},{"line":346,"address":[],"length":0,"stats":{"Line":11}},{"line":347,"address":[],"length":0,"stats":{"Line":11}},{"line":349,"address":[],"length":0,"stats":{"Line":11}},{"line":350,"address":[],"length":0,"stats":{"Line":22}},{"line":356,"address":[],"length":0,"stats":{"Line":11}},{"line":357,"address":[],"length":0,"stats":{"Line":11}},{"line":358,"address":[],"length":0,"stats":{"Line":11}},{"line":365,"address":[],"length":0,"stats":{"Line":11}},{"line":366,"address":[],"length":0,"stats":{"Line":11}},{"line":367,"address":[],"length":0,"stats":{"Line":11}},{"line":374,"address":[],"length":0,"stats":{"Line":11}},{"line":375,"address":[],"length":0,"stats":{"Line":11}},{"line":376,"address":[],"length":0,"stats":{"Line":11}}],"covered":103,"coverable":103},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","tenant.rs"],"content":"//! Tenant command definitions.\n//!\n//! This module defines CLI commands related to tenant management.\n\nuse crate::commands::params::{\n    format_parameter, format_pretty_parameter, format_with_headers_parameter,\n    tenant_name_parameter, tenant_uuid_parameter, tenant_identifier_group, COMMAND_GET, COMMAND_LIST, COMMAND_TENANT,\n};\nuse clap::Command;\n\n/// Create the tenant command with all its subcommands.\npub fn tenant_command() -\u003e Command {\n    Command::new(COMMAND_TENANT)\n        .about(\"Manage tenants\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get tenant details\")\n                .arg(tenant_uuid_parameter())    // --tenant-uuid (tenant UUID)\n                .arg(tenant_name_parameter())    // --name (tenant short name, using existing PARAMETER_TENANT_NAME)\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter())\n                .group(tenant_identifier_group()), // Group to ensure only one of --tenant-uuid or --name is provided\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all tenants\")\n                .visible_alias(\"ls\")\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter()),\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":22}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":44}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":44}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}}],"covered":16,"coverable":16},{"path":["/","Users","julian","projects","physna","pcli2","src","configuration.rs"],"content":"use crate::{\n    format::{Formattable, FormattingError, OutputFormat},\n    model::Tenant,\n};\nuse dirs::config_dir;\nuse serde::{Deserialize, Serialize};\nuse serde_yaml;\nuse std::{\n    collections::HashMap,\n    fs::{self, File},\n    io::Write,\n    path::PathBuf,\n};\nuse tracing::debug;\nuse uuid::Uuid;\n\npub const DEFAULT_APPLICATION_ID: \u0026str = \"pcli2\";\npub const DEFAULT_CONFIGURATION_FILE_NAME: \u0026str = \"config.yml\";\n\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnvironmentConfig {\n    #[serde(default = \"default_api_base_url\")]\n    pub api_base_url: String,\n    #[serde(default = \"default_ui_base_url\")]\n    pub ui_base_url: String,\n    #[serde(default = \"default_auth_base_url\")]\n    pub auth_base_url: String,\n}\n\npub fn default_api_base_url() -\u003e String {\n    \"https://app-api.physna.com/v3\".to_string()\n}\n\npub fn default_ui_base_url() -\u003e String {\n    \"https://app.physna.com\".to_string()\n}\n\npub fn default_auth_base_url() -\u003e String {\n    \"https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token\".to_string()\n}\n\n#[derive(Debug, thiserror::Error)]\npub enum ConfigurationError {\n    #[error(\"failed to resolve the configuration directory\")]\n    FailedToFindConfigurationDirectory,\n    #[error(\"failed to load configuration data, because of: {cause:?}\")]\n    FailedToLoadData { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    #[error(\"failed to write configuration data to file, because of: {cause:?}\")]\n    FailedToWriteData { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    #[error(\"missing value for property {name:?}\")]\n    MissingRequiredPropertyValue { name: String },\n    #[error(\"{cause:?}\")]\n    FormattingError {\n        #[from]\n        cause: FormattingError,\n    },\n}\n\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct Configuration {\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    active_tenant_uuid: Option\u003cUuid\u003e,\n\n    // Environment-specific URLs (for backward compatibility)\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    api_base_url: Option\u003cString\u003e,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    ui_base_url: Option\u003cString\u003e,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    auth_base_url: Option\u003cString\u003e,\n\n    // Active environment name\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    active_environment: Option\u003cString\u003e,\n\n    // Named environments\n    #[serde(default)]\n    environments: HashMap\u003cString, EnvironmentConfig\u003e,\n}\n\nimpl Default for Configuration {\n    fn default() -\u003e Self {\n        Self {\n            active_tenant_uuid: None,\n            api_base_url: None,\n            ui_base_url: None,\n            auth_base_url: None,\n            active_environment: None,\n            environments: HashMap::new(),\n        }\n    }\n}\n\nimpl Configuration {\n    pub fn active_tenant_uuid(\u0026self) -\u003e Option\u003c\u0026Uuid\u003e {\n        self.active_tenant_uuid.as_ref()\n    }\n\n    pub fn get_default_configuration_file_path() -\u003e Result\u003cPathBuf, ConfigurationError\u003e {\n        // Check for PCLI2_CONFIG_DIR environment variable first\n        if let Ok(config_dir_str) = std::env::var(\"PCLI2_CONFIG_DIR\") {\n            let mut config_path = PathBuf::from(config_dir_str);\n            config_path.push(DEFAULT_CONFIGURATION_FILE_NAME);\n            return Ok(config_path);\n        }\n\n        let configuration_directory = config_dir();\n        match configuration_directory {\n            Some(configuration_directory) =\u003e {\n                let mut default_config_file_path = configuration_directory;\n                default_config_file_path.push(DEFAULT_APPLICATION_ID);\n                default_config_file_path.push(DEFAULT_CONFIGURATION_FILE_NAME);\n\n                Ok(default_config_file_path)\n            }\n            None =\u003e Err(ConfigurationError::FailedToFindConfigurationDirectory),\n        }\n    }\n\n    pub fn load_default() -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        let default_file_path = Configuration::get_default_configuration_file_path()?;\n        debug!(\n            \"Loading configuration from {}...\",\n            default_file_path\n                .clone()\n                .into_os_string()\n                .into_string()\n                .unwrap()\n        );\n        Configuration::load_from_file(default_file_path)\n    }\n\n    /// Load default configuration, creating a default one if none exists\n    /// This is more user-friendly for first-time users\n    pub fn load_or_create_default() -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        let default_file_path = Configuration::get_default_configuration_file_path()?;\n        debug!(\n            \"Loading or creating configuration from {}...\",\n            default_file_path\n                .clone()\n                .into_os_string()\n                .into_string()\n                .unwrap()\n        );\n\n        // Try to load existing configuration\n        match Configuration::load_from_file(default_file_path.clone()) {\n            Ok(config) =\u003e Ok(config),\n            Err(e) =\u003e {\n                // Check if this is a \"file not found\" error\n                match \u0026e {\n                    ConfigurationError::FailedToLoadData { cause } =\u003e {\n                        if let Some(io_err) = cause.downcast_ref::\u003cstd::io::Error\u003e() {\n                            if io_err.kind() == std::io::ErrorKind::NotFound {\n                                debug!(\n                                    \"Configuration file not found, creating default configuration\"\n                                );\n                                let default_config = Configuration::default();\n\n                                // Try to save the default configuration\n                                match default_config.save(\u0026default_file_path) {\n                                    Ok(()) =\u003e {\n                                        debug!(\"Default configuration created successfully\");\n                                        Ok(default_config)\n                                    }\n                                    Err(save_error) =\u003e {\n                                        // If we can't save, return the original error with more context\n                                        Err(ConfigurationError::FailedToLoadData {\n                                            cause: Box::new(std::io::Error::other(\n                                                format!(\"Configuration file not found and failed to create default configuration. Tried to create at: {:?}. Error: {}\", \n                                                       default_file_path, save_error)\n                                            ))\n                                        })\n                                    }\n                                }\n                            } else {\n                                Err(e)\n                            }\n                        } else {\n                            Err(e)\n                        }\n                    }\n                    _ =\u003e Err(e),\n                }\n            }\n        }\n    }\n\n    pub fn load_from_file(path: PathBuf) -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        match fs::read_to_string(path.clone()) {\n            Ok(configuration) =\u003e {\n                let configuration = serde_yaml::from_str(\u0026configuration);\n                match configuration {\n                    Ok(configuration) =\u003e Ok(configuration),\n                    Err(cause) =\u003e Err(ConfigurationError::FailedToLoadData {\n                        cause: Box::new(cause),\n                    }),\n                }\n            }\n            Err(cause) =\u003e Err(ConfigurationError::FailedToLoadData {\n                cause: Box::new(cause),\n            }),\n        }\n    }\n\n    pub fn write(\u0026self, writer: Box\u003cdyn Write\u003e) -\u003e Result\u003c(), ConfigurationError\u003e {\n        match serde_yaml::to_writer(writer, \u0026self.clone()) {\n            Ok(()) =\u003e Ok(()),\n            Err(e) =\u003e Err(ConfigurationError::FailedToWriteData { cause: Box::new(e) }),\n        }\n    }\n\n    pub fn save(\u0026self, path: \u0026PathBuf) -\u003e Result\u003c(), ConfigurationError\u003e {\n        // first check if the parent directory exists and try to create it if not\n        let configuration_directory = path.parent();\n        match configuration_directory {\n            Some(path) =\u003e {\n                // this operation only executes if the directory does not exit\n                match fs::create_dir_all(path) {\n                    Ok(()) =\u003e (),\n                    Err(_) =\u003e return Err(ConfigurationError::FailedToFindConfigurationDirectory),\n                }\n            }\n            None =\u003e return Err(ConfigurationError::FailedToFindConfigurationDirectory),\n        }\n\n        let file = File::create(path);\n        match file {\n            Ok(file) =\u003e {\n                let writer: Box\u003cdyn Write\u003e = Box::new(file);\n                Ok(self.write(writer)?)\n            }\n            Err(e) =\u003e Err(ConfigurationError::FailedToWriteData { cause: Box::new(e) }),\n        }\n    }\n\n    pub fn save_to_default(\u0026self) -\u003e Result\u003c(), ConfigurationError\u003e {\n        self.save(\u0026Self::get_default_configuration_file_path()?)\n    }\n\n    // Context management methods\n    pub fn get_active_tenant_uuid(\u0026self) -\u003e Option\u003cUuid\u003e {\n        self.active_tenant_uuid.clone()\n    }\n\n    pub fn set_active_tenant(\u0026mut self, tenant: \u0026Tenant) {\n        self.active_tenant_uuid = Some(tenant.uuid);\n    }\n\n    pub fn clear_active_tenant(\u0026mut self) {\n        self.active_tenant_uuid = None;\n    }\n\n    // Methods to get URLs with fallback hierarchy\n    pub fn get_api_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.api_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.api_base_url {\n            url.clone()\n        } else {\n            default_api_base_url()\n        }\n    }\n\n    pub fn get_ui_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.ui_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.ui_base_url {\n            url.clone()\n        } else {\n            default_ui_base_url()\n        }\n    }\n\n    pub fn get_auth_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.auth_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.auth_base_url {\n            url.clone()\n        } else {\n            default_auth_base_url()\n        }\n    }\n\n    // Methods to manage environments\n    pub fn set_active_environment(\u0026mut self, env_name: \u0026str) -\u003e Result\u003c(), ConfigurationError\u003e {\n        if self.environments.contains_key(env_name) {\n            self.active_environment = Some(env_name.to_string());\n            Ok(())\n        } else {\n            Err(ConfigurationError::MissingRequiredPropertyValue {\n                name: format!(\"Environment '{}' does not exist\", env_name),\n            })\n        }\n    }\n\n    pub fn add_environment(\u0026mut self, name: String, config: EnvironmentConfig) {\n        self.environments.insert(name, config);\n    }\n\n    pub fn remove_environment(\u0026mut self, name: \u0026str) -\u003e Result\u003c(), ConfigurationError\u003e {\n        if self.environments.remove(name).is_some() {\n            // If we're removing the active environment, clear it\n            if let Some(ref active_env) = self.active_environment {\n                if active_env == name {\n                    self.active_environment = None;\n                }\n            }\n            Ok(())\n        } else {\n            Err(ConfigurationError::MissingRequiredPropertyValue {\n                name: format!(\"Environment '{}' does not exist\", name),\n            })\n        }\n    }\n\n    pub fn list_environments(\u0026self) -\u003e Vec\u003cString\u003e {\n        self.environments.keys().cloned().collect()\n    }\n\n    pub fn get_active_environment(\u0026self) -\u003e Option\u003cString\u003e {\n        self.active_environment.clone()\n    }\n\n    /// Reset all environment configurations to a blank state\n    pub fn reset_environments(\u0026mut self) {\n        self.environments.clear();\n        self.active_environment = None;\n    }\n\n    /// Get an environment configuration by name\n    pub fn get_environment_config(\u0026self, name: \u0026str) -\u003e Option\u003c\u0026EnvironmentConfig\u003e {\n        self.environments.get(name)\n    }\n}\n\nimpl Formattable for Configuration {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            },\n            OutputFormat::Csv(options) =\u003e {\n                let uuid_str = self.active_tenant_uuid.unwrap_or_default().to_string();\n                let api_url = self.api_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let ui_url = self.ui_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let auth_url = self.auth_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let active_env = self.active_environment.clone().unwrap_or_else(|| \"none\".to_string());\n\n                if options.with_headers {\n                    Ok(format!(\"ACTIVE_TENANT_UUID,API_BASE_URL,UI_BASE_URL,AUTH_BASE_URL,ACTIVE_ENVIRONMENT\\n{},{},{},{},{}\",\n                              uuid_str, api_url, ui_url, auth_url, active_env))\n                } else {\n                    Ok(format!(\"{},{},{},{},{}\", uuid_str, api_url, ui_url, auth_url, active_env))\n                }\n            },\n            OutputFormat::Tree(_) =\u003e {\n                let mut result = String::new();\n                result.push_str(\"Configuration:\\n\");\n                result.push_str(\u0026format!(\"  Active Tenant UUID: {}\\n\",\n                    self.active_tenant_uuid.map_or(\"None\".to_string(), |uuid| uuid.to_string())));\n                result.push_str(\u0026format!(\"  API Base URL: {}\\n\",\n                    self.api_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  UI Base URL: {}\\n\",\n                    self.ui_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  Auth Base URL: {}\\n\",\n                    self.auth_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  Active Environment: {}\\n\",\n                    self.active_environment.clone().unwrap_or_else(|| \"None\".to_string())));\n                result.push_str(\"  Environments:\\n\");\n\n                for (name, env_config) in \u0026self.environments {\n                    result.push_str(\u0026format!(\"    {}: {{api: {}, ui: {}, auth: {}}}\\n\",\n                        name, env_config.api_base_url, env_config.ui_base_url, env_config.auth_base_url));\n                }\n\n                Ok(result)\n            },\n        }\n    }\n}\n\n\n","traces":[{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":8}},{"line":101,"address":[],"length":0,"stats":{"Line":8}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":16}},{"line":108,"address":[],"length":0,"stats":{"Line":8}},{"line":109,"address":[],"length":0,"stats":{"Line":8}},{"line":110,"address":[],"length":0,"stats":{"Line":16}},{"line":111,"address":[],"length":0,"stats":{"Line":16}},{"line":112,"address":[],"length":0,"stats":{"Line":16}},{"line":114,"address":[],"length":0,"stats":{"Line":8}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":8}},{"line":136,"address":[],"length":0,"stats":{"Line":16}},{"line":137,"address":[],"length":0,"stats":{"Line":8}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":16}},{"line":148,"address":[],"length":0,"stats":{"Line":16}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":8}},{"line":190,"address":[],"length":0,"stats":{"Line":16}},{"line":191,"address":[],"length":0,"stats":{"Line":8}},{"line":192,"address":[],"length":0,"stats":{"Line":24}},{"line":193,"address":[],"length":0,"stats":{"Line":8}},{"line":194,"address":[],"length":0,"stats":{"Line":16}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":4}},{"line":243,"address":[],"length":0,"stats":{"Line":8}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":4}},{"line":257,"address":[],"length":0,"stats":{"Line":8}},{"line":258,"address":[],"length":0,"stats":{"Line":12}},{"line":259,"address":[],"length":0,"stats":{"Line":8}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":289,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":4}},{"line":337,"address":[],"length":0,"stats":{"Line":8}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":393,"address":[],"length":0,"stats":{"Line":0}},{"line":396,"address":[],"length":0,"stats":{"Line":0}}],"covered":28,"coverable":178},{"path":["/","Users","julian","projects","physna","pcli2","src","dev_keyring.rs"],"content":"use std::fs;\nuse std::path::PathBuf;\nuse dirs::config_dir;\nuse thiserror::Error;\nuse tracing;\n\n#[derive(Debug, Error)]\npub enum DevKeyringError {\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n    #[error(\"JSON error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n}\n\n#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]\nstruct EnvironmentCredentials {\n    client_id: String,\n    client_secret: String,\n    access_token: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]\nstruct AllCredentials {\n    environments: std::collections::HashMap\u003cString, EnvironmentCredentials\u003e,\n}\n\npub struct DevKeyring {\n    file_path: PathBuf,\n    credentials: Option\u003cAllCredentials\u003e,\n}\n\nimpl Default for DevKeyring {\n    fn default() -\u003e DevKeyring {\n        // Try to get the config directory, fallback to current directory if it fails\n        let config_base = config_dir().unwrap_or_else(|| {\n            // If config_dir fails, try to create a .config directory in the home directory\n            if let Some(home_dir) = dirs::home_dir() {\n                let mut home_config = home_dir;\n                home_config.push(\".config\");\n                if home_config.exists() {\n                    return home_config;\n                } else {\n                    // Create .config directory if it doesn't exist\n                    if fs::create_dir_all(\u0026home_config).is_ok() {\n                        return home_config;\n                    }\n                }\n            }\n            // Fallback to current directory\n            PathBuf::from(\".\")\n        });\n\n        let mut file_path = config_base;\n        file_path.push(\"pcli2\");\n        file_path.push(\"dev_credentials.json\");\n\n        DevKeyring {\n            file_path,\n            credentials: None,\n        }\n    }\n}\n\nimpl DevKeyring {\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    fn load_credentials(\u0026mut self) -\u003e Result\u003c(), DevKeyringError\u003e {\n        if self.file_path.exists() {\n            let content = fs::read_to_string(\u0026self.file_path)?;\n            match serde_json::from_str::\u003cAllCredentials\u003e(\u0026content) {\n                Ok(parsed_credentials) =\u003e {\n                    self.credentials = Some(parsed_credentials);\n                }\n                Err(_) =\u003e {\n                    // If parsing fails, start with empty credentials\n                    self.credentials = Some(AllCredentials {\n                        environments: std::collections::HashMap::new(),\n                    });\n                }\n            }\n        } else {\n            self.credentials = Some(AllCredentials {\n                environments: std::collections::HashMap::new(),\n            });\n        }\n        Ok(())\n    }\n\n    fn save_credentials(\u0026self) -\u003e Result\u003c(), DevKeyringError\u003e {\n        // Create directory if it doesn't exist\n        if let Some(parent) = self.file_path.parent() {\n            fs::create_dir_all(parent)?;\n        }\n\n        if let Some(credentials) = \u0026self.credentials {\n            let content = serde_json::to_string_pretty(credentials)?;\n            fs::write(\u0026self.file_path, content)?;\n        }\n        Ok(())\n    }\n\n    pub fn get(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, DevKeyringError\u003e {\n        // Don't fail if loading credentials fails, just return None\n        if let Err(_) = self.load_credentials() {\n            // If we can't load credentials, return None for the requested key\n            return match key.as_str() {\n                \"access-token\" =\u003e Ok(None),\n                \"client-id\" =\u003e Ok(None),\n                \"client-secret\" =\u003e Ok(None),\n                _ =\u003e Ok(None),\n            };\n        }\n\n        if let Some(all_credentials) = \u0026self.credentials {\n            if let Some(env_credentials) = all_credentials.environments.get(tenant) {\n                match key.as_str() {\n                    \"client-id\" =\u003e {\n                        tracing::debug!(\"Retrieved client-id from dev_keyring for environment: {}\", tenant);\n                        Ok(Some(env_credentials.client_id.clone()))\n                    },\n                    \"client-secret\" =\u003e {\n                        tracing::debug!(\"Retrieved client-secret from dev_keyring for environment: {}\", tenant);\n                        Ok(Some(env_credentials.client_secret.clone()))\n                    },\n                    \"access-token\" =\u003e {\n                        tracing::debug!(\"Retrieved access-token from dev_keyring for environment: {}\", tenant);\n                        Ok(env_credentials.access_token.clone())\n                    },\n                    _ =\u003e Ok(None),\n                }\n            } else {\n                tracing::debug!(\"No credentials found in dev_keyring for environment: {}, key: {}\", tenant, key);\n                Ok(None)\n            }\n        } else {\n            tracing::debug!(\"No credentials found in dev_keyring for environment: {}, key: {}\", tenant, key);\n            Ok(None)\n        }\n    }\n\n    pub fn put(\u0026mut self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), DevKeyringError\u003e {\n        tracing::debug!(\"Storing {} in dev_keyring for environment: {}\", key, tenant);\n\n        // Load existing credentials, but don't fail if the file doesn't exist or is corrupted\n        let existing_credentials = match self.load_credentials() {\n            Ok(_) =\u003e self.credentials.take(),\n            Err(_) =\u003e None, // If loading fails, start with empty credentials\n        };\n\n        let mut all_credentials = existing_credentials.unwrap_or_else(|| AllCredentials {\n            environments: std::collections::HashMap::new(),\n        });\n\n        // Get or create environment-specific credentials\n        let env_credentials = all_credentials.environments.entry(tenant.to_string()).or_insert_with(|| EnvironmentCredentials {\n            client_id: String::new(),\n            client_secret: String::new(),\n            access_token: None,\n        });\n\n        match key.as_str() {\n            \"client-id\" =\u003e {\n                env_credentials.client_id = value;\n                tracing::debug!(\"Stored client-id in dev_keyring for environment: {}\", tenant);\n            },\n            \"client-secret\" =\u003e {\n                env_credentials.client_secret = value;\n                tracing::debug!(\"Stored client-secret in dev_keyring for environment: {}\", tenant);\n            },\n            \"access-token\" =\u003e {\n                env_credentials.access_token = Some(value);\n                tracing::debug!(\"Stored access-token in dev_keyring for environment: {}\", tenant);\n            },\n            _ =\u003e {} // Ignore unknown keys\n        }\n\n        self.credentials = Some(all_credentials);\n        self.save_credentials()\n    }\n\n    pub fn delete(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003c(), DevKeyringError\u003e {\n        // Load existing credentials, but don't fail if the file doesn't exist or is corrupted\n        let existing_credentials = match self.load_credentials() {\n            Ok(_) =\u003e self.credentials.take(),\n            Err(_) =\u003e None, // If loading fails, there's nothing to delete\n        };\n\n        if let Some(mut all_credentials) = existing_credentials {\n            if let Some(env_credentials) = all_credentials.environments.get_mut(tenant) {\n                match key.as_str() {\n                    \"access-token\" =\u003e env_credentials.access_token = None,\n                    \"client-id\" =\u003e env_credentials.client_id = String::new(),\n                    \"client-secret\" =\u003e env_credentials.client_secret = String::new(),\n                    _ =\u003e {} // Ignore unknown keys\n                }\n            }\n\n            self.credentials = Some(all_credentials);\n            self.save_credentials()?;\n        }\n\n        Ok(())\n    }\n}","traces":[{"line":33,"address":[],"length":0,"stats":{"Line":4}},{"line":35,"address":[],"length":0,"stats":{"Line":12}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":8}},{"line":54,"address":[],"length":0,"stats":{"Line":8}},{"line":55,"address":[],"length":0,"stats":{"Line":8}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":12}},{"line":70,"address":[],"length":0,"stats":{"Line":12}},{"line":71,"address":[],"length":0,"stats":{"Line":36}},{"line":72,"address":[],"length":0,"stats":{"Line":12}},{"line":73,"address":[],"length":0,"stats":{"Line":24}},{"line":74,"address":[],"length":0,"stats":{"Line":12}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":12}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":12}},{"line":106,"address":[],"length":0,"stats":{"Line":12}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":24}},{"line":117,"address":[],"length":0,"stats":{"Line":36}},{"line":118,"address":[],"length":0,"stats":{"Line":12}},{"line":119,"address":[],"length":0,"stats":{"Line":12}},{"line":120,"address":[],"length":0,"stats":{"Line":4}},{"line":121,"address":[],"length":0,"stats":{"Line":4}},{"line":123,"address":[],"length":0,"stats":{"Line":8}},{"line":124,"address":[],"length":0,"stats":{"Line":4}},{"line":125,"address":[],"length":0,"stats":{"Line":4}},{"line":127,"address":[],"length":0,"stats":{"Line":4}},{"line":128,"address":[],"length":0,"stats":{"Line":4}},{"line":129,"address":[],"length":0,"stats":{"Line":4}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}}],"covered":26,"coverable":96},{"path":["/","Users","julian","projects","physna","pcli2","src","error.rs"],"content":"use thiserror::Error;\n\nuse crate::{\n    actions::CliActionError, exit_codes::PcliExitCode, folder_hierarchy::FolderHierarchyError,\n    physna_v3,\n};\n\n/// Error types that can occur during CLI command execution\n#[derive(Debug, Error)]\npub enum CliError {\n    /// Error when an unsupported or undefined subcommand is encountered\n    #[error(\"Undefined or unsupported subcommand\")]\n    UnsupportedSubcommand(String),\n    /// Error related to configuration loading or management\n    #[error(\"Configuration error: {0}\")]\n    ConfigurationError(#[from] crate::configuration::ConfigurationError),\n    /// Error related to data formatting\n    #[error(\"Formatting error: {0}\")]\n    FormattingError(#[from] crate::format::FormattingError),\n    /// Error related to security operations (authentication, keyring access)\n    #[error(\"Security error\")]\n    SecurityError(String),\n    /// Error when a required command-line argument is missing\n    #[error(\"Missing required argument: {0}\")]\n    MissingRequiredArgument(String),\n    /// Error related to JSON serialization/deserialization\n    #[error(\"JSON serialization error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    /// Error when a tenant cannot be found by name or ID\n    #[error(\"Tenant '{identifier}' not found\")]\n    TenantNotFound { identifier: String },\n    /// Error when a folder cannot be found by path or ID\n    #[error(\"Folder '{0}' not found. Please verify the folder path exists in your tenant.\")]\n    FolderNotFound(String),\n\n    #[error(\"API error: {0}\")]\n    PhysnaExtendedApiError(#[from] physna_v3::ApiError),\n\n    #[error(\"UUID parsing error: {0}\")]\n    UuidParsingError(#[from] uuid::Error),\n\n    #[error(\"{0}\")]\n    ActionError(#[from] CliActionError),\n\n    #[error(\"{0}\")]\n    FolderListError(#[from] FolderHierarchyError),\n\n}\n\nimpl CliError {\n    /// Get the appropriate exit code for this error\n    ///\n    /// Returns the corresponding `PcliExitCode` based on the error type:\n    /// - `UsageError` for unsupported commands or missing arguments\n    /// - `ConfigError` for configuration errors\n    /// - `DataError` for formatting or JSON errors\n    /// - `AuthError` for security-related errors\n    pub fn exit_code(\u0026self) -\u003e PcliExitCode {\n        match self {\n            CliError::UnsupportedSubcommand(_) =\u003e PcliExitCode::UsageError,\n            CliError::ConfigurationError(_) =\u003e PcliExitCode::ConfigError,\n            CliError::FormattingError(_) =\u003e PcliExitCode::DataError,\n            CliError::SecurityError(_) =\u003e PcliExitCode::AuthError,\n            CliError::MissingRequiredArgument(_) =\u003e PcliExitCode::UsageError,\n            CliError::JsonError(_) =\u003e PcliExitCode::DataError,\n            CliError::TenantNotFound { .. } =\u003e PcliExitCode::UsageError,\n            CliError::FolderNotFound { .. } =\u003e PcliExitCode::UsageError,\n            _ =\u003e PcliExitCode::SoftwareError,\n        }\n    }\n}\n","traces":[{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","error_utils.rs"],"content":"//! Error handling utilities for the PCLI2 application.\n//! \n//! This module provides consistent error reporting and handling utilities\n//! across the application to ensure uniform user experience.\n\nuse thiserror::Error;\nuse tracing::error;\n\n/// Common error types used throughout the application\n#[derive(Debug, Error)]\npub enum CommonError {\n    /// Error when required arguments are missing\n    #[error(\"Missing required argument: {arg}\")]\n    MissingArgument { arg: String },\n    \n    /// Error when API calls fail\n    #[error(\"API error: {message}\")]\n    ApiError { message: String },\n    \n    /// Error when authentication fails\n    #[error(\"Authentication error: {message}\")]\n    AuthError { message: String },\n    \n    /// Error when resource is not found\n    #[error(\"Resource not found: {resource}\")]\n    NotFound { resource: String },\n    \n    /// Error when cache operations fail\n    #[error(\"Cache error: {message}\")]\n    CacheError { message: String },\n    \n    /// Error when configuration operations fail\n    #[error(\"Configuration error: {message}\")]\n    ConfigError { message: String },\n    \n    /// Error when file operations fail\n    #[error(\"File error: {message}\")]\n    FileError { message: String },\n    \n    /// Error when data formatting fails\n    #[error(\"Formatting error: {message}\")]\n    FormatError { message: String },\n    \n    /// Generic error with custom message\n    #[error(\"Error: {message}\")]\n    Generic { message: String },\n}\n\n/// Report an error consistently with user-facing output.\n///\n/// This function displays errors in a user-friendly format without internal logging.\npub fn report_error\u003cE: std::fmt::Display\u003e(error: \u0026E) {\n    eprintln!(\"‚ùå Error: {}\", error);\n}\n\n/// Report an error with detailed information including technical details and user guidance.\n///\n/// This function provides a comprehensive error message that includes:\n/// - A clear error title\n/// - Technical details about what went wrong\n/// - Actionable steps the user can take to resolve the issue\n/// - Relevant command examples when applicable\npub fn report_detailed_error\u003cE: std::fmt::Display\u003e(error: \u0026E, context: Option\u003c\u0026str\u003e) {\n    let error_str = error.to_string();\n    let user_friendly_msg = create_user_friendly_error(\u0026error_str);\n\n    // Print the main error message\n    eprintln!(\"‚ùå Error: {}\", user_friendly_msg);\n\n    // Add context if provided and meaningful (not generic messages)\n    if let Some(ctx) = context {\n        // Skip generic context messages that don't add value\n        if !ctx.trim().is_empty() \u0026\u0026 ctx != \"Command execution failed\" {\n            eprintln!(\"üìã Context: {}\", ctx);\n        }\n    }\n\n    // Log the technical details for debugging (only in debug/trace mode)\n    tracing::debug!(\"Technical error details: {} (context: {:?})\", error, context);\n}\n\n/// Report an error with suggested remediation steps.\n///\n/// This function provides error messages with specific steps users can take to resolve the issue.\npub fn report_error_with_remediation\u003cE: std::fmt::Display\u003e(error: \u0026E, remediation_steps: \u0026[\u0026str]) {\n    let error_str = error.to_string();\n    let user_friendly_msg = create_user_friendly_error(\u0026error_str);\n\n    eprintln!(\"‚ùå Error: {}\", user_friendly_msg);\n\n    if !remediation_steps.is_empty() {\n        eprintln!(\"\\nüîß To resolve this issue, try the following:\");\n        for (i, step) in remediation_steps.iter().enumerate() {\n            eprintln!(\"  {}. {}\", i + 1, step);\n        }\n    }\n\n    tracing::debug!(\"Error with remediation: {} (steps: {:?})\", error, remediation_steps);\n}\n\n/// Report an error with a custom user message for better clarity.\n///\n/// This function allows providing a more user-friendly message while still\n/// logging the technical error details for debugging.\npub fn report_error_with_message\u003cE: std::fmt::Display\u003e(error: \u0026E, user_message: \u0026str) {\n    error!(\"{} (original error: {})\", user_message, error);\n    eprintln!(\"‚ùå Error: {}\", user_message);\n}\n\n/// Report a warning consistently with both logging and user-facing output.\npub fn report_warning\u003cE: std::fmt::Display\u003e(warning: \u0026E) {\n    tracing::warn!(\"{}\", warning);\n    eprintln!(\"‚ö†Ô∏è  Warning: {}\", warning);\n}\n\n/// Create a user-friendly error message from a technical error\n///\n/// This function tries to provide user-friendly error messages for common technical errors\npub fn create_user_friendly_error\u003cE: std::fmt::Display\u003e(error: E) -\u003e String {\n    let error_str = error.to_string();\n\n    // Check for common error patterns and provide user-friendly messages\n    if error_str.contains(\"invalid_client\") {\n        \"Authentication failed: Invalid client credentials. This could be due to:\\n  - Incorrect client ID or secret\\n  - Expired or revoked client credentials\\n  - Disabled service account\\n  Please verify your credentials and log in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"invalid_grant\") {\n        \"Authentication failed: Invalid authorization grant. Please log in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"unauthorized_client\") {\n        \"Authentication failed: Unauthorized client. Please verify your client credentials and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"invalid_request\") {\n        \"Authentication failed: Invalid request. Please verify your credentials and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"401\") || error_str.to_lowercase().contains(\"unauthorized\") {\n        \"Authentication failed. Please check your access token and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"403\") || error_str.to_lowercase().contains(\"forbidden\") {\n        \"Access forbidden. You don't have permission to perform this operation.\".to_string()\n    } else if error_str.contains(\"404\") || error_str.to_lowercase().contains(\"not found\") {\n        \"Resource not found. Please check the resource ID or path and try again.\".to_string()\n    } else if error_str.contains(\"409\") || error_str.to_lowercase().contains(\"conflict\") {\n        \"Operation conflict. The resource may already exist or be in use.\".to_string()\n    } else if error_str.to_lowercase().contains(\"timeout\") {\n        \"Request timeout. The server took too long to respond. Please try again.\".to_string()\n    } else if error_str.to_lowercase().contains(\"connection\") || error_str.to_lowercase().contains(\"network\") {\n        \"Network error. Please check your internet connection and try again.\".to_string()\n    } else {\n        // Return the original error if no specific user-friendly message applies\n        error_str\n    }\n}\n\n/// Report an error with a user-friendly message based on error content\npub fn report_error_with_user_friendly_message\u003cE: std::fmt::Display\u003e(error: E) {\n    let user_message = create_user_friendly_error(error);\n    eprintln!(\"‚ùå Error: {}\", user_message);\n}\n\n/// Check if an error is retryable and user should try again\npub fn is_retryable_error\u003cE: std::fmt::Display\u003e(error: E) -\u003e bool {\n    let error_str = error.to_string().to_lowercase();\n    \n    error_str.contains(\"timeout\") \n        || error_str.contains(\"connection\") \n        || error_str.contains(\"network\")\n        || error_str.contains(\"502\")\n        || error_str.contains(\"503\")\n        || error_str.contains(\"504\")\n        || error_str.contains(\"gateway\")\n        || error_str.contains(\"proxy\")\n        || error_str.contains(\"service unavailable\")\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_create_user_friendly_error_auth() {\n        let error_msg = \"HTTP Error: 401 Unauthorized\";\n        let friendly_msg = create_user_friendly_error(error_msg);\n        assert!(friendly_msg.contains(\"Authentication failed\"));\n    }\n\n    #[test]\n    fn test_create_user_friendly_error_not_found() {\n        let error_msg = \"Resource not found\";\n        let friendly_msg = create_user_friendly_error(error_msg);\n        assert!(friendly_msg.contains(\"Resource not found\"));\n    }\n\n    #[test]\n    fn test_is_retryable_error() {\n        assert!(is_retryable_error(\"Connection timeout error\"));\n        assert!(is_retryable_error(\"503 Service Unavailable\"));\n        assert!(!is_retryable_error(\"Invalid argument\"));\n    }\n\n    #[test]\n    fn test_user_friendly_error_messages() {\n        // Test common error patterns\n        assert!(create_user_friendly_error(\"401 Unauthorized\").contains(\"Authentication failed\"));\n        assert!(create_user_friendly_error(\"404 Not Found\").contains(\"Resource not found\"));\n        assert!(create_user_friendly_error(\"timeout\").contains(\"Request timeout\"));\n    }\n\n    #[test]\n    fn test_retryable_errors() {\n        assert!(is_retryable_error(\"Connection timeout\"));\n        assert!(is_retryable_error(\"503 Service Unavailable\"));\n        assert!(!is_retryable_error(\"Invalid argument\"));\n    }\n}\n\n\n","traces":[{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":5}},{"line":120,"address":[],"length":0,"stats":{"Line":15}},{"line":123,"address":[],"length":0,"stats":{"Line":5}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":5}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":5}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":5}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":8}},{"line":132,"address":[],"length":0,"stats":{"Line":4}},{"line":133,"address":[],"length":0,"stats":{"Line":6}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":5}},{"line":136,"address":[],"length":0,"stats":{"Line":4}},{"line":137,"address":[],"length":0,"stats":{"Line":2}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":1}},{"line":140,"address":[],"length":0,"stats":{"Line":2}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":6}},{"line":157,"address":[],"length":0,"stats":{"Line":12}},{"line":159,"address":[],"length":0,"stats":{"Line":6}},{"line":160,"address":[],"length":0,"stats":{"Line":4}},{"line":161,"address":[],"length":0,"stats":{"Line":4}},{"line":162,"address":[],"length":0,"stats":{"Line":4}},{"line":163,"address":[],"length":0,"stats":{"Line":4}},{"line":164,"address":[],"length":0,"stats":{"Line":2}},{"line":165,"address":[],"length":0,"stats":{"Line":2}},{"line":166,"address":[],"length":0,"stats":{"Line":2}},{"line":167,"address":[],"length":0,"stats":{"Line":2}}],"covered":25,"coverable":62},{"path":["/","Users","julian","projects","physna","pcli2","src","exit_codes.rs"],"content":"//! Custom exit codes for the PCLI2 application\n//! \n//! This module defines specific exit codes for different error conditions\n//! to make scripting and automation easier.\n\n/// Custom exit codes for PCLI2\n/// \n/// These codes follow the BSD sysexits.h conventions where possible:\n/// - 0: Success\n/// - 64-78: Standard exit codes from sysexits.h\n/// - 100+: Custom application-specific codes\n#[derive(Debug, Clone, Copy, PartialEq, Eq)]\npub enum PcliExitCode {\n    /// Success (0) - Command completed successfully\n    Success = 0,\n    \n    /// Command line usage error (64) - User input error\n    UsageError = 64,\n    \n    /// Data format error (65) - Input data was incorrect\n    DataError = 65,\n    \n    /// Cannot open input file (66) - File not found or permission denied\n    NoInput = 66,\n    \n    /// Addressee unknown (67) - User or resource not found\n    NotFound = 67,\n    \n    /// Host name unknown (68) - Server or service not found\n    Unavailable = 68,\n    \n    /// Service unavailable (69) - Temporary service error\n    TempFail = 69,\n    \n    /// Internal software error (70) - Unexpected application error\n    SoftwareError = 70,\n    \n    /// System error (71) - OS-level error\n    OSError = 71,\n    \n    /// Configuration error (78) - Application configuration issue\n    ConfigError = 78,\n    \n    /// Authentication error (100) - Login or token issues\n    AuthError = 100,\n    \n    /// Network error (101) - Connection or communication issues\n    NetworkError = 101,\n    \n    /// API error (102) - Remote API returned an error\n    ApiError = 102,\n}\n\nimpl PcliExitCode {\n    /// Convert to numeric exit code\n    pub fn code(\u0026self) -\u003e i32 {\n        *self as i32\n    }\n    \n    /// Get descriptive message for the exit code\n    pub fn message(\u0026self) -\u003e \u0026'static str {\n        match self {\n            PcliExitCode::Success =\u003e \"Success\",\n            PcliExitCode::UsageError =\u003e \"Command line usage error\",\n            PcliExitCode::DataError =\u003e \"Data format error\",\n            PcliExitCode::NoInput =\u003e \"Cannot open input file\",\n            PcliExitCode::NotFound =\u003e \"Resource not found\",\n            PcliExitCode::Unavailable =\u003e \"Service unavailable\",\n            PcliExitCode::TempFail =\u003e \"Temporary failure\",\n            PcliExitCode::SoftwareError =\u003e \"Internal software error\",\n            PcliExitCode::OSError =\u003e \"Operating system error\",\n            PcliExitCode::ConfigError =\u003e \"Configuration error\",\n            PcliExitCode::AuthError =\u003e \"Authentication error\",\n            PcliExitCode::NetworkError =\u003e \"Network communication error\",\n            PcliExitCode::ApiError =\u003e \"Remote API error\",\n        }\n    }\n}\n\nimpl From\u003cPcliExitCode\u003e for i32 {\n    fn from(code: PcliExitCode) -\u003e Self {\n        code.code()\n    }\n}","traces":[{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":19},{"path":["/","Users","julian","projects","physna","pcli2","src","folder_cache.rs"],"content":"//! Folder caching functionality for the Physna CLI client.\n//!\n//! This module provides functionality for caching folder hierarchies to improve\n//! performance by reducing API calls. It uses bincode serialization for efficient\n//! storage and retrieval of folder data.\n\nuse crate::cache::BaseCache;\nuse crate::folder_hierarchy::FolderHierarchy;\nuse crate::physna_v3::PhysnaApiClient;\nuse std::fs;\nuse std::path::PathBuf;\nuse serde_json;\nuse uuid::Uuid;\nuse std::io::Write;\n\n/// Manages caching of folder hierarchies for Physna tenants\npub struct FolderCache {\n    // Removed unused base field since we're not using BaseCache directly\n}\n\n\n\nimpl FolderCache {\n    /// Get the cache directory path\n    /// \n    /// In a test environment (when PCLI2_TEST_CACHE_DIR is set), it uses that directory.\n    /// For general cross-platform support (when PCLI2_CACHE_DIR is set), it uses that directory.\n    /// Otherwise, it uses the system's cache directory with a \"pcli2/folder_cache\" subdirectory.\n    pub fn get_cache_dir() -\u003e PathBuf {\n        BaseCache::get_cache_dir().join(\"folder_cache\")\n    }\n    \n    /// Get the cache file path for a specific tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache file path to retrieve\n    /// \n    /// # Returns\n    /// The full path to the tenant's cache file\n    pub fn get_cache_file_path\u003cS: AsRef\u003cstr\u003e\u003e(key: S) -\u003e PathBuf {\n        let key: \u0026str = key.as_ref();\n        BaseCache::get_cache_file_path(\u0026Self::get_cache_dir(), key, \"json\")\n    }\n    \n    /// Load cached folder hierarchy for a tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cached folder hierarchy to load\n    /// \n    /// # Returns\n    /// * `Some(FolderHierarchy)` - If a valid cache file exists for the tenant and hasn't expired\n    /// * `None` - If no cache file exists, is expired, or if deserialization fails\n    pub fn load(tenant_uuid: \u0026Uuid) -\u003e Option\u003cFolderHierarchy\u003e {\n        let cache_file = Self::get_cache_file_path(tenant_uuid.to_string());\n        tracing::debug!(\"Attempting to load folder hierarchy from cache file: {:?}\", cache_file);\n        \n        if cache_file.exists() {\n            tracing::debug!(\"Cache file exists, checking expiration\");\n            // Check if the cache has expired\n            if BaseCache::is_file_expired(\u0026cache_file) {\n                tracing::debug!(\"Cache file expired, removing it\");\n                // Remove expired cache file\n                let _ = fs::remove_file(\u0026cache_file);\n                return None;\n            }\n            \n            tracing::debug!(\"Cache file is valid, attempting to read\");\n            match fs::read(\u0026cache_file) {\n                Ok(data) =\u003e {\n                    tracing::debug!(\"Successfully read {} bytes from cache file\", data.len());\n                    match serde_json::from_slice::\u003cFolderHierarchy\u003e(\u0026data) {\n                        Ok(hierarchy) =\u003e {\n                            tracing::debug!(\"Successfully deserialized folder hierarchy from cache\");\n                            Some(hierarchy)\n                        }\n                        Err(e) =\u003e {\n                            tracing::warn!(\"Failed to deserialize folder hierarchy from cache: {}\", e);\n                            tracing::debug!(\"Deserialization error details: {:?}\", e);\n                            None\n                        }\n                    }\n                }\n                Err(e) =\u003e {\n                    tracing::warn!(\"Failed to read cache file: {}\", e);\n                    None\n                }\n            }\n        } else {\n            tracing::debug!(\"Cache file does not exist: {:?}\", cache_file);\n            None\n        }\n    }\n    \n    /// Save folder hierarchy to cache for a tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant to cache the folder hierarchy for\n    /// * `hierarchy` - The folder hierarchy to cache\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the folder hierarchy was successfully cached\n    /// * `Err` - If there was an error during serialization or file operations\n    pub fn save(tenant_uuid: \u0026Uuid, hierarchy: \u0026FolderHierarchy) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let serialized = serde_json::to_vec(hierarchy)?;\n        tracing::debug!(\"Serialized folder hierarchy to {} bytes\", serialized.len());\n        \n        // Create cache directory if it doesn't exist\n        let cache_dir = Self::get_cache_dir();\n        fs::create_dir_all(\u0026cache_dir)?;\n        \n        let cache_file = Self::get_cache_file_path(tenant_uuid.to_string());\n        tracing::debug!(\"Writing cache file to: {:?}\", cache_file);\n        \n        // Use buffered writer to ensure all data is written properly\n        let file = std::fs::File::create(\u0026cache_file)?;\n        let mut writer = std::io::BufWriter::new(file);\n        writer.write_all(\u0026serialized)?;\n        writer.flush()?;\n        \n        tracing::debug!(\"Successfully wrote cache file\");\n        \n        Ok(())\n    }\n    \n    /// Get folder hierarchy from cache or fetch from API if not available/cached or expired\n    /// \n    /// This method first attempts to load the folder hierarchy from cache. If it's not\n    /// available in cache or has expired, it fetches the data from the Physna API and caches it.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folder hierarchy to retrieve\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The folder hierarchy for the tenant\n    /// * `Err` - If there was an error during cache operations or API calls\n    pub async fn get_or_fetch(\n        client: \u0026mut PhysnaApiClient,\n        tenant_uuid: \u0026Uuid,\n    ) -\u003e Result\u003cFolderHierarchy, Box\u003cdyn std::error::Error\u003e\u003e {\n        // Try to load from cache first\n        if let Some(cached) = Self::load(tenant_uuid) {\n            return Ok(cached);\n        }\n        \n        // If not in cache, fetch from API\n        let hierarchy = FolderHierarchy::build_from_api(client, tenant_uuid).await?;\n        \n        // Save to cache\n        if let Err(e) = Self::save(tenant_uuid, \u0026hierarchy) {\n            tracing::warn!(\"Failed to cache folder hierarchy: {}\", e);\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Refresh the cache for a specific tenant (force fetch from API)\n    /// \n    /// This method always fetches the latest folder hierarchy from the Physna API\n    /// and updates the cache, regardless of whether valid cached data exists.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folder hierarchy to refresh\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The refreshed folder hierarchy for the tenant\n    /// * `Err` - If there was an error during the API call or cache operations\n    pub async fn refresh(\n        client: \u0026mut PhysnaApiClient,\n        tenant_uuid: \u0026Uuid,\n    ) -\u003e Result\u003cFolderHierarchy, Box\u003cdyn std::error::Error\u003e\u003e {\n        let hierarchy = FolderHierarchy::build_from_api(client, tenant_uuid).await?;\n        \n        // Save to cache\n        if let Err(e) = Self::save(tenant_uuid, \u0026hierarchy) {\n            tracing::warn!(\"Failed to cache folder hierarchy: {}\", e);\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Invalidate cache for a specific tenant\n    /// \n    /// This method removes the cached folder hierarchy for the specified tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache to invalidate\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully invalidated or didn't exist\n    /// * `Err` - If there was an error during file operations\n    pub fn invalidate(tenant_id: \u0026str) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_file = Self::get_cache_file_path(tenant_id);\n        if cache_file.exists() {\n            fs::remove_file(cache_file)?;\n        }\n        Ok(())\n    }\n    \n    /// Clean expired cache files\n    /// \n    /// This method removes all expired cache files from the cache directory\n    pub fn clean_expired() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_dir = Self::get_cache_dir();\n        if !cache_dir.exists() {\n            return Ok(());\n        }\n        \n        for entry in fs::read_dir(cache_dir)? {\n            let entry = entry?;\n            let path = entry.path();\n            \n            if path.extension().is_some_and(|ext| ext == \"json\") {\n                let _ = fs::remove_file(\u0026path);\n                tracing::debug!(\"Removed expired cache file: {:?}\", path);\n            }\n        }\n        \n        Ok(())\n    }\n    \n    /// Purge all cached data\n    /// \n    /// This method removes all cache files from the cache directory, \n    /// effectively clearing the entire cache for all tenants.\n    /// \n    /// # Returns\n    /// * `Ok(())` - If all cache files were successfully removed\n    /// * `Err` - If there was an error during file operations\n    pub fn purge_all() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_dir = Self::get_cache_dir();\n        if !cache_dir.exists() {\n            return Ok(());\n        }\n        \n        // Remove all cache files\n        for entry in fs::read_dir(\u0026cache_dir)? {\n            let entry = entry?;\n            let path = entry.path();\n            \n            if path.extension().is_some_and(|ext| ext == \"json\") {\n                fs::remove_file(\u0026path)?;\n                tracing::debug!(\"Removed cache file: {:?}\", path);\n            }\n        }\n        \n        tracing::debug!(\"Successfully purged all cached data\");\n        Ok(())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use tempfile::TempDir;\n\n    #[test]\n    fn test_folder_cache_get_cache_dir() {\n        // Test that we can get the cache directory path without asserting specific content\n        let cache_dir = FolderCache::get_cache_dir();\n        // Just make sure it doesn't panic and returns a path\n        assert!(cache_dir.is_absolute() || cache_dir.starts_with(\".\"));\n    }\n\n    #[test]\n    fn test_folder_cache_get_cache_file_path() {\n        // Test that we can get the cache file path for a tenant without asserting specific content\n        let cache_file = FolderCache::get_cache_file_path(\"test-tenant\");\n        // Just make sure it doesn't panic and returns a path\n        assert!(cache_file.is_absolute() || cache_file.starts_with(\".\"));\n    }\n\n    #[test]\n    fn test_folder_cache_invalidate_nonexistent() {\n        // Test that we can invalidate a cache file that doesn't exist\n        let temp_dir = TempDir::new().unwrap();\n        \n        // Temporarily override the cache directory\n        std::env::set_var(\"PCLI2_TEST_CACHE_DIR\", temp_dir.path());\n        \n        // This should not panic or return an error\n        let result = FolderCache::invalidate(\"nonexistent-tenant\");\n        assert!(result.is_ok());\n        \n        // Clean up\n        std::env::remove_var(\"PCLI2_TEST_CACHE_DIR\");\n    }\n    \n    #[test]\n    fn test_folder_cache_save_and_load() {\n        use tempfile::TempDir;\n        \n        let temp_dir = TempDir::new().unwrap();\n        std::env::set_var(\"PCLI2_TEST_CACHE_DIR\", temp_dir.path());\n        \n        // Test that save creates cache directory\n        let result = FolderCache::save(\"test_tenant\", \u0026crate::folder_hierarchy::FolderHierarchy::new());\n        assert!(result.is_ok());\n        \n        std::env::remove_var(\"PCLI2_TEST_CACHE_DIR\");\n    }\n}\n","traces":[{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":3},{"path":["/","Users","julian","projects","physna","pcli2","src","folder_hierarchy.rs"],"content":"//! Folder hierarchy management for the Physna CLI client.\n//!\n//! This module provides functionality for building, managing, and manipulating\n//! folder hierarchies retrieved from the Physna API. It includes features for\n//! path-based lookups, tree printing, and hierarchical filtering.\n\nuse crate::model::FolderResponse;\nuse crate::physna_v3::{PhysnaApiClient};\nuse ptree::TreeBuilder;\nuse serde::{Deserialize, Serialize};\nuse uuid::Uuid;\nuse std::collections::HashMap;\nuse tracing::trace;\nuse thiserror::Error;\n\n#[derive(Debug, Error)]\npub enum FolderHierarchyError {\n    #[error(\"{0}\")]\n    ApiError(#[from] crate::physna_v3::ApiError),\n}\n\n/// Represents a single folder node in the folder hierarchy\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct FolderNode {\n    /// The folder data from the Physna API\n    pub folder: FolderResponse,\n    /// UUIDs of child folders\n    pub children: Vec\u003cUuid\u003e,\n}\n\nimpl FolderNode {\n    /// Create a new FolderNode from a FolderResponse\n    pub fn new(folder: FolderResponse) -\u003e Self {\n        Self {\n            folder,\n            children: Vec::new(),\n        }\n    }\n    \n    /// Get the ID of the folder\n    pub fn uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.folder.uuid\n    }\n    \n    /// Get the name of the folder\n    pub fn name(\u0026self) -\u003e \u0026str {\n        \u0026self.folder.name\n    }\n    \n    /// Get the parent folder ID, if any\n    pub fn parent_uuid(\u0026self) -\u003e Option\u003c\u0026Uuid\u003e {\n        self.folder.parent_folder_uuid.as_ref()\n    }\n}\n\n/// Represents the complete folder hierarchy for a tenant\n#[derive(Serialize, Deserialize, Clone)]\npub struct FolderHierarchy {\n    /// Map of folder UUID to FolderNode\n    pub nodes: HashMap\u003cUuid, FolderNode\u003e,\n    /// Root folder IDs (folders with no parent)\n    pub root_uuids: Vec\u003cUuid\u003e,\n}\n\nimpl Default for FolderHierarchy {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\nimpl FolderHierarchy {\n    /// Create a new empty FolderHierarchy\n    pub fn new() -\u003e Self {\n        Self {\n            nodes: HashMap::new(),\n            root_uuids: Vec::new(),\n        }\n    }\n    \n    /// Build a folder hierarchy by fetching all folders from the Physna API\n    /// \n    /// This method fetches all folders for a tenant using pagination and constructs\n    /// a complete folder hierarchy with parent-child relationships.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folders to fetch\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The complete folder hierarchy for the tenant\n    /// * `Err` - If there was an error during API calls or data processing\n    pub async fn build_from_api(client: \u0026mut PhysnaApiClient, tenant_uuid: \u0026Uuid) -\u003e Result\u003cSelf, FolderHierarchyError\u003e {\n        let mut hierarchy = Self::new();\n        \n        // Fetch all folders using pagination with per_page of 200 for better performance (API max is 1000)\n        let mut page = 1;\n        let per_page = 200;\n        loop {\n            trace!(\"Fetching folder page {} for tenant {} ({} folders so far)\", page, tenant_uuid.to_string(), hierarchy.nodes.len());\n            let response = client.list_folders(tenant_uuid, Some(page), Some(per_page)).await?;\n            \n            let folders_on_page = response.folders.len();\n            trace!(\"Fetched {} folders on page {}\", folders_on_page, page);\n            \n            // Add all folders to the hierarchy\n            for folder in response.folders {\n                let folder_uuid = folder.uuid.clone();\n                let parent_uuid = folder.parent_folder_uuid.clone();\n                \n                // Create node and add to hierarchy\n                let node = FolderNode::new(folder);\n                hierarchy.nodes.insert(folder_uuid.clone(), node);\n                \n                // If folder has a parent, add it as child to the parent\n                if let Some(parent_uuid) = \u0026parent_uuid {\n                    if let Some(parent_node) = hierarchy.nodes.get_mut(parent_uuid) {\n                        parent_node.children.push(folder_uuid.clone());\n                    }\n                } else {\n                    // No parent - this is a root folder\n                    hierarchy.root_uuids.push(folder_uuid.clone());\n                }\n            }\n            \n            // Check if we've reached the last page\n            // The API uses 1-based indexing for pages\n            if response.page_data.current_page \u003e= response.page_data.last_page {\n                trace!(\"Reached last page of folders for tenant {} after {} pages\", tenant_uuid, page);\n                break;\n            }\n            \n            page += 1;\n        }\n        \n        // Second pass to add children to parents that might have been processed after their children\n        let node_uuids: Vec\u003cUuid\u003e = hierarchy.nodes.keys().cloned().collect();\n        let parent_child_relations: Vec\u003c(Uuid, Uuid)\u003e = node_uuids\n            .iter()\n            .filter_map(|uuid| {\n                if let Some(node) = hierarchy.nodes.get(uuid) {\n                    if let Some(parent_uuid) = node.parent_uuid() {\n                        return Some((parent_uuid.clone(), uuid.clone()));\n                    }\n                }\n                None\n            })\n            .collect();\n        \n        for (parent_id, child_id) in parent_child_relations {\n            if let Some(parent_node) = hierarchy.nodes.get_mut(\u0026parent_id) {\n                if !parent_node.children.contains(\u0026child_id) {\n                    parent_node.children.push(child_id);\n                }\n            }\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Convert the folder hierarchy to a flat FolderList containing only direct children of the root folder\n    /// \n    /// This method creates a FolderList with only the direct children of the root folders\n    /// in this hierarchy, rather than all folders. This is useful for efficient folder listing\n    /// when only immediate children are needed.\n    /// \n    /// # Returns\n    /// A FolderList containing only direct children with their computed paths\n    pub fn to_direct_children_list(\u0026self) -\u003e crate::model::FolderList {\n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // For each root folder, add it to the list\n        for root_uuid in \u0026self.root_uuids {\n            if let Some(root_node) = self.nodes.get(root_uuid) {\n                // Add the root folder itself\n                let root_path = self.get_path_for_folder(root_uuid).unwrap_or_else(|| root_node.name().to_string());\n                let root_folder = crate::model::Folder::from_folder_response(root_node.folder.clone(), root_path);\n                folder_list.add(root_folder);\n            }\n        }\n        \n        folder_list\n    }\n    \n    /// Get direct children of a folder by path\n    /// \n    /// This method returns a FolderList containing only the direct children of the specified folder path.\n    /// This is useful for listing only immediate subfolders without recursively listing all descendants.\n    /// \n    /// # Arguments\n    /// * `folder_path` - The path of the folder whose children to retrieve\n    /// \n    /// # Returns\n    /// A FolderList containing only the direct children of the specified folder\n    pub fn get_children_by_path(\u0026self, folder_path: \u0026str) -\u003e Option\u003ccrate::model::FolderList\u003e {\n        // Find the folder node at the specified path\n        let target_node = self.get_folder_by_path(folder_path)?;\n        \n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // Add only the direct children of this folder\n        for child_uuid in \u0026target_node.children {\n            if let Some(child_node) = self.nodes.get(child_uuid) {\n                let child_path = self.get_path_for_folder(child_uuid).unwrap_or_else(|| child_node.name().to_string());\n                let child_folder = crate::model::Folder::from_folder_response(child_node.folder.clone(), child_path);\n                folder_list.add(child_folder);\n            }\n        }\n        \n        Some(folder_list)\n    }\n    \n    /// Get a folder node by its ID\n    /// \n    /// # Arguments\n    /// * `id` - The ID of the folder to retrieve\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder with the specified ID exists\n    /// * `None` - If no folder with the specified ID exists\n    pub fn get_folder_by_uuid(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026FolderNode\u003e {\n        self.nodes.get(uuid)\n    }\n    \n    /// Get a folder node by its path\n    /// \n    /// # Arguments\n    /// * `path` - The path of the folder to retrieve (e.g., \"Root/Child/Grandchild\")\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder with the specified path exists\n    /// * `None` - If no folder with the specified path exists\n    pub fn get_folder_by_path(\u0026self, path: \u0026str) -\u003e Option\u003c\u0026FolderNode\u003e {\n            let clean_path = path.strip_prefix('/').unwrap_or(path);\n            let path_parts: Vec\u003c\u0026str\u003e = clean_path.split('/').collect();\n        \n            // Start from root folders\n            self.find_folder_by_path_parts(\u0026self.root_uuids, \u0026path_parts)\n    }\n    \n    /// Find a folder node by path parts recursively\n    /// \n    /// # Arguments\n    /// * `folder_ids` - The IDs of folders to search within\n    /// * `path_parts` - The remaining path parts to match\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder matching the path parts is found\n    /// * `None` - If no matching folder is found\n    fn find_folder_by_path_parts(\u0026self, folder_ids: \u0026[Uuid], path_parts: \u0026[\u0026str]) -\u003e Option\u003c\u0026FolderNode\u003e {\n        if path_parts.is_empty() {\n            return None;\n        }\n        \n        let current_part = path_parts[0];\n        \n        // Find folder with matching name among the given folder IDs\n        for folder_id in folder_ids {\n            if let Some(node) = self.nodes.get(folder_id) {\n                if node.name() == current_part {\n                    if path_parts.len() == 1 {\n                        // Found the target folder\n                        return Some(node);\n                    } else {\n                        // Continue searching in children\n                        return self.find_folder_by_path_parts(\u0026node.children, \u0026path_parts[1..]);\n                    }\n                }\n            }\n        }\n        \n        None\n    }\n    \n    /// Get the full path for a folder by its ID\n    /// \n    /// # Arguments\n    /// * `folder_id` - The ID of the folder whose path to retrieve\n    /// \n    /// # Returns\n    /// * `Some(String)` - The full path of the folder (e.g., \"Root/Child/Grandchild\")\n    /// * `None` - If no folder with the specified ID exists\n    pub fn get_path_for_folder(\u0026self, folder_uuid: \u0026Uuid) -\u003e Option\u003cString\u003e {\n        let mut path_parts = Vec::new();\n        let mut current_uuid = folder_uuid;\n        \n        // Traverse up the hierarchy to build the path\n        while let Some(node) = self.nodes.get(current_uuid) {\n            path_parts.push(node.name());\n            \n            if let Some(parent_uuid) = node.parent_uuid() {\n                current_uuid = parent_uuid;\n            } else {\n                break;\n            }\n        }\n        \n        // Reverse the path parts to get the correct order\n        path_parts.reverse();\n        \n        if path_parts.is_empty() {\n            None\n        } else {\n            Some(path_parts.join(\"/\"))\n        }\n    }\n    \n    /// Create a new FolderHierarchy containing only the subtree under the specified path\n    /// \n    /// # Arguments\n    /// * `path` - The path of the folder to use as the root of the new hierarchy\n    /// \n    /// # Returns\n    /// * `Some(FolderHierarchy)` - A new hierarchy containing only the subtree\n    /// * `None` - If no folder exists at the specified path\n    pub fn filter_by_path(\u0026self, path: \u0026str) -\u003e Option\u003cFolderHierarchy\u003e {\n\n        // Find the folder node at the specified path\n        let target_node = self.get_folder_by_path(path)?;\n    \n        // Create a new hierarchy with only the subtree\n        let mut filtered_hierarchy = FolderHierarchy::new();\n    \n        // Add the target folder and all its descendants\n        self.add_subtree_to_hierarchy(\u0026mut filtered_hierarchy, target_node, true);\n    \n        Some(filtered_hierarchy)\n    }\n    \n    /// Recursively add a subtree to a hierarchy\n    /// \n    /// # Arguments\n    /// * `hierarchy` - The hierarchy to add the subtree to\n    /// * `node` - The root node of the subtree to add\n    /// * `is_root` - Whether this node is the root of the new hierarchy\n    fn add_subtree_to_hierarchy(\u0026self, hierarchy: \u0026mut FolderHierarchy, node: \u0026FolderNode, is_root: bool) {\n        // Create a new node with adjusted parent relationship\n        let mut new_node = node.clone();\n        \n        // If this is the root of our filtered hierarchy, remove the parent relationship\n        if is_root {\n            // Create a new folder response with no parent\n            let mut new_folder = new_node.folder.clone();\n            new_folder.parent_folder_uuid = None;\n            new_node.folder = new_folder;\n            \n            // Add this node to root_ids since it's the root of our filtered hierarchy\n            hierarchy.root_uuids.push(node.uuid().clone());\n        }\n        \n        // Add the current node\n        hierarchy.nodes.insert(node.uuid().clone(), new_node);\n        \n        // Recursively add all children\n        for child_id in \u0026node.children {\n            if let Some(child_node) = self.nodes.get(child_id) {\n                self.add_subtree_to_hierarchy(hierarchy, child_node, false);\n            }\n        }\n    }\n    \n    /// Print the folder hierarchy as a tree structure\n    /// \n    /// This method prints the folder hierarchy to stdout using a tree-like format\n    /// with proper indentation to show parent-child relationships.\n    pub fn print_tree(\u0026self) {\n        // Sort root folders by name\n        let mut sorted_roots: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = self.root_uuids\n            .iter()\n            .filter_map(|id| self.nodes.get(id).map(|node| (id, node)))\n            .collect();\n        sorted_roots.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n        \n        for (_root_id, node) in sorted_roots {\n            let mut tree = TreeBuilder::new(node.name().to_string());\n            \n            // Build children for this root (sorted by name)\n            let mut sorted_children: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = node.children\n                .iter()\n                .filter_map(|uuid| self.nodes.get(uuid).map(|node| (uuid, node)))\n                .collect();\n            sorted_children.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n            \n            for (_child_id, child_node) in sorted_children {\n                self.build_tree_node(\u0026mut tree, child_node);\n            }\n            \n            let tree = tree.build();\n            // Ignore broken pipe errors (e.g., when piping to head)\n            let _ = ptree::print_tree(\u0026tree);\n        }\n    }\n    \n    /// Recursively build a tree node for printing\n    /// \n    /// # Arguments\n    /// * `tree` - The TreeBuilder to add nodes to\n    /// * `node` - The current node to process\n    fn build_tree_node(\u0026self, tree: \u0026mut TreeBuilder, node: \u0026FolderNode) {\n        tree.begin_child(node.name().to_string());\n        \n        // Sort children by name\n        let mut sorted_children: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = node.children\n            .iter()\n            .filter_map(|uuid| self.nodes.get(uuid).map(|node| (uuid, node)))\n            .collect();\n        sorted_children.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n        \n        for (_child_id, child_node) in sorted_children {\n            self.build_tree_node(tree, child_node);\n        }\n        \n        tree.end_child();\n    }\n    \n    /// Convert the folder hierarchy to a flat FolderList\n    /// \n    /// This method creates a FolderList with all folders in the hierarchy,\n    /// each with its full path computed from the hierarchy.\n    /// \n    /// # Returns\n    /// A FolderList containing all folders with their computed paths\n    pub fn to_folder_list(\u0026self) -\u003e crate::model::FolderList {\n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // Process each node to create folders with proper paths\n        for (id, node) in \u0026self.nodes {\n            let path = self.get_path_for_folder(id).unwrap_or_else(|| node.name().to_string());\n            let folder = crate::model::Folder::from_folder_response(node.folder.clone(), path);\n            folder_list.add(folder);\n        }\n        \n        folder_list\n    }\n}\n\n","traces":[{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":254,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":136},{"path":["/","Users","julian","projects","physna","pcli2","src","format.rs"],"content":"//! Formatting utilities for the Physna CLI client.\n//!\n//! This module provides functionality for formatting output in various formats\n//! including JSON, CSV, and tree representations.\n\nuse csv::Writer;\nuse serde_json;\nuse std::io::BufWriter;\nuse std::str::FromStr;\nuse strum::EnumIter;\n\npub const JSON: \u0026str = \"json\";\npub const CSV: \u0026str = \"csv\";\npub const TREE: \u0026str = \"tree\";\n\n/// Error types that can occur during formatting operations\n#[derive(Debug, thiserror::Error)]\npub enum FormattingError {\n    /// Error when an unsupported output format is requested\n    #[error(\"invalid output format {0}\")]\n    UnsupportedOutputFormat(String),\n    /// General error when formatting fails\n    #[error(\"failed to format output due to: {cause:?}\")]\n    FormatFailure { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    /// Error specific to CSV operations\n    #[error(\"CSV error: {0}\")]\n    CsvError(#[from] csv::Error),\n    /// Error when converting bytes to UTF-8 string\n    #[error(\"UTF-8 conversion error: {0}\")]\n    Utf8Error(#[from] std::string::FromUtf8Error),\n    /// Error specific to CSV writer operations\n    #[error(\"CSV writer error: {0}\")]\n    CsvWriterError(String),\n\n    #[error(\"JSON serialization error: {0}\")]\n    JsonSerializationError(#[from] serde_json::Error),\n\n    #[error(\"CSV writer into inner error: {0}\")]\n    CsvIntoInnerError(#[from] csv::IntoInnerError\u003ccsv::Writer\u003cVec\u003cu8\u003e\u003e\u003e),\n}\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub struct OutputFormatOptions {\n    pub with_metadata: bool,\n    pub with_headers: bool,\n    pub pretty: bool,\n}\n\nimpl Default for OutputFormatOptions {\n    fn default() -\u003e Self {\n        OutputFormatOptions {\n            with_metadata: false,\n            with_headers: false,\n            pretty: false,\n        }\n    }\n}\n\n/// Enum representing the supported output formats\n#[derive(Debug, Clone, PartialEq, PartialOrd, EnumIter)]\npub enum OutputFormat {\n    /// CSV (Comma-Separated Values) format\n    Csv(OutputFormatOptions),\n    /// JSON (JavaScript Object Notation) format\n    Json(OutputFormatOptions),\n    /// Tree format for hierarchical data representation\n    Tree(OutputFormatOptions),\n}\n\nimpl OutputFormat {\n    /// Returns a vector of all supported format names as strings\n    pub fn names() -\u003e Vec\u003c\u0026'static str\u003e {\n        vec![JSON, CSV, TREE]\n    }\n\n    pub fn from_string_with_options(\n        format_str: \u0026str,\n        options: OutputFormatOptions,\n    ) -\u003e Result\u003cOutputFormat, FormattingError\u003e {\n        let normalized_format = format_str.to_lowercase();\n        let normalized_format = normalized_format.as_str();\n        match normalized_format {\n            JSON =\u003e Ok(OutputFormat::Json(options)),\n            CSV =\u003e Ok(OutputFormat::Csv(options)),\n            TREE =\u003e Ok(OutputFormat::Tree(options)),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(\n                normalized_format.to_string(),\n            )),\n        }\n    }\n}\n\nimpl Default for OutputFormat {\n    fn default() -\u003e Self {\n        OutputFormat::Json(OutputFormatOptions::default())\n    }\n}\n\nimpl std::fmt::Display for OutputFormat {\n    /// Formats the OutputFormat enum as a string for display purposes\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter) -\u003e std::fmt::Result {\n        match self {\n            OutputFormat::Csv(_) =\u003e write!(f, \"csv\"),\n            OutputFormat::Json(_) =\u003e write!(f, \"json\"),\n            OutputFormat::Tree(_) =\u003e write!(f, \"tree\"),\n        }\n    }\n}\n\nimpl FromStr for OutputFormat {\n    type Err = FormattingError;\n\n    /// Parses a string into an OutputFormat enum variant\n    fn from_str(format_str: \u0026str) -\u003e Result\u003cOutputFormat, FormattingError\u003e {\n        Self::from_string_with_options(format_str, OutputFormatOptions::default())\n    }\n}\n\n/// Trait for formatting data in different output formats\npub trait OutputFormatter {\n    /// The type of item being formatted\n    type Item;\n\n    /// Format the data according to the specified output format\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e;\n}\n\n/// Trait for producing CSV records from data\npub trait CsvRecordProducer {\n    /// Returns the header row for the CSV output\n    fn csv_header() -\u003e Vec\u003cString\u003e;\n\n    /// Converts the data into CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e;\n\n    /// Returns the header row for the CSV output with metadata columns\n    fn csv_header_with_metadata() -\u003e Vec\u003cString\u003e {\n        Self::csv_header()\n    }\n\n    /// Converts the data into CSV records with metadata columns\n    fn as_csv_records_with_metadata(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.as_csv_records()\n    }\n\n    /// Produces CSV output with a header row\n    fn to_csv_with_header(\u0026self) -\u003e Result\u003cString, FormattingError\u003e {\n        self.to_csv(true)\n    }\n\n    /// Produces CSV output without a header row\n    fn to_csv_without_header(\u0026self) -\u003e Result\u003cString, FormattingError\u003e {\n        self.to_csv(false)\n    }\n\n    /// Produces CSV output with or without a header row based on the parameter\n    fn to_csv(\u0026self, with_header: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        let buf = BufWriter::new(Vec::new());\n        let mut wtr = Writer::from_writer(buf);\n        if with_header {\n            wtr.write_record(Self::csv_header()).unwrap();\n        }\n        for record in self.as_csv_records() {\n            wtr.write_record(\u0026record).unwrap();\n        }\n        match wtr.flush() {\n            Ok(_) =\u003e {\n                let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                let csv = String::from_utf8(bytes).unwrap();\n                Ok(csv.clone())\n            }\n            Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n        }\n    }\n}\n\npub trait Formattable {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e;\n}\n","traces":[{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":264}},{"line":73,"address":[],"length":0,"stats":{"Line":1056}},{"line":76,"address":[],"length":0,"stats":{"Line":4}},{"line":80,"address":[],"length":0,"stats":{"Line":12}},{"line":81,"address":[],"length":0,"stats":{"Line":12}},{"line":82,"address":[],"length":0,"stats":{"Line":4}},{"line":83,"address":[],"length":0,"stats":{"Line":6}},{"line":84,"address":[],"length":0,"stats":{"Line":4}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}}],"covered":8,"coverable":42},{"path":["/","Users","julian","projects","physna","pcli2","src","http_utils.rs"],"content":"//! HTTP utilities for the Physna CLI client.\n//!\n//! This module provides common HTTP request handling utilities to improve\n//! code reuse and consistency across different API clients in the application.\n\nuse reqwest::Client;\nuse serde::de::DeserializeOwned;\nuse tracing::{debug, error, trace};\nuse std::collections::HashMap;\n\n/// Configuration for HTTP requests with common settings\n#[derive(Debug, Clone)]\npub struct HttpRequestConfig {\n    /// Base URL for the API\n    pub base_url: String,\n    /// Default headers to include with all requests  \n    pub default_headers: HashMap\u003cString, String\u003e,\n    /// Request timeout in seconds\n    pub timeout: u64,\n    /// Whether to automatically retry on certain error codes\n    pub retry_on_auth_error: bool,\n}\n\nimpl Default for HttpRequestConfig {\n    fn default() -\u003e Self {\n        Self {\n            base_url: \"https://app-api.physna.com/v3\".to_string(),\n            default_headers: HashMap::new(),\n            timeout: 60, // 60 seconds\n            retry_on_auth_error: true,\n        }\n    }\n}\n\nimpl HttpRequestConfig {\n    pub fn from_configuration(configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            base_url: configuration.get_api_base_url(),\n            default_headers: HashMap::new(),\n            timeout: 60, // 60 seconds\n            retry_on_auth_error: true,\n        }\n    }\n}\n\n/// HTTP client wrapper with common request handling logic\npub struct HttpClient {\n    /// The reqwest client instance\n    client: Client,\n    /// Configuration for the HTTP client\n    config: HttpRequestConfig,\n}\n\nimpl HttpClient {\n    /// Create a new HTTP client with the given configuration\n    pub fn new(config: HttpRequestConfig) -\u003e Result\u003cSelf, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e {\n        let client = Client::builder()\n            .timeout(std::time::Duration::from_secs(config.timeout))\n            .build()\n            .map_err(|e| Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e)?;\n        \n        Ok(Self { client, config })\n    }\n\n    /// Make a GET request to the specified path with automatic error handling\n    pub async fn get\u003cT\u003e(\u0026self, path: \u0026str, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.get(format!(\"{}{}\", self.config.base_url, path))\n        }, auth_token).await\n    }\n    \n    /// Make a POST request to the specified path with JSON body and automatic error handling\n    pub async fn post\u003cT, B\u003e(\u0026self, path: \u0026str, body: \u0026B, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.post(format!(\"{}{}\", self.config.base_url, path))\n                .json(body)\n        }, auth_token).await\n    }\n    \n    /// Make a PUT request to the specified path with JSON body and automatic error handling\n    pub async fn put\u003cT, B\u003e(\u0026self, path: \u0026str, body: \u0026B, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.put(format!(\"{}{}\", self.config.base_url, path))\n                .json(body)\n        }, auth_token).await\n    }\n\n    /// Make a DELETE request to the specified path with automatic error handling\n    pub async fn delete(\u0026self, path: \u0026str, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003c(), crate::physna_v3::ApiError\u003e {\n        let mut request = self.client\n            .delete(format!(\"{}{}\", self.config.base_url, path));\n        \n        // Add authorization header if available\n        if let Some(token) = auth_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        // Add default headers\n        for (key, value) in \u0026self.config.default_headers {\n            request = request.header(key, value);\n        }\n        \n        let response = request.send().await\n            .map_err(crate::physna_v3::ApiError::HttpError)?;\n        \n        if response.status().is_success() {\n            Ok(())\n        } else {\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n\n    /// Execute an HTTP request with common error handling and optional authentication\n    async fn execute_request\u003cF, T\u003e(\u0026self, request_builder: F, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        F: FnOnce(\u0026Client) -\u003e reqwest::RequestBuilder,\n        T: DeserializeOwned,\n    {\n        let mut request = request_builder(\u0026self.client);\n        \n        // Add authorization header if available\n        if let Some(token) = auth_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        // Add default headers\n        for (key, value) in \u0026self.config.default_headers {\n            request = request.header(key, value);\n        }\n        \n        let response = request.send().await\n            .map_err(crate::physna_v3::ApiError::HttpError)?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), request should be retried with fresh token\", response.status());\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        } else if response.status().is_success() {\n            // Try to get the raw response text for debugging\n            let response_text = response.text().await\n                .map_err(crate::physna_v3::ApiError::HttpError)?;\n            trace!(\"Raw response text for deserialization: {}\", response_text);\n            \n            // Try to parse and return the JSON response\n            match serde_json::from_str::\u003cT\u003e(\u0026response_text) {\n                Ok(result) =\u003e Ok(result),\n                Err(e) =\u003e {\n                    error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response_text);\n                    Err(crate::physna_v3::ApiError::JsonError(e))\n                }\n            }\n        } else {\n            // For all other errors, return the error status\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_http_client_config_default() {\n        let config = HttpRequestConfig::default();\n        assert_eq!(config.base_url, \"https://app-api.physna.com/v3\");\n        assert_eq!(config.timeout, 60);\n        assert!(config.retry_on_auth_error);\n    }\n\n    #[test]\n    fn test_http_client_config() {\n        let config = HttpRequestConfig::default();\n        assert_eq!(config.timeout, 60);\n        assert!(config.retry_on_auth_error);\n    }\n}","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":2}},{"line":27,"address":[],"length":0,"stats":{"Line":4}},{"line":28,"address":[],"length":0,"stats":{"Line":2}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}}],"covered":3,"coverable":59},{"path":["/","Users","julian","projects","physna","pcli2","src","keyring.rs"],"content":"#[cfg(not(feature = \"dev-keyring\"))]\nmod implementation {\n    use keyring::Entry;\n    use thiserror::Error;\n\n    #[derive(Debug, Error)]\n    pub enum KeyringError {\n        #[error(\"keyring error\")]\n        KeyringAccessError(#[from] KeyringErrorInternal),\n    }\n\n    impl From\u003ckeyring::Error\u003e for KeyringError {\n        fn from(error: keyring::Error) -\u003e Self {\n            KeyringError::KeyringAccessError(KeyringErrorInternal::CannotAccessKeyringEntity(error))\n        }\n    }\n\n    #[derive(Debug, Error)]\n    pub enum KeyringErrorInternal {\n        #[error(\"keyring error\")]\n        CannotAccessKeyringEntity(#[from] keyring::Error),\n    }\n\n    pub struct Keyring {}\n\n    impl Default for Keyring {\n        fn default() -\u003e Keyring {\n            Keyring {}\n        }\n    }\n\n    impl Keyring {\n        pub fn get(\u0026self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            match entry.get_password() {\n                Ok(value) =\u003e Ok(Some(value)),\n                Err(e) =\u003e match e {\n                    keyring::Error::NoEntry =\u003e Ok(None),\n                    _ =\u003e Err(KeyringError::from(e)),\n                },\n            }\n        }\n\n        pub fn put(\u0026self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            entry.set_password(value.as_str())?;\n            Ok(())\n        }\n\n        pub fn delete(\u0026self, tenant: \u0026str, key: String) -\u003e Result\u003c(), KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            entry.delete_password()?;\n            Ok(())\n        }\n\n        /// Get multiple credential values for an environment in a single operation\n        /// This helps reduce multiple keyring access calls that might trigger multiple authorization prompts\n        pub fn get_environment_credentials(\u0026self, tenant: \u0026str) -\u003e Result\u003c(Option\u003cString\u003e, Option\u003cString\u003e, Option\u003cString\u003e), KeyringError\u003e {\n            let access_token = self.get(tenant, \"access-token\".to_string()).ok().flatten();\n            let client_id = self.get(tenant, \"client-id\".to_string()).ok().flatten();\n            let client_secret = self.get(tenant, \"client-secret\".to_string()).ok().flatten();\n\n            Ok((access_token, client_id, client_secret))\n        }\n    }\n}\n\n#[cfg(feature = \"dev-keyring\")]\nmod implementation {\n    use crate::dev_keyring::DevKeyring;\n    use thiserror::Error;\n\n    #[derive(Debug, Error)]\n    pub enum KeyringError {\n        #[error(\"keyring error: {0}\")]\n        KeyringAccessError(String),\n    }\n\n    #[derive(Default)]\n    pub struct Keyring {\n        dev_keyring: DevKeyring,\n    }\n\n    impl Keyring {\n        pub fn get(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, KeyringError\u003e {\n            self.dev_keyring.get(tenant, key).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        pub fn put(\u0026mut self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), KeyringError\u003e {\n            self.dev_keyring.put(tenant, key, value).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        pub fn delete(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003c(), KeyringError\u003e {\n            self.dev_keyring.delete(tenant, key).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        /// Get multiple credential values for an environment in a single operation\n        /// This helps reduce multiple keyring access calls that might trigger multiple authorization prompts\n        pub fn get_environment_credentials(\u0026mut self, tenant: \u0026str) -\u003e Result\u003c(Option\u003cString\u003e, Option\u003cString\u003e, Option\u003cString\u003e), KeyringError\u003e {\n            let access_token = self.dev_keyring.get(tenant, \"access-token\".to_string()).ok().flatten();\n            let client_id = self.dev_keyring.get(tenant, \"client-id\".to_string()).ok().flatten();\n            let client_secret = self.dev_keyring.get(tenant, \"client-secret\".to_string()).ok().flatten();\n\n            Ok((access_token, client_id, client_secret))\n        }\n    }\n}\n\npub use implementation::*;","traces":[{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":4}},{"line":103,"address":[],"length":0,"stats":{"Line":32}},{"line":104,"address":[],"length":0,"stats":{"Line":32}},{"line":105,"address":[],"length":0,"stats":{"Line":32}},{"line":107,"address":[],"length":0,"stats":{"Line":8}}],"covered":5,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","lib.rs"],"content":"//! The Physna CLI client library.\n//!\n//! This crate provides the core functionality for the Physna CLI client,\n//! including API interactions, data models, caching, authentication, and\n//! command execution.\n//!\n//! # Modules\n//!\n//! - `api`: Legacy API client implementations\n//! - `asset_cache`: Caching functionality for assets\n//! - `auth`: Authentication mechanisms\n//! - `commands`: CLI command parsing and execution\n//! - `configuration`: Configuration management\n//! - `folder_cache`: Caching functionality for folders\n//! - `folder_hierarchy`: Folder hierarchy management and traversal\n//! - `format`: Data formatting utilities for various output formats\n//! - `model`: Data models for Physna entities (folders, assets, tenants, etc.)\n//! - `physna_v3`: Physna V3 API client implementation\n\npub mod actions;\npub mod auth;\npub mod cache;\npub mod commands;\npub mod configuration;\npub mod dev_keyring;\npub mod error;\npub mod error_utils;\npub mod exit_codes;\npub mod folder_hierarchy;\npub mod format;\npub mod http_utils;\npub mod keyring;\npub mod metadata;\npub mod metadata_cache;\npub mod model;\npub mod param_utils;\npub mod physna_v3;\npub mod tenant_cache;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","src","main.rs"],"content":"//! Main entry point for the Physna CLI client.\n//!\n//! This module contains the main function that serves as the entry point\n//! for the CLI application. It handles initialization, configuration loading,\n//! command parsing, and error handling.\n//! \n//! The application follows a layered architecture pattern:\n//! - main.rs: Entry point and application initialization\n//! - cli.rs: Command execution logic\n//! - commands.rs: Command definitions and parsing\n//! - physna_v3.rs: API client and communication layer  \n//! - model.rs: Data models and structures\n//! - auth.rs: Authentication handling\n//! - configuration.rs: Configuration management\n\nuse configuration::ConfigurationError;\nuse pcli2::error::CliError;\nuse pcli2::{\n    configuration,\n    error_utils,\n};\nuse std::env;\nuse std::process;\nuse thiserror::Error;\nuse tracing_subscriber::EnvFilter;\n\nmod banner;\nmod cli;\nuse cli::execute_command;\nmod exit_codes;\nuse exit_codes::PcliExitCode;\n\n/// Error types that can occur in the main application\n#[derive(Error, Debug)]\nenum MainError {\n    /// Error related to configuration loading or management\n    #[error(transparent)]\n    ConfigurationError(#[from] ConfigurationError),\n    /// Error related to CLI command execution\n    #[error(transparent)]\n    CliError(#[from] CliError),\n}\n\nimpl MainError {\n    /// Get the appropriate exit code for this error\n    /// \n    /// Returns:\n    /// - `PcliExitCode::ConfigError` for configuration errors\n    /// - The CLI error's specific exit code for command execution errors\n    fn exit_code(\u0026self) -\u003e i32 {\n        match self {\n            MainError::ConfigurationError(_) =\u003e PcliExitCode::ConfigError.code(),\n            MainError::CliError(cli_error) =\u003e cli_error.exit_code().code(),\n        }\n    }\n}\n\n/// Main entry point for the Physna CLI client application.\n/// \n/// This function performs the following steps:\n/// 1. Initializes the logging subsystem using tracing with environment-filtered configuration\n/// 2. Loads the application configuration from persistent storage\n/// 3. Parses command-line arguments using the pre-defined command structure\n/// 4. Routes execution to the appropriate command handler based on user input\n/// 5. Handles any errors and exits with appropriate exit codes based on error types\n/// \n/// The function uses structured error handling with the `MainError` enum to provide\n/// clear error categorization and appropriate exit codes based on error types.\n/// \n/// # Returns\n/// \n/// * `Ok(())` - If the command executed successfully (exit code 0)\n/// * `Err(i32)` - If an error occurred, with the appropriate exit code for the error type\n#[tokio::main]\nasync fn main() {\n    // Check if help is requested to show banner\n    let args: Vec\u003cString\u003e = env::args().collect();\n    if banner::has_help_flag(\u0026args) {\n        banner::print_banner();\n    }\n\n    // Initialize the logging subsystem\n    tracing_subscriber::fmt()\n        .with_env_filter(EnvFilter::from_default_env())\n        .init();\n\n    // Parse and execute the CLI command\n    match execute_command().await {\n        Ok(()) =\u003e {\n            // Success - exit with code 0\n            process::exit(0);\n        },\n        Err(e) =\u003e {\n            error_utils::report_detailed_error(\u0026e, None);  // Remove generic context\n            let main_error = MainError::CliError(e);\n            process::exit(main_error.exit_code());\n        }\n    }\n}\n","traces":[{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":77,"address":[],"length":0,"stats":{"Line":44}},{"line":78,"address":[],"length":0,"stats":{"Line":28}},{"line":79,"address":[],"length":0,"stats":{"Line":6}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":33}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":11}},{"line":93,"address":[],"length":0,"stats":{"Line":11}},{"line":94,"address":[],"length":0,"stats":{"Line":11}},{"line":95,"address":[],"length":0,"stats":{"Line":11}},{"line":96,"address":[],"length":0,"stats":{"Line":11}}],"covered":13,"coverable":17},{"path":["/","Users","julian","projects","physna","pcli2","src","metadata.rs"],"content":"use serde::{Deserialize, Serialize};\nuse std::collections::HashMap;\nuse std::fs::File;\nuse std::io::BufReader;\nuse csv::Reader;\nuse tracing::{debug, trace};\nuse serde_json::Value;\n\n/// Represents a metadata entry from the CSV file\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct MetadataEntry {\n    /// The path of the asset to update\n    #[serde(rename = \"ASSET_PATH\")]\n    pub asset_path: String,\n    /// The name of the metadata field\n    #[serde(rename = \"NAME\")]\n    pub name: String,\n    /// The value of the metadata field\n    #[serde(rename = \"VALUE\")]\n    pub value: String,\n}\n\nimpl MetadataEntry {\n    /// Create a new MetadataEntry\n    pub fn new(asset_path: String, name: String, value: String) -\u003e Self {\n        Self {\n            asset_path,\n            name,\n            value,\n        }\n    }\n}\n\n/// Read metadata entries from a CSV file\n/// \n/// # Arguments\n/// * `file_path` - Path to the CSV file\n/// \n/// # Returns\n/// * `Ok(Vec\u003cMetadataEntry\u003e)` - Vector of metadata entries sorted by asset path\n/// * `Err(csv::Error)` - Error reading or parsing the CSV file\npub fn read_metadata_from_csv(file_path: \u0026str) -\u003e Result\u003cVec\u003cMetadataEntry\u003e, csv::Error\u003e {\n    debug!(\"Reading metadata from CSV file: {}\", file_path);\n    \n    let file = File::open(file_path)?;\n    let reader = BufReader::new(file);\n    let mut csv_reader = Reader::from_reader(reader);\n    \n    let mut entries: Vec\u003cMetadataEntry\u003e = Vec::new();\n    \n    // Read each record from the CSV\n    for result in csv_reader.deserialize() {\n        let record: MetadataEntry = result?;\n        trace!(\"Read metadata entry: {:?}\", record);\n        entries.push(record);\n    }\n    \n    // Sort entries by asset path\n    entries.sort_by(|a, b| a.asset_path.cmp(\u0026b.asset_path));\n    \n    debug!(\"Successfully read {} metadata entries from CSV\", entries.len());\n    Ok(entries)\n}\n\n/// Group metadata entries by asset path\n/// \n/// # Arguments\n/// * `entries` - Vector of metadata entries\n/// \n/// # Returns\n/// * `HashMap\u003cString, HashMap\u003cString, String\u003e\u003e` - Map of asset paths to metadata key-value pairs\npub fn group_metadata_by_asset(entries: Vec\u003cMetadataEntry\u003e) -\u003e HashMap\u003cString, HashMap\u003cString, String\u003e\u003e {\n    let mut grouped: HashMap\u003cString, HashMap\u003cString, String\u003e\u003e = HashMap::new();\n    \n    for entry in entries {\n        // Get or create the metadata map for this asset path\n        let metadata_map = grouped.entry(entry.asset_path).or_default();\n        \n        // Add the metadata key-value pair\n        metadata_map.insert(entry.name, entry.value);\n    }\n    \n    grouped\n}\n\n/// Convert metadata string values to appropriate JSON types\n/// \n/// This function converts string metadata values to appropriate JSON types (string, number, boolean)\n/// based on the provided type information. For now, it treats all values as strings for compatibility.\n/// \n/// # Arguments\n/// * `metadata` - Map of metadata key-value pairs as strings\n/// \n/// # Returns\n/// * `HashMap\u003cString, Value\u003e` - Map of metadata key-value pairs as JSON values\npub fn convert_metadata_to_json_values(metadata: \u0026HashMap\u003cString, String\u003e) -\u003e HashMap\u003cString, Value\u003e {\n    let mut json_metadata: HashMap\u003cString, Value\u003e = HashMap::new();\n    \n    for (key, value) in metadata {\n        // Sanitize the value to remove or replace problematic characters\n        let sanitized_value = sanitize_metadata_value(value);\n        \n        // For now, treat all values as strings to avoid type mismatch issues\n        // The API might be expecting string values for all metadata fields\n        json_metadata.insert(key.clone(), Value::String(sanitized_value));\n    }\n    \n    json_metadata\n}\n\n/// Convert a single metadata value to appropriate JSON type based on the specified meta-type\n/// \n/// This function converts a single metadata value to the appropriate JSON type based on the \n/// provided metadata type (text, number, boolean), with proper sanitization.\n/// \n/// # Arguments\n/// * `name` - The metadata property name\n/// * `value` - The metadata property value as string\n/// * `metadata_type` - The expected type (\"text\", \"number\", \"boolean\")\n/// \n/// # Returns\n/// * `Value` - The converted JSON value\npub fn convert_single_metadata_to_json_value(_name: \u0026str, value: \u0026str, metadata_type: \u0026str) -\u003e Value {\n    match metadata_type {\n        \"number\" =\u003e {\n            // Try to parse as number (integer or float)\n            if let Ok(int_val) = value.parse::\u003ci64\u003e() {\n                serde_json::Value::Number(serde_json::Number::from(int_val))\n            } else if let Ok(float_val) = value.parse::\u003cf64\u003e() {\n                if float_val.fract() == 0.0 {\n                    serde_json::Value::Number(serde_json::Number::from(float_val as i64))\n                } else {\n                    serde_json::Number::from_f64(float_val)\n                        .map(serde_json::Value::Number)\n                        .unwrap_or(serde_json::Value::String(value.to_string()))\n                }\n            } else {\n                serde_json::Value::String(value.to_string())\n            }\n        }\n        \"boolean\" =\u003e {\n            let bool_val = match value.to_lowercase().as_str() {\n                \"true\" | \"1\" | \"yes\" | \"on\" =\u003e true,\n                \"false\" | \"0\" | \"no\" | \"off\" =\u003e false,\n                _ =\u003e {\n                    // Try to parse as boolean string\n                    value.parse::\u003cbool\u003e().unwrap_or(false)\n                }\n            };\n            serde_json::Value::Bool(bool_val)\n        }\n        \"text\" | _ =\u003e {\n            // Default to text/string type, with sanitization\n            let sanitized_value = sanitize_metadata_value(value);\n            serde_json::Value::String(sanitized_value)\n        }\n    }\n}\n\n/// Sanitize metadata values to handle special characters that might cause API issues\n/// \n/// This function replaces or removes special characters that are known to cause issues\n/// with the Physna API, such as Unicode symbols that might not be properly encoded.\n/// \n/// # Arguments\n/// * `value` - The metadata value to sanitize\n/// \n/// # Returns\n/// * `String` - The sanitized metadata value\nfn sanitize_metadata_value(value: \u0026str) -\u003e String {\n    value\n        // Replace special Unicode characters with ASCII equivalents\n        .replace('√ò', \"O\")  // Diameter symbol\n        .replace('¬∞', \" deg\")  // Degree symbol\n        .replace('‚Ä≥', \"\\\"\")  // Double prime (inch symbol)\n        .replace(\"‚Ä¶\", \"...\")  // Ellipsis\n        // Keep other characters as they are\n        .to_string()\n}","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":49},{"path":["/","Users","julian","projects","physna","pcli2","src","metadata_cache.rs"],"content":"//! Cache for metadata fields to avoid repeated API calls\n//! \n//! This cache stores metadata field data locally to avoid expensive API calls when\n//! checking if metadata fields exist. It caches the list of registered metadata\n//! fields for each tenant.\n\nuse crate::model::MetadataFieldListResponse;\nuse crate::physna_v3::PhysnaApiClient;\nuse serde::{Deserialize, Serialize};\nuse std::collections::HashMap;\nuse std::fs;\nuse std::path::PathBuf;\nuse tracing::{debug, trace, warn};\n\n/// Cache for metadata field data to avoid repeated API calls\n/// \n/// This cache stores metadata field data locally to avoid expensive API calls when listing metadata fields.\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct MetadataCache {\n    /// Map of tenant ID to cached metadata field list response\n    #[serde(rename = \"tenantMetadataFields\")]\n    pub tenant_metadata_fields: HashMap\u003cString, MetadataFieldListResponse\u003e,\n    /// Timestamp when the cache was last updated (for future use)\n    #[serde(rename = \"lastUpdated\")]\n    #[serde(skip_serializing, skip_deserializing)]\n    pub last_updated: Option\u003cu64\u003e, // We'll track this internally but not serialize it\n}\n\nimpl MetadataCache {\n    /// Create a new empty metadata cache\n    pub fn new() -\u003e Self {\n        Self {\n            tenant_metadata_fields: HashMap::new(),\n            last_updated: Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs()),\n        }\n    }\n\n    /// Check if cache is expired for a specific tenant (default expiration: 1 hour)\n    fn is_expired(\u0026self, _tenant_id: \u0026str) -\u003e bool {\n        // For now, we'll use a simple approach where cache is valid for 1 hour\n        // In the future, we might want to track per-tenant timestamps\n        if let Some(updated) = self.last_updated {\n            let current_time = std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs();\n            \n            // Cache expires after 1 hour (3600 seconds)\n            current_time - updated \u003e 3600\n        } else {\n            true\n        }\n    }\n\n    /// Get the default cache file path\n    /// \n    /// # Returns\n    /// * `Ok(PathBuf)` - The path to the metadata cache file\n    /// * `Err` - If there was an error getting the cache directory\n    fn get_cache_file_path() -\u003e Result\u003cPathBuf, Box\u003cdyn std::error::Error\u003e\u003e {\n        // Check for PCLI2_CACHE_DIR environment variable first\n        if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            let mut cache_path = PathBuf::from(cache_dir_str);\n            cache_path.push(\"metadata_cache.json\");\n            return Ok(cache_path);\n        }\n        \n        let mut path = dirs::cache_dir().unwrap_or_else(std::env::temp_dir);\n        path.push(\"pcli2\");\n        path.push(\"metadata_cache.json\");\n        Ok(path)\n    }\n\n    /// Load cache from file\n    /// \n    /// # Returns\n    /// * `Ok(MetadataCache)` - The loaded cache\n    /// * `Err` - If there was an error loading the cache\n    pub fn load() -\u003e Result\u003cSelf, Box\u003cdyn std::error::Error\u003e\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        if path.exists() {\n            let data = fs::read_to_string(path)?;\n            let mut cache: MetadataCache = serde_json::from_str(\u0026data)?;\n            // Set the internal timestamp to current time to indicate when it was loaded\n            cache.last_updated = Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs());\n            debug!(\"Loaded metadata cache from file\");\n            Ok(cache)\n        } else {\n            debug!(\"No metadata cache file found, creating new cache\");\n            Ok(Self::new())\n        }\n    }\n\n    /// Save cache to file\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully saved\n    /// * `Err` - If there was an error saving the cache\n    pub fn save(\u0026self) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        // Create cache directory if it doesn't exist\n        if let Some(parent) = path.parent() {\n            fs::create_dir_all(parent)?;\n        }\n        \n        let cache_to_save = Self {\n            tenant_metadata_fields: self.tenant_metadata_fields.clone(),\n            last_updated: self.last_updated, // Keep the same timestamp when saving\n        };\n        \n        let data = serde_json::to_string_pretty(\u0026cache_to_save)?;\n        fs::write(path, data)?;\n        debug!(\"Saved metadata cache to file\");\n        Ok(())\n    }\n\n    /// Get metadata fields for a tenant, fetching from API if not cached or expired\n    /// \n    /// # Arguments\n    /// * `client` - The Physna API client\n    /// * `tenant_id` - The ID of the tenant\n    /// * `refresh` - Whether to force refresh the cache\n    /// \n    /// # Returns\n    /// * `Ok(MetadataFieldListResponse)` - The metadata fields for the tenant\n    /// * `Err` - If there was an error during API calls\n    pub async fn get_or_fetch(\n        client: \u0026mut PhysnaApiClient, \n        tenant_id: \u0026str, \n        refresh: bool\n    ) -\u003e Result\u003cMetadataFieldListResponse, crate::physna_v3::ApiError\u003e {\n        trace!(\"Getting or fetching metadata fields for tenant: {}\", tenant_id);\n        \n        let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n        \n        // Check if we have cached data and if it's still valid (not expired) and refresh is not forced\n        if !refresh {\n            if let Some(cached_metadata_fields) = cache.tenant_metadata_fields.get(tenant_id) {\n                if !cache.is_expired(tenant_id) {\n                    trace!(\"Using existing cache for tenant: {}\", tenant_id);\n                    return Ok(cached_metadata_fields.clone());\n                }\n                trace!(\"Cache expired for tenant: {}, fetching from API\", tenant_id);\n            } else {\n                trace!(\"No cache found, fetching metadata fields from API for tenant: {}\", tenant_id);\n            }\n        } else {\n            trace!(\"Refresh requested, fetching metadata fields from API for tenant: {}\", tenant_id);\n        }\n        \n        // Fetch from API\n        let metadata_fields_response = client.get_metadata_fields(tenant_id).await?;\n        \n        // Update cache\n        cache.tenant_metadata_fields.insert(tenant_id.to_string(), metadata_fields_response.clone());\n        if let Err(e) = cache.save() {\n            warn!(\"Failed to save metadata cache: {}\", e);\n        }\n        \n        Ok(metadata_fields_response)\n    }\n\n    /// Get cached metadata fields for a tenant if available and not expired\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// \n    /// # Returns\n    /// * `Some(MetadataFieldListResponse)` - If metadata fields are cached and not expired\n    /// * `None` - If metadata fields are not cached or are expired\n    pub fn get_cached_metadata_fields(\u0026self, tenant_id: \u0026str) -\u003e Option\u003cMetadataFieldListResponse\u003e {\n        if let Some(cached_fields) = self.tenant_metadata_fields.get(tenant_id) {\n            if !self.is_expired(tenant_id) {\n                return Some(cached_fields.clone());\n            }\n        }\n        None\n    }\n\n    /// Invalidate cache for a specific tenant\n    /// \n    /// This method removes cached metadata fields for the specified tenant from the cache.\n    /// This is useful after creating new metadata fields to ensure consistency between \n    /// local cache and remote API.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache to invalidate\n    /// \n    /// # Returns\n    /// * `true` if cache entry was removed, `false` if no entry existed\n    pub fn invalidate_tenant(\u0026mut self, tenant_id: \u0026str) -\u003e bool {\n        let existed = self.tenant_metadata_fields.contains_key(tenant_id);\n        self.tenant_metadata_fields.remove(tenant_id);\n        trace!(\"Invalidated metadata cache for tenant {}\", tenant_id);\n        existed\n    }\n}\n\nimpl Default for MetadataCache {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_metadata_cache_creation() {\n        let cache = MetadataCache::new();\n        assert!(cache.tenant_metadata_fields.is_empty());\n    }\n}","traces":[{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":33,"address":[],"length":0,"stats":{"Line":2}},{"line":34,"address":[],"length":0,"stats":{"Line":2}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}}],"covered":3,"coverable":69},{"path":["/","Users","julian","projects","physna","pcli2","src","model.rs"],"content":"//! Data models for the Physna CLI client.\n//!\n//! This module contains all the data structures used throughout the application,\n//! including models for folders, assets, tenants, and API responses.\n//! It also includes implementations for formatting these models in\n//! various output formats like JSON, CSV, and tree representations.\n//!\n//! The models follow a layered approach:\n//! - API response models (e.g., AssetResponse, FolderResponse) - direct mapping from API JSON\n//! - Internal models (e.g., Asset, Folder) - business logic models with additional functionality\n//! - Collection models (e.g., AssetList, FolderList) - collections of individual models\n//!\n//! All models implement serialization/deserialization with serde,\n//! output formatting capabilities, and appropriate error handling.\n\nuse crate::format::{CsvRecordProducer, FormattingError, OutputFormat, OutputFormatter};\nuse csv::Writer;\nuse serde::{Deserialize, Serialize};\nuse std::cmp::Ordering;\nuse std::collections::HashMap;\nuse std::io::BufWriter;\nuse thiserror::Error;\nuse uuid::Uuid;\n\n/// Error types that can occur when working with models\n#[derive(Debug, Error)]\npub enum ModelError {\n    /// Error when a required property value is missing\n    #[error(\"missing property value {name:?}\")]\n    MissingPropertyValue { name: String },\n}\n\n/// Normalize a path with these rules:\n/// 1) Remove leading \"/HOME\" if present\n/// 2) Remove any trailing '/'\n/// 3) Ensure the result starts with exactly one '/'\n///\n/// Examples:\n///   \"/myroot/mysub/more/\"         -\u003e \"/myroot/mysub/more\"\n///   \"myroot/mysub/more\"           -\u003e \"/myroot/mysub/more\"\n///   \"/HOME/myroot/mysub/more/\"    -\u003e \"/myroot/mysub/more\"\n///   \"/HOME\"                       -\u003e \"/\"\n///   \"////\"                        -\u003e \"/\"\npub fn normalize_path(path: impl AsRef\u003cstr\u003e) -\u003e String {\n    let mut s = path.as_ref().trim();\n\n    // Case-insensitive check for prefix \"/HOME/\"\n    if s.to_ascii_lowercase().starts_with(\"/home/\") {\n        // SAFETY: only slice the original string, not the lowercase temp\n        s = \u0026s[5..]; // remove `/HOME` (5 chars)\n    } else if s.eq_ignore_ascii_case(\"/home\") {\n        return \"/\".into();\n    }\n\n    // Remove trailing '/'\n    s = s.trim_end_matches('/');\n\n    // Remove all leading '/'\n    let without_leading = s.trim_start_matches('/');\n\n    // Ensure exactly one leading '/'\n    let mut out = String::with_capacity(without_leading.len() + 1);\n    out.push('/');\n    out.push_str(without_leading);\n\n    out\n}\n\n/// Represents a folder in the Physna system\n///\n/// This struct represents a folder entity in the Physna system with both\n/// internal tracking properties and API-related identifiers.\n///\n/// Folders form a hierarchical structure in Physna and can contain both\n/// subfolders and assets. The path property represents the full path to\n/// the folder from the root.\n///\n/// # Fields\n/// * `uuid` - Unique identifier from the Physna API (required for API operations)\n/// * `name` - Display name of the folder\n/// * `path` - Full path of the folder in the hierarchy (e.g., \"/Root/Parent/Child\")\n///\n/// # Examples\n/// ```\n/// use pcli2::model::Folder;\n/// use uuid::Uuid;\n///\n/// let folder = Folder::new(\n///     Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap(),\n///     \"My Folder\".to_string(),\n///     \"/Root/My Folder\".to_string()\n/// );\n/// ```\n#[derive(Debug, PartialEq, Clone, Serialize, Deserialize)]\npub struct Folder {\n    /// UUID of the folder from the API\n    #[serde(rename = \"id\")]\n    uuid: Uuid,\n    /// Name of the folder\n    name: String,\n    /// Full path of the folder\n    path: String,\n}\n\nimpl Folder {\n    /// Create a new Folder instance\n    ///\n    /// # Arguments\n    /// * `uuid` - UUID from the API\n    /// * `name` - Name of the folder\n    /// * `path` - Full path of the folder\n    pub fn new(uuid: Uuid, name: String, path: String) -\u003e Folder {\n        Folder { uuid, name, path }\n    }\n\n    /// Create a Folder from a FolderResponse with a specified path\n    ///\n    /// # Arguments\n    /// * `folder_response` - The API response containing folder data\n    /// * `path` - The full path for this folder\n    pub fn from_folder_response(folder_response: FolderResponse, path: String) -\u003e Folder {\n        Folder {\n            uuid: folder_response.uuid,\n            name: folder_response.name,\n            path,\n        }\n    }\n\n    /// Get the UUID of the folder\n    pub fn uuid(\u0026self) -\u003e \u0026Uuid {\n        self.uuid.as_ref()\n    }\n\n    /// Set the name of the folder\n    pub fn set_name(\u0026mut self, name: String) {\n        self.name = name;\n    }\n\n    /// Get the name of the folder\n    pub fn name(\u0026self) -\u003e String {\n        self.name.clone()\n    }\n\n    /// Get the path of the folder\n    pub fn path(\u0026self) -\u003e String {\n        self.path.clone()\n    }\n\n    /// Set the path of the folder\n    pub fn set_path(\u0026mut self, path: String) {\n        self.path = path;\n    }\n\n    /// Create a new FolderBuilder for constructing Folder instances\n    pub fn builder() -\u003e FolderBuilder {\n        FolderBuilder::new()\n    }\n}\n\nimpl From\u003cFolderResponse\u003e for Folder {\n    fn from(fr: FolderResponse) -\u003e Folder {\n        Folder {\n            uuid: fr.uuid.clone(),\n            name: fr.name.clone(),\n            path: \"\".to_string(),\n        }\n    }\n}\n\nimpl From\u003cSingleFolderResponse\u003e for Folder {\n    fn from(fr: SingleFolderResponse) -\u003e Folder {\n        Folder {\n            uuid: fr.folder.uuid.clone(),\n            name: fr.folder.name.clone(),\n            path: \"\".to_string(),\n        }\n    }\n}\n\nimpl CsvRecordProducer for Folder {\n    /// Get the CSV header row for Folder records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\"NAME\".to_string(), \"UUID\".to_string()]\n    }\n\n    /// Convert the Folder to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![self.name(), self.uuid().to_string()]]\n    }\n\n    /// Generate CSV output with a header row\n    fn to_csv(\u0026self, with_headers: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        let mut wtr = Writer::from_writer(vec![]);\n\n        if with_headers {\n            wtr.write_record(Self::csv_header()).map_err(|e| {\n                FormattingError::CsvWriterError(format!(\"Failed to write CSV header: {}\", e))\n            })?;\n        }\n\n        // Sort records by folder name\n        let mut records = self.as_csv_records();\n        records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n        for record in records {\n            wtr.write_record(\u0026record).map_err(|e| {\n                FormattingError::CsvWriterError(format!(\"Failed to write CSV record: {}\", e))\n            })?;\n        }\n        let data = wtr.into_inner().map_err(|e| {\n            FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n        })?;\n        String::from_utf8(data).map_err(FormattingError::Utf8Error)\n    }\n}\n\nimpl OutputFormatter for Folder {\n    type Item = Folder;\n\n    /// Format the Folder according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Builder for constructing Folder instances with a fluent API\npub struct FolderBuilder {\n    /// UUID of the folder from the API\n    uuid: Option\u003cUuid\u003e,\n    /// Name of the folder\n    name: Option\u003cString\u003e,\n    /// Full path of the folder\n    path: Option\u003cString\u003e,\n}\n\nimpl FolderBuilder {\n    /// Create a new FolderBuilder\n    fn new() -\u003e FolderBuilder {\n        FolderBuilder {\n            uuid: None,\n            name: None,\n            path: None,\n        }\n    }\n\n    /// Set the UUID of the folder\n    pub fn uuid(\u0026mut self, uuid: Uuid) -\u003e \u0026mut FolderBuilder {\n        self.uuid = Some(uuid);\n        self\n    }\n\n    /// Set the name of the folder\n    pub fn name(\u0026mut self, name: \u0026str) -\u003e \u0026mut FolderBuilder {\n        self.name = Some(name.to_owned());\n        self\n    }\n\n    /// Set the path of the folder\n    pub fn path(\u0026mut self, path: String) -\u003e \u0026mut FolderBuilder {\n        self.path = Some(path);\n        self\n    }\n\n    /// Build the Folder instance\n    ///\n    /// # Returns\n    /// * `Ok(Folder)` - The constructed Folder instance\n    /// * `Err(ModelError)` - If required properties are missing\n    pub fn build(\u0026self) -\u003e Result\u003cFolder, ModelError\u003e {\n        let uuid = match \u0026self.uuid {\n            Some(uuid) =\u003e uuid.clone(),\n            None =\u003e {\n                return Err(ModelError::MissingPropertyValue {\n                    name: \"uuid\".to_string(),\n                })\n            }\n        };\n\n        let name = match \u0026self.name {\n            Some(name) =\u003e name.clone(),\n            None =\u003e {\n                return Err(ModelError::MissingPropertyValue {\n                    name: \"name\".to_string(),\n                })\n            }\n        };\n\n        let path = match \u0026self.path {\n            Some(path) =\u003e path.clone(),\n            None =\u003e name.clone(),\n        };\n\n        Ok(Folder::new(uuid, name, path))\n    }\n}\n\n/// A collection of Folder instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderList {\n    /// Map of folder hash keys to Folder instances\n    folders: Vec\u003cFolder\u003e,\n}\n\nimpl FolderList {\n    /// Create a new empty FolderList\n    pub fn empty() -\u003e FolderList {\n        FolderList {\n            folders: Vec::new(),\n        }\n    }\n\n    pub fn new(folders: Vec\u003cFolder\u003e) -\u003e Self {\n        FolderList {\n            folders: folders.clone(),\n        }\n    }\n\n    /// Check if the FolderList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.folders.is_empty()\n    }\n\n    /// Get the number of folders in the FolderList\n    pub fn len(\u0026self) -\u003e usize {\n        self.folders.len()\n    }\n\n    /// Find a folder in the FolderList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the folder to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Folder)` - If a folder with the specified name exists\n    /// * `None` - If no folder with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Folder\u003e {\n        self.folders.iter().find(|f| f.name.eq(name))\n    }\n\n    pub fn add(\u0026mut self, folder: Folder) {\n        self.folders.push(folder)\n    }\n\n    pub fn folders(\u0026self) -\u003e Vec\u003cFolder\u003e {\n        self.folders.clone()\n    }\n}\n\nimpl Default for FolderList {\n    fn default() -\u003e Self {\n        FolderList::empty()\n    }\n}\n\nimpl FromIterator\u003cFolder\u003e for FolderList {\n    /// Create a FolderList from an iterator of Folder instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Folder\u003e\u003e(iter: I) -\u003e FolderList {\n        let mut folders = FolderList::empty();\n        for f in iter {\n            folders.add(f);\n        }\n\n        folders\n    }\n}\n\n// for: `for folder in \u0026folder_list`\nimpl\u003c'a\u003e IntoIterator for \u0026'a FolderList {\n    type Item = \u0026'a Folder;\n    type IntoIter = std::slice::Iter\u003c'a, Folder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.iter()\n    }\n}\n\n// for: `for folder in \u0026mut folder_list`\nimpl\u003c'a\u003e IntoIterator for \u0026'a mut FolderList {\n    type Item = \u0026'a mut Folder;\n    type IntoIter = std::slice::IterMut\u003c'a, Folder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.iter_mut()\n    }\n}\n\n// for: `for folder in folder_list` (consumes the list)\nimpl IntoIterator for FolderList {\n    type Item = Folder;\n    type IntoIter = std::vec::IntoIter\u003cFolder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.into_iter()\n    }\n}\n\nimpl From\u003cFolderListResponse\u003e for FolderList {\n    fn from(response: FolderListResponse) -\u003e Self {\n        let folders: Vec\u003cFolder\u003e = response.folders.into_iter().map(|f| f.into()).collect();\n        FolderList::new(folders)\n    }\n}\n\nimpl CsvRecordProducer for FolderList {\n    /// Get the CSV header row for FolderList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        Folder::csv_header()\n    }\n\n    /// Convert the FolderList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for folder in self.folders.iter() {\n            records.push(folder.as_csv_records()[0].clone());\n        }\n\n        records\n    }\n}\n\nimpl OutputFormatter for FolderList {\n    type Item = FolderList;\n\n    /// Format the FolderList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output, sorted by name\n                let mut folders: Vec\u003cFolder\u003e = self.folders.iter().cloned().collect();\n                folders.sort_by_key(|a| a.name());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026folders)\n                } else {\n                    serde_json::to_string(\u0026folders)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())?;\n                }\n\n                // Sort records by folder name\n                let mut records = self.as_csv_records();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For folder list, tree format is the same as JSON\n                // In practice, tree format should be handled at the command level\n                // where we have access to the full hierarchy\n                let mut folders: Vec\u003cFolder\u003e = self.folders.iter().cloned().collect();\n                folders.sort_by_key(|a| a.name());\n                let json = serde_json::to_string_pretty(\u0026folders);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n        }\n    }\n}\n\n// New models for Physna V3 API\n\n// Represents a tenant configuration\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct Tenant {\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    pub name: String,\n    #[serde(rename = \"description\")]\n    pub description: String,\n}\n\nimpl TryFrom\u003c\u0026TenantSetting\u003e for Tenant {\n    type Error = uuid::Error;\n\n    fn try_from(tenant_setting: \u0026TenantSetting) -\u003e Result\u003cSelf, Self::Error\u003e {\n        Ok(Tenant {\n            uuid: tenant_setting.tenant_uuid.to_owned(),\n            name: tenant_setting.tenant_short_name.to_owned(),\n            description: tenant_setting.tenant_display_name.to_owned(),\n        })\n    }\n}\n\nimpl crate::format::Formattable for Tenant {\n    fn format(\u0026self, f: \u0026crate::format::OutputFormat) -\u003e Result\u003cString, crate::format::FormattingError\u003e {\n        match f {\n            crate::format::OutputFormat::Json(options) =\u003e {\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(self)\n                } else {\n                    serde_json::to_string(self)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(crate::format::FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            crate::format::OutputFormat::Csv(options) =\u003e {\n                // For CSV format, output header with tenant name, UUID, and description columns only if with_headers is true\n                let mut wtr = csv::Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.serialize((\"TENANT_NAME\", \"TENANT_UUID\", \"TENANT_DESCRIPTION\"))?;\n                }\n\n                wtr.serialize((\u0026self.name, \u0026self.uuid.to_string(), \u0026self.description))?;\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(crate::format::FormattingError::Utf8Error)\n            }\n            crate::format::OutputFormat::Tree(_) =\u003e {\n                // For tree format, include name, UUID, and description\n                Ok(format!(\"{} ({}) - {}\", self.name, self.uuid, self.description))\n            }\n        }\n    }\n}\n\n/// A collection of Tenant instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TenantList {\n    /// Vector of Tenant instances\n    tenants: Vec\u003cTenant\u003e,\n}\n\nimpl TenantList {\n    /// Create a new empty TenantList\n    pub fn empty() -\u003e TenantList {\n        TenantList {\n            tenants: Vec::new(),\n        }\n    }\n\n    pub fn new(tenants: Vec\u003cTenant\u003e) -\u003e Self {\n        TenantList {\n            tenants: tenants.clone(),\n        }\n    }\n\n    /// Check if the TenantList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.tenants.is_empty()\n    }\n\n    /// Get the number of tenants in the TenantList\n    pub fn len(\u0026self) -\u003e usize {\n        self.tenants.len()\n    }\n\n    /// Find a tenant in the TenantList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Tenant)` - If a tenant with the specified name exists\n    /// * `None` - If no tenant with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Tenant\u003e {\n        self.tenants.iter().find(|t| t.name.eq(name))\n    }\n\n    pub fn add(\u0026mut self, tenant: Tenant) {\n        self.tenants.push(tenant)\n    }\n\n    pub fn tenants(\u0026self) -\u003e Vec\u003cTenant\u003e {\n        self.tenants.clone()\n    }\n}\n\nimpl Default for TenantList {\n    fn default() -\u003e Self {\n        Self::empty()\n    }\n}\n\nimpl FromIterator\u003cTenant\u003e for TenantList {\n    /// Create a TenantList from an iterator of Tenant instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Tenant\u003e\u003e(iter: I) -\u003e TenantList {\n        let mut tenants = TenantList::empty();\n        for tenant in iter {\n            tenants.add(tenant);\n        }\n        tenants\n    }\n}\n\nimpl\u003c'a\u003e IntoIterator for \u0026'a TenantList {\n    type Item = \u0026'a Tenant;\n    type IntoIter = std::slice::Iter\u003c'a, Tenant\u003e;\n\n    /// Convert the TenantList to an iterator\n    fn into_iter(self) -\u003e std::slice::Iter\u003c'a, Tenant\u003e {\n        self.tenants.iter()\n    }\n}\n\nimpl\u003c'a\u003e IntoIterator for \u0026'a mut TenantList {\n    type Item = \u0026'a mut Tenant;\n    type IntoIter = std::slice::IterMut\u003c'a, Tenant\u003e;\n\n    /// Convert the TenantList to a mutable iterator\n    fn into_iter(self) -\u003e std::slice::IterMut\u003c'a, Tenant\u003e {\n        self.tenants.iter_mut()\n    }\n}\n\nimpl IntoIterator for TenantList {\n    type Item = Tenant;\n    type IntoIter = std::vec::IntoIter\u003cTenant\u003e;\n\n    /// Convert the TenantList to an owned iterator\n    fn into_iter(self) -\u003e std::vec::IntoIter\u003cTenant\u003e {\n        self.tenants.into_iter()\n    }\n}\n\nimpl From\u003cVec\u003cTenantSetting\u003e\u003e for TenantList {\n    fn from(settings: Vec\u003cTenantSetting\u003e) -\u003e Self {\n        let tenants = settings\n            .into_iter()\n            .map(|ts| Tenant {\n                uuid: ts.tenant_uuid,\n                name: ts.tenant_short_name,\n                description: ts.tenant_display_name,\n            })\n            .collect();\n        TenantList::new(tenants)\n    }\n}\n\nimpl CsvRecordProducer for TenantList {\n    /// Get the CSV header row for TenantList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\"TENANT_NAME\".to_string(), \"TENANT_UUID\".to_string(), \"TENANT_DESCRIPTION\".to_string()]\n    }\n\n    /// Convert the TenantList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.tenants\n            .iter()\n            .map(|tenant| vec![tenant.name.clone(), tenant.uuid.to_string(), tenant.description.clone()])\n            .collect()\n    }\n}\n\nimpl OutputFormatter for TenantList {\n    type Item = TenantList;\n\n    /// Format the TenantList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output, sorted by name\n                let mut tenants: Vec\u003cTenant\u003e = self.tenants.iter().cloned().collect();\n                tenants.sort_by_key(|a| a.name.clone());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026tenants)\n                } else {\n                    serde_json::to_string(\u0026tenants)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())?;\n                }\n\n                // Sort records by tenant name\n                let mut records = self.as_csv_records();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For tree format, include name, UUID, and description\n                let mut output = String::new();\n                for tenant in \u0026self.tenants {\n                    output.push_str(\u0026format!(\"{} ({}) - {}\\n\", tenant.name, tenant.uuid, tenant.description));\n                }\n                Ok(output)\n            }\n        }\n    }\n}\n\n/// Represents a tenant setting for a user\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TenantSetting {\n    /// The ID of the tenant\n    #[serde(rename = \"tenantId\")]\n    pub tenant_uuid: Uuid,\n    /// The role of the user in the tenant\n    #[serde(rename = \"tenantRole\")]\n    pub tenant_role: String,\n    /// Whether the user is enabled in this tenant\n    #[serde(rename = \"userEnabled\")]\n    pub user_enabled: bool,\n    /// The display name of the tenant\n    #[serde(rename = \"tenantDisplayName\")]\n    pub tenant_display_name: String,\n    /// The short name of the tenant\n    #[serde(rename = \"tenantShortName\")]\n    pub tenant_short_name: String,\n}\n\n/// Represents a user in the Physna system\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct User {\n    /// The display name of the user\n    #[serde(rename = \"displayName\")]\n    pub display_name: String,\n    /// The tenant settings for the user\n    pub settings: Vec\u003cTenantSetting\u003e,\n}\n\n/// Represents the response for getting the current user\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct CurrentUserResponse {\n    /// The user data\n    pub user: User,\n}\n\nimpl CurrentUserResponse {\n    /// Get a tenant setting by name (display name or short name)\n    ///\n    /// # Arguments\n    /// * `name` - The name of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026TenantSetting)` - If a tenant with the specified name exists\n    /// * `None` - If no tenant with the specified name exists\n    pub fn get_tenant_by_name(\u0026self, name: \u0026str) -\u003e Option\u003c\u0026TenantSetting\u003e {\n        self.user.settings.iter().find(|setting| {\n            setting.tenant_display_name == name || setting.tenant_short_name == name\n        })\n    }\n\n    /// Get a tenant setting by ID\n    ///\n    /// # Arguments\n    /// * `uuid` - The UUID of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026TenantSetting)` - If a tenant with the specified UUID exists\n    /// * `None` - If no tenant with the specified ID exists\n    pub fn get_tenant_by_uuid(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026TenantSetting\u003e {\n        self.user\n            .settings\n            .iter()\n            .find(|setting| setting.tenant_uuid.eq(uuid))\n    }\n}\n\n// Folder models for Physna V3 API\n\n/// Represents a folder response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderResponse {\n    /// The ID of the folder\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    /// The ID of the tenant that owns the folder\n    #[serde(rename = \"tenantId\")]\n    pub tenant_uuid: Uuid,\n    /// The name of the folder\n    pub name: String,\n    /// The creation timestamp of the folder\n    #[serde(rename = \"createdAt\")]\n    pub created_at: String,\n    /// The last update timestamp of the folder\n    #[serde(rename = \"updatedAt\")]\n    pub updated_at: String,\n    /// The number of assets in the folder\n    #[serde(rename = \"assetsCount\")]\n    pub assets_count: u32,\n    /// The number of subfolders in the folder\n    #[serde(rename = \"foldersCount\")]\n    pub folders_count: u32,\n    /// The ID of the parent folder, if any\n    #[serde(rename = \"parentFolderId\", skip_serializing_if = \"Option::is_none\")]\n    pub parent_folder_uuid: Option\u003cUuid\u003e,\n    /// The ID of the owner, if any\n    #[serde(rename = \"ownerId\", skip_serializing_if = \"Option::is_none\")]\n    pub owner_id: Option\u003cString\u003e,\n}\n\nimpl FolderResponse {\n    pub fn new(name: \u0026str) -\u003e Self {\n        FolderResponse {\n            uuid: Uuid::new_v4(),\n            tenant_uuid: Uuid::new_v4(),\n            name: name.to_string(),\n            created_at: String::default(),\n            updated_at: String::default(),\n            assets_count: 0,\n            folders_count: 0,\n            parent_folder_uuid: None,\n            owner_id: None,\n        }\n    }\n}\n\n// Asset models for Physna V3 API\n\n/// Represents an asset response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetResponse {\n    /// The UUID of the asset (mapped from JSON \"id\" field)\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    /// The UUID of the tenant that owns the asset\n    #[serde(rename = \"tenantId\")]\n    pub tenant_id: Uuid,\n    /// The path of the asset\n    pub path: String,\n    /// The ID of the folder containing the asset\n    #[serde(rename = \"folderId\", skip_serializing_if = \"Option::is_none\")]\n    pub folder_id: Option\u003cUuid\u003e,\n    /// The type of the asset\n    #[serde(rename = \"type\")]\n    pub asset_type: String,\n    /// The creation timestamp of the asset\n    #[serde(rename = \"createdAt\")]\n    pub created_at: String,\n    /// The last update timestamp of the asset\n    #[serde(rename = \"updatedAt\")]\n    pub updated_at: String,\n    /// The state of the asset\n    pub state: String,\n    /// Whether the asset is an assembly\n    #[serde(rename = \"isAssembly\")]\n    pub is_assembly: bool,\n    /// Metadata associated with the asset\n    #[serde(rename = \"metadata\")]\n    pub metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e,\n    /// The ID of the parent folder, if any\n    #[serde(rename = \"parentFolderId\", skip_serializing_if = \"Option::is_none\")]\n    pub parent_folder_id: Option\u003cUuid\u003e,\n    /// The ID of the owner, if any\n    #[serde(rename = \"ownerId\", skip_serializing_if = \"Option::is_none\")]\n    pub owner_id: Option\u003cString\u003e,\n}\n\nimpl AssetResponse {}\n\n/// Represents a single asset response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct SingleAssetResponse {\n    /// The asset data\n    #[serde(rename = \"asset\")]\n    pub asset: AssetResponse,\n}\n\n/// Represents an asset list response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetListResponse {\n    /// The list of assets (can be named either \"assets\" or \"contents\" in API responses)\n    #[serde(alias = \"contents\")]\n    pub assets: Vec\u003cAssetResponse\u003e,\n    /// Pagination data\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n}\n\nimpl FolderResponse {\n    /// Convert the FolderResponse to a Folder with the specified path\n    ///\n    /// # Arguments\n    /// * `path` - The path to use for the folder\n    ///\n    /// # Returns\n    /// A new Folder instance\n    pub fn to_folder(\u0026self, path: String) -\u003e Folder {\n        Folder::from_folder_response(self.clone(), path)\n    }\n}\n\nimpl AssetListResponse {\n    /// Convert the AssetListResponse to an AssetList\n    ///\n    /// # Returns\n    /// A new AssetList instance containing the assets from the response\n    pub fn to_asset_list(\u0026self) -\u003e AssetList {\n        let mut asset_list = AssetList::empty();\n        for asset_response in \u0026self.assets {\n            // For assets, use the path from the API response\n            let asset: Asset = asset_response.into();\n            asset_list.insert(asset);\n        }\n        asset_list\n    }\n}\n\n/// Represents a single folder response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct SingleFolderResponse {\n    /// The folder data\n    #[serde(rename = \"folder\")]\n    pub folder: FolderResponse,\n}\n\n/// Represents a folder list response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderListResponse {\n    /// The list of folders (can be named either \"folders\" or \"contents\" in API responses)\n    #[serde(alias = \"contents\")]\n    pub folders: Vec\u003cFolderResponse\u003e,\n    /// Pagination data\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n}\n\nimpl FolderListResponse {\n    /// Convert the FolderListResponse to a FolderList\n    ///\n    /// # Returns\n    /// A new FolderList instance containing the folders from the response\n    pub fn to_folder_list(\u0026self) -\u003e FolderList {\n        let mut folder_list = FolderList::empty();\n        for folder_response in \u0026self.folders {\n            // For now, we'll use the folder name as the path since we don't have the full hierarchy yet\n            // In a real implementation, we would need to build the full hierarchy to get proper paths\n            let folder = folder_response.to_folder(folder_response.name.clone());\n            folder_list.add(folder);\n        }\n        folder_list\n    }\n}\n\n/// Represents pagination data in API responses\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PageData {\n    /// Total number of items\n    pub total: usize,\n    /// Number of items per page\n    #[serde(rename = \"perPage\")]\n    pub per_page: usize,\n    /// Current page number (1-based)\n    #[serde(rename = \"currentPage\")]\n    pub current_page: usize,\n    /// Last page number\n    #[serde(rename = \"lastPage\")]\n    pub last_page: usize,\n    /// Start index of items on this page\n    #[serde(rename = \"startIndex\")]\n    pub start_index: usize,\n    /// End index of items on this page\n    #[serde(rename = \"endIndex\")]\n    pub end_index: usize,\n}\n\n// Asset models for Physna V3 API\n\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct AssetMetadata {\n    meta: HashMap\u003cString, String\u003e,\n}\n\nimpl AssetMetadata {\n    pub fn new() -\u003e Self {\n        Self {\n            meta: HashMap::new(),\n        }\n    }\n\n    pub fn keys(\u0026self) -\u003e impl Iterator\u003cItem = \u0026String\u003e {\n        self.meta.keys()\n    }\n\n    pub fn get(\u0026self, key: \u0026String) -\u003e Option\u003c\u0026String\u003e {\n        self.meta.get(key)\n    }\n}\n\nimpl From\u003cHashMap\u003cString, String\u003e\u003e for AssetMetadata {\n    fn from(meta: HashMap\u003cString, String\u003e) -\u003e Self {\n        Self { meta }\n    }\n}\n\nimpl From\u003cHashMap\u003cString, serde_json::Value\u003e\u003e for AssetMetadata {\n    fn from(ht: HashMap\u003cString, serde_json::Value\u003e) -\u003e Self {\n        let meta: HashMap\u003cString, String\u003e = ht\n            .iter()\n            .map(|(k, v)| {\n                let value_string = if let Some(str_val) = v.as_str() {\n                    str_val.to_string()\n                } else {\n                    v.to_string()  // fallback to generic string representation for non-string values\n                };\n                (k.to_owned(), value_string)\n            })\n            .collect();\n\n        Self::from(meta)\n    }\n}\n\nimpl OutputFormatter for AssetMetadata {\n    type Item = AssetList;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(vec![\"NAME\", \"VALUE\"])?;\n                }\n\n                // Sort records by folder name\n                let mut records: Vec\u003cVec\u003cString\u003e\u003e = self\n                    .meta\n                    .iter()\n                    .map(|(k, v)| vec![k.to_owned(), v.to_owned()])\n                    .collect();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0]));\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents an asset in the Physna system\n///\n/// This struct represents an asset entity in the Physna system with both\n/// internal tracking properties and API-related identifiers.\n///\n/// Assets are 3D models or other geometric files that can be stored in\n/// Physna folders and subjected to geometric analysis and matching.\n///\n/// # Fields\n/// * `uuid` - Unique identifier from the Physna API (required for API operations)\n/// * `name` - Display name of the asset (derived from the file name part of the path)\n/// * `path` - Full path of the asset in the folder hierarchy (e.g., \"/Root/Folder/file.stl\")\n/// * `file_size` - Size of the uploaded file in bytes (optional)\n/// * `file_type` - File type/extension (e.g., \"stl\", \"step\", \"iges\") (optional)\n/// * `processing_status` - Current processing status (e.g., \"processed\", \"processing\", \"failed\") (optional)\n/// * `created_at` - Creation timestamp (optional)\n/// * `updated_at` - Last update timestamp (optional)\n///\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct Asset {\n    uuid: Uuid,\n    name: String,\n    path: String,\n    file_size: Option\u003cu64\u003e,\n    file_type: Option\u003cString\u003e,\n    processing_status: Option\u003cString\u003e,\n    created_at: Option\u003cString\u003e,\n    updated_at: Option\u003cString\u003e,\n    metadata: Option\u003cAssetMetadata\u003e,\n}\n\n// Equality is determined solely by name\nimpl PartialEq for Asset {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        self.name == other.name\n    }\n}\n\nimpl Eq for Asset {}\n\n// Ordering is determined solely by name\nimpl PartialOrd for Asset {\n    fn partial_cmp(\u0026self, other: \u0026Self) -\u003e Option\u003cOrdering\u003e {\n        Some(self.name.cmp(\u0026other.name))\n    }\n}\n\nimpl Ord for Asset {\n    fn cmp(\u0026self, other: \u0026Self) -\u003e Ordering {\n        self.name.cmp(\u0026other.name)\n    }\n}\n\nimpl Asset {\n    /// Create a new Asset instance\n    ///\n    /// # Arguments\n    /// * `uuid` - Optional UUID from the API\n    /// * `name` - Name of the asset\n    /// * `path` - Full path of the asset\n    /// * `file_size` - Optional file size of the asset\n    /// * `file_type` - Optional file type of the asset\n    /// * `processing_status` - Optional processing status of the asset\n    /// * `created_at` - Optional creation timestamp of the asset\n    /// * `updated_at` - Optional last update timestamp of the asset\n    /// * `metadata` - Optional metadata key-value pairs for the asset\n    pub fn new(\n        uuid: Uuid,\n        name: String,\n        path: String,\n        file_size: Option\u003cu64\u003e,\n        file_type: Option\u003cString\u003e,\n        processing_status: Option\u003cString\u003e,\n        created_at: Option\u003cString\u003e,\n        updated_at: Option\u003cString\u003e,\n        metadata: Option\u003cAssetMetadata\u003e,\n    ) -\u003e Asset {\n        Asset {\n            uuid,\n            name,\n            path,\n            file_size,\n            file_type,\n            processing_status,\n            created_at,\n            updated_at,\n            metadata,\n        }\n    }\n\n    /// Get the UUID of the asset\n    pub fn uuid(\u0026self) -\u003e Uuid {\n        self.uuid.to_owned()\n    }\n\n    /// Set the name of the asset\n    pub fn set_name(\u0026mut self, name: String) {\n        self.name = name;\n    }\n\n    /// Get the name of the asset\n    pub fn name(\u0026self) -\u003e String {\n        self.name.clone()\n    }\n\n    /// Get the path of the asset\n    pub fn path(\u0026self) -\u003e String {\n        self.path.clone()\n    }\n\n    /// Set the path of the asset\n    pub fn set_path(\u0026mut self, path: String) {\n        self.path = path;\n    }\n\n    /// Get the file size of the asset\n    pub fn file_size(\u0026self) -\u003e Option\u003cu64\u003e {\n        self.file_size\n    }\n\n    /// Get the file type of the asset\n    pub fn file_type(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.file_type.as_ref()\n    }\n\n    /// Get the processing status of the asset\n    pub fn processing_status(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.processing_status.as_ref()\n    }\n\n    /// Get the creation timestamp of the asset\n    pub fn created_at(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.created_at.as_ref()\n    }\n\n    /// Get the last update timestamp of the asset\n    pub fn updated_at(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.updated_at.as_ref()\n    }\n\n    /// Get the metadata of the asset\n    pub fn metadata(\u0026self) -\u003e Option\u003c\u0026AssetMetadata\u003e {\n        self.metadata.as_ref()\n    }\n}\n\nimpl From\u003c\u0026AssetResponse\u003e for Asset {\n    fn from(asset_response: \u0026AssetResponse) -\u003e Self {\n        // Extract the name from the path (last part after the last slash)\n        let name = asset_response\n            .path\n            .split('/')\n            .next_back()\n            .unwrap_or(\u0026asset_response.path)\n            .to_string();\n\n        Asset::new(\n            asset_response.uuid.to_owned(),\n            name,\n            asset_response.path.clone(),\n            None, // file_size not in current API response\n            Some(asset_response.asset_type.clone()),\n            Some(asset_response.state.clone()),\n            Some(asset_response.created_at.clone()),\n            Some(asset_response.updated_at.clone()),\n            Some(asset_response.metadata.clone().into()),\n        )\n    }\n}\n\nimpl From\u003cAssetResponse\u003e for Asset {\n    fn from(asset_response: AssetResponse) -\u003e Self {\n        \u003cAsset as From\u003c\u0026AssetResponse\u003e\u003e::from(\u0026asset_response)\n    }\n}\n\nimpl CsvRecordProducer for Asset {\n    /// Get the CSV header row for Asset records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"NAME\".to_string(),\n            \"PATH\".to_string(),\n            \"TYPE\".to_string(),\n            \"STATE\".to_string(),\n            \"UUID\".to_string(),\n        ]\n    }\n\n    /// Convert the Asset to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.name(),\n            self.path(),\n            self.file_type().cloned().unwrap_or_default(),\n            self.processing_status().cloned().unwrap_or_default(),\n            self.uuid().to_string(),\n        ]]\n    }\n\n    /// Get the extended CSV header row for Asset records including metadata\n    fn csv_header_with_metadata() -\u003e Vec\u003cString\u003e {\n        let header = Self::csv_header();\n        // We'll add metadata columns dynamically when we know what metadata keys exist\n        header\n    }\n\n    /// Convert the Asset to CSV records including metadata\n    fn as_csv_records_with_metadata(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let record = vec![\n            self.name(),\n            self.path(),\n            self.file_type().cloned().unwrap_or_default(),\n            self.processing_status().cloned().unwrap_or_default(),\n            self.uuid().to_string(),\n        ];\n\n        // Add metadata values if they exist\n        if let Some(_metadata) = self.metadata() {\n            // We'll need to collect all unique metadata keys when building the CSV\n            // For now, we just return the basic record without metadata columns\n            // The metadata will be added when building the full CSV with dynamic columns\n        }\n\n        vec![record]\n    }\n}\n\nimpl OutputFormatter for Asset {\n    type Item = Asset;\n\n    /// Format the Asset according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// A collection of Asset instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetList {\n    /// Map of asset IDs to Asset instances\n    assets: HashMap\u003cUuid, Asset\u003e, // ID -\u003e Asset\n}\n\nimpl AssetList {\n    /// Create a new empty AssetList\n    pub fn empty() -\u003e AssetList {\n        AssetList {\n            assets: HashMap::new(),\n        }\n    }\n\n    /// Check if the AssetList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.assets.is_empty()\n    }\n\n    /// Get the number of assets in the AssetList\n    pub fn len(\u0026self) -\u003e usize {\n        self.assets.len()\n    }\n\n    /// Insert an asset into the AssetList\n    ///\n    /// # Arguments\n    /// * `asset` - The asset to insert\n    pub fn insert(\u0026mut self, asset: Asset) {\n        self.assets.insert(asset.uuid(), asset);\n    }\n\n    /// Remove an asset from the AssetList by ID\n    ///\n    /// # Arguments\n    /// * `uuid` - The ID of the asset to remove\n    pub fn remove(\u0026mut self, uuid: \u0026Uuid) {\n        self.assets.remove(uuid);\n    }\n\n    /// Get an asset from the AssetList by UUID\n    ///\n    /// # Arguments\n    /// * `uuid` - The UUID of the asset to retrieve\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified ID exists\n    /// * `None` - If no asset with the specified ID exists\n    pub fn get(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026Asset\u003e {\n        self.assets.get(uuid)\n    }\n\n    /// Find an asset in the AssetList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the asset to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified name exists\n    /// * `None` - If no asset with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Asset\u003e {\n        let result = self.assets.iter().find(|(_, f)| f.name.eq(name));\n\n        match result {\n            Some((_key, folder)) =\u003e Some(folder),\n            None =\u003e None,\n        }\n    }\n\n    /// Find an asset in the AssetList by path\n    ///\n    /// # Arguments\n    /// * `path` - The path of the asset to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified path exists\n    /// * `None` - If no asset with the specified path exists\n    pub fn find_by_path(\u0026self, path: \u0026str) -\u003e Option\u003c\u0026Asset\u003e {\n        let result = self.assets.iter().find(|(_, a)| a.path().eq(path));\n\n        match result {\n            Some((_key, asset)) =\u003e Some(asset),\n            None =\u003e None,\n        }\n    }\n\n    /// Get all assets as a vector\n    ///\n    /// # Returns\n    /// A vector containing all assets in the AssetList\n    pub fn get_all_assets(\u0026self) -\u003e Vec\u003c\u0026Asset\u003e {\n        self.assets.values().collect()\n    }\n\n    /// Convert the AssetList to CSV records including metadata\n    ///\n    /// This method converts the AssetList to CSV records with additional metadata columns.\n    ///\n    /// # Arguments\n    /// * `metadata_keys` - Sorted list of metadata keys to include as columns\n    ///\n    /// # Returns\n    /// Vector of CSV records with metadata columns\n    fn as_csv_records_with_metadata(\u0026self, metadata_keys: \u0026[String]) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for asset in self.assets.values() {\n            // Start with standard asset record\n            let mut record = vec![\n                asset.name(),\n                asset.path(),\n                asset.file_type().cloned().unwrap_or_default(),\n                asset.processing_status().cloned().unwrap_or_default(),\n                asset.uuid().to_string(),\n            ];\n\n            // Add metadata values for each key\n            if let Some(metadata) = asset.metadata() {\n                for key in metadata_keys {\n                    let value = metadata.get(key).cloned().unwrap_or_default();\n                    record.push(value);\n                }\n            } else {\n                // No metadata, add empty strings for all metadata columns\n                for _ in metadata_keys {\n                    record.push(String::new());\n                }\n            }\n\n            records.push(record);\n        }\n\n        records\n    }\n}\n\nimpl Default for AssetList {\n    fn default() -\u003e Self {\n        AssetList::empty()\n    }\n}\n\nimpl FromIterator\u003cAsset\u003e for AssetList {\n    /// Create an AssetList from an iterator of Asset instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Asset\u003e\u003e(iter: I) -\u003e AssetList {\n        let mut assets = AssetList::empty();\n        for a in iter {\n            assets.insert(a);\n        }\n\n        assets\n    }\n}\n\nimpl From\u003cVec\u003cAsset\u003e\u003e for AssetList {\n    fn from(assets: Vec\u003cAsset\u003e) -\u003e Self {\n        AssetList::from_iter(assets.into_iter())\n    }\n}\n\nimpl From\u003cAssetListResponse\u003e for AssetList {\n    fn from(response: AssetListResponse) -\u003e Self {\n        response.to_asset_list()\n    }\n}\n\nimpl CsvRecordProducer for AssetList {\n    /// Get the CSV header row for AssetList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        Asset::csv_header()\n    }\n\n    /// Convert the AssetList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for asset in self.assets.values() {\n            records.push(asset.as_csv_records()[0].clone());\n        }\n\n        records\n    }\n}\n\nimpl OutputFormatter for AssetList {\n    type Item = AssetList;\n\n    /// Format the AssetList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output and sort by path\n                let mut assets: Vec\u003cAsset\u003e = self.assets.values().cloned().collect();\n                assets.sort_by_key(|a| a.path());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026assets)\n                } else {\n                    serde_json::to_string(\u0026assets)\n                };\n\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                if options.with_metadata {\n                    // For CSV with metadata, we need to collect all unique metadata keys first\n                    let mut metadata_keys: std::collections::HashSet\u003cString\u003e =\n                        std::collections::HashSet::new();\n\n                    // Collect all unique metadata keys\n                    for asset in self.assets.values() {\n                        if let Some(metadata) = asset.metadata() {\n                            for key in metadata.keys() {\n                                metadata_keys.insert(key.clone());\n                            }\n                        }\n                    }\n\n                    // Convert to sorted vector for consistent column ordering\n                    let mut sorted_metadata_keys: Vec\u003cString\u003e = metadata_keys.into_iter().collect();\n                    sorted_metadata_keys.sort();\n\n                    // Build CSV with metadata columns\n                    let buf = BufWriter::new(Vec::new());\n                    let mut wtr = Writer::from_writer(buf);\n\n                    if options.with_headers {\n                        // Build header with metadata columns\n                        let mut header = Asset::csv_header();\n                        for key in \u0026sorted_metadata_keys {\n                            header.push(key.clone());\n                        }\n                        wtr.write_record(\u0026header).unwrap();\n                    }\n\n                    // Sort records by asset path\n                    let mut records = self.as_csv_records_with_metadata(\u0026sorted_metadata_keys);\n                    records.sort_by(|a, b| a[1].cmp(\u0026b[1])); // Sort by PATH column (index 1)\n\n                    for record in records {\n                        wtr.write_record(\u0026record).unwrap();\n                    }\n\n                    match wtr.flush() {\n                        Ok(_) =\u003e {\n                            let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                            let csv = String::from_utf8(bytes).unwrap();\n                            Ok(csv.clone())\n                        }\n                        Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                    }\n                } else {\n                    let buf = BufWriter::new(Vec::new());\n                    let mut wtr = Writer::from_writer(buf);\n\n                    if options.with_headers {\n                        wtr.write_record(Self::csv_header()).unwrap();\n                    }\n\n                    // Sort records by asset path\n                    let mut records = self.as_csv_records();\n                    records.sort_by(|a, b| a[1].cmp(\u0026b[1])); // Sort by PATH column (index 1)\n\n                    for record in records {\n                        wtr.write_record(\u0026record).unwrap();\n                    }\n                    match wtr.flush() {\n                        Ok(_) =\u003e {\n                            let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                            let csv = String::from_utf8(bytes).unwrap();\n                            Ok(csv.clone())\n                        }\n                        Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                    }\n                }\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For asset list, tree format is the same as JSON\n                // In practice, tree format should be handled at the command level\n                // where we have access to the full hierarchy\n                // convert to a simple vector for output and sort by path\n                let mut assets: Vec\u003cAsset\u003e = self.assets.values().cloned().collect();\n                assets.sort_by_key(|a| a.path());\n                let json = serde_json::to_string_pretty(\u0026assets);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n        }\n    }\n}\n\n// Geometric search models\n\n/// Represents a match result from the geometric search\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricMatch {\n    /// The matching asset details\n    pub asset: AssetResponse,\n    /// The similarity percentage\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl GeometricMatch {\n    /// Get the asset ID\n    pub fn asset_uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.asset.uuid\n    }\n\n    /// Get the asset path\n    pub fn path(\u0026self) -\u003e \u0026str {\n        \u0026self.asset.path\n    }\n\n    /// Get the similarity score (0.0 to 100.0)\n    pub fn score(\u0026self) -\u003e f64 {\n        self.match_percentage\n    }\n}\n\n/// Represents a part match with forward and reverse similarity percentages\n///\n/// This structure holds information about a single part match, including the\n/// matching asset and both forward and reverse match percentages.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartMatch {\n    /// The matching asset details\n    pub asset: AssetResponse,\n    /// The forward match percentage\n    #[serde(rename = \"forwardMatchPercentage\")]\n    pub forward_match_percentage: Option\u003cf64\u003e,\n    /// The reverse match percentage\n    #[serde(rename = \"reverseMatchPercentage\")]\n    pub reverse_match_percentage: Option\u003cf64\u003e,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl PartMatch {\n    /// Get the asset ID\n    pub fn asset_uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.asset.uuid\n    }\n\n    /// Get the asset path\n    pub fn path(\u0026self) -\u003e \u0026str {\n        \u0026self.asset.path\n    }\n\n    /// Get the forward match percentage (0.0 to 100.0)\n    pub fn forward_score(\u0026self) -\u003e f64 {\n        self.forward_match_percentage.unwrap_or(0.0)\n    }\n\n    /// Get the reverse match percentage (0.0 to 100.0)\n    pub fn reverse_score(\u0026self) -\u003e f64 {\n        self.reverse_match_percentage.unwrap_or(0.0)\n    }\n}\n\n/// Response structure for part search operations\n///\n/// This structure holds the results of a part search operation, including\n/// the list of matching assets and pagination/filter information.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartSearchResponse {\n    /// The list of matching assets\n    pub matches: Vec\u003cPartMatch\u003e,\n    /// Pagination information\n    #[serde(rename = \"pageData\")]\n    pub page_data: Option\u003cPageData\u003e,\n    /// Filter information\n    #[serde(rename = \"filterData\")]\n    pub filter_data: Option\u003cFilterData\u003e,\n}\n\nimpl CsvRecordProducer for PartSearchResponse {\n    /// Get the CSV header row for PartSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"ASSET_ID\".to_string(),\n            \"PATH\".to_string(),\n            \"FORWARD_SCORE\".to_string(),\n            \"REVERSE_SCORE\".to_string(),\n        ]\n    }\n\n    /// Convert the PartSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    m.asset_uuid().to_string(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.forward_score()), // Full precision\n                    format!(\"{}\", m.reverse_score()), // Full precision\n                ]\n            })\n            .collect()\n    }\n}\n\n/// Enhanced response structure for part search that includes reference asset information\n///\n/// This structure extends the basic PartSearchResponse by including information about\n/// the reference asset that was searched against, making it easier to understand\n/// the context of the matches.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnhancedPartSearchResponse {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The list of matching assets\n    pub matches: Vec\u003cPartMatch\u003e,\n}\n\nimpl CsvRecordProducer for EnhancedPartSearchResponse {\n    /// Get the CSV header row for EnhancedPartSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"FORWARD_MATCH_PERCENTAGE\".to_string(),\n            \"REVERSE_MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the EnhancedPartSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    self.reference_asset.path.clone(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.forward_score()), // Full precision\n                    format!(\"{}\", m.reverse_score()), // Full precision\n                    self.reference_asset.uuid.to_string(),\n                    m.asset_uuid().to_string(),\n                    m.comparison_url.clone().unwrap_or_default(),\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for EnhancedPartSearchResponse {\n    type Item = EnhancedPartSearchResponse;\n\n    /// Format the EnhancedPartSearchResponse according to the specified output format\n    ///\n    /// This method formats the EnhancedPartSearchResponse based on the requested format:\n    /// - JSON: Outputs as JSON with optional pretty printing\n    /// - CSV: Outputs as CSV with optional headers\n    /// - Tree: Not supported for this type\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        // Extract the metadata flag from the format options\n        let with_metadata = match \u0026f {\n            OutputFormat::Json(options) =\u003e options.with_metadata,\n            OutputFormat::Csv(options) =\u003e options.with_metadata,\n            OutputFormat::Tree(options) =\u003e options.with_metadata,\n        };\n\n        self.format_with_metadata_flag(f, with_metadata)\n    }\n}\n\nimpl EnhancedPartSearchResponse {\n    /// Format the EnhancedPartSearchResponse with consideration for metadata flag\n    pub fn format_with_metadata_flag(\u0026self, f: OutputFormat, include_metadata: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                // Pre-calculate the metadata keys that will be used for both header and all records to ensure consistency\n                let mut header_metadata_keys = Vec::new();\n                if include_metadata {\n                    // Collect all unique metadata keys from ALL matches for consistent headers\n                    let mut all_metadata_keys = std::collections::HashSet::new();\n\n                    // Collect metadata keys from reference asset\n                    for key in self.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Collect metadata keys from all matching assets\n                    for match_result in \u0026self.matches {\n                        for key in match_result.asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n                    }\n\n                    // Sort metadata keys for consistent column ordering\n                    let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                    sorted_keys.sort();\n                    header_metadata_keys = sorted_keys;\n                }\n\n                if options.with_headers {\n                    if include_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n\n                        // Extend headers with metadata columns using the pre-calculated keys\n                        for key in \u0026header_metadata_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedPartSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if include_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.forward_score()),\n                            format!(\"{}\", match_result.reverse_score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026header_metadata_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        let base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.forward_score()),\n                            format!(\"{}\", match_result.reverse_score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n                        wtr.serialize(base_values.as_slice())?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents a matching pair from part search with both reference and candidate assets\n///\n/// This structure holds information about a single part match, including both the\n/// reference asset (the one being searched) and the candidate asset (the matching one),\n/// along with both forward and reverse match percentages.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartMatchPair {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The matching candidate asset\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The forward match percentage\n    #[serde(rename = \"forwardMatchPercentage\")]\n    pub forward_match_percentage: Option\u003cf64\u003e,\n    /// The reverse match percentage\n    #[serde(rename = \"reverseMatchPercentage\")]\n    pub reverse_match_percentage: Option\u003cf64\u003e,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\n/// Represents a pair of assets that matched in a visual search\n/// This structure excludes match percentages since visual search doesn't provide them\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct VisualMatchPair {\n    /// The reference asset (the one being compared against)\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The candidate asset (the one that matched)\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl PartMatchPair {\n    /// Create a new PartMatchPair from a reference asset and a part match\n    pub fn from_reference_and_match(reference_asset: AssetResponse, match_result: PartMatch) -\u003e Self {\n        PartMatchPair {\n            reference_asset,\n            candidate_asset: match_result.asset,\n            forward_match_percentage: match_result.forward_match_percentage,\n            reverse_match_percentage: match_result.reverse_match_percentage,\n            transformation: match_result.transformation,\n            comparison_url: match_result.comparison_url,\n        }\n    }\n}\n\nimpl CsvRecordProducer for PartMatchPair {\n    /// Get the CSV header row for PartMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"SCORE_1\".to_string(), // Generic score field that can be forward match % for geometric/part or empty for visual\n            \"SCORE_2\".to_string(), // Generic score field that can be reverse match % for geometric/part or empty for visual\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the PartMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            format!(\"{}\", self.forward_match_percentage.unwrap_or(0.0)),\n            format!(\"{}\", self.reverse_match_percentage.unwrap_or(0.0)),\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\nimpl CsvRecordProducer for VisualMatchPair {\n    /// Get the CSV header row for VisualMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the VisualMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\n/// Represents a 4x4 transformation matrix\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TransformationMatrix {\n    /// The 4x4 matrix values in row-major order\n    pub matrix: [f64; 16],\n}\n\n/// Represents filter data in API responses\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FilterData {\n    /// Extensions filter information\n    pub extensions: Vec\u003cFilterCount\u003e,\n    /// Folders filter information\n    pub folders: Vec\u003cFilterCount\u003e,\n    /// Metadata filter information\n    pub metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e,\n}\n\n/// Represents a filter and its count\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FilterCount {\n    /// The filter value\n    pub filter: String,\n    /// The count of items matching this filter\n    pub count: u32,\n}\n\n/// Represents a matching pair from folder-based geometric matching\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderGeometricMatch {\n    /// Name of the reference asset (the one from the source folder)\n    #[serde(rename = \"referenceAssetName\")]\n    pub reference_asset_name: String,\n    /// Name of the candidate asset (the one that matched)\n    #[serde(rename = \"candidateAssetName\")]\n    pub candidate_asset_name: String,\n    /// Match percentage between the assets\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// Full path of the reference asset\n    #[serde(rename = \"referenceAssetPath\")]\n    pub reference_asset_path: String,\n    /// Full path of the candidate asset\n    #[serde(rename = \"candidateAssetPath\")]\n    pub candidate_asset_path: String,\n    /// UUID of the reference asset\n    #[serde(rename = \"referenceAssetUuid\")]\n    pub reference_asset_uuid: Uuid,\n    /// UUID of the candidate asset\n    #[serde(rename = \"candidateAssetUuid\")]\n    pub candidate_asset_uuid: Uuid,\n    /// URL to the Physna comparison viewer for these two assets\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: String,\n}\n\nimpl CsvRecordProducer for FolderGeometricMatch {\n    /// Get the CSV header row for FolderGeometricMatch records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_NAME\".to_string(),\n            \"CANDIDATE_ASSET_NAME\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the FolderGeometricMatch to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset_name.clone(),\n            self.candidate_asset_name.clone(),\n            format!(\"{:.2}\", self.match_percentage),\n            self.reference_asset_path.clone(),\n            self.candidate_asset_path.clone(),\n            self.reference_asset_uuid.to_string(),\n            self.candidate_asset_uuid.to_string(),\n            self.comparison_url.clone(),\n        ]]\n    }\n}\n\n/// Represents the response from folder-based geometric matching\npub type FolderGeometricMatchResponse = Vec\u003cFolderGeometricMatch\u003e;\n\n// For FolderGeometricMatchResponse (Vec\u003cFolderGeometricMatch\u003e), we need to implement the traits manually\nimpl CsvRecordProducer for FolderGeometricMatchResponse {\n    /// Get the CSV header row for FolderGeometricMatchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        FolderGeometricMatch::csv_header()\n    }\n\n    /// Convert the FolderGeometricMatchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.iter().flat_map(|m| m.as_csv_records()).collect()\n    }\n}\n\nimpl OutputFormatter for FolderGeometricMatchResponse {\n    type Item = FolderGeometricMatchResponse;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents the response from the geometric search API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricSearchResponse {\n    /// The list of matching assets\n    pub matches: Vec\u003cGeometricMatch\u003e,\n    /// Pagination information\n    #[serde(rename = \"pageData\")]\n    pub page_data: Option\u003cPageData\u003e,\n    /// Filter information\n    #[serde(rename = \"filterData\")]\n    pub filter_data: Option\u003cFilterData\u003e,\n}\n\nimpl CsvRecordProducer for GeometricSearchResponse {\n    /// Get the CSV header row for GeometricSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"ASSET_ID\".to_string(),\n            \"PATH\".to_string(),\n            \"SCORE\".to_string(),\n        ]\n    }\n\n    /// Convert the GeometricSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    m.asset_uuid().to_string(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.score()), // Full precision\n                ]\n            })\n            .collect()\n    }\n}\n\n/// Structure to represent a geometric match with both reference and candidate assets.\n///\n/// This structure holds information about a single geometric match, including both the\n/// reference asset (the one being searched) and the candidate asset (the matching one),\n/// along with the similarity percentage and transformation matrix.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricMatchPair {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The matching candidate asset\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The similarity percentage\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl GeometricMatchPair {\n    /// Create a new GeometricMatchPair from a reference asset and a geometric match\n    pub fn from_reference_and_match(reference_asset: AssetResponse, match_result: GeometricMatch) -\u003e Self {\n        GeometricMatchPair {\n            reference_asset,\n            candidate_asset: match_result.asset,\n            match_percentage: match_result.match_percentage,\n            transformation: match_result.transformation,\n            comparison_url: match_result.comparison_url,\n        }\n    }\n}\n\nimpl CsvRecordProducer for GeometricMatchPair {\n    /// Get the CSV header row for GeometricMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the GeometricMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            format!(\"{}\", self.match_percentage), // Full precision\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\nimpl OutputFormatter for GeometricMatchPair {\n    type Item = GeometricMatchPair;\n\n    /// Format the GeometricMatchPair according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = GeometricMatchPair::csv_header();\n\n                        // Get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from candidate asset\n                        for key in self.candidate_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(GeometricMatchPair::csv_header())?;\n                    }\n                }\n\n                if options.with_metadata {\n                    // Include metadata values in the output\n                    let mut base_values = vec![\n                        self.reference_asset.path.clone(),\n                        self.candidate_asset.path.clone(),\n                        format!(\"{}\", self.match_percentage),\n                        self.reference_asset.uuid.to_string(),\n                        self.candidate_asset.uuid.to_string(),\n                        self.comparison_url.clone().unwrap_or_default(),\n                    ];\n\n                    // Get unique metadata keys from both reference and candidate assets\n                    let mut all_metadata_keys = std::collections::HashSet::new();\n\n                    // Collect metadata keys from reference asset\n                    for key in self.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Collect metadata keys from candidate asset\n                    for key in self.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Sort metadata keys for consistent column ordering\n                    let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                    sorted_keys.sort();\n\n                    // Add metadata values for each key\n                    for key in \u0026sorted_keys {\n                        // Add reference asset metadata value\n                        let ref_value = self.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = self.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n\n                    wtr.serialize(base_values.as_slice())?;\n                } else {\n                    wtr.serialize((\n                        \u0026self.reference_asset.path,\n                        \u0026self.candidate_asset.path,\n                        \u0026self.match_percentage,\n                        \u0026self.reference_asset.uuid.to_string(),\n                        \u0026self.candidate_asset.uuid.to_string(),\n                        \u0026self.comparison_url.clone().unwrap_or_default(),\n                    ))?;\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Enhanced response structure for geometric match that includes reference asset information.\n///\n/// This structure extends the basic geometric search response to include information about\n/// the reference asset that was searched against, providing complete context for the matches.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnhancedGeometricSearchResponse {\n    /// The reference asset that was searched against\n    pub reference_asset: AssetResponse,\n    /// The list of matching assets\n    pub matches: Vec\u003cGeometricMatch\u003e,\n}\n\nimpl CsvRecordProducer for EnhancedGeometricSearchResponse {\n    /// Get the CSV header row for EnhancedGeometricSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the EnhancedGeometricSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    self.reference_asset.path.clone(),  // Reference asset path\n                    m.path().to_string(),               // Candidate asset path\n                    format!(\"{}\", m.score()),           // Full precision match percentage\n                    self.reference_asset.uuid.to_string(), // Reference asset UUID\n                    m.asset_uuid().to_string(),         // Candidate asset UUID\n                    m.comparison_url.clone().unwrap_or_default(), // Comparison URL\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for EnhancedGeometricSearchResponse {\n    type Item = EnhancedGeometricSearchResponse;\n\n    /// Format the EnhancedGeometricSearchResponse according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n                        // Add metadata columns - we need to get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets\n                        for match_result in \u0026self.matches {\n                            for key in match_result.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedGeometricSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if options.with_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Get ALL unique metadata keys that were used in the header\n                        // (collected from reference asset and ALL match assets)\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets (same as header generation)\n                        for match_result_iter in \u0026self.matches {\n                            for key in match_result_iter.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026sorted_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        wtr.serialize((\n                            \u0026self.reference_asset.path,\n                            \u0026match_result.path(),\n                            \u0026match_result.score(),\n                            \u0026self.reference_asset.uuid.to_string(),\n                            \u0026match_result.asset_uuid().to_string(),\n                            \u0026match_result.comparison_url.clone().unwrap_or_default(),\n                        ))?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\nimpl EnhancedGeometricSearchResponse {\n    /// Format the EnhancedGeometricSearchResponse with consideration for metadata flag\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    pub fn format_with_metadata_option(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n                        // Add metadata columns - we need to get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets\n                        for match_result in \u0026self.matches {\n                            for key in match_result.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedGeometricSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if options.with_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Get ALL unique metadata keys that were used in the header\n                        // (collected from reference asset and ALL match assets)\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets (same as header generation)\n                        for match_result_iter in \u0026self.matches {\n                            for key in match_result_iter.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026sorted_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        wtr.serialize((\n                            \u0026self.reference_asset.path,\n                            \u0026match_result.path(),\n                            \u0026match_result.score(),\n                            \u0026self.reference_asset.uuid.to_string(),\n                            \u0026match_result.asset_uuid().to_string(),\n                            \u0026match_result.comparison_url.clone().unwrap_or_default(),\n                        ))?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n\n// Metadata field models for Physna V3 API\n\n/// Represents a metadata field definition\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct MetadataField {\n    /// The name of the metadata field\n    pub name: String,\n    /// The type of the metadata field (e.g., \"text\", \"number\", etc.)\n    #[serde(rename = \"type\")]\n    pub field_type: String,\n}\n\n/// Represents a response containing a list of metadata fields\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct MetadataFieldListResponse {\n    /// List of metadata fields\n    #[serde(rename = \"metadataFields\")]\n    pub metadata_fields: Vec\u003cMetadataField\u003e,\n}\n\n/// Represents a dependency relationship for an asset\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetDependency {\n    /// The path of the dependent asset\n    pub path: String,\n    /// The asset details\n    pub asset: AssetResponse,\n    /// Number of occurrences\n    pub occurrences: u32,\n    /// Whether the dependency has its own dependencies\n    #[serde(rename = \"hasDependencies\")]\n    pub has_dependencies: bool,\n}\n\n/// Represents the response from the asset dependencies API endpoint\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetDependenciesResponse {\n    /// List of assets that depend on this asset\n    pub dependencies: Vec\u003cAssetDependency\u003e,\n    /// Pagination data for the response\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n    /// The path of the original asset that was queried (for tree formatting)\n    #[serde(skip_serializing, skip_deserializing)]\n    pub original_asset_path: String,\n}\n\nimpl CsvRecordProducer for AssetDependenciesResponse {\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"PATH\".to_string(),\n            \"ASSET_ID\".to_string(),\n            \"ASSET_NAME\".to_string(),\n            \"OCCURRENCES\".to_string(),\n            \"HAS_DEPENDENCIES\".to_string(),\n        ]\n    }\n\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.dependencies\n            .iter()\n            .map(|dep| {\n                vec![\n                    dep.path.clone(),\n                    dep.asset.uuid.to_string(),\n                    dep.asset\n                        .path\n                        .split('/')\n                        .next_back()\n                        .unwrap_or(\u0026dep.asset.path)\n                        .to_string(), // Just the filename\n                    dep.occurrences.to_string(),\n                    dep.has_dependencies.to_string(),\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for AssetDependenciesResponse {\n    type Item = AssetDependenciesResponse;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(_) =\u003e {\n                let json = serde_json::to_string_pretty(self);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                use csv::Writer;\n                use std::io::BufWriter;\n\n                let buf = BufWriter::new(Vec::new());\n                let mut wtr = Writer::from_writer(buf);\n\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())\n                        .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n                }\n\n                for record in self.as_csv_records() {\n                    wtr.write_record(\u0026record)\n                        .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n                }\n\n                wtr.flush()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n\n                let bytes = wtr\n                    .into_inner()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?\n                    .into_inner()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n\n                String::from_utf8(bytes).map_err(|e| FormattingError::FormatFailure {\n                    cause: Box::new(std::io::Error::other(e)),\n                })\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // Create a tree representation of the dependencies with original asset as root\n                let mut output = String::new();\n\n                // Extract the original asset name from the path (last part after the last slash)\n                let original_asset_name = self\n                    .original_asset_path\n                    .split('/')\n                    .next_back()\n                    .unwrap_or(\u0026self.original_asset_path);\n\n                output.push_str(\u0026format!(\"{}\\n\", original_asset_name));\n\n                for dep in \u0026self.dependencies {\n                    let asset_name = dep\n                        .asset\n                        .path\n                        .split('/')\n                        .next_back()\n                        .unwrap_or(\u0026dep.asset.path);\n                    output.push_str(\u0026format!(\n                        \"‚îú‚îÄ‚îÄ {} ({} occurrences)\\n\",\n                        asset_name, dep.occurrences\n                    ));\n                }\n\n                Ok(output)\n            }\n        }\n    }\n}\n\n\n","traces":[{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":305,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":310,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":368,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":376,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":407,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":413,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":421,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":452,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":456,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":476,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":493,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":4}},{"line":518,"address":[],"length":0,"stats":{"Line":4}},{"line":519,"address":[],"length":0,"stats":{"Line":12}},{"line":520,"address":[],"length":0,"stats":{"Line":12}},{"line":521,"address":[],"length":0,"stats":{"Line":4}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":528,"address":[],"length":0,"stats":{"Line":0}},{"line":529,"address":[],"length":0,"stats":{"Line":0}},{"line":530,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":535,"address":[],"length":0,"stats":{"Line":0}},{"line":536,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":540,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":543,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":575,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":583,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":599,"address":[],"length":0,"stats":{"Line":0}},{"line":600,"address":[],"length":0,"stats":{"Line":0}},{"line":603,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":607,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":614,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":634,"address":[],"length":0,"stats":{"Line":0}},{"line":635,"address":[],"length":0,"stats":{"Line":0}},{"line":644,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":654,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":675,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":700,"address":[],"length":0,"stats":{"Line":0}},{"line":701,"address":[],"length":0,"stats":{"Line":0}},{"line":703,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":705,"address":[],"length":0,"stats":{"Line":0}},{"line":706,"address":[],"length":0,"stats":{"Line":0}},{"line":708,"address":[],"length":0,"stats":{"Line":0}},{"line":710,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":715,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":723,"address":[],"length":0,"stats":{"Line":0}},{"line":725,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":728,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":734,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":740,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":742,"address":[],"length":0,"stats":{"Line":0}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":798,"address":[],"length":0,"stats":{"Line":0}},{"line":810,"address":[],"length":0,"stats":{"Line":0}},{"line":811,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":814,"address":[],"length":0,"stats":{"Line":0}},{"line":852,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":857,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":937,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":947,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":949,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":990,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1026,"address":[],"length":0,"stats":{"Line":0}},{"line":1030,"address":[],"length":0,"stats":{"Line":0}},{"line":1031,"address":[],"length":0,"stats":{"Line":0}},{"line":1034,"address":[],"length":0,"stats":{"Line":0}},{"line":1035,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1046,"address":[],"length":0,"stats":{"Line":0}},{"line":1047,"address":[],"length":0,"stats":{"Line":0}},{"line":1049,"address":[],"length":0,"stats":{"Line":0}},{"line":1050,"address":[],"length":0,"stats":{"Line":0}},{"line":1051,"address":[],"length":0,"stats":{"Line":0}},{"line":1053,"address":[],"length":0,"stats":{"Line":0}},{"line":1055,"address":[],"length":0,"stats":{"Line":0}},{"line":1059,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1067,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1070,"address":[],"length":0,"stats":{"Line":0}},{"line":1072,"address":[],"length":0,"stats":{"Line":0}},{"line":1075,"address":[],"length":0,"stats":{"Line":0}},{"line":1076,"address":[],"length":0,"stats":{"Line":0}},{"line":1077,"address":[],"length":0,"stats":{"Line":0}},{"line":1078,"address":[],"length":0,"stats":{"Line":0}},{"line":1082,"address":[],"length":0,"stats":{"Line":0}},{"line":1083,"address":[],"length":0,"stats":{"Line":0}},{"line":1085,"address":[],"length":0,"stats":{"Line":0}},{"line":1087,"address":[],"length":0,"stats":{"Line":0}},{"line":1089,"address":[],"length":0,"stats":{"Line":0}},{"line":1090,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1092,"address":[],"length":0,"stats":{"Line":0}},{"line":1093,"address":[],"length":0,"stats":{"Line":0}},{"line":1097,"address":[],"length":0,"stats":{"Line":0}},{"line":1098,"address":[],"length":0,"stats":{"Line":0}},{"line":1100,"address":[],"length":0,"stats":{"Line":0}},{"line":1102,"address":[],"length":0,"stats":{"Line":0}},{"line":1140,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1149,"address":[],"length":0,"stats":{"Line":0}},{"line":1150,"address":[],"length":0,"stats":{"Line":0}},{"line":1155,"address":[],"length":0,"stats":{"Line":0}},{"line":1156,"address":[],"length":0,"stats":{"Line":0}},{"line":1173,"address":[],"length":0,"stats":{"Line":0}},{"line":1198,"address":[],"length":0,"stats":{"Line":0}},{"line":1199,"address":[],"length":0,"stats":{"Line":0}},{"line":1203,"address":[],"length":0,"stats":{"Line":0}},{"line":1204,"address":[],"length":0,"stats":{"Line":0}},{"line":1208,"address":[],"length":0,"stats":{"Line":0}},{"line":1209,"address":[],"length":0,"stats":{"Line":0}},{"line":1213,"address":[],"length":0,"stats":{"Line":0}},{"line":1214,"address":[],"length":0,"stats":{"Line":0}},{"line":1218,"address":[],"length":0,"stats":{"Line":0}},{"line":1219,"address":[],"length":0,"stats":{"Line":0}},{"line":1223,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1228,"address":[],"length":0,"stats":{"Line":0}},{"line":1229,"address":[],"length":0,"stats":{"Line":0}},{"line":1233,"address":[],"length":0,"stats":{"Line":0}},{"line":1234,"address":[],"length":0,"stats":{"Line":0}},{"line":1238,"address":[],"length":0,"stats":{"Line":0}},{"line":1239,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1244,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1254,"address":[],"length":0,"stats":{"Line":0}},{"line":1256,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1260,"address":[],"length":0,"stats":{"Line":0}},{"line":1264,"address":[],"length":0,"stats":{"Line":0}},{"line":1265,"address":[],"length":0,"stats":{"Line":0}},{"line":1266,"address":[],"length":0,"stats":{"Line":0}},{"line":1267,"address":[],"length":0,"stats":{"Line":0}},{"line":1268,"address":[],"length":0,"stats":{"Line":0}},{"line":1269,"address":[],"length":0,"stats":{"Line":0}},{"line":1270,"address":[],"length":0,"stats":{"Line":0}},{"line":1271,"address":[],"length":0,"stats":{"Line":0}},{"line":1272,"address":[],"length":0,"stats":{"Line":0}},{"line":1278,"address":[],"length":0,"stats":{"Line":0}},{"line":1279,"address":[],"length":0,"stats":{"Line":0}},{"line":1285,"address":[],"length":0,"stats":{"Line":0}},{"line":1286,"address":[],"length":0,"stats":{"Line":0}},{"line":1287,"address":[],"length":0,"stats":{"Line":0}},{"line":1288,"address":[],"length":0,"stats":{"Line":0}},{"line":1289,"address":[],"length":0,"stats":{"Line":0}},{"line":1290,"address":[],"length":0,"stats":{"Line":0}},{"line":1291,"address":[],"length":0,"stats":{"Line":0}},{"line":1296,"address":[],"length":0,"stats":{"Line":0}},{"line":1297,"address":[],"length":0,"stats":{"Line":0}},{"line":1298,"address":[],"length":0,"stats":{"Line":0}},{"line":1299,"address":[],"length":0,"stats":{"Line":0}},{"line":1300,"address":[],"length":0,"stats":{"Line":0}},{"line":1301,"address":[],"length":0,"stats":{"Line":0}},{"line":1302,"address":[],"length":0,"stats":{"Line":0}},{"line":1307,"address":[],"length":0,"stats":{"Line":0}},{"line":1308,"address":[],"length":0,"stats":{"Line":0}},{"line":1310,"address":[],"length":0,"stats":{"Line":0}},{"line":1314,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1316,"address":[],"length":0,"stats":{"Line":0}},{"line":1317,"address":[],"length":0,"stats":{"Line":0}},{"line":1318,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1320,"address":[],"length":0,"stats":{"Line":0}},{"line":1324,"address":[],"length":0,"stats":{"Line":0}},{"line":1330,"address":[],"length":0,"stats":{"Line":0}},{"line":1345,"address":[],"length":0,"stats":{"Line":0}},{"line":1346,"address":[],"length":0,"stats":{"Line":0}},{"line":1347,"address":[],"length":0,"stats":{"Line":0}},{"line":1348,"address":[],"length":0,"stats":{"Line":0}},{"line":1349,"address":[],"length":0,"stats":{"Line":0}},{"line":1351,"address":[],"length":0,"stats":{"Line":0}},{"line":1354,"address":[],"length":0,"stats":{"Line":0}},{"line":1355,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1371,"address":[],"length":0,"stats":{"Line":0}},{"line":1376,"address":[],"length":0,"stats":{"Line":0}},{"line":1377,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1382,"address":[],"length":0,"stats":{"Line":0}},{"line":1389,"address":[],"length":0,"stats":{"Line":0}},{"line":1390,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1398,"address":[],"length":0,"stats":{"Line":0}},{"line":1409,"address":[],"length":0,"stats":{"Line":0}},{"line":1410,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1422,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1425,"address":[],"length":0,"stats":{"Line":0}},{"line":1426,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1439,"address":[],"length":0,"stats":{"Line":0}},{"line":1441,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1443,"address":[],"length":0,"stats":{"Line":0}},{"line":1451,"address":[],"length":0,"stats":{"Line":0}},{"line":1452,"address":[],"length":0,"stats":{"Line":0}},{"line":1464,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1467,"address":[],"length":0,"stats":{"Line":0}},{"line":1469,"address":[],"length":0,"stats":{"Line":0}},{"line":1470,"address":[],"length":0,"stats":{"Line":0}},{"line":1471,"address":[],"length":0,"stats":{"Line":0}},{"line":1472,"address":[],"length":0,"stats":{"Line":0}},{"line":1473,"address":[],"length":0,"stats":{"Line":0}},{"line":1474,"address":[],"length":0,"stats":{"Line":0}},{"line":1478,"address":[],"length":0,"stats":{"Line":0}},{"line":1479,"address":[],"length":0,"stats":{"Line":0}},{"line":1480,"address":[],"length":0,"stats":{"Line":0}},{"line":1481,"address":[],"length":0,"stats":{"Line":0}},{"line":1485,"address":[],"length":0,"stats":{"Line":0}},{"line":1486,"address":[],"length":0,"stats":{"Line":0}},{"line":1490,"address":[],"length":0,"stats":{"Line":0}},{"line":1493,"address":[],"length":0,"stats":{"Line":0}},{"line":1498,"address":[],"length":0,"stats":{"Line":0}},{"line":1499,"address":[],"length":0,"stats":{"Line":0}},{"line":1505,"address":[],"length":0,"stats":{"Line":0}},{"line":1506,"address":[],"length":0,"stats":{"Line":0}},{"line":1507,"address":[],"length":0,"stats":{"Line":0}},{"line":1508,"address":[],"length":0,"stats":{"Line":0}},{"line":1511,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1522,"address":[],"length":0,"stats":{"Line":0}},{"line":1523,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1530,"address":[],"length":0,"stats":{"Line":0}},{"line":1534,"address":[],"length":0,"stats":{"Line":0}},{"line":1535,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1538,"address":[],"length":0,"stats":{"Line":0}},{"line":1541,"address":[],"length":0,"stats":{"Line":0}},{"line":1556,"address":[],"length":0,"stats":{"Line":0}},{"line":1557,"address":[],"length":0,"stats":{"Line":0}},{"line":1558,"address":[],"length":0,"stats":{"Line":0}},{"line":1560,"address":[],"length":0,"stats":{"Line":0}},{"line":1561,"address":[],"length":0,"stats":{"Line":0}},{"line":1562,"address":[],"length":0,"stats":{"Line":0}},{"line":1563,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1568,"address":[],"length":0,"stats":{"Line":0}},{"line":1569,"address":[],"length":0,"stats":{"Line":0}},{"line":1570,"address":[],"length":0,"stats":{"Line":0}},{"line":1573,"address":[],"length":0,"stats":{"Line":0}},{"line":1574,"address":[],"length":0,"stats":{"Line":0}},{"line":1576,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1580,"address":[],"length":0,"stats":{"Line":0}},{"line":1581,"address":[],"length":0,"stats":{"Line":0}},{"line":1582,"address":[],"length":0,"stats":{"Line":0}},{"line":1583,"address":[],"length":0,"stats":{"Line":0}},{"line":1589,"address":[],"length":0,"stats":{"Line":0}},{"line":1590,"address":[],"length":0,"stats":{"Line":0}},{"line":1593,"address":[],"length":0,"stats":{"Line":0}},{"line":1594,"address":[],"length":0,"stats":{"Line":0}},{"line":1596,"address":[],"length":0,"stats":{"Line":0}},{"line":1598,"address":[],"length":0,"stats":{"Line":0}},{"line":1599,"address":[],"length":0,"stats":{"Line":0}},{"line":1600,"address":[],"length":0,"stats":{"Line":0}},{"line":1602,"address":[],"length":0,"stats":{"Line":0}},{"line":1606,"address":[],"length":0,"stats":{"Line":0}},{"line":1607,"address":[],"length":0,"stats":{"Line":0}},{"line":1609,"address":[],"length":0,"stats":{"Line":0}},{"line":1610,"address":[],"length":0,"stats":{"Line":0}},{"line":1613,"address":[],"length":0,"stats":{"Line":0}},{"line":1615,"address":[],"length":0,"stats":{"Line":0}},{"line":1616,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1622,"address":[],"length":0,"stats":{"Line":0}},{"line":1623,"address":[],"length":0,"stats":{"Line":0}},{"line":1625,"address":[],"length":0,"stats":{"Line":0}},{"line":1626,"address":[],"length":0,"stats":{"Line":0}},{"line":1630,"address":[],"length":0,"stats":{"Line":0}},{"line":1631,"address":[],"length":0,"stats":{"Line":0}},{"line":1633,"address":[],"length":0,"stats":{"Line":0}},{"line":1634,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1638,"address":[],"length":0,"stats":{"Line":0}},{"line":1639,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1642,"address":[],"length":0,"stats":{"Line":0}},{"line":1651,"address":[],"length":0,"stats":{"Line":0}},{"line":1652,"address":[],"length":0,"stats":{"Line":0}},{"line":1653,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1655,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1683,"address":[],"length":0,"stats":{"Line":0}},{"line":1684,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1689,"address":[],"length":0,"stats":{"Line":0}},{"line":1693,"address":[],"length":0,"stats":{"Line":0}},{"line":1694,"address":[],"length":0,"stats":{"Line":0}},{"line":1722,"address":[],"length":0,"stats":{"Line":0}},{"line":1723,"address":[],"length":0,"stats":{"Line":0}},{"line":1727,"address":[],"length":0,"stats":{"Line":0}},{"line":1728,"address":[],"length":0,"stats":{"Line":0}},{"line":1732,"address":[],"length":0,"stats":{"Line":0}},{"line":1733,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1738,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1761,"address":[],"length":0,"stats":{"Line":0}},{"line":1762,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1764,"address":[],"length":0,"stats":{"Line":0}},{"line":1765,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1771,"address":[],"length":0,"stats":{"Line":0}},{"line":1773,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1776,"address":[],"length":0,"stats":{"Line":0}},{"line":1777,"address":[],"length":0,"stats":{"Line":0}},{"line":1778,"address":[],"length":0,"stats":{"Line":0}},{"line":1801,"address":[],"length":0,"stats":{"Line":0}},{"line":1802,"address":[],"length":0,"stats":{"Line":0}},{"line":1803,"address":[],"length":0,"stats":{"Line":0}},{"line":1804,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1806,"address":[],"length":0,"stats":{"Line":0}},{"line":1807,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1809,"address":[],"length":0,"stats":{"Line":0}},{"line":1814,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1818,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1820,"address":[],"length":0,"stats":{"Line":0}},{"line":1821,"address":[],"length":0,"stats":{"Line":0}},{"line":1822,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1824,"address":[],"length":0,"stats":{"Line":0}},{"line":1825,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1845,"address":[],"length":0,"stats":{"Line":0}},{"line":1846,"address":[],"length":0,"stats":{"Line":0}},{"line":1849,"address":[],"length":0,"stats":{"Line":0}},{"line":1855,"address":[],"length":0,"stats":{"Line":0}},{"line":1856,"address":[],"length":0,"stats":{"Line":0}},{"line":1857,"address":[],"length":0,"stats":{"Line":0}},{"line":1858,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1861,"address":[],"length":0,"stats":{"Line":0}},{"line":1864,"address":[],"length":0,"stats":{"Line":0}},{"line":1865,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1871,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1880,"address":[],"length":0,"stats":{"Line":0}},{"line":1881,"address":[],"length":0,"stats":{"Line":0}},{"line":1886,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1888,"address":[],"length":0,"stats":{"Line":0}},{"line":1891,"address":[],"length":0,"stats":{"Line":0}},{"line":1892,"address":[],"length":0,"stats":{"Line":0}},{"line":1894,"address":[],"length":0,"stats":{"Line":0}},{"line":1897,"address":[],"length":0,"stats":{"Line":0}},{"line":1898,"address":[],"length":0,"stats":{"Line":0}},{"line":1899,"address":[],"length":0,"stats":{"Line":0}},{"line":1902,"address":[],"length":0,"stats":{"Line":0}},{"line":1904,"address":[],"length":0,"stats":{"Line":0}},{"line":1908,"address":[],"length":0,"stats":{"Line":0}},{"line":1909,"address":[],"length":0,"stats":{"Line":0}},{"line":1911,"address":[],"length":0,"stats":{"Line":0}},{"line":1912,"address":[],"length":0,"stats":{"Line":0}},{"line":1913,"address":[],"length":0,"stats":{"Line":0}},{"line":1914,"address":[],"length":0,"stats":{"Line":0}},{"line":1915,"address":[],"length":0,"stats":{"Line":0}},{"line":1916,"address":[],"length":0,"stats":{"Line":0}},{"line":1917,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1924,"address":[],"length":0,"stats":{"Line":0}},{"line":1925,"address":[],"length":0,"stats":{"Line":0}},{"line":1926,"address":[],"length":0,"stats":{"Line":0}},{"line":1928,"address":[],"length":0,"stats":{"Line":0}},{"line":1931,"address":[],"length":0,"stats":{"Line":0}},{"line":1932,"address":[],"length":0,"stats":{"Line":0}},{"line":1933,"address":[],"length":0,"stats":{"Line":0}},{"line":1935,"address":[],"length":0,"stats":{"Line":0}},{"line":1938,"address":[],"length":0,"stats":{"Line":0}},{"line":1940,"address":[],"length":0,"stats":{"Line":0}},{"line":1941,"address":[],"length":0,"stats":{"Line":0}},{"line":1942,"address":[],"length":0,"stats":{"Line":0}},{"line":1943,"address":[],"length":0,"stats":{"Line":0}},{"line":1944,"address":[],"length":0,"stats":{"Line":0}},{"line":1945,"address":[],"length":0,"stats":{"Line":0}},{"line":1946,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1949,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1954,"address":[],"length":0,"stats":{"Line":0}},{"line":1956,"address":[],"length":0,"stats":{"Line":0}},{"line":2005,"address":[],"length":0,"stats":{"Line":0}},{"line":2008,"address":[],"length":0,"stats":{"Line":0}},{"line":2009,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2011,"address":[],"length":0,"stats":{"Line":0}},{"line":2012,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2021,"address":[],"length":0,"stats":{"Line":0}},{"line":2022,"address":[],"length":0,"stats":{"Line":0}},{"line":2023,"address":[],"length":0,"stats":{"Line":0}},{"line":2024,"address":[],"length":0,"stats":{"Line":0}},{"line":2025,"address":[],"length":0,"stats":{"Line":0}},{"line":2026,"address":[],"length":0,"stats":{"Line":0}},{"line":2027,"address":[],"length":0,"stats":{"Line":0}},{"line":2032,"address":[],"length":0,"stats":{"Line":0}},{"line":2033,"address":[],"length":0,"stats":{"Line":0}},{"line":2034,"address":[],"length":0,"stats":{"Line":0}},{"line":2035,"address":[],"length":0,"stats":{"Line":0}},{"line":2036,"address":[],"length":0,"stats":{"Line":0}},{"line":2037,"address":[],"length":0,"stats":{"Line":0}},{"line":2038,"address":[],"length":0,"stats":{"Line":0}},{"line":2039,"address":[],"length":0,"stats":{"Line":0}},{"line":2040,"address":[],"length":0,"stats":{"Line":0}},{"line":2047,"address":[],"length":0,"stats":{"Line":0}},{"line":2048,"address":[],"length":0,"stats":{"Line":0}},{"line":2049,"address":[],"length":0,"stats":{"Line":0}},{"line":2050,"address":[],"length":0,"stats":{"Line":0}},{"line":2051,"address":[],"length":0,"stats":{"Line":0}},{"line":2052,"address":[],"length":0,"stats":{"Line":0}},{"line":2053,"address":[],"length":0,"stats":{"Line":0}},{"line":2058,"address":[],"length":0,"stats":{"Line":0}},{"line":2059,"address":[],"length":0,"stats":{"Line":0}},{"line":2060,"address":[],"length":0,"stats":{"Line":0}},{"line":2061,"address":[],"length":0,"stats":{"Line":0}},{"line":2062,"address":[],"length":0,"stats":{"Line":0}},{"line":2063,"address":[],"length":0,"stats":{"Line":0}},{"line":2064,"address":[],"length":0,"stats":{"Line":0}},{"line":2127,"address":[],"length":0,"stats":{"Line":0}},{"line":2128,"address":[],"length":0,"stats":{"Line":0}},{"line":2129,"address":[],"length":0,"stats":{"Line":0}},{"line":2130,"address":[],"length":0,"stats":{"Line":0}},{"line":2131,"address":[],"length":0,"stats":{"Line":0}},{"line":2132,"address":[],"length":0,"stats":{"Line":0}},{"line":2133,"address":[],"length":0,"stats":{"Line":0}},{"line":2134,"address":[],"length":0,"stats":{"Line":0}},{"line":2135,"address":[],"length":0,"stats":{"Line":0}},{"line":2136,"address":[],"length":0,"stats":{"Line":0}},{"line":2141,"address":[],"length":0,"stats":{"Line":0}},{"line":2142,"address":[],"length":0,"stats":{"Line":0}},{"line":2143,"address":[],"length":0,"stats":{"Line":0}},{"line":2144,"address":[],"length":0,"stats":{"Line":0}},{"line":2145,"address":[],"length":0,"stats":{"Line":0}},{"line":2146,"address":[],"length":0,"stats":{"Line":0}},{"line":2147,"address":[],"length":0,"stats":{"Line":0}},{"line":2148,"address":[],"length":0,"stats":{"Line":0}},{"line":2149,"address":[],"length":0,"stats":{"Line":0}},{"line":2150,"address":[],"length":0,"stats":{"Line":0}},{"line":2161,"address":[],"length":0,"stats":{"Line":0}},{"line":2162,"address":[],"length":0,"stats":{"Line":0}},{"line":2166,"address":[],"length":0,"stats":{"Line":0}},{"line":2167,"address":[],"length":0,"stats":{"Line":0}},{"line":2174,"address":[],"length":0,"stats":{"Line":0}},{"line":2175,"address":[],"length":0,"stats":{"Line":0}},{"line":2176,"address":[],"length":0,"stats":{"Line":0}},{"line":2177,"address":[],"length":0,"stats":{"Line":0}},{"line":2178,"address":[],"length":0,"stats":{"Line":0}},{"line":2180,"address":[],"length":0,"stats":{"Line":0}},{"line":2183,"address":[],"length":0,"stats":{"Line":0}},{"line":2184,"address":[],"length":0,"stats":{"Line":0}},{"line":2204,"address":[],"length":0,"stats":{"Line":0}},{"line":2205,"address":[],"length":0,"stats":{"Line":0}},{"line":2206,"address":[],"length":0,"stats":{"Line":0}},{"line":2207,"address":[],"length":0,"stats":{"Line":0}},{"line":2208,"address":[],"length":0,"stats":{"Line":0}},{"line":2213,"address":[],"length":0,"stats":{"Line":0}},{"line":2214,"address":[],"length":0,"stats":{"Line":0}},{"line":2216,"address":[],"length":0,"stats":{"Line":0}},{"line":2217,"address":[],"length":0,"stats":{"Line":0}},{"line":2218,"address":[],"length":0,"stats":{"Line":0}},{"line":2219,"address":[],"length":0,"stats":{"Line":0}},{"line":2220,"address":[],"length":0,"stats":{"Line":0}},{"line":2253,"address":[],"length":0,"stats":{"Line":0}},{"line":2256,"address":[],"length":0,"stats":{"Line":0}},{"line":2257,"address":[],"length":0,"stats":{"Line":0}},{"line":2258,"address":[],"length":0,"stats":{"Line":0}},{"line":2259,"address":[],"length":0,"stats":{"Line":0}},{"line":2266,"address":[],"length":0,"stats":{"Line":0}},{"line":2267,"address":[],"length":0,"stats":{"Line":0}},{"line":2268,"address":[],"length":0,"stats":{"Line":0}},{"line":2269,"address":[],"length":0,"stats":{"Line":0}},{"line":2270,"address":[],"length":0,"stats":{"Line":0}},{"line":2271,"address":[],"length":0,"stats":{"Line":0}},{"line":2272,"address":[],"length":0,"stats":{"Line":0}},{"line":2273,"address":[],"length":0,"stats":{"Line":0}},{"line":2278,"address":[],"length":0,"stats":{"Line":0}},{"line":2279,"address":[],"length":0,"stats":{"Line":0}},{"line":2280,"address":[],"length":0,"stats":{"Line":0}},{"line":2281,"address":[],"length":0,"stats":{"Line":0}},{"line":2282,"address":[],"length":0,"stats":{"Line":0}},{"line":2283,"address":[],"length":0,"stats":{"Line":0}},{"line":2284,"address":[],"length":0,"stats":{"Line":0}},{"line":2285,"address":[],"length":0,"stats":{"Line":0}},{"line":2301,"address":[],"length":0,"stats":{"Line":0}},{"line":2302,"address":[],"length":0,"stats":{"Line":0}},{"line":2303,"address":[],"length":0,"stats":{"Line":0}},{"line":2304,"address":[],"length":0,"stats":{"Line":0}},{"line":2305,"address":[],"length":0,"stats":{"Line":0}},{"line":2307,"address":[],"length":0,"stats":{"Line":0}},{"line":2310,"address":[],"length":0,"stats":{"Line":0}},{"line":2311,"address":[],"length":0,"stats":{"Line":0}},{"line":2313,"address":[],"length":0,"stats":{"Line":0}},{"line":2314,"address":[],"length":0,"stats":{"Line":0}},{"line":2316,"address":[],"length":0,"stats":{"Line":0}},{"line":2319,"address":[],"length":0,"stats":{"Line":0}},{"line":2322,"address":[],"length":0,"stats":{"Line":0}},{"line":2323,"address":[],"length":0,"stats":{"Line":0}},{"line":2327,"address":[],"length":0,"stats":{"Line":0}},{"line":2328,"address":[],"length":0,"stats":{"Line":0}},{"line":2332,"address":[],"length":0,"stats":{"Line":0}},{"line":2333,"address":[],"length":0,"stats":{"Line":0}},{"line":2336,"address":[],"length":0,"stats":{"Line":0}},{"line":2337,"address":[],"length":0,"stats":{"Line":0}},{"line":2338,"address":[],"length":0,"stats":{"Line":0}},{"line":2341,"address":[],"length":0,"stats":{"Line":0}},{"line":2343,"address":[],"length":0,"stats":{"Line":0}},{"line":2347,"address":[],"length":0,"stats":{"Line":0}},{"line":2349,"address":[],"length":0,"stats":{"Line":0}},{"line":2350,"address":[],"length":0,"stats":{"Line":0}},{"line":2351,"address":[],"length":0,"stats":{"Line":0}},{"line":2352,"address":[],"length":0,"stats":{"Line":0}},{"line":2353,"address":[],"length":0,"stats":{"Line":0}},{"line":2354,"address":[],"length":0,"stats":{"Line":0}},{"line":2355,"address":[],"length":0,"stats":{"Line":0}},{"line":2359,"address":[],"length":0,"stats":{"Line":0}},{"line":2362,"address":[],"length":0,"stats":{"Line":0}},{"line":2363,"address":[],"length":0,"stats":{"Line":0}},{"line":2367,"address":[],"length":0,"stats":{"Line":0}},{"line":2368,"address":[],"length":0,"stats":{"Line":0}},{"line":2372,"address":[],"length":0,"stats":{"Line":0}},{"line":2373,"address":[],"length":0,"stats":{"Line":0}},{"line":2376,"address":[],"length":0,"stats":{"Line":0}},{"line":2378,"address":[],"length":0,"stats":{"Line":0}},{"line":2379,"address":[],"length":0,"stats":{"Line":0}},{"line":2380,"address":[],"length":0,"stats":{"Line":0}},{"line":2382,"address":[],"length":0,"stats":{"Line":0}},{"line":2385,"address":[],"length":0,"stats":{"Line":0}},{"line":2386,"address":[],"length":0,"stats":{"Line":0}},{"line":2387,"address":[],"length":0,"stats":{"Line":0}},{"line":2389,"address":[],"length":0,"stats":{"Line":0}},{"line":2392,"address":[],"length":0,"stats":{"Line":0}},{"line":2394,"address":[],"length":0,"stats":{"Line":0}},{"line":2395,"address":[],"length":0,"stats":{"Line":0}},{"line":2396,"address":[],"length":0,"stats":{"Line":0}},{"line":2397,"address":[],"length":0,"stats":{"Line":0}},{"line":2398,"address":[],"length":0,"stats":{"Line":0}},{"line":2399,"address":[],"length":0,"stats":{"Line":0}},{"line":2400,"address":[],"length":0,"stats":{"Line":0}},{"line":2404,"address":[],"length":0,"stats":{"Line":0}},{"line":2405,"address":[],"length":0,"stats":{"Line":0}},{"line":2407,"address":[],"length":0,"stats":{"Line":0}},{"line":2426,"address":[],"length":0,"stats":{"Line":0}},{"line":2427,"address":[],"length":0,"stats":{"Line":0}},{"line":2428,"address":[],"length":0,"stats":{"Line":0}},{"line":2429,"address":[],"length":0,"stats":{"Line":0}},{"line":2430,"address":[],"length":0,"stats":{"Line":0}},{"line":2431,"address":[],"length":0,"stats":{"Line":0}},{"line":2432,"address":[],"length":0,"stats":{"Line":0}},{"line":2433,"address":[],"length":0,"stats":{"Line":0}},{"line":2438,"address":[],"length":0,"stats":{"Line":0}},{"line":2439,"address":[],"length":0,"stats":{"Line":0}},{"line":2441,"address":[],"length":0,"stats":{"Line":0}},{"line":2442,"address":[],"length":0,"stats":{"Line":0}},{"line":2443,"address":[],"length":0,"stats":{"Line":0}},{"line":2444,"address":[],"length":0,"stats":{"Line":0}},{"line":2445,"address":[],"length":0,"stats":{"Line":0}},{"line":2446,"address":[],"length":0,"stats":{"Line":0}},{"line":2447,"address":[],"length":0,"stats":{"Line":0}},{"line":2448,"address":[],"length":0,"stats":{"Line":0}},{"line":2466,"address":[],"length":0,"stats":{"Line":0}},{"line":2467,"address":[],"length":0,"stats":{"Line":0}},{"line":2468,"address":[],"length":0,"stats":{"Line":0}},{"line":2469,"address":[],"length":0,"stats":{"Line":0}},{"line":2470,"address":[],"length":0,"stats":{"Line":0}},{"line":2472,"address":[],"length":0,"stats":{"Line":0}},{"line":2475,"address":[],"length":0,"stats":{"Line":0}},{"line":2476,"address":[],"length":0,"stats":{"Line":0}},{"line":2478,"address":[],"length":0,"stats":{"Line":0}},{"line":2479,"address":[],"length":0,"stats":{"Line":0}},{"line":2481,"address":[],"length":0,"stats":{"Line":0}},{"line":2483,"address":[],"length":0,"stats":{"Line":0}},{"line":2486,"address":[],"length":0,"stats":{"Line":0}},{"line":2487,"address":[],"length":0,"stats":{"Line":0}},{"line":2491,"address":[],"length":0,"stats":{"Line":0}},{"line":2492,"address":[],"length":0,"stats":{"Line":0}},{"line":2493,"address":[],"length":0,"stats":{"Line":0}},{"line":2498,"address":[],"length":0,"stats":{"Line":0}},{"line":2499,"address":[],"length":0,"stats":{"Line":0}},{"line":2502,"address":[],"length":0,"stats":{"Line":0}},{"line":2503,"address":[],"length":0,"stats":{"Line":0}},{"line":2504,"address":[],"length":0,"stats":{"Line":0}},{"line":2507,"address":[],"length":0,"stats":{"Line":0}},{"line":2509,"address":[],"length":0,"stats":{"Line":0}},{"line":2513,"address":[],"length":0,"stats":{"Line":0}},{"line":2514,"address":[],"length":0,"stats":{"Line":0}},{"line":2516,"address":[],"length":0,"stats":{"Line":0}},{"line":2517,"address":[],"length":0,"stats":{"Line":0}},{"line":2518,"address":[],"length":0,"stats":{"Line":0}},{"line":2519,"address":[],"length":0,"stats":{"Line":0}},{"line":2520,"address":[],"length":0,"stats":{"Line":0}},{"line":2521,"address":[],"length":0,"stats":{"Line":0}},{"line":2522,"address":[],"length":0,"stats":{"Line":0}},{"line":2527,"address":[],"length":0,"stats":{"Line":0}},{"line":2530,"address":[],"length":0,"stats":{"Line":0}},{"line":2531,"address":[],"length":0,"stats":{"Line":0}},{"line":2535,"address":[],"length":0,"stats":{"Line":0}},{"line":2536,"address":[],"length":0,"stats":{"Line":0}},{"line":2537,"address":[],"length":0,"stats":{"Line":0}},{"line":2542,"address":[],"length":0,"stats":{"Line":0}},{"line":2543,"address":[],"length":0,"stats":{"Line":0}},{"line":2546,"address":[],"length":0,"stats":{"Line":0}},{"line":2548,"address":[],"length":0,"stats":{"Line":0}},{"line":2549,"address":[],"length":0,"stats":{"Line":0}},{"line":2550,"address":[],"length":0,"stats":{"Line":0}},{"line":2552,"address":[],"length":0,"stats":{"Line":0}},{"line":2555,"address":[],"length":0,"stats":{"Line":0}},{"line":2556,"address":[],"length":0,"stats":{"Line":0}},{"line":2557,"address":[],"length":0,"stats":{"Line":0}},{"line":2559,"address":[],"length":0,"stats":{"Line":0}},{"line":2562,"address":[],"length":0,"stats":{"Line":0}},{"line":2564,"address":[],"length":0,"stats":{"Line":0}},{"line":2565,"address":[],"length":0,"stats":{"Line":0}},{"line":2566,"address":[],"length":0,"stats":{"Line":0}},{"line":2567,"address":[],"length":0,"stats":{"Line":0}},{"line":2568,"address":[],"length":0,"stats":{"Line":0}},{"line":2569,"address":[],"length":0,"stats":{"Line":0}},{"line":2570,"address":[],"length":0,"stats":{"Line":0}},{"line":2575,"address":[],"length":0,"stats":{"Line":0}},{"line":2576,"address":[],"length":0,"stats":{"Line":0}},{"line":2578,"address":[],"length":0,"stats":{"Line":0}},{"line":2592,"address":[],"length":0,"stats":{"Line":0}},{"line":2593,"address":[],"length":0,"stats":{"Line":0}},{"line":2594,"address":[],"length":0,"stats":{"Line":0}},{"line":2595,"address":[],"length":0,"stats":{"Line":0}},{"line":2596,"address":[],"length":0,"stats":{"Line":0}},{"line":2598,"address":[],"length":0,"stats":{"Line":0}},{"line":2601,"address":[],"length":0,"stats":{"Line":0}},{"line":2602,"address":[],"length":0,"stats":{"Line":0}},{"line":2604,"address":[],"length":0,"stats":{"Line":0}},{"line":2605,"address":[],"length":0,"stats":{"Line":0}},{"line":2607,"address":[],"length":0,"stats":{"Line":0}},{"line":2609,"address":[],"length":0,"stats":{"Line":0}},{"line":2612,"address":[],"length":0,"stats":{"Line":0}},{"line":2613,"address":[],"length":0,"stats":{"Line":0}},{"line":2617,"address":[],"length":0,"stats":{"Line":0}},{"line":2618,"address":[],"length":0,"stats":{"Line":0}},{"line":2619,"address":[],"length":0,"stats":{"Line":0}},{"line":2624,"address":[],"length":0,"stats":{"Line":0}},{"line":2625,"address":[],"length":0,"stats":{"Line":0}},{"line":2628,"address":[],"length":0,"stats":{"Line":0}},{"line":2629,"address":[],"length":0,"stats":{"Line":0}},{"line":2630,"address":[],"length":0,"stats":{"Line":0}},{"line":2633,"address":[],"length":0,"stats":{"Line":0}},{"line":2635,"address":[],"length":0,"stats":{"Line":0}},{"line":2639,"address":[],"length":0,"stats":{"Line":0}},{"line":2640,"address":[],"length":0,"stats":{"Line":0}},{"line":2642,"address":[],"length":0,"stats":{"Line":0}},{"line":2643,"address":[],"length":0,"stats":{"Line":0}},{"line":2644,"address":[],"length":0,"stats":{"Line":0}},{"line":2645,"address":[],"length":0,"stats":{"Line":0}},{"line":2646,"address":[],"length":0,"stats":{"Line":0}},{"line":2647,"address":[],"length":0,"stats":{"Line":0}},{"line":2648,"address":[],"length":0,"stats":{"Line":0}},{"line":2653,"address":[],"length":0,"stats":{"Line":0}},{"line":2656,"address":[],"length":0,"stats":{"Line":0}},{"line":2657,"address":[],"length":0,"stats":{"Line":0}},{"line":2661,"address":[],"length":0,"stats":{"Line":0}},{"line":2662,"address":[],"length":0,"stats":{"Line":0}},{"line":2663,"address":[],"length":0,"stats":{"Line":0}},{"line":2668,"address":[],"length":0,"stats":{"Line":0}},{"line":2669,"address":[],"length":0,"stats":{"Line":0}},{"line":2672,"address":[],"length":0,"stats":{"Line":0}},{"line":2674,"address":[],"length":0,"stats":{"Line":0}},{"line":2675,"address":[],"length":0,"stats":{"Line":0}},{"line":2676,"address":[],"length":0,"stats":{"Line":0}},{"line":2678,"address":[],"length":0,"stats":{"Line":0}},{"line":2681,"address":[],"length":0,"stats":{"Line":0}},{"line":2682,"address":[],"length":0,"stats":{"Line":0}},{"line":2683,"address":[],"length":0,"stats":{"Line":0}},{"line":2685,"address":[],"length":0,"stats":{"Line":0}},{"line":2688,"address":[],"length":0,"stats":{"Line":0}},{"line":2690,"address":[],"length":0,"stats":{"Line":0}},{"line":2691,"address":[],"length":0,"stats":{"Line":0}},{"line":2692,"address":[],"length":0,"stats":{"Line":0}},{"line":2693,"address":[],"length":0,"stats":{"Line":0}},{"line":2694,"address":[],"length":0,"stats":{"Line":0}},{"line":2695,"address":[],"length":0,"stats":{"Line":0}},{"line":2696,"address":[],"length":0,"stats":{"Line":0}},{"line":2701,"address":[],"length":0,"stats":{"Line":0}},{"line":2702,"address":[],"length":0,"stats":{"Line":0}},{"line":2704,"address":[],"length":0,"stats":{"Line":0}},{"line":2758,"address":[],"length":0,"stats":{"Line":0}},{"line":2759,"address":[],"length":0,"stats":{"Line":0}},{"line":2760,"address":[],"length":0,"stats":{"Line":0}},{"line":2761,"address":[],"length":0,"stats":{"Line":0}},{"line":2762,"address":[],"length":0,"stats":{"Line":0}},{"line":2763,"address":[],"length":0,"stats":{"Line":0}},{"line":2764,"address":[],"length":0,"stats":{"Line":0}},{"line":2768,"address":[],"length":0,"stats":{"Line":0}},{"line":2769,"address":[],"length":0,"stats":{"Line":0}},{"line":2771,"address":[],"length":0,"stats":{"Line":0}},{"line":2772,"address":[],"length":0,"stats":{"Line":0}},{"line":2773,"address":[],"length":0,"stats":{"Line":0}},{"line":2774,"address":[],"length":0,"stats":{"Line":0}},{"line":2775,"address":[],"length":0,"stats":{"Line":0}},{"line":2776,"address":[],"length":0,"stats":{"Line":0}},{"line":2777,"address":[],"length":0,"stats":{"Line":0}},{"line":2778,"address":[],"length":0,"stats":{"Line":0}},{"line":2779,"address":[],"length":0,"stats":{"Line":0}},{"line":2780,"address":[],"length":0,"stats":{"Line":0}},{"line":2781,"address":[],"length":0,"stats":{"Line":0}},{"line":2782,"address":[],"length":0,"stats":{"Line":0}},{"line":2792,"address":[],"length":0,"stats":{"Line":0}},{"line":2793,"address":[],"length":0,"stats":{"Line":0}},{"line":2795,"address":[],"length":0,"stats":{"Line":0}},{"line":2796,"address":[],"length":0,"stats":{"Line":0}},{"line":2797,"address":[],"length":0,"stats":{"Line":0}},{"line":2798,"address":[],"length":0,"stats":{"Line":0}},{"line":2801,"address":[],"length":0,"stats":{"Line":0}},{"line":2805,"address":[],"length":0,"stats":{"Line":0}},{"line":2806,"address":[],"length":0,"stats":{"Line":0}},{"line":2808,"address":[],"length":0,"stats":{"Line":0}},{"line":2809,"address":[],"length":0,"stats":{"Line":0}},{"line":2810,"address":[],"length":0,"stats":{"Line":0}},{"line":2813,"address":[],"length":0,"stats":{"Line":0}},{"line":2814,"address":[],"length":0,"stats":{"Line":0}},{"line":2815,"address":[],"length":0,"stats":{"Line":0}},{"line":2818,"address":[],"length":0,"stats":{"Line":0}},{"line":2819,"address":[],"length":0,"stats":{"Line":0}},{"line":2821,"address":[],"length":0,"stats":{"Line":0}},{"line":2823,"address":[],"length":0,"stats":{"Line":0}},{"line":2825,"address":[],"length":0,"stats":{"Line":0}},{"line":2827,"address":[],"length":0,"stats":{"Line":0}},{"line":2828,"address":[],"length":0,"stats":{"Line":0}},{"line":2833,"address":[],"length":0,"stats":{"Line":0}},{"line":2836,"address":[],"length":0,"stats":{"Line":0}},{"line":2837,"address":[],"length":0,"stats":{"Line":0}},{"line":2840,"address":[],"length":0,"stats":{"Line":0}},{"line":2842,"address":[],"length":0,"stats":{"Line":0}},{"line":2844,"address":[],"length":0,"stats":{"Line":0}},{"line":2845,"address":[],"length":0,"stats":{"Line":0}},{"line":2846,"address":[],"length":0,"stats":{"Line":0}},{"line":2847,"address":[],"length":0,"stats":{"Line":0}},{"line":2850,"address":[],"length":0,"stats":{"Line":0}},{"line":2851,"address":[],"length":0,"stats":{"Line":0}},{"line":2852,"address":[],"length":0,"stats":{"Line":0}},{"line":2853,"address":[],"length":0,"stats":{"Line":0}},{"line":2857,"address":[],"length":0,"stats":{"Line":0}}],"covered":5,"coverable":971},{"path":["/","Users","julian","projects","physna","pcli2","src","param_utils.rs"],"content":"use clap::ArgMatches;\nuse uuid::Uuid;\nuse crate::{commands::params::{PARAMETER_FORMAT, PARAMETER_HEADERS, PARAMETER_METADATA, PARAMETER_PRETTY, PARAMETER_TENANT}, configuration::Configuration, error::CliError, format::{OutputFormat, OutputFormatOptions}, model::Tenant, physna_v3::PhysnaApiClient};\nuse tracing::{debug, trace};\n\n\n/// Resolve a tenant by name \n/// \n/// This function handles the case where users provide a tenant name\n/// via the --tenant parameter, and resolves names to UUID by\n/// calling the list_tenants API endpoint.\n/// \n/// # Arguments\n/// * `client` - The Physna API client\n/// * `tenant_name` - The tenant name\n/// \n/// # Returns\n/// * `Ok(Tenant)` - The resolved tenant\n/// * `Err(CliError)` - If the tenant cannot be found\nasync fn resolve_tenant_by_name(\n    client: \u0026mut PhysnaApiClient,\n    tenant_name: \u0026String,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    debug!(\"Resolving tenant by name: {}\", tenant_name);\n    \n    // First, try to list all tenants to see if we can resolve the identifier\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(client, false).await?;\n\n    // Look for an exact match by tenant ID first\n    match tenants.iter().find(|t| t.tenant_short_name.eq(tenant_name)) {\n        Some(tenant) =\u003e Ok(tenant.try_into()?),\n        None =\u003e Err(CliError::TenantNotFound {identifier: tenant_name.to_owned(),}),\n    }\n}\n\npub async fn get_format_parameter_value(sub_matches: \u0026ArgMatches) -\u003e OutputFormat {\n\n    trace!(\"Resolving output format options...\");\n\n    // Get format parameter - Clap handles environment variable precedence automatically\n    // 1. User specified --format (explicit command line)\n    // 2. Environment variable PCLI2_FORMAT (when no explicit format provided)\n    // 3. Default value of \"json\" (set in the argument definition)\n    let format_string = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT).unwrap().clone();\n\n    let with_metadata = sub_matches.get_flag(PARAMETER_METADATA);\n\n    // Get headers flag - Clap handles environment variable precedence automatically\n    // 1. User specified --headers (explicit command line)\n    // 2. Environment variable PCLI2_HEADERS (when no explicit headers flag provided)\n    // 3. Default value of false (implicit for boolean flags)\n    let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n\n    let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n\n    trace!(\"Format: {}\", format_string);\n    trace!(\"With headers: {}\", with_headers);\n    trace!(\"With metadata: {}\", with_metadata);\n    trace!(\"Pretty: {}\", pretty);\n\n    let options = OutputFormatOptions { with_metadata, with_headers, pretty };\n\n    // Using clap, we allow only valid values for the --format parameter. Because of that it is safe to unwrap.\n    OutputFormat::from_string_with_options(\u0026format_string, options).unwrap().to_owned()\n}\n\npub async fn resolve_tenant_by_uuid(\n    client: \u0026mut PhysnaApiClient,\n    tenant_uuid: \u0026Uuid,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    debug!(\"Resolving tenant by UID: {}\", tenant_uuid);\n    \n    // First, try to list all tenants to see if we can resolve the identifier\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(client, false).await?;\n\n    // Look for an exact match by tenant ID first\n    match tenants.iter().find(|t| t.tenant_uuid.eq(tenant_uuid)) {\n        Some(tenant) =\u003e Ok(tenant.try_into()?),\n        None =\u003e Err(CliError::TenantNotFound {identifier: tenant_uuid.to_string(),}),\n    }\n}\n\n/// Helper function to get tenant from parameter or configuration with resolution\npub async fn get_tenant(\n    client: \u0026mut PhysnaApiClient,\n    sub_matches: \u0026ArgMatches,\n    configuration: \u0026Configuration,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    match sub_matches.get_one::\u003cString\u003e(PARAMETER_TENANT) {\n        Some(tenant_name) =\u003e {\n            let tenant = resolve_tenant_by_name(client, tenant_name).await?;\n            Ok(tenant)\n        },\n        None =\u003e {\n            if let Some(active_tenant_uuid) = configuration.get_active_tenant_uuid() {\n                let tenant = resolve_tenant_by_uuid(client, \u0026active_tenant_uuid).await?;\n                Ok(tenant)\n            } else {\n                return Err(CliError::MissingRequiredArgument(PARAMETER_TENANT.to_string()));\n            }\n        }\n    }\n}\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":8}},{"line":38,"address":[],"length":0,"stats":{"Line":4}},{"line":44,"address":[],"length":0,"stats":{"Line":20}},{"line":46,"address":[],"length":0,"stats":{"Line":16}},{"line":52,"address":[],"length":0,"stats":{"Line":16}},{"line":54,"address":[],"length":0,"stats":{"Line":16}},{"line":56,"address":[],"length":0,"stats":{"Line":4}},{"line":57,"address":[],"length":0,"stats":{"Line":4}},{"line":58,"address":[],"length":0,"stats":{"Line":4}},{"line":59,"address":[],"length":0,"stats":{"Line":4}},{"line":61,"address":[],"length":0,"stats":{"Line":12}},{"line":64,"address":[],"length":0,"stats":{"Line":16}},{"line":67,"address":[],"length":0,"stats":{"Line":4}},{"line":71,"address":[],"length":0,"stats":{"Line":4}},{"line":74,"address":[],"length":0,"stats":{"Line":12}},{"line":77,"address":[],"length":0,"stats":{"Line":20}},{"line":78,"address":[],"length":0,"stats":{"Line":12}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":4}},{"line":89,"address":[],"length":0,"stats":{"Line":8}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":8}},{"line":96,"address":[],"length":0,"stats":{"Line":16}},{"line":97,"address":[],"length":0,"stats":{"Line":4}},{"line":99,"address":[],"length":0,"stats":{"Line":0}}],"covered":22,"coverable":33},{"path":["/","Users","julian","projects","physna","pcli2","src","physna_v3.rs"],"content":"use std::path::Path;\nuse crate::auth::AuthClient;\nuse crate::folder_hierarchy::FolderHierarchy;\nuse crate::keyring::{Keyring, KeyringError};\nuse crate::model::{Asset, AssetList, AssetListResponse, CurrentUserResponse, FolderList, FolderListResponse, SingleAssetResponse, SingleFolderResponse};\nuse reqwest;\nuse serde_json;\nuse serde_urlencoded;\nuse tracing::{debug, trace, error};\nuse glob::glob;\nuse futures::stream::{self, StreamExt};\nuse indicatif::{ProgressBar, ProgressStyle};\nuse uuid::Uuid;\n\n/// Error emitted by the Physna V3 Api\n/// \n/// This enum represents all possible errors that can occur when interacting with the Physna V3 API.\n/// It includes HTTP errors, JSON parsing errors, authentication errors, and retry failures.\n#[derive(Debug, thiserror::Error)]\npub enum ApiError {\n    /// HTTP request error from the reqwest crate\n    #[error(\"HTTP error: {0}\")]\n    HttpError(#[from] reqwest::Error),\n    \n    /// JSON parsing error from serde_json\n    #[error(\"JSON parsing error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    \n    /// IO error from std::io operations\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n    \n    /// Authentication error with a descriptive message\n    #[error(\"Authentication error: {0}\")]\n    AuthError(String),\n    \n    /// Request failed after retry attempts with a descriptive message\n    #[error(\"Request failed after retry: {0}\")]\n    RetryFailed(String),\n    \n    /// Glob pattern error\n    #[error(\"Glob pattern error: {0}\")]\n    GlobError(#[from] glob::GlobError),\n    \n    /// Glob pattern error for path matching\n    #[error(\"Glob pattern path error: {0}\")]\n    GlobPatternError(#[from] glob::PatternError),\n    \n    /// Conflict error (e.g., asset already exists)\n    #[error(\"Conflict: {0}\")]\n    ConflictError(String),\n\n    #[error(\"{0}\")]\n    KeyringError(#[from] KeyringError),\n\n    #[error(\"Access token not found. Please login first with 'pcli2 auth login --client-id \u003cid\u003e --client-secret \u003csecret\u003e'\")]\n    InvalidToken,\n\n    #[error(\"Login credentials not provided\")]\n    MissingCredentials,\n\n    #[error(\"Path not found: {0}\")]\n    PathNotFound(String),\n    \n    #[error(\"Invalid path for asset. Check asset name: {0}\")]\n    InvalidAssetPath(String),\n}\n\npub trait TryDefault: Sized {\n    type Error;\n    fn try_default() -\u003e Result\u003cSelf, Self::Error\u003e;\n}\n\n/// Physna V3 API client\n/// \n/// This client provides methods to interact with the Physna V3 REST API.\n/// It handles authentication, automatic token refresh, and common HTTP operations.\n/// \n/// The client supports:\n/// - Automatic access token management with refresh on expiration\n/// - Client credentials for token refresh\n/// - Common HTTP operations (GET, POST, PUT, DELETE, PATCH)\n/// - Automatic retry on authentication failures (401/403)\n/// - Batch operations for efficient processing of multiple resources\n/// - Comprehensive error handling with detailed error types\n/// \n/// Usage example:\n/// ```no_run\n/// use pcli2::physna_v3::PhysnaApiClient;\n/// \n/// #[tokio::main]\n/// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n///     let mut client = PhysnaApiClient::new()\n///         .with_access_token(\"your_access_token\".to_string())\n///         .with_client_credentials(\"your_client_id\".to_string(), \"your_client_secret\".to_string());\n///     \n///     let tenants = client.list_tenants().await?;\n///     Ok(())\n/// }\n/// ```\n#[derive(Clone)]\npub struct PhysnaApiClient {\n    /// Base URL for the Physna V3 API (e.g., \"https://app-api.physna.com/v3\")\n    base_url: String,\n    \n    /// Current access token for API authentication\n    access_token: Option\u003cString\u003e,\n    \n    /// Client credentials (client_id, client_secret) for token refresh\n    client_credentials: Option\u003c(String, String)\u003e, // (client_id, client_secret)\n    \n    /// HTTP client for making requests\n    http_client: reqwest::Client,\n}\n\n\nimpl TryDefault for PhysnaApiClient {\n    type Error = ApiError;\n\n    fn try_default() -\u003e Result\u003cPhysnaApiClient, ApiError\u003e {\n        // Load configuration to get the base URL\n        let configuration = crate::configuration::Configuration::load_or_create_default()\n            .map_err(|e| ApiError::AuthError(format!(\"Failed to load configuration: {}\", e)))?;\n\n        // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n        let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n        #[allow(unused_mut)]\n        let mut keyring = Keyring::default();\n        // Get all environment credentials in a single operation to reduce keyring access calls\n        let (access_token, client_id, client_secret) = keyring.get_environment_credentials(\u0026environment_name)?;\n\n        match access_token {\n            Some(token) =\u003e {\n                let mut client = PhysnaApiClient::new_with_configuration(\u0026configuration).with_access_token(token);\n\n                // Try to get client credentials for automatic token refresh\n                if let (Some(id), Some(secret)) = (client_id, client_secret) {\n                    client = client.with_client_credentials(id, secret);\n                    Ok(client)\n                } else {\n                    Err(ApiError::MissingCredentials)\n                }\n            }\n            None =\u003e {\n                Err(ApiError::InvalidToken)\n            }\n        }\n    }\n}\n\nimpl PhysnaApiClient {\n    /// Create a new Physna API client with default configuration\n    ///\n    /// The client is initialized with:\n    /// - Default base URL: \"https://app-api.physna.com/v3\"\n    /// - No access token (must be set with `with_access_token`)\n    /// - No client credentials (must be set with `with_client_credentials`)\n    /// - Default HTTP client with appropriate timeouts and headers\n    ///\n    /// # Returns\n    /// A new `PhysnaApiClient` instance ready for configuration\n    ///\n    /// # Example\n    /// ```\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    ///\n    /// let client = PhysnaApiClient::new();\n    /// // Configure with your credentials\n    /// let configured_client = client\n    ///     .with_access_token(\"your_token\".to_string())\n    ///     .with_client_credentials(\"client_id\".to_string(), \"client_secret\".to_string());\n    /// ```\n    pub fn new() -\u003e Self {\n        Self {\n            base_url: \"https://app-api.physna.com/v3\".to_string(),\n            access_token: None,\n            client_credentials: None,\n            http_client: reqwest::Client::builder()\n                .timeout(std::time::Duration::from_secs(60)) // 60-second timeout for all requests\n                .build()\n                .expect(\"Failed to build HTTP client with timeout\"),\n        }\n    }\n\n    /// Create a new Physna API client with configuration-based URLs\n    ///\n    /// # Arguments\n    /// * `configuration` - The configuration containing the base URL\n    ///\n    /// # Returns\n    /// A new `PhysnaApiClient` instance with the configured base URL\n    pub fn new_with_configuration(configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            base_url: configuration.get_api_base_url(),\n            access_token: None,\n            client_credentials: None,\n            http_client: reqwest::Client::builder()\n                .timeout(std::time::Duration::from_secs(60)) // 60-second timeout for all requests\n                .build()\n                .expect(\"Failed to build HTTP client with timeout\"),\n        }\n    }\n    \n    /// Set the base URL for the API client\n    /// \n    /// # Arguments\n    /// * `base_url` - The base URL for the Physna V3 API (e.g., \"https://app-api.physna.com/v3\")\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with the new base URL\n    pub fn with_base_url(mut self, base_url: String) -\u003e Self {\n        self.base_url = base_url;\n        self\n    }\n\n    /// Set the access token for API authentication\n    /// \n    /// # Arguments\n    /// * `token` - The access token to use for API requests\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with the access token set\n    pub fn with_access_token(mut self, token: String) -\u003e Self {\n        self.access_token = Some(token);\n        self\n    }\n    \n    /// Set the client credentials for automatic token refresh\n    /// \n    /// # Arguments\n    /// * `client_id` - The client ID for authentication\n    /// * `client_secret` - The client secret for authentication\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with client credentials set\n    pub fn with_client_credentials(mut self, client_id: String, client_secret: String) -\u003e Self {\n        self.client_credentials = Some((client_id, client_secret));\n        self\n    }\n    \n    /// Attempt to refresh the access token using client credentials\n    /// \n    /// This method tries to obtain a new access token using the stored client credentials.\n    /// It's called automatically when API requests fail with authentication errors (401/403).\n    /// \n    /// # Returns\n    /// * `Ok(())` - Token successfully refreshed\n    /// * `Err(ApiError::AuthError)` - Failed to refresh token or no credentials available\n    async fn refresh_token(\u0026mut self) -\u003e Result\u003c(), ApiError\u003e {\n        // Check if we have client credentials available for token refresh\n        if let Some((client_id, client_secret)) = \u0026self.client_credentials {\n            trace!(\"Refreshing access token\");\n            \n            // Create a new auth client with the stored credentials\n            let auth_client = AuthClient::new(client_id.clone(), client_secret.clone());\n            \n            // Attempt to get a new access token\n            match auth_client.get_access_token().await {\n                Ok(new_token) =\u003e {\n                    debug!(\"Successfully refreshed access token\");\n                    // Update the stored access token\n                    self.access_token = Some(new_token);\n                    Ok(())\n                }\n                Err(e) =\u003e {\n                    // Return an authentication error with details\n                    let error_msg = e.to_string();\n                    let user_friendly_msg = if error_msg.contains(\"invalid_client\") {\n                        \"Failed to refresh token: Invalid client credentials. This could be due to:\\n  - Incorrect client ID or secret\\n  - Expired or revoked client credentials\\n  - Disabled service account\\n  Please verify your credentials and log in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"invalid_grant\") {\n                        \"Failed to refresh token: Invalid authorization grant. Please log in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"unauthorized_client\") {\n                        \"Failed to refresh token: Unauthorized client. Please verify your client credentials and try logging in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"invalid_request\") {\n                        \"Failed to refresh token: Invalid request. Please verify your credentials and try logging in again with 'pcli2 auth login'.\"\n                    } else {\n                        \u0026format!(\"Failed to refresh token: {}\", e)\n                    };\n                    Err(ApiError::AuthError(user_friendly_msg.to_string()))\n                }\n            }\n        } else {\n            // No client credentials available for token refresh\n            Err(ApiError::AuthError(\"No client credentials available for token refresh\".to_string()))\n        }\n    }\n    \n    /// Get the current access token from the client\n    /// \n    /// This method allows external code to retrieve the current access token,\n    /// which is useful for persisting updated tokens after refresh operations.\n    /// \n    /// # Returns\n    /// * `Option\u003cString\u003e` - The current access token if available, None otherwise\n    pub fn get_access_token(\u0026self) -\u003e Option\u003cString\u003e {\n        self.access_token.clone()\n    }\n    \n    /// Generic method to build and execute HTTP requests with automatic token refresh on 401/403 errors\n    /// \n    /// This method provides a unified interface for making HTTP requests to the Physna V3 API.\n    /// It automatically handles:\n    /// - Adding access tokens to authenticated requests\n    /// - Detecting authentication failures (401/403)\n    /// - Refreshing expired tokens using client credentials\n    /// - Retrying failed requests with refreshed tokens\n    /// \n    /// # Type Parameters\n    /// * `T` - The type to deserialize the response into (must implement `DeserializeOwned`)\n    /// * `F` - A closure that builds the HTTP request\n    /// \n    /// # Arguments\n    /// * `request_builder` - A closure that takes a `reqwest::Client` and returns a `RequestBuilder`\n    /// \n    /// # Returns\n    /// * `Ok(T)` - Successfully executed request with parsed response\n    /// * `Err(ApiError)` - HTTP error, JSON parsing error, or authentication failure\n    async fn execute_request\u003cT, F\u003e(\u0026mut self, request_builder: F) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        F: Fn(\u0026reqwest::Client) -\u003e reqwest::RequestBuilder,\n    {\n        // Build and execute the initial request\n        let mut request = request_builder(\u0026self.http_client);\n        \n        // Add access token header if available for authentication\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        // A 401 clearly indicates an invalid token\n        // A 403 can also indicate an expired token in some cases\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the expired or invalid access token\n            self.refresh_token().await?;\n            \n            // Retry the original request with the newly refreshed token\n            debug!(\"Retrying request with refreshed token\");\n            let mut retry_request = request_builder(\u0026self.http_client);\n            \n            // Add the refreshed access token to the retry request\n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            // Check if the retry was successful\n            if retry_response.status().is_success() {\n                // Try to get the raw response text for debugging deserialization issues\n                let response = retry_response.text().await?;\n                trace!(\"Raw response for deserialization: {}\", response);\n                trace!(\"Deserializing into: {}\", std::any::type_name::\u003cT\u003e());\n                \n                // Try to parse and return the JSON response\n                match serde_json::from_str::\u003cT\u003e(\u0026response) {\n                    Ok(result) =\u003e Ok(result),\n                    Err(e) =\u003e {\n                        error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response);\n                        Err(ApiError::JsonError(e))\n                    }\n                }\n            } else {\n                // Retry failed - provide clear error information\n                let status = retry_response.status();\n                let error_text = retry_response.text().await.unwrap_or_else(|_| \"Unknown error\".to_string());\n                error!(\"API request failed after retry. Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text);\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text\n                )))\n            }\n        } else if response.status().is_success() {\n            // Initial request was successful - try to get the raw response text for debugging\n            let response = response.text().await?;\n            trace!(\"Raw response for deserialization: {}\", response);\n            trace!(\"Deserializing into: {}\", std::any::type_name::\u003cT\u003e());\n            \n            // Try to parse and return the JSON response\n            match serde_json::from_str::\u003cT\u003e(\u0026response) {\n                Ok(result) =\u003e Ok(result),\n                Err(e) =\u003e {\n                    error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response);\n                    Err(ApiError::JsonError(e))\n                }\n            }\n        } else {\n            // For all other errors, return the error status\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n    \n    /// Generic method to build and execute GET requests\n    async fn get\u003cT\u003e(\u0026mut self, url: \u0026str) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n    {\n        self.execute_request(|client| client.get(url)).await\n    }\n    \n    /// Generic method to build and execute POST requests\n    async fn post\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        // Log the request for debugging\n        let body_json = serde_json::to_string_pretty(body).unwrap_or_else(|_| \"Unable to serialize body\".to_string());\n        trace!(\"POST request to {}: {}\", url, body_json);\n        \n        let result = self.execute_request(|client| client.post(url).json(body)).await;\n        \n        // Log the response for debugging\n        match \u0026result {\n            Ok(_) =\u003e trace!(\"POST request to {} succeeded\", url),\n            Err(e) =\u003e trace!(\"POST request to {} failed: {}\", url, e),\n        }\n        \n        result\n    }\n    \n    /// Generic method to build and execute PUT requests\n    async fn put\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client| client.put(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute PATCH requests\n    #[allow(dead_code)]\n    async fn patch\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client| client.patch(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute DELETE requests with automatic token refresh\n    async fn delete(\u0026mut self, url: \u0026str) -\u003e Result\u003c(), ApiError\u003e {\n        // For DELETE requests, we build and execute the request directly\n        // without trying to parse JSON from the response\n        let mut request = self.http_client.delete(url);\n        \n        // Add access token if available\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n        \n        // Check if we need to retry due to authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the token\n            self.refresh_token().await?;\n            \n            // Retry the request with the new token\n            debug!(\"Retrying DELETE request with refreshed token\");\n            let mut retry_request = self.http_client.delete(url);\n            \n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            if retry_response.status().is_success() {\n                Ok(())\n            } else {\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {}\", \n                    response.status(), \n                    retry_response.status()\n                )))\n            }\n        } else if response.status().is_success() {\n            Ok(())\n        } else {\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n\n    /// Get the current user's information from the Physna V3 API\n    /// \n    /// This method fetches information about the currently authenticated user,\n    /// including their tenant settings and other user-specific configuration.\n    /// The response contains the user's profile information and available tenants.\n    /// \n    /// # Returns\n    /// * `Ok(CurrentUserResponse)` - Successfully fetched current user information\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_current_user(\u0026mut self) -\u003e Result\u003cCurrentUserResponse, ApiError\u003e {\n        let url = format!(\"{}/users/me\", self.base_url);\n        self.get(\u0026url).await\n    }\n\n    /// List all available tenants for the current user\n    /// \n    /// This method fetches all tenants available to the currently authenticated user.\n    /// Tenants represent different organizations or environments that the user has access to.\n    /// Each tenant has its own set of folders, assets, and configurations.\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003cTenantSetting\u003e)` - Successfully fetched list of available tenants\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn list_tenants(\u0026mut self) -\u003e Result\u003cVec\u003ccrate::model::TenantSetting\u003e, ApiError\u003e {\n        let user = self.get_current_user().await?;\n        Ok(user.user.settings)\n    }\n    \n    /// List folders for a specific tenant with optional pagination\n    /// \n    /// This method fetches a list of folders for the specified tenant.\n    /// It supports pagination through the optional `page` and `per_page` parameters.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose folders to list\n    /// * `page` - Optional page number (1-based indexing)\n    /// * `per_page` - Optional number of items per page (default: 100)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - Successfully fetched list of folders with pagination metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn list_folders(\u0026mut self, tenant_uuid: \u0026Uuid, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_val = page.unwrap_or(1).to_string();\n        let per_page_val = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        // Build query parameters for pagination with defaults\n        let query_params = vec![\n            (\"page\", page_val.as_str()),\n            (\"perPage\", per_page_val.as_str()),\n        ];\n        \n        // Add query parameters to URL\n        let url = format!(\"{}?{}\", url, serde_urlencoded::to_string(\u0026query_params).unwrap());\n        \n        // Execute GET request to fetch folders\n        self.get(\u0026url).await\n    }\n    \n    /// List folders in a specific parent folder with optional pagination\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    \n    /// Get details for a specific folder by ID\n    /// \n    /// This method fetches detailed information about a specific folder by its ID.\n    /// The response includes folder metadata such as name, creation date, asset count, etc.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the folder\n    /// * `folder_id` - The UUID of the folder to retrieve\n    \n    /// List folders in a specific parent folder with optional pagination\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_folders_in_parent(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_id: Option\u003c\u0026str\u003e, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Build query parameters for parent filtering, pagination\n        let mut query_params = vec![(\"contentType\", \"folders\")];\n        if let Some(parent_id) = parent_folder_id {\n            query_params.push((\"parentFolderId\", parent_id));\n        }\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_val = page.unwrap_or(1).to_string();\n        let per_page_val = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_val.as_str()));\n        query_params.push((\"perPage\", per_page_val.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Making API call to list folders in parent: {}\", url);\n        self.get(\u0026url).await\n    }\n    \n\n    /// \n    /// # Returns\n    /// * `Ok(FolderResponse)` - Successfully fetched folder details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_folder(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::Folder, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_uuid, folder_uuid);\n\n        trace!(\"Getting folder details...\");\n        let response: SingleFolderResponse = self.get(\u0026url).await?;\n        let folder = response.into();\n        trace!(\"Found: {:?}\", \u0026folder);\n        Ok(folder)\n    }\n    \n    /// Create a new folder within a tenant\n    /// \n    /// This method creates a new folder with the specified name within the given tenant.\n    /// Optionally, the folder can be created as a subfolder of an existing parent folder.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the folder\n    /// * `name` - The name for the new folder\n    /// * `parent_folder_id` - Optional UUID of the parent folder (creates subfolder if provided)\n    /// \n    /// # Returns\n    /// * `Ok(FolderResponse)` - Successfully created folder details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn create_folder(\u0026mut self, tenant_uuid: \u0026Uuid, name: \u0026str, parent_folder_uuid: Option\u003cUuid\u003e) -\u003e Result\u003ccrate::model::SingleFolderResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Build request body with folder name\n        let mut body = serde_json::json!({\n            \"name\": name\n        });\n        \n        // Add parent folder ID if provided to create a subfolder\n        if let Some(parent_uuid) = parent_folder_uuid {\n            body[\"parentFolderId\"] = serde_json::Value::String(parent_uuid.to_string());\n        }\n        \n        // Execute POST request to create the folder\n        self.post(\u0026url, \u0026body).await\n    }\n    \n    pub async fn update_folder(\u0026mut self, tenant_id: \u0026str, folder_id: \u0026str, name: \u0026str) -\u003e Result\u003ccrate::model::FolderResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_id, folder_id);\n        \n        let body = serde_json::json!({\n            \"name\": name\n        });\n        \n        // The API returns a SingleFolderResponse with a \"folder\" field\n        let response: crate::model::SingleFolderResponse = self.put(\u0026url, \u0026body).await?;\n        Ok(response.folder)\n    }\n    \n    /// Delete a folder by ID\n    /// \n    /// This method deletes the specified folder from the tenant.\n    /// Note: Deleting a folder will also delete all its contents (subfolders and assets).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the folder\n    /// * `folder_id` - The UUID of the folder to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted folder\n    /// * `Err(ApiError)` - HTTP error or other error\n    pub async fn delete_folder(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: \u0026Uuid) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_uuid, folder_uuid);\n        self.delete(\u0026url).await\n    }\n    \n    // Asset operations\n    \n\n    /// List all assets in a specific folder by folder UUID\n    /// \n    /// This method lists assets that are contained in a specific folder using the \n    /// /tenants/{tenantId}/folders/{folderId}/contents endpoint with contentType=assets.\n    /// This is the efficient way to list assets in a specific folder, unlike the\n    /// list_assets method which fetches all assets in the tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant\n    /// * `folder_uuid` - The ID of the folder to list assets from. If None, it will list the root folder\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_assets_by_parent_folder_uuid(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_uuid: Option\u003c\u0026Uuid\u003e) -\u003e Result\u003cAssetList, ApiError\u003e {\n        let mut page: usize = 1;\n        let per_page: usize = 200;\n        let mut assets: Vec\u003cAsset\u003e = Vec::new();\n\n        loop {\n            let response = self.list_assets_by_parent_folder_uuid_with_pagination(tenant_uuid, parent_folder_uuid, page, per_page).await?;\n            let partial_asset_list: Vec\u003cAsset\u003e = response.assets.iter().map(|a| a.into()).collect();\n            assets.extend(partial_asset_list);\n            \n            page = response.page_data.current_page;\n            if response.page_data.current_page \u003e= response.page_data.last_page {\n                break;\n            }\n        }\n\n        Ok(assets.into())\n    }\n    \n    /// List a single page of assets in a specific folder by folder UUID\n    /// \n    /// This method lists assets that are contained in a specific folder using the \n    /// /tenants/{tenantId}/folders/{folderId}/contents endpoint with contentType=assets.\n    /// This is the efficient way to list assets in a specific folder, unlike the\n    /// list_assets method which fetches all assets in the tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant\n    /// * `folder_uuid` - The ID of the folder to list assets from\n    /// * `page` - Page number for pagination\n    /// * `per_page` - Number of items per page for pagination\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    async fn list_assets_by_parent_folder_uuid_with_pagination(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: Option\u003c\u0026Uuid\u003e, page: usize, per_page: usize) -\u003e Result\u003cAssetListResponse, ApiError\u003e {\n        let url = match folder_uuid {\n            Some(folder_uuid) =\u003e format!(\"{}/tenants/{}/folders/{}/contents\", self.base_url, tenant_uuid, folder_uuid),\n            None =\u003e format!(\"{}/tenants/{}/folders/root/contents\", self.base_url, tenant_uuid),\n        }; \n        \n        // Build query parameters\n        let mut query_params = vec![(\"contentType\", \"assets\")];\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_str = page.to_string();\n        let per_page_str = per_page.to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_str.as_str()));\n        query_params.push((\"perPage\", per_page_str.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Constructed URL for asset listing: {}\", url);\n        self.get(\u0026url).await\n    }\n    \n    /// Get the folder ID for a given path by traversing the folder structure efficiently\n    /// \n    /// This method efficiently resolves a folder path to its corresponding folder ID\n    /// by using the root/content and folderId/contents API endpoints, with content filtering.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `folder_path` - The path to resolve (e.g., \"Root/Child/Grandchild\" or \"/Root/Child/Grandchild\")\n    /// \n    /// # Returns\n    /// * `Ok(Some(String))` - The folder ID if found\n    /// * `Ok(None)` - If the path doesn't exist\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_folder_uuid_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, folder_path: \u0026str) -\u003e Result\u003cOption\u003cUuid\u003e, ApiError\u003e {\n        debug!(\"Resolving folder path: {} for tenant: {} using FolderHierarchy\", folder_path, tenant_uuid);\n        \n        // Use the proven FolderHierarchy implementation to resolve the path\n        match FolderHierarchy::build_from_api(self, tenant_uuid).await {\n            Ok(hierarchy) =\u003e {\n                \n                // Use the hierarchy to find the folder by path\n                if let Some(folder_node) = hierarchy.get_folder_by_path(folder_path) {\n                    debug!(\"Found folder at path '{}': {}\", folder_path, folder_node.folder.uuid);\n                    Ok(Some(folder_node.folder.uuid.clone()))\n                } else {\n                    debug!(\"Folder not found at path: {}\", folder_path);\n                    Ok(None)\n                }\n            }\n            Err(e) =\u003e {\n                error!(\"Error building folder hierarchy: {}\", e);\n                Err(ApiError::ConflictError(format!(\"Failed to build folder hierarchy: {}\", e)))\n            }\n        }\n    }\n    \n    /// List folders in a specific parent folder\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    \n    /// Get contents of root folder by tenant ID, filtered by content type\n    /// \n    /// This method gets contents of the root folder with a specific content type (folders only, assets only, or all).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `content_type` - The type of content to return (\"all\", \"assets\", \"folders\")\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of contents in the root folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_root_contents(\u0026mut self, tenant_uuid: \u0026Uuid, _content_type: \u0026str, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        // Use list_folders_in_parent with None parent to get root contents\n        // The list_folders_in_parent function now handles default values\n        self.list_folders_in_parent(tenant_uuid, None, page, per_page).await\n    }\n    \n    /// Get contents of a specific folder by ID, filtered by content type\n    /// \n    /// This method gets contents of a specific folder with a specific content type (folders only, assets only, or all).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `folder_id` - The ID of the folder to get contents from\n    /// * `content_type` - The type of content to return (\"all\", \"assets\", \"folders\")\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of contents in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_folder_contents(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: Option\u003c\u0026Uuid\u003e, content_type: \u0026str, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderList, ApiError\u003e {\n        let url = match folder_uuid {\n            Some(folder_uuid) =\u003e format!(\"{}/tenants/{}/folders/{}/contents\", self.base_url, tenant_uuid, folder_uuid),\n            None =\u003e format!(\"{}/tenants/{}/folders/root/contents\", self.base_url, tenant_uuid),\n        };        \n\n        // Build query parameters\n        let mut query_params = vec![(\"contentType\", content_type)];\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_str = page.unwrap_or(1).to_string();\n        let per_page_str = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_str.as_str()));\n        query_params.push((\"perPage\", per_page_str.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Constructed URL for folder contents listing: {}\", url);\n        let response: FolderListResponse = self.get(\u0026url).await?;\n\n        Ok(response.into())\n    }\n\n    /// This method is a wrapper around get_folder_uuid_by_path(...), but it will return None if the path is the root.\n    pub async fn resolve_folder_uuid_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, folder_path: \u0026str) -\u003e Result\u003cOption\u003cUuid\u003e, ApiError\u003e {\n        if folder_path.eq(\"/\") {\n            Ok(None)\n        } else {\n            Ok(self.get_folder_uuid_by_path(tenant_uuid, folder_path).await?)\n        }\n    }\n    \n    /// List only the assets in a specific folder by path\n    /// \n    /// This method efficiently lists assets in a specific folder by first\n    /// resolving the folder path to a folder ID and then listing assets in that folder.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_path` - The path of the folder to list assets from\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_assets_by_parent_folder_path(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_path: \u0026str) -\u003e Result\u003cAssetList, ApiError\u003e {\n        debug!(\"Listing assets in a folder by path: {} for tenant: {}\", parent_folder_path, tenant_uuid);\n        \n        let parent_folder_uuid = self.resolve_folder_uuid_by_path(tenant_uuid, parent_folder_path).await?;\n        \n        // Now list all assets in this specific folder using the efficient API endpoint with pagination\n        let assets = self.list_assets_by_parent_folder_uuid(tenant_uuid, parent_folder_uuid.clone().as_ref()).await?;\n        Ok(assets.into())\n    }\n    \n    /// Get all contents (both folders and assets) of a specific folder path\n    /// \n    /// This method efficiently gets both subfolders and assets within a specific folder\n    /// by first resolving the path and then making separate API calls for each.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `folder_path` - The path of the folder to get contents from\n    /// \n    /// # Returns\n    /// * `Ok((Vec\u003cFolderResponse\u003e, Vec\u003cAssetResponse\u003e))` - Folders and assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_all_contents_by_parent_folder_path(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_path: \u0026str) -\u003e Result\u003c(FolderList, AssetList), ApiError\u003e {\n        debug!(\"Listing all folder contents by path: {} for tenant: {}\", parent_folder_path, tenant_uuid);\n        \n        let parent_folder_uuid = self.resolve_folder_uuid_by_path(tenant_uuid, parent_folder_path).await?;\n\n        // Get subfolders in the folder using the more efficient content API\n        let subfolders_response = self.get_folder_contents(tenant_uuid, parent_folder_uuid.clone().as_ref(), \"folders\", Some(1), Some(1000)).await?;\n        let subfolders = subfolders_response;\n\n        // Get assets in the folder\n        let assets_response = self.list_assets_by_parent_folder_uuid(tenant_uuid, parent_folder_uuid.clone().as_ref()).await?;\n        let assets = assets_response;\n\n        Ok((subfolders, assets))\n    }\n\n    fn get_parent_folder_path(asset_path: \u0026String) -\u003e Result\u003cString, ApiError\u003e {\n        let path = Path::new(\u0026asset_path);\n        let parent = path.parent()\n            .ok_or_else(|| ApiError::InvalidAssetPath(asset_path.to_owned()))?;\n\n        // Convert the parent path to string\n        let parent_str = parent.to_str()\n            .ok_or_else(|| ApiError::InvalidAssetPath(asset_path.to_owned()))?;\n\n        // Handle the case where the parent is root \"/\"\n        let normalized_parent = if parent_str.is_empty() {\n            \"/\".to_string()\n        } else if parent_str.starts_with('/') {\n            parent_str.to_string()\n        } else {\n            format!(\"/{}\", parent_str)\n        };\n\n        Ok(normalized_parent)\n    }\n\n    fn asset_name_from_path(path: \u0026String) -\u003e Option\u003cString\u003e {\n    Path::new(\u0026path)\n        .file_name()\n        .and_then(|s| s.to_str())\n        .map(|s| s.to_string())\n    }    \n\n    /// Get details for a specific asset by ID\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant that owns the asset\n    /// * `asset_uuid` - The UUID of the asset to retrieve\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully fetched asset details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_asset_by_uuid(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid) -\u003e Result\u003cAsset, ApiError\u003e {\n        debug!(\"Getting asset details for tenant_uuid: {}, asset_uuid: {}\", tenant_uuid, asset_uuid);\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_uuid, asset_uuid);\n        let response: SingleAssetResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved asset details for asset_id: {}\", asset_uuid);\n        Ok(response.asset.into())\n    }\n\n    pub async fn get_asset_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, asset_path: \u0026String) -\u003e Result\u003cAsset, ApiError\u003e {\n\n        let parent_folder_path = Self::get_parent_folder_path(asset_path)?;\n        let assets = self.list_assets_by_parent_folder_path(tenant_uuid, \u0026parent_folder_path).await?;\n        match Self::asset_name_from_path(asset_path) {\n            Some(asset_name) =\u003e {\n                assets.find_by_name(\u0026asset_name).cloned().ok_or(ApiError::PathNotFound(asset_path.to_owned()))\n            },\n            None =\u003e Err(ApiError::InvalidAssetPath(asset_path.to_owned())),\n        }\n    }\n    \n    /// Delete an asset by ID\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted asset\n    /// * `Err(ApiError)` - HTTP error or other error\n    pub async fn delete_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_id, asset_id);\n        self.delete(\u0026url).await\n    }\n    \n    /// Update an asset's metadata\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `name` - The new name for the asset\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully updated asset with new metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str, name: \u0026str) -\u003e Result\u003ccrate::model::AssetResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_id, asset_id);\n        \n        let body = serde_json::json!({\n            \"name\": name\n        });\n        \n        self.put(\u0026url, \u0026body).await\n    }\n    \n    /// Update an asset's metadata fields\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `metadata` - A map of metadata key-value pairs to update\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully updated asset with new metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset_metadata(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, metadata: \u0026std::collections::HashMap\u003cString, serde_json::Value\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_uuid, asset_uuid);\n        \n        let body = serde_json::json!({\n            \"metadata\": metadata\n        });\n        \n        // Log the request body for debugging\n        debug!(\"Updating asset metadata with JSON body: {}\", serde_json::to_string_pretty(\u0026body).unwrap_or_else(|_| \"Unable to serialize body\".to_string()));\n        \n        self.patch_no_response(\u0026url, \u0026body).await\n    }\n\n    /// Update an asset's metadata fields, automatically registering new metadata keys if needed\n    ///\n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant that owns the asset\n    /// * `asset_uuid` - The UUID of the asset to update\n    /// * `metadata` - A map of metadata key-value pairs to update\n    ///\n    /// # Returns\n    /// * `Ok(())` - Successfully updated asset metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset_metadata_with_registration(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, metadata: \u0026std::collections::HashMap\u003cString, serde_json::Value\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        // Get existing metadata fields for the tenant\n        let existing_fields_response = self.get_metadata_fields(\u0026tenant_uuid.to_string()).await;\n\n        let mut existing_field_names = std::collections::HashSet::new();\n        if let Ok(fields_response) = existing_fields_response {\n            for field in fields_response.metadata_fields {\n                existing_field_names.insert(field.name);\n            }\n        }\n\n        // Check each metadata key and register if it doesn't exist\n        for (key, _value) in metadata.iter() {\n            if !existing_field_names.contains(key) {\n                // Register the new metadata field (default to text type)\n                let field_result = self.create_metadata_field(\u0026tenant_uuid.to_string(), key, Some(\"text\")).await;\n\n                // Log the result of field creation\n                match field_result {\n                    Ok(_) =\u003e debug!(\"Successfully registered new metadata field: {}\", key),\n                    Err(e) =\u003e {\n                        debug!(\"Failed to register metadata field '{}': {}\", key, e);\n                        // Continue anyway, as the API might allow setting values for unregistered keys\n                    }\n                }\n            }\n        }\n\n        // Now update the asset metadata\n        self.update_asset_metadata(tenant_uuid, asset_uuid, metadata).await\n    }\n\n    /// Delete specific metadata fields from an asset\n    /// \n    /// This method deletes specific metadata fields from the specified asset.\n    /// The metadata keys are sent as a direct array in the request body.\n    /// \n    /// # Arguments\n    /// Delete specific metadata fields from an asset\n    /// \n    /// This method deletes specific metadata fields from the specified asset.\n    /// The metadata keys are sent as an object with a \"metadataFieldNames\" array.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `metadata_keys` - A vector of metadata field names to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted metadata from the asset\n    /// * `Err(ApiError)` - HTTP error or other error occurred\n    pub async fn delete_asset_metadata(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str, metadata_keys: Vec\u003c\u0026str\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}/metadata\", self.base_url, tenant_id, asset_id);\n        \n        // Send metadata keys wrapped in \"metadataFieldNames\" object as required by API\n        let body = serde_json::json!({\n            \"metadataFieldNames\": metadata_keys\n        });\n        \n        // Log the request body for debugging\n        debug!(\"Deleting asset metadata with JSON body: {}\", serde_json::to_string_pretty(\u0026body).unwrap_or_else(|_| \"Unable to serialize body\".to_string()));\n        \n        self.delete_with_body(\u0026url, \u0026body).await\n    }\n    /// * `field_name` - The name of the metadata field to create\n    /// * `field_type` - The type of the metadata field (e.g., \"text\", \"number\", \"boolean\") - defaults to \"text\"\n    /// \n    /// # Returns\n    /// * `Ok(serde_json::Value)` - Response from the API confirming the field was created\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn create_metadata_field(\u0026mut self, tenant_id: \u0026str, field_name: \u0026str, field_type: Option\u003c\u0026str\u003e) -\u003e Result\u003cserde_json::Value, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/metadata-fields\", self.base_url, tenant_id);\n        \n        let effective_type = field_type.unwrap_or(\"text\");\n        let body = serde_json::json!({\n            \"name\": field_name,\n            \"type\": effective_type\n        });\n        \n        self.post(\u0026url, \u0026body).await\n    }\n    \n    /// Generic method to build and execute PATCH requests that may return empty responses\n    /// \n    /// This method is similar to the standard patch method but handles empty responses gracefully.\n    /// It's useful for API endpoints that return 204 No Content or empty bodies on success.\n    /// \n    /// # Type Parameters\n    /// * `B` - The type of the request body (must implement `Serialize`)\n    /// \n    /// # Arguments\n    /// * `url` - The URL to send the PATCH request to\n    /// * `body` - The request body to send with the PATCH request\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn patch_no_response\u003cB\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003c(), ApiError\u003e\n    where\n        B: serde::Serialize,\n    {\n        self.execute_request_no_response(|client| client.patch(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute DELETE requests that may have a request body and return empty responses\n    /// \n    /// This method is similar to the standard delete method but allows request bodies for DELETE operations.\n    /// It's useful for API endpoints like deleting specific metadata that require a body.\n    /// \n    /// # Type Parameters\n    /// * `B` - The type of the request body (must implement `Serialize`)\n    /// \n    /// # Arguments\n    /// * `url` - The URL to send the DELETE request to\n    /// * `body` - The request body to send with the DELETE request\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn delete_with_body\u003cB\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003c(), ApiError\u003e\n    where\n        B: serde::Serialize,\n    {\n        self.execute_request_no_response(|client| client.delete(url).json(body)).await\n    }\n    \n    /// Generic method to execute requests that may return empty responses\n    /// \n    /// This method is similar to execute_request but handles empty responses gracefully.\n    /// It's useful for API endpoints that return 204 No Content or empty bodies on success.\n    /// \n    /// # Type Parameters\n    /// * `F` - A closure that builds the HTTP request\n    /// \n    /// # Arguments\n    /// * `request_builder` - A closure that takes a `reqwest::Client` and returns a `RequestBuilder`\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn execute_request_no_response\u003cF\u003e(\u0026mut self, request_builder: F) -\u003e Result\u003c(), ApiError\u003e\n    where\n        F: Fn(\u0026reqwest::Client) -\u003e reqwest::RequestBuilder,\n    {\n        // Build and execute the initial request\n        let mut request = request_builder(\u0026self.http_client);\n        \n        // Add access token header if available for authentication\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        // A 401 clearly indicates an invalid token\n        // A 403 can also indicate an expired token in some cases\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the expired or invalid access token\n            self.refresh_token().await?;\n            \n            // Retry the original request with the newly refreshed token\n            debug!(\"Retrying request with refreshed token\");\n            let mut retry_request = request_builder(\u0026self.http_client);\n            \n            // Add the refreshed access token to the retry request\n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            // Check if the retry was successful\n            if retry_response.status().is_success() {\n                // For empty responses, we consider success as a successful update\n                Ok(())\n            } else {\n                // Retry failed - provide clear error information\n                let status = retry_response.status();\n                let error_text = retry_response.text().await.unwrap_or_else(|_| \"Unknown error\".to_string());\n                error!(\"API request failed after retry. Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text);\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text\n                )))\n            }\n        } else if response.status().is_success() {\n            // Initial request was successful - for empty responses, we consider this a success\n            Ok(())\n        } else {\n            // For all other errors, return the error status\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n    \n    /// Get all metadata fields for a tenant\n    /// \n    /// This method retrieves the list of all metadata fields defined for the specified tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// \n    /// # Returns\n    /// * `Ok(MetadataFieldListResponse)` - List of metadata fields for the tenant\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_metadata_fields(\u0026mut self, tenant_id: \u0026str) -\u003e Result\u003ccrate::model::MetadataFieldListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/metadata-fields\", self.base_url, tenant_id);\n        \n        self.get(\u0026url).await\n    }\n    \n    /// Create a new asset by uploading a file\n    /// \n    /// This method uploads a file as a new asset in the specified tenant.\n    /// The file is sent as multipart/form-data with appropriate metadata.\n    /// \n    /// The method handles automatic token refresh on authentication errors (401/403)\n    /// and includes retry logic for handling conflict errors that may occur when\n    /// the asset service is temporarily busy.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the asset\n    /// * `file_path` - The local file system path to the file to upload\n    /// * `folder_path` - Optional folder path where to place the asset (e.g., \"/Root/Folder/Subfolder\")\n    /// * `folder_id` - Optional folder ID where to place the asset (takes precedence if both path and ID are provided)\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully created asset details from the API\n    /// * `Err(ApiError)` - If there's an HTTP error, IO error, authentication issue, or other API error\n    ///                     including conflict errors if the asset already exists\n    /// \n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    /// use std::path::Path;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let folder_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let asset = client.create_asset(\u0026tenant_uuid, Path::new(\"/path/to/file.stl\"), \u0026\"/Root/MyFolder\".to_string(), \u0026folder_uuid).await?;\n    ///     println!(\"Created asset with UUID: {}\", asset.uuid());\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn create_asset(\u0026mut self, tenant_uuid: \u0026Uuid, file_path: \u0026Path, asset_path: \u0026String, folder_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::Asset, ApiError\u003e {\n\n        trace!(\"Creating new asset by uploading a file...\");\n        \n        let url = format!(\"{}/tenants/{}/assets\", self.base_url, tenant_uuid);\n\n        if !file_path.exists() || !file_path.is_file() {\n            return Err(ApiError::PathNotFound(file_path.to_string_lossy().into_owned()));\n        }\n        \n        let file_name = file_path.file_name().unwrap().to_string_lossy().into_owned(); // It is save to unwrap because we already confired the file exists\n        \n        // Read the file content\n        let file_data = tokio::fs::read(file_path).await?;\n        trace!(\"Derived asset path: {}\", \u0026asset_path);\n            \n        \n        \n        // Create a file part from the file data\n        let file_part = reqwest::multipart::Part::bytes(file_data)\n            .file_name(file_name.clone());\n        \n        // Build the multipart form with file part and required parameters\n        let mut form = reqwest::multipart::Form::new()\n            .part(\"file\", file_part)\n            .text(\"path\", asset_path.clone())  // Use the full asset path including folder\n            .text(\"metadata\", \"\")  // Empty metadata as in the working example\n            .text(\"createMissingFolders\", \"\");  // Empty createMissingFolders as in the working example\n        \n        // Add folder ID if provided\n        form = form.text(\"folderId\", folder_uuid.to_string());\n        \n        debug!(\"Creating asset with path: {}\", asset_path);\n        \n        // Build and execute the request with multipart form data\n        let mut request = self.http_client.post(\u0026url)\n            .multipart(form);\n        \n        // Add access token if available\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n        \n        // Check if we need to retry due to authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the token\n            self.refresh_token().await?;\n            \n            // Create a new form for the retry\n            let file_data = tokio::fs::read(file_path).await?;\n            let file_part = reqwest::multipart::Part::bytes(file_data)\n                .file_name(file_name.clone());\n            \n            // Build the multipart form with file part and required parameters\n            let mut retry_form = reqwest::multipart::Form::new()\n                .part(\"file\", file_part)\n                .text(\"path\", asset_path.clone())  // Use the full asset path including folder\n                .text(\"metadata\", \"\")  // Empty metadata as in the working example\n                .text(\"createMissingFolders\", \"\");  // Empty createMissingFolders as in the working example\n            \n            // Add folder ID if provided\n            retry_form = retry_form.text(\"folderId\", folder_uuid.to_string());\n            \n            debug!(\"Retrying asset creation with path: {}\", asset_path);\n            \n            // Retry the request with the new token\n            debug!(\"Retrying asset creation request with refreshed token\");\n            let mut retry_request = self.http_client.post(\u0026url)\n                .multipart(retry_form);\n            \n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            if retry_response.status().is_success() {\n                // Try to get the raw response text for debugging\n                let text = retry_response.text().await?;\n                debug!(\"Raw asset creation retry response: {}\", text);\n                \n                // Try to parse as SingleAssetResponse\n                match serde_json::from_str::\u003ccrate::model::SingleAssetResponse\u003e(\u0026text) {\n                    Ok(result) =\u003e Ok(Asset::from(\u0026result.asset)),\n                    Err(_) =\u003e {\n                        // Try to parse as AssetResponse directly\n                        match serde_json::from_str::\u003ccrate::model::AssetResponse\u003e(\u0026text) {\n                            Ok(asset) =\u003e Ok(Asset::from(\u0026asset)),\n                            Err(e) =\u003e {\n                                error!(\"Failed to parse retry response as either SingleAssetResponse or AssetResponse: {}\", e);\n                                Err(ApiError::JsonError(e))\n                            }\n                        }\n                    }\n                }\n            } else {\n                // Handle specific HTTP error codes with user-friendly messages\n                let status = retry_response.status();\n                match status {\n                    reqwest::StatusCode::CONFLICT =\u003e {\n                        Err(ApiError::ConflictError(\"Asset already exists. Please use a different filename or delete the existing asset first.\".to_string()))\n                    }\n                    reqwest::StatusCode::UNPROCESSABLE_ENTITY =\u003e {\n                        Err(ApiError::ConflictError(\"Invalid request data. Please check your input and try again.\".to_string()))\n                    }\n                    reqwest::StatusCode::PAYLOAD_TOO_LARGE =\u003e {\n                        Err(ApiError::ConflictError(\"File is too large. Please check the file size limits and try again.\".to_string()))\n                    }\n                    _ =\u003e {\n                        Err(ApiError::RetryFailed(format!(\n                            \"Original error: {}, Retry failed with status: {}\", \n                            response.status(), \n                            retry_response.status()\n                        )))\n                    }\n                }\n            }\n        } else if response.status().is_success() {\n            // Try to get the raw response text for debugging\n            let text = response.text().await?;\n            debug!(\"Raw asset creation response: {}\", text);\n            \n            // Try to parse as SingleAssetResponse\n            match serde_json::from_str::\u003ccrate::model::SingleAssetResponse\u003e(\u0026text) {\n                Ok(result) =\u003e Ok(Asset::from(\u0026result.asset)),\n                Err(_) =\u003e {\n                    // Try to parse as AssetResponse directly\n                    match serde_json::from_str::\u003ccrate::model::AssetResponse\u003e(\u0026text) {\n                        Ok(asset) =\u003e Ok(Asset::from(\u0026asset)),\n                        Err(e) =\u003e {\n                            error!(\"Failed to parse response as either SingleAssetResponse or AssetResponse: {}\", e);\n                            Err(ApiError::JsonError(e))\n                        }\n                    }\n                }\n            }\n        } else {\n            // Handle specific HTTP error codes with user-friendly messages\n            let status = response.status();\n            match status {\n                reqwest::StatusCode::CONFLICT =\u003e {\n                    Err(ApiError::ConflictError(\"Asset already exists. Please use a different filename or delete the existing asset first.\".to_string()))\n                }\n                reqwest::StatusCode::UNPROCESSABLE_ENTITY =\u003e {\n                    Err(ApiError::ConflictError(\"Invalid request data. Please check your input and try again.\".to_string()))\n                }\n                reqwest::StatusCode::PAYLOAD_TOO_LARGE =\u003e {\n                    Err(ApiError::ConflictError(\"File is too large. Please check the file size limits and try again.\".to_string()))\n                }\n                _ =\u003e {\n                    Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n                }\n            }\n        }\n    }\n    \n    /// Perform a geometric search for similar assets with pagination support\n    /// \n    /// This method searches for assets that are geometrically similar to the reference asset.\n    /// It uses Physna's advanced geometric matching algorithms to find assets with similar\n    /// shapes, regardless of orientation, scale, or position differences.\n    /// \n    /// The method includes automatic retry logic for handling conflict errors (HTTP 409),\n    /// which can occur when the search service is temporarily busy.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the reference asset\n    /// * `asset_id` - The UUID of the reference asset to search for similar matches\n    /// * `threshold` - The similarity threshold as a percentage (0.00 to 100.00)\n    ///                Lower values return more matches, higher values return fewer but more similar matches\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::GeometricSearchResponse)` - The search results containing similar assets\n    /// * `Err(ApiError)` - If there's an HTTP error, authentication issue, or other API error\n    /// \n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let asset_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let matches = client.geometric_search(\u0026tenant_uuid, \u0026asset_uuid, 85.0).await?;\n    ///     for match_result in \u0026matches.matches {\n    ///         println!(\"Found match: {} ({}% similar)\", match_result.path(), match_result.score());\n    ///     }\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn geometric_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, threshold: f64) -\u003e Result\u003ccrate::model::GeometricSearchResponse, ApiError\u003e {\n        debug!(\"Starting geometric search for tenant_uuid: {}, asset_uuid: {}, threshold: {}\", tenant_uuid, asset_uuid, threshold);\n        let url = format!(\"{}/tenants/{}/assets/{}/geometric-search\", self.base_url, tenant_uuid, asset_uuid);\n        \n        // Initialize with page 1 and reasonable page size\n        let mut all_matches = Vec::new();\n        let mut page = 1;\n        let per_page = 100; // Larger page size for efficiency\n        \n        loop {\n            debug!(\"Fetching page {} of geometric search results\", page);\n            \n            // Build request body with the correct structure\n            let body = serde_json::json!({\n                \"page\": page,\n                \"perPage\": per_page,\n                \"searchQuery\": \"\",\n                \"filters\": {\n                    \"folders\": [],\n                    \"metadata\": {},\n                    \"extensions\": []  // Empty array as requested\n                },\n                \"minThreshold\": threshold  // Use threshold directly as percentage\n            });\n            \n            debug!(\"Sending geometric search request to: {}\", url);\n            // Execute POST request\n            let result: Result\u003ccrate::model::GeometricSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n            \n            match result {\n                Ok(response) =\u003e {\n                    // Check if we have pagination data\n                    if let Some(page_data) = \u0026response.page_data {\n                        debug!(\"Page {}/{} with {} total matches\", page_data.current_page, page_data.last_page, page_data.total);\n                        \n                        // Add matches from this page to our collection\n                        all_matches.extend(response.matches);\n                        \n                        // Check if we've reached the last page\n                        if page_data.current_page \u003e= page_data.last_page {\n                            debug!(\"Reached last page of results\");\n                            break;\n                        }\n                        \n                        // Move to next page\n                        page += 1;\n                    } else {\n                        // No pagination data - just return the response as-is\n                        debug!(\"No pagination data in response, returning single page\");\n                        return Ok(response);\n                    }\n                }\n                Err(e) =\u003e {\n                    // Return error immediately\n                    debug!(\"Geometric search failed: {}\", e);\n                    return Err(e);\n                }\n            }\n        }\n        \n        // Create a response with all matches and combined pagination data\n        let final_response = crate::model::GeometricSearchResponse {\n            matches: all_matches,\n            page_data: None, // We've aggregated all pages\n            filter_data: None,\n        };\n        \n        debug!(\"Geometric search completed for asset_id: {} with {} total matches\", asset_uuid, final_response.matches.len());\n        Ok(final_response)\n    }\n\n    /// Perform a part search to find geometrically similar assets using the part search algorithm\n    ///\n    /// This method uses Physna's advanced part search algorithms to find assets with similar\n    /// geometry to the provided reference asset. The part search algorithm may provide different\n    /// results than the standard geometric search, potentially with forward and reverse match percentages.\n    ///\n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant containing the assets\n    /// * `asset_uuid` - The UUID of the reference asset to search for matches\n    /// * `threshold` - The similarity threshold as a percentage (0.00 to 100.00)\n    ///                Lower values return more matches, higher values return fewer but more similar matches\n    ///\n    /// # Returns\n    /// * `Ok(GeometricSearchResponse)` - The search results containing similar assets\n    /// * `Err(ApiError)` - If there's an HTTP error, authentication issue, or other API error\n    ///\n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\")?;\n    ///     let asset_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\")?;\n    ///     let matches = client.part_search(\u0026tenant_uuid, \u0026asset_uuid, 85.0).await?;\n    ///     for match_result in \u0026matches.matches {\n    ///         println!(\"Found match: {} (forward: {:.2}%, reverse: {:.2}%)\",\n    ///             match_result.path(),\n    ///             match_result.forward_match_percentage.unwrap_or(0.0),\n    ///             match_result.reverse_match_percentage.unwrap_or(0.0));\n    ///     }\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn part_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, threshold: f64) -\u003e Result\u003ccrate::model::PartSearchResponse, ApiError\u003e {\n        debug!(\"Starting part search for tenant_uuid: {}, asset_uuid: {}, threshold: {}\", tenant_uuid, asset_uuid, threshold);\n        let url = format!(\"{}/tenants/{}/assets/{}/part-search\", self.base_url, tenant_uuid, asset_uuid);\n\n        // Initialize with page 1 and reasonable page size\n        let mut all_matches = Vec::new();\n        let mut page = 1;\n        let per_page = 100; // Larger page size for efficiency\n\n        // Track the maximum last_page value seen to prevent infinite loops\n        let mut max_last_page_seen = 0;\n        let max_pages_limit = 50; // Hard limit to prevent excessive API calls\n\n        loop {\n            debug!(\"Fetching page {} of part search results\", page);\n\n            // Check if we've hit the hard limit\n            if page \u003e max_pages_limit {\n                debug!(\"Reached hard page limit of {}, stopping to prevent excessive API calls\", max_pages_limit);\n                break;\n            }\n\n            // Build request body with the correct structure\n            let body = serde_json::json!({\n                \"page\": page,\n                \"perPage\": per_page,\n                \"searchQuery\": \"\",\n                \"filters\": {\n                    \"folders\": [],\n                    \"metadata\": {},\n                    \"extensions\": []  // Empty array as requested\n                },\n                \"minThreshold\": threshold  // Use threshold directly as percentage\n            });\n\n            debug!(\"Sending part search request to: {}\", url);\n            // Execute POST request\n            let result: Result\u003ccrate::model::PartSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n\n            match result {\n                Ok(response) =\u003e {\n                    // Check if we have pagination data\n                    if let Some(page_data) = \u0026response.page_data {\n                        debug!(\"Page {}/{} with {} total matches\", page_data.current_page, page_data.last_page, page_data.total);\n\n                        // Update the maximum last_page value seen\n                        if page_data.last_page \u003e max_last_page_seen {\n                            max_last_page_seen = page_data.last_page;\n                        }\n\n                        // Add matches from this page to our collection\n                        all_matches.extend(response.matches);\n\n                        // Check if we've reached the last page or gone beyond what we've seen\n                        if page_data.current_page \u003e= page_data.last_page || page \u003e max_last_page_seen {\n                            debug!(\"Reached last page of results or beyond max seen: current={}, last={}, requested={}\",\n                                   page_data.current_page, page_data.last_page, page);\n                            break;\n                        }\n\n                        // Move to next page\n                        page += 1;\n                    } else {\n                        // No pagination data - just return the response as-is\n                        debug!(\"No pagination data in response, returning single page\");\n                        return Ok(response);\n                    }\n                }\n                Err(e) =\u003e {\n                    // Return error immediately\n                    debug!(\"Part search failed: {}\", e);\n                    return Err(e);\n                }\n            }\n        }\n\n        // Create a response with all matches and combined pagination data\n        let final_response = crate::model::PartSearchResponse {\n            matches: all_matches,\n            page_data: None, // We've aggregated all pages\n            filter_data: None,\n        };\n\n        debug!(\"Part search completed for asset_id: {} with {} total matches\", asset_uuid, final_response.matches.len());\n        Ok(final_response)\n    }\n\n    /// Performs a visual search for similar assets\n    ///\n    /// This method performs a visual search to find assets that are visually similar to the provided asset.\n    /// The search results are ordered by relevance as determined by the visual search algorithm.\n    ///\n    /// # Arguments\n    ///\n    /// * `tenant_uuid` - The UUID of the tenant to search within\n    /// * `asset_uuid` - The UUID of the reference asset to search for visually similar matches\n    ///\n    /// # Returns\n    ///\n    /// * `Ok(PartSearchResponse)` - The search results with visually similar assets\n    /// * `Err(ApiError)` - If the API request fails\n    ///\n    /// # Example\n    ///\n    /// ```no_run\n    /// # use pcli2::physna_v3::PhysnaApiClient;\n    /// # use uuid::Uuid;\n    /// # async fn example() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    /// # let mut client = PhysnaApiClient::new();\n    /// # let tenant_uuid = Uuid::nil();\n    /// # let asset_uuid = Uuid::nil();\n    /// let matches = client.visual_search(\u0026tenant_uuid, \u0026asset_uuid).await?;\n    /// for match_result in \u0026matches.matches {\n    ///     println!(\"Found visually similar asset: {}\", match_result.path());\n    /// }\n    /// # Ok(())\n    /// # }\n    /// ```\n    pub async fn visual_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::PartSearchResponse, ApiError\u003e {\n        debug!(\"Starting visual search for tenant_uuid: {}, asset_uuid: {}\", tenant_uuid, asset_uuid);\n        let url = format!(\"{}/tenants/{}/assets/{}/visual-search\", self.base_url, tenant_uuid, asset_uuid);\n\n        // Visual search - get first page with 50 results (top matches)\n        let page = 1;\n        let per_page = 50; // Reasonable page size for visual search\n\n        // Build request body with the correct structure\n        let body = serde_json::json!({\n            \"page\": page,\n            \"perPage\": per_page,\n            \"searchQuery\": \"\",\n            \"filters\": {\n                \"folders\": [],\n                \"metadata\": {},\n                \"extensions\": []  // Empty array as requested\n            }\n        });\n\n        debug!(\"Sending visual search request to: {}\", url);\n        // Execute POST request\n        let result: Result\u003ccrate::model::PartSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n\n        match result {\n            Ok(mut response) =\u003e {\n                // Limit results to 50 to ensure we don't exceed expected page size\n                if response.matches.len() \u003e 50 {\n                    response.matches.truncate(50);\n                }\n\n                // Clear pagination data since we're only getting the first page\n                response.page_data = None;\n\n                debug!(\"Visual search completed for asset_id: {} with {} total matches\", asset_uuid, response.matches.len());\n                Ok(response)\n            }\n            Err(e) =\u003e {\n                // Return error immediately\n                debug!(\"Visual search failed: {}\", e);\n                Err(e)\n            }\n        }\n    }\n\n    /// Create multiple assets by uploading files matching a glob pattern\n    /// \n    /// This method uploads multiple files as assets in the specified tenant.\n    /// Files are matched using a glob pattern and uploaded concurrently.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the assets\n    /// * `glob_pattern` - The glob pattern to match files to upload (e.g., \"data/puzzle/*.STL\")\n    /// * `folder_path` - Optional folder path where to place the assets\n    /// * `folder_id` - Optional folder ID where to place the assets\n    /// * `concurrent` - Maximum number of concurrent uploads\n    /// * `show_progress` - Whether to display a progress bar during upload\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003ccrate::model::AssetResponse\u003e)` - Successfully created assets\n    /// * `Err(ApiError)` - HTTP error, IO error, or other error\n    pub async fn create_assets_batch(\n        \u0026mut self, \n        tenant_uuid: \u0026Uuid, \n        glob_pattern: \u0026str, \n        folder_path: Option\u003c\u0026str\u003e,\n        folder_uuid: Option\u003c\u0026Uuid\u003e,\n        concurrent: usize,\n        show_progress: bool\n    ) -\u003e Result\u003cVec\u003ccrate::model::Asset\u003e, ApiError\u003e {\n        debug!(\"Creating batch assets in tenant: {}, folder_path: {:?}, folder_id: {:?}\", \u0026tenant_uuid, folder_path, folder_uuid);\n        \n        // Expand the glob pattern to get matching files\n        let paths: Vec\u003c_\u003e = glob(glob_pattern)?\n            .filter_map(|path_result| path_result.ok()) // Filter out any errors and extract the PathBuf\n            .collect();\n        \n        debug!(\"Found {} files matching pattern: {}\", paths.len(), glob_pattern);\n        \n        // Create progress bar if requested\n        let progress_bar = if show_progress {\n            let pb = ProgressBar::new(paths.len() as u64);\n            pb.set_style(ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) {msg}\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\"));\n            Some(pb)\n        } else {\n            None\n        };\n        \n        // Create a stream of futures for uploading files concurrently\n        let base_url = self.base_url.clone();\n        let access_token = self.access_token.clone();\n        let client_credentials = self.client_credentials.clone();\n        let folder_path = folder_path.map(|s| s.to_string());\n        \n        debug!(\"Folder path for batch upload: {:?}, folder ID: {:?}\", folder_path, folder_uuid);\n        \n        let results: Result\u003cVec\u003c_\u003e, _\u003e = stream::iter(paths)\n            .filter(|path_buf| {\n                futures::future::ready(path_buf.exists() \u0026\u0026 path_buf.is_file())\n            })\n            .map(|path_buf| {\n                let base_url = base_url.clone();\n                let access_token = access_token.clone();\n                let client_credentials = client_credentials.clone();\n                let folder_path = folder_path.clone();\n                let folder_uuid = folder_uuid.clone();\n                let progress_bar = progress_bar.clone();\n                \n                async move {\n                    let path_str = path_buf.to_string_lossy().to_string();\n                    let file_name = path_buf.file_name();\n\n                    let file_name = match file_name {\n                        Some(file_name) =\u003e file_name,\n                        None =\u003e return Err(ApiError::PathNotFound(path_buf.to_string_lossy().into())),\n                    };\n\n                \n                \n                    // Create a new client for each request to avoid borrowing issues\n                    let mut client = PhysnaApiClient::new().with_base_url(base_url);\n                    if let Some(token) = access_token {\n                        client = client.with_access_token(token);\n                    }\n                    if let Some((client_id, client_secret)) = client_credentials {\n                        client = client.with_client_credentials(client_id, client_secret);\n                    }\n                \n                    // Upload the file\n                    let asset_path = format!(\"{}/{}\", folder_path.unwrap(), file_name.to_string_lossy());\n                    debug!(\"Uploading file: {}, as asset_path: {}, folder_uuid: {:?}\", path_str, asset_path, folder_uuid);\n                    let result = client.create_asset(\u0026tenant_uuid, \u0026path_buf, \u0026asset_path, folder_uuid.unwrap()).await;\n                \n                    // Update progress bar if present\n                    if let Some(pb) = \u0026progress_bar {\n                        pb.inc(1);\n                        match \u0026result {\n                            Ok(asset) =\u003e {\n                                pb.set_message(format!(\"Uploaded: {}\", asset.path()));\n                            }\n                            Err(_) =\u003e {\n                                pb.set_message(format!(\"Failed: {}\", path_buf.file_name().unwrap_or_default().to_string_lossy()));\n                            }\n                        }\n                    }\n                \n                    result\n                }\n            })\n            .buffer_unordered(concurrent)\n            .collect::\u003cVec\u003c_\u003e\u003e()\n            .await\n            .into_iter()\n            .collect();\n        \n        // Finish progress bar if present\n        if let Some(pb) = progress_bar {\n            pb.finish_with_message(\"Batch upload complete\");\n        }\n        \n        results\n    }\n\n    /// Get dependencies for a specific asset by path\n    /// \n    /// This method retrieves all dependencies for the specified asset from the Physna API.\n    /// The dependencies represent other assets that are related to this asset, such as\n    /// components in an assembly or referenced assets.\n    /// \n    /// IMPORTANT: Despite the parameter name, this endpoint expects the asset path,\n    /// not the asset ID/UUID. The Physna API uses the path in the URL for this endpoint.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_path` - The path of the asset to retrieve dependencies for (e.g., \"/Root/Folder/assembly.stl\")\n    /// \n    /// # Returns\n    /// * `Ok(AssetDependenciesResponse)` - Successfully fetched asset dependencies\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_asset_dependencies(\u0026mut self, tenant_id: \u0026str, asset_path: \u0026str) -\u003e Result\u003ccrate::model::AssetDependenciesResponse, ApiError\u003e {\n        debug!(\"Getting asset dependencies for tenant_id: {}, asset_path: {}\", tenant_id, asset_path);\n        \n        let encoded_asset_path = urlencoding::encode(asset_path);\n        let url = format!(\"{}/tenants/{}/assets/{}/dependencies\", self.base_url, tenant_id, encoded_asset_path);\n        debug!(\"Dependencies request URL: {}\", url);\n        \n        // Execute the GET request using the generic method\n        let response: crate::model::AssetDependenciesResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved {} dependencies for asset_path: {}\", response.dependencies.len(), asset_path);\n        \n        Ok(response)\n    }\n    \n    /// Get dependencies for a specific asset by path\n    /// \n    /// This method retrieves all dependencies for the specified asset from the Physna API.\n    /// The dependencies represent other assets that are related to this asset, such as\n    /// components in an assembly or referenced assets.\n    /// \n    /// This method uses the path directly in the API endpoint, as the dependencies endpoint\n    /// specifically requires the asset path rather than the asset ID.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_path` - The path of the asset to retrieve dependencies for (e.g., \"/Root/Folder/assembly.stl\")\n    /// \n    /// # Returns\n    /// * `Ok(AssetDependenciesResponse)` - Successfully fetched asset dependencies\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_asset_dependencies_by_path(\u0026mut self, tenant_id: \u0026str, asset_path: \u0026str) -\u003e Result\u003ccrate::model::AssetDependenciesResponse, ApiError\u003e {\n        debug!(\"Getting asset dependencies by path for tenant_id: {}, asset_path: {}\", tenant_id, asset_path);\n        \n        // URL encode the asset path to handle special characters properly\n        let encoded_asset_path = urlencoding::encode(asset_path);\n        \n        let url = format!(\"{}/tenants/{}/assets/{}/dependencies\", self.base_url, tenant_id, encoded_asset_path);\n        debug!(\"Dependencies request URL: {}\", url);\n        \n        // Execute the GET request using the generic method\n        let response: crate::model::AssetDependenciesResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved {} dependencies for asset_path: {}\", response.dependencies.len(), asset_path);\n        \n        Ok(response)\n    }\n    \n    /// Download asset file from the Physna API\n    /// \n    /// This method downloads the raw file content of the specified asset from the Physna API.\n    /// The file content is returned as a vector of bytes that can be saved to disk.\n    /// \n    /// The API endpoint follows the pattern: GET /tenants/{tenantId}/assets/{assetId}/file\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to download\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003cu8\u003e)` - Successfully downloaded file content as bytes\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn download_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str) -\u003e Result\u003cVec\u003cu8\u003e, ApiError\u003e {\n        debug!(\"Downloading asset file for tenant_id: {}, asset_id: {}\", tenant_id, asset_id);\n        \n        let url = format!(\"{}/tenants/{}/assets/{}/file\", self.base_url, tenant_id, asset_id);\n        debug!(\"Download asset file request URL: {}\", url);\n        \n        // Execute GET request for file content\n        let response = self\n            .http_client\n            .get(\u0026url)\n            .bearer_auth(\u0026self.access_token.as_ref().ok_or_else(|| ApiError::AuthError(\"No access token available for download\".to_string()))?)\n            .send()\n            .await\n            .map_err(|e| {\n                debug!(\"Failed to send download request: {}\", e);\n                ApiError::from(e)\n            })?;\n        \n        // Check status code\n        if !response.status().is_success() {\n            debug!(\"Download request failed with status: {}\", response.status());\n            // Create an appropriate error based on the response status\n            match response.status() {\n                reqwest::StatusCode::UNAUTHORIZED =\u003e {\n                    return Err(ApiError::AuthError(\"Unauthorized access - access token may have expired or is invalid\".to_string()));\n                }\n                reqwest::StatusCode::FORBIDDEN =\u003e {\n                    return Err(ApiError::AuthError(\"Access forbidden - you don't have permission to download this asset\".to_string()));\n                }\n                reqwest::StatusCode::NOT_FOUND =\u003e {\n                    return Err(ApiError::AuthError(\"Asset not found - the asset may have been deleted or the path is incorrect\".to_string()));\n                }\n                _ =\u003e {\n                    return Err(ApiError::HttpError(response.error_for_status().unwrap_err()));\n                }\n            }\n        }\n        \n        // Get the file content as bytes\n        let bytes = response\n            .bytes()\n            .await\n            .map_err(|e| {\n                debug!(\"Failed to read response bytes: {}\", e);\n                ApiError::HttpError(e)\n            })?;\n        \n        debug!(\"Successfully downloaded {} bytes for asset_id: {}\", bytes.len(), asset_id);\n        Ok(bytes.to_vec())\n    }\n}\n\nimpl Default for PhysnaApiClient {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_create_asset_url() {\n        let client = PhysnaApiClient::new();\n        // This test verifies that the URL is constructed correctly\n        // We're not actually making a network request in this test\n        let tenant_id = \"test-tenant\";\n        let url = format!(\"{}/tenants/{}/assets\", client.base_url, tenant_id);\n        assert_eq!(url, \"https://app-api.physna.com/v3/tenants/test-tenant/assets\");\n    }\n}\n","traces":[{"line":120,"address":[],"length":0,"stats":{"Line":4}},{"line":122,"address":[],"length":0,"stats":{"Line":8}},{"line":123,"address":[],"length":0,"stats":{"Line":4}},{"line":126,"address":[],"length":0,"stats":{"Line":16}},{"line":129,"address":[],"length":0,"stats":{"Line":8}},{"line":131,"address":[],"length":0,"stats":{"Line":24}},{"line":133,"address":[],"length":0,"stats":{"Line":4}},{"line":134,"address":[],"length":0,"stats":{"Line":4}},{"line":135,"address":[],"length":0,"stats":{"Line":20}},{"line":138,"address":[],"length":0,"stats":{"Line":16}},{"line":139,"address":[],"length":0,"stats":{"Line":20}},{"line":140,"address":[],"length":0,"stats":{"Line":4}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":1}},{"line":176,"address":[],"length":0,"stats":{"Line":3}},{"line":179,"address":[],"length":0,"stats":{"Line":2}},{"line":193,"address":[],"length":0,"stats":{"Line":4}},{"line":195,"address":[],"length":0,"stats":{"Line":12}},{"line":198,"address":[],"length":0,"stats":{"Line":8}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":4}},{"line":225,"address":[],"length":0,"stats":{"Line":8}},{"line":226,"address":[],"length":0,"stats":{"Line":4}},{"line":237,"address":[],"length":0,"stats":{"Line":4}},{"line":238,"address":[],"length":0,"stats":{"Line":8}},{"line":239,"address":[],"length":0,"stats":{"Line":4}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":275,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":339,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":345,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":376,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":390,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":410,"address":[],"length":0,"stats":{"Line":0}},{"line":416,"address":[],"length":0,"stats":{"Line":0}},{"line":417,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":431,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":446,"address":[],"length":0,"stats":{"Line":0}},{"line":450,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":456,"address":[],"length":0,"stats":{"Line":0}},{"line":457,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":485,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":505,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":0}},{"line":595,"address":[],"length":0,"stats":{"Line":0}},{"line":596,"address":[],"length":0,"stats":{"Line":0}},{"line":599,"address":[],"length":0,"stats":{"Line":0}},{"line":600,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":605,"address":[],"length":0,"stats":{"Line":0}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":615,"address":[],"length":0,"stats":{"Line":0}},{"line":616,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":631,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":0}},{"line":652,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":667,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":673,"address":[],"length":0,"stats":{"Line":0}},{"line":688,"address":[],"length":0,"stats":{"Line":0}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":710,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":747,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":765,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":783,"address":[],"length":0,"stats":{"Line":0}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}},{"line":790,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":792,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":798,"address":[],"length":0,"stats":{"Line":0}},{"line":799,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":836,"address":[],"length":0,"stats":{"Line":0}},{"line":853,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":864,"address":[],"length":0,"stats":{"Line":0}},{"line":866,"address":[],"length":0,"stats":{"Line":0}},{"line":867,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":874,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":884,"address":[],"length":0,"stats":{"Line":0}},{"line":900,"address":[],"length":0,"stats":{"Line":0}},{"line":901,"address":[],"length":0,"stats":{"Line":0}},{"line":903,"address":[],"length":0,"stats":{"Line":0}},{"line":906,"address":[],"length":0,"stats":{"Line":0}},{"line":907,"address":[],"length":0,"stats":{"Line":0}},{"line":922,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":928,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":932,"address":[],"length":0,"stats":{"Line":0}},{"line":933,"address":[],"length":0,"stats":{"Line":0}},{"line":935,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":939,"address":[],"length":0,"stats":{"Line":0}},{"line":940,"address":[],"length":0,"stats":{"Line":0}},{"line":941,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":949,"address":[],"length":0,"stats":{"Line":0}},{"line":950,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":959,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":962,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":976,"address":[],"length":0,"stats":{"Line":0}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":978,"address":[],"length":0,"stats":{"Line":0}},{"line":979,"address":[],"length":0,"stats":{"Line":0}},{"line":980,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":985,"address":[],"length":0,"stats":{"Line":0}},{"line":986,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":989,"address":[],"length":0,"stats":{"Line":0}},{"line":991,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1019,"address":[],"length":0,"stats":{"Line":0}},{"line":1020,"address":[],"length":0,"stats":{"Line":0}},{"line":1022,"address":[],"length":0,"stats":{"Line":0}},{"line":1023,"address":[],"length":0,"stats":{"Line":0}},{"line":1026,"address":[],"length":0,"stats":{"Line":0}},{"line":1039,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1042,"address":[],"length":0,"stats":{"Line":0}},{"line":1043,"address":[],"length":0,"stats":{"Line":0}},{"line":1047,"address":[],"length":0,"stats":{"Line":0}},{"line":1049,"address":[],"length":0,"stats":{"Line":0}},{"line":1062,"address":[],"length":0,"stats":{"Line":0}},{"line":1064,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1067,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1074,"address":[],"length":0,"stats":{"Line":0}},{"line":1075,"address":[],"length":0,"stats":{"Line":0}},{"line":1077,"address":[],"length":0,"stats":{"Line":0}},{"line":1080,"address":[],"length":0,"stats":{"Line":0}},{"line":1081,"address":[],"length":0,"stats":{"Line":0}},{"line":1082,"address":[],"length":0,"stats":{"Line":0}},{"line":1083,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1113,"address":[],"length":0,"stats":{"Line":0}},{"line":1114,"address":[],"length":0,"stats":{"Line":0}},{"line":1117,"address":[],"length":0,"stats":{"Line":0}},{"line":1118,"address":[],"length":0,"stats":{"Line":0}},{"line":1122,"address":[],"length":0,"stats":{"Line":0}},{"line":1124,"address":[],"length":0,"stats":{"Line":0}},{"line":1132,"address":[],"length":0,"stats":{"Line":0}},{"line":1133,"address":[],"length":0,"stats":{"Line":0}},{"line":1135,"address":[],"length":0,"stats":{"Line":0}},{"line":1136,"address":[],"length":0,"stats":{"Line":0}},{"line":1137,"address":[],"length":0,"stats":{"Line":0}},{"line":1138,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1159,"address":[],"length":0,"stats":{"Line":0}},{"line":1163,"address":[],"length":0,"stats":{"Line":0}},{"line":1181,"address":[],"length":0,"stats":{"Line":0}},{"line":1185,"address":[],"length":0,"stats":{"Line":0}},{"line":1202,"address":[],"length":0,"stats":{"Line":0}},{"line":1207,"address":[],"length":0,"stats":{"Line":0}},{"line":1210,"address":[],"length":0,"stats":{"Line":0}},{"line":1211,"address":[],"length":0,"stats":{"Line":0}},{"line":1214,"address":[],"length":0,"stats":{"Line":0}},{"line":1220,"address":[],"length":0,"stats":{"Line":0}},{"line":1221,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1227,"address":[],"length":0,"stats":{"Line":0}},{"line":1228,"address":[],"length":0,"stats":{"Line":0}},{"line":1231,"address":[],"length":0,"stats":{"Line":0}},{"line":1232,"address":[],"length":0,"stats":{"Line":0}},{"line":1235,"address":[],"length":0,"stats":{"Line":0}},{"line":1238,"address":[],"length":0,"stats":{"Line":0}},{"line":1240,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1244,"address":[],"length":0,"stats":{"Line":0}},{"line":1245,"address":[],"length":0,"stats":{"Line":0}},{"line":1246,"address":[],"length":0,"stats":{"Line":0}},{"line":1247,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1252,"address":[],"length":0,"stats":{"Line":0}},{"line":1254,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1271,"address":[],"length":0,"stats":{"Line":0}},{"line":1272,"address":[],"length":0,"stats":{"Line":0}},{"line":1274,"address":[],"length":0,"stats":{"Line":0}},{"line":1313,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1317,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1320,"address":[],"length":0,"stats":{"Line":0}},{"line":1323,"address":[],"length":0,"stats":{"Line":0}},{"line":1326,"address":[],"length":0,"stats":{"Line":0}},{"line":1327,"address":[],"length":0,"stats":{"Line":0}},{"line":1332,"address":[],"length":0,"stats":{"Line":0}},{"line":1333,"address":[],"length":0,"stats":{"Line":0}},{"line":1336,"address":[],"length":0,"stats":{"Line":0}},{"line":1337,"address":[],"length":0,"stats":{"Line":0}},{"line":1338,"address":[],"length":0,"stats":{"Line":0}},{"line":1343,"address":[],"length":0,"stats":{"Line":0}},{"line":1345,"address":[],"length":0,"stats":{"Line":0}},{"line":1348,"address":[],"length":0,"stats":{"Line":0}},{"line":1349,"address":[],"length":0,"stats":{"Line":0}},{"line":1352,"address":[],"length":0,"stats":{"Line":0}},{"line":1353,"address":[],"length":0,"stats":{"Line":0}},{"line":1356,"address":[],"length":0,"stats":{"Line":0}},{"line":1359,"address":[],"length":0,"stats":{"Line":0}},{"line":1360,"address":[],"length":0,"stats":{"Line":0}},{"line":1361,"address":[],"length":0,"stats":{"Line":0}},{"line":1364,"address":[],"length":0,"stats":{"Line":0}},{"line":1367,"address":[],"length":0,"stats":{"Line":0}},{"line":1368,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1372,"address":[],"length":0,"stats":{"Line":0}},{"line":1373,"address":[],"length":0,"stats":{"Line":0}},{"line":1374,"address":[],"length":0,"stats":{"Line":0}},{"line":1379,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1384,"address":[],"length":0,"stats":{"Line":0}},{"line":1385,"address":[],"length":0,"stats":{"Line":0}},{"line":1386,"address":[],"length":0,"stats":{"Line":0}},{"line":1388,"address":[],"length":0,"stats":{"Line":0}},{"line":1389,"address":[],"length":0,"stats":{"Line":0}},{"line":1392,"address":[],"length":0,"stats":{"Line":0}},{"line":1394,"address":[],"length":0,"stats":{"Line":0}},{"line":1396,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1400,"address":[],"length":0,"stats":{"Line":0}},{"line":1401,"address":[],"length":0,"stats":{"Line":0}},{"line":1404,"address":[],"length":0,"stats":{"Line":0}},{"line":1405,"address":[],"length":0,"stats":{"Line":0}},{"line":1406,"address":[],"length":0,"stats":{"Line":0}},{"line":1407,"address":[],"length":0,"stats":{"Line":0}},{"line":1408,"address":[],"length":0,"stats":{"Line":0}},{"line":1415,"address":[],"length":0,"stats":{"Line":0}},{"line":1416,"address":[],"length":0,"stats":{"Line":0}},{"line":1418,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1427,"address":[],"length":0,"stats":{"Line":0}},{"line":1428,"address":[],"length":0,"stats":{"Line":0}},{"line":1429,"address":[],"length":0,"stats":{"Line":0}},{"line":1430,"address":[],"length":0,"stats":{"Line":0}},{"line":1435,"address":[],"length":0,"stats":{"Line":0}},{"line":1437,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1441,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1445,"address":[],"length":0,"stats":{"Line":0}},{"line":1446,"address":[],"length":0,"stats":{"Line":0}},{"line":1447,"address":[],"length":0,"stats":{"Line":0}},{"line":1448,"address":[],"length":0,"stats":{"Line":0}},{"line":1449,"address":[],"length":0,"stats":{"Line":0}},{"line":1456,"address":[],"length":0,"stats":{"Line":0}},{"line":1457,"address":[],"length":0,"stats":{"Line":0}},{"line":1459,"address":[],"length":0,"stats":{"Line":0}},{"line":1462,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1468,"address":[],"length":0,"stats":{"Line":0}},{"line":1510,"address":[],"length":0,"stats":{"Line":0}},{"line":1511,"address":[],"length":0,"stats":{"Line":0}},{"line":1512,"address":[],"length":0,"stats":{"Line":0}},{"line":1515,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1520,"address":[],"length":0,"stats":{"Line":0}},{"line":1523,"address":[],"length":0,"stats":{"Line":0}},{"line":1524,"address":[],"length":0,"stats":{"Line":0}},{"line":1525,"address":[],"length":0,"stats":{"Line":0}},{"line":1526,"address":[],"length":0,"stats":{"Line":0}},{"line":1527,"address":[],"length":0,"stats":{"Line":0}},{"line":1528,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1530,"address":[],"length":0,"stats":{"Line":0}},{"line":1532,"address":[],"length":0,"stats":{"Line":0}},{"line":1535,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1539,"address":[],"length":0,"stats":{"Line":0}},{"line":1540,"address":[],"length":0,"stats":{"Line":0}},{"line":1542,"address":[],"length":0,"stats":{"Line":0}},{"line":1543,"address":[],"length":0,"stats":{"Line":0}},{"line":1546,"address":[],"length":0,"stats":{"Line":0}},{"line":1549,"address":[],"length":0,"stats":{"Line":0}},{"line":1550,"address":[],"length":0,"stats":{"Line":0}},{"line":1551,"address":[],"length":0,"stats":{"Line":0}},{"line":1555,"address":[],"length":0,"stats":{"Line":0}},{"line":1558,"address":[],"length":0,"stats":{"Line":0}},{"line":1559,"address":[],"length":0,"stats":{"Line":0}},{"line":1562,"address":[],"length":0,"stats":{"Line":0}},{"line":1564,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1578,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1618,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1622,"address":[],"length":0,"stats":{"Line":0}},{"line":1623,"address":[],"length":0,"stats":{"Line":0}},{"line":1624,"address":[],"length":0,"stats":{"Line":0}},{"line":1627,"address":[],"length":0,"stats":{"Line":0}},{"line":1628,"address":[],"length":0,"stats":{"Line":0}},{"line":1631,"address":[],"length":0,"stats":{"Line":0}},{"line":1634,"address":[],"length":0,"stats":{"Line":0}},{"line":1635,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1641,"address":[],"length":0,"stats":{"Line":0}},{"line":1642,"address":[],"length":0,"stats":{"Line":0}},{"line":1643,"address":[],"length":0,"stats":{"Line":0}},{"line":1644,"address":[],"length":0,"stats":{"Line":0}},{"line":1645,"address":[],"length":0,"stats":{"Line":0}},{"line":1646,"address":[],"length":0,"stats":{"Line":0}},{"line":1647,"address":[],"length":0,"stats":{"Line":0}},{"line":1649,"address":[],"length":0,"stats":{"Line":0}},{"line":1652,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1657,"address":[],"length":0,"stats":{"Line":0}},{"line":1659,"address":[],"length":0,"stats":{"Line":0}},{"line":1660,"address":[],"length":0,"stats":{"Line":0}},{"line":1663,"address":[],"length":0,"stats":{"Line":0}},{"line":1664,"address":[],"length":0,"stats":{"Line":0}},{"line":1668,"address":[],"length":0,"stats":{"Line":0}},{"line":1671,"address":[],"length":0,"stats":{"Line":0}},{"line":1672,"address":[],"length":0,"stats":{"Line":0}},{"line":1674,"address":[],"length":0,"stats":{"Line":0}},{"line":1678,"address":[],"length":0,"stats":{"Line":0}},{"line":1681,"address":[],"length":0,"stats":{"Line":0}},{"line":1682,"address":[],"length":0,"stats":{"Line":0}},{"line":1685,"address":[],"length":0,"stats":{"Line":0}},{"line":1687,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1700,"address":[],"length":0,"stats":{"Line":0}},{"line":1701,"address":[],"length":0,"stats":{"Line":0}},{"line":1735,"address":[],"length":0,"stats":{"Line":0}},{"line":1736,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1740,"address":[],"length":0,"stats":{"Line":0}},{"line":1741,"address":[],"length":0,"stats":{"Line":0}},{"line":1744,"address":[],"length":0,"stats":{"Line":0}},{"line":1745,"address":[],"length":0,"stats":{"Line":0}},{"line":1746,"address":[],"length":0,"stats":{"Line":0}},{"line":1747,"address":[],"length":0,"stats":{"Line":0}},{"line":1748,"address":[],"length":0,"stats":{"Line":0}},{"line":1749,"address":[],"length":0,"stats":{"Line":0}},{"line":1750,"address":[],"length":0,"stats":{"Line":0}},{"line":1751,"address":[],"length":0,"stats":{"Line":0}},{"line":1755,"address":[],"length":0,"stats":{"Line":0}},{"line":1757,"address":[],"length":0,"stats":{"Line":0}},{"line":1759,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1762,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1767,"address":[],"length":0,"stats":{"Line":0}},{"line":1769,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1772,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1796,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1809,"address":[],"length":0,"stats":{"Line":0}},{"line":1812,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1816,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1818,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1820,"address":[],"length":0,"stats":{"Line":0}},{"line":1821,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1827,"address":[],"length":0,"stats":{"Line":0}},{"line":1828,"address":[],"length":0,"stats":{"Line":0}},{"line":1829,"address":[],"length":0,"stats":{"Line":0}},{"line":1830,"address":[],"length":0,"stats":{"Line":0}},{"line":1832,"address":[],"length":0,"stats":{"Line":0}},{"line":1834,"address":[],"length":0,"stats":{"Line":0}},{"line":1835,"address":[],"length":0,"stats":{"Line":0}},{"line":1836,"address":[],"length":0,"stats":{"Line":0}},{"line":1838,"address":[],"length":0,"stats":{"Line":0}},{"line":1839,"address":[],"length":0,"stats":{"Line":0}},{"line":1840,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1842,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1846,"address":[],"length":0,"stats":{"Line":0}},{"line":1847,"address":[],"length":0,"stats":{"Line":0}},{"line":1848,"address":[],"length":0,"stats":{"Line":0}},{"line":1850,"address":[],"length":0,"stats":{"Line":0}},{"line":1851,"address":[],"length":0,"stats":{"Line":0}},{"line":1852,"address":[],"length":0,"stats":{"Line":0}},{"line":1858,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1860,"address":[],"length":0,"stats":{"Line":0}},{"line":1862,"address":[],"length":0,"stats":{"Line":0}},{"line":1863,"address":[],"length":0,"stats":{"Line":0}},{"line":1867,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1872,"address":[],"length":0,"stats":{"Line":0}},{"line":1873,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1876,"address":[],"length":0,"stats":{"Line":0}},{"line":1878,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1884,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1889,"address":[],"length":0,"stats":{"Line":0}},{"line":1894,"address":[],"length":0,"stats":{"Line":0}},{"line":1895,"address":[],"length":0,"stats":{"Line":0}},{"line":1898,"address":[],"length":0,"stats":{"Line":0}},{"line":1917,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1920,"address":[],"length":0,"stats":{"Line":0}},{"line":1921,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1925,"address":[],"length":0,"stats":{"Line":0}},{"line":1926,"address":[],"length":0,"stats":{"Line":0}},{"line":1928,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1948,"address":[],"length":0,"stats":{"Line":0}},{"line":1951,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1954,"address":[],"length":0,"stats":{"Line":0}},{"line":1957,"address":[],"length":0,"stats":{"Line":0}},{"line":1958,"address":[],"length":0,"stats":{"Line":0}},{"line":1960,"address":[],"length":0,"stats":{"Line":0}},{"line":1977,"address":[],"length":0,"stats":{"Line":0}},{"line":1978,"address":[],"length":0,"stats":{"Line":0}},{"line":1980,"address":[],"length":0,"stats":{"Line":0}},{"line":1981,"address":[],"length":0,"stats":{"Line":0}},{"line":1984,"address":[],"length":0,"stats":{"Line":0}},{"line":1985,"address":[],"length":0,"stats":{"Line":0}},{"line":1986,"address":[],"length":0,"stats":{"Line":0}},{"line":1987,"address":[],"length":0,"stats":{"Line":0}},{"line":1989,"address":[],"length":0,"stats":{"Line":0}},{"line":1990,"address":[],"length":0,"stats":{"Line":0}},{"line":1991,"address":[],"length":0,"stats":{"Line":0}},{"line":1992,"address":[],"length":0,"stats":{"Line":0}},{"line":1996,"address":[],"length":0,"stats":{"Line":0}},{"line":1997,"address":[],"length":0,"stats":{"Line":0}},{"line":1999,"address":[],"length":0,"stats":{"Line":0}},{"line":2001,"address":[],"length":0,"stats":{"Line":0}},{"line":2004,"address":[],"length":0,"stats":{"Line":0}},{"line":2007,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2016,"address":[],"length":0,"stats":{"Line":0}},{"line":2018,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2021,"address":[],"length":0,"stats":{"Line":0}},{"line":2024,"address":[],"length":0,"stats":{"Line":0}},{"line":2025,"address":[],"length":0,"stats":{"Line":0}},{"line":2030,"address":[],"length":0,"stats":{"Line":0}},{"line":2031,"address":[],"length":0,"stats":{"Line":0}}],"covered":24,"coverable":623},{"path":["/","Users","julian","projects","physna","pcli2","src","tenant_cache.rs"],"content":"//! Cache for tenant information to avoid repeated API calls\n//!\n//! This cache stores tenant data locally to avoid expensive API calls when\n//! checking tenant information. It caches the list of available tenants\n//! for the current user.\n\nuse std::path::PathBuf;\nuse tracing::{debug, trace, warn};\nuse crate::model::TenantSetting;\nuse crate::cache::CacheError;\n\n/// Cache for tenant information to avoid repeated API calls\n#[derive(serde::Serialize, serde::Deserialize)]\npub struct TenantCache {\n    /// Map of tenant UUID to cached tenant setting\n    pub tenants: Vec\u003cTenantSetting\u003e,\n    /// Unix timestamp when the cache was last updated (for future use)\n    #[serde(rename = \"lastUpdated\")]\n    pub last_updated_timestamp: Option\u003cu64\u003e,\n}\n\nimpl TenantCache {\n    /// Create a new empty tenant cache\n    pub fn new() -\u003e Self {\n        Self {\n            tenants: Vec::new(),\n            last_updated_timestamp: Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs()),\n        }\n    }\n\n    /// Check if cache is expired (default expiration: 1 hour)\n    pub fn is_expired(\u0026self) -\u003e bool {\n        if let Some(timestamp) = self.last_updated_timestamp {\n            let now = std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs();\n            // Cache expires after 1 hour (3600 seconds)\n            now - timestamp \u003e 3600\n        } else {\n            true // If no timestamp, treat as expired\n        }\n    }\n\n    /// Get the default cache file path\n    ///\n    /// # Returns\n    /// * `Ok(PathBuf)` - The path to the tenant cache file\n    /// * `Err` - If there was an error getting the cache directory\n    fn get_cache_file_path() -\u003e Result\u003cPathBuf, CacheError\u003e {\n        // Check for PCLI2_CACHE_DIR environment variable first\n        if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            let mut cache_path = PathBuf::from(cache_dir_str);\n            cache_path.push(\"tenant_cache.json\");\n            return Ok(cache_path);\n        }\n\n        let mut path = dirs::cache_dir().ok_or_else(|| {\n            CacheError::Other(\"Could not determine cache directory\".to_string())\n        })?;\n        path.push(\"pcli2\");\n        path.push(\"tenant_cache.json\");\n        Ok(path)\n    }\n\n    /// Load cache from file\n    ///\n    /// # Returns\n    /// * `Ok(TenantCache)` - The loaded cache\n    /// * `Err` - If there was an error loading the cache\n    pub fn load() -\u003e Result\u003cTenantCache, CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n\n        if !path.exists() {\n            debug!(\"No tenant cache file found, creating new cache\");\n            return Ok(Self::new());\n        }\n\n        let data = std::fs::read_to_string(path)?;\n        let cache: TenantCache = serde_json::from_str(\u0026data)?;\n\n        debug!(\"Loaded tenant cache from file\");\n        Ok(cache)\n    }\n\n    /// Save cache to file\n    ///\n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully saved\n    /// * `Err` - If there was an error saving the cache\n    pub fn save(\u0026self) -\u003e Result\u003c(), CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        // Create cache directory if it doesn't exist\n        if let Some(parent) = path.parent() {\n            std::fs::create_dir_all(parent)?;\n        }\n\n        let cache_to_save = Self {\n            tenants: self.tenants.clone(),\n            last_updated_timestamp: self.last_updated_timestamp,\n        };\n\n        let data = serde_json::to_string_pretty(\u0026cache_to_save)?;\n        std::fs::write(path, data)?;\n        debug!(\"Saved tenant cache to file\");\n        Ok(())\n    }\n\n    /// Get all tenants from cache, fetching from API if not cached or expired\n    ///\n    /// # Arguments\n    /// * `api` - Reference to the API client to use for fetching if needed\n    /// * `refresh` - Whether to force refresh the cache\n    ///\n    /// # Returns\n    /// * `Ok(Vec\u003cTenantSetting\u003e)` - The list of tenants (from cache or API)\n    pub async fn get_all_tenants(\n        api: \u0026mut crate::physna_v3::PhysnaApiClient,\n        refresh: bool,\n    ) -\u003e Result\u003cVec\u003cTenantSetting\u003e, crate::physna_v3::ApiError\u003e {\n        if refresh {\n            trace!(\"Force refresh requested, fetching tenants from API\");\n            let tenants = api.list_tenants().await?;\n            // Update cache\n            let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n            cache.tenants = tenants.clone();\n            cache.last_updated_timestamp = Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs());\n            if let Err(e) = cache.save() {\n                warn!(\"Failed to save tenant cache: {}\", e);\n            }\n            return Ok(tenants);\n        }\n\n        let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n\n        // Check if we have cached data and if it's still valid (not expired)\n        if !cache.tenants.is_empty() \u0026\u0026 !cache.is_expired() {\n            trace!(\"Using existing cache for tenants\");\n            return Ok(cache.tenants.clone());\n        }\n\n        trace!(\"Cache expired or empty, fetching tenants from API\");\n        let tenants = api.list_tenants().await?;\n\n        // Update cache\n        cache.tenants = tenants.clone();\n        cache.last_updated_timestamp = Some(std::time::SystemTime::now()\n            .duration_since(std::time::UNIX_EPOCH)\n            .unwrap()\n            .as_secs());\n        if let Err(e) = cache.save() {\n            warn!(\"Failed to save tenant cache: {}\", e);\n        }\n\n        Ok(tenants)\n    }\n\n    /// Get cached tenants if available and not expired\n    ///\n    /// # Returns\n    /// * `Some(Vec\u003cTenantSetting\u003e)` - If tenants are cached and not expired\n    /// * `None` - If tenants are not cached or are expired\n    pub fn get_cached_tenants(\u0026self) -\u003e Option\u003cVec\u003cTenantSetting\u003e\u003e {\n        if !self.tenants.is_empty() \u0026\u0026 !self.is_expired() {\n            Some(self.tenants.clone())\n        } else {\n            None\n        }\n    }\n\n    /// Invalidate cache for all tenants\n    ///\n    /// This method clears the cached tenant list.\n    pub fn invalidate_all() -\u003e Result\u003c(), CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n        if path.exists() {\n            std::fs::remove_file(\u0026path)?;\n            trace!(\"Invalidated all tenant cache\");\n        }\n        Ok(())\n    }\n}\n\nimpl Default for TenantCache {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_tenant_cache_creation() {\n        let cache = TenantCache::new();\n        assert!(cache.tenants.is_empty());\n        assert!(cache.last_updated_timestamp.is_some());\n    }\n\n    #[test]\n    fn test_tenant_cache_is_expired_initially_false() {\n        let cache = TenantCache::new();\n        // A new cache shouldn't be expired immediately\n        assert!(!cache.is_expired());\n    }\n\n    #[test]\n    fn test_tenant_cache_creation_has_timestamp() {\n        let cache = TenantCache::new();\n        assert!(cache.last_updated_timestamp.is_some());\n    }\n}","traces":[{"line":24,"address":[],"length":0,"stats":{"Line":3}},{"line":26,"address":[],"length":0,"stats":{"Line":6}},{"line":27,"address":[],"length":0,"stats":{"Line":6}},{"line":35,"address":[],"length":0,"stats":{"Line":5}},{"line":36,"address":[],"length":0,"stats":{"Line":10}},{"line":37,"address":[],"length":0,"stats":{"Line":15}},{"line":38,"address":[],"length":0,"stats":{"Line":5}},{"line":42,"address":[],"length":0,"stats":{"Line":5}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":4}},{"line":55,"address":[],"length":0,"stats":{"Line":4}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":12}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":8}},{"line":65,"address":[],"length":0,"stats":{"Line":8}},{"line":66,"address":[],"length":0,"stats":{"Line":4}},{"line":74,"address":[],"length":0,"stats":{"Line":4}},{"line":75,"address":[],"length":0,"stats":{"Line":8}},{"line":77,"address":[],"length":0,"stats":{"Line":4}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":12}},{"line":83,"address":[],"length":0,"stats":{"Line":16}},{"line":85,"address":[],"length":0,"stats":{"Line":4}},{"line":86,"address":[],"length":0,"stats":{"Line":4}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":4}},{"line":125,"address":[],"length":0,"stats":{"Line":4}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":12}},{"line":144,"address":[],"length":0,"stats":{"Line":8}},{"line":145,"address":[],"length":0,"stats":{"Line":4}},{"line":146,"address":[],"length":0,"stats":{"Line":4}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}}],"covered":27,"coverable":77},{"path":["/","Users","julian","projects","physna","pcli2","tests","actions_tests.rs"],"content":"#[cfg(test)]\nmod actions_tests {\n    use clap::ArgMatches;\n\n    #[test]\n    fn test_actions_module_structure() {\n        // This test verifies that the actions module structure is accessible\n        // The actual functions will be tested in integration tests\n        assert!(true); // Basic test to ensure the module compiles\n    }\n\n    // Mock ArgMatches for testing\n    fn create_mock_arg_matches() -\u003e ArgMatches {\n        use clap::{Arg, ArgAction, Command};\n\n        let cmd = Command::new(\"test\")\n            .arg(Arg::new(\"dummy\")\n                 .long(\"dummy\")\n                 .action(ArgAction::SetTrue));\n\n        cmd.get_matches_from(vec![\"test\"])\n    }\n\n    #[tokio::test]\n    async fn test_list_assets_with_mock_args() {\n        // This test would normally call the list_assets function with mocked arguments\n        // For now, we'll just verify the function exists and can be called\n        let _args = create_mock_arg_matches();\n\n        // Since we can't easily mock the API calls without extensive setup,\n        // we'll just verify that the function signature is correct\n        // by checking that it compiles properly\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_print_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_create_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_create_asset_batch_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_update_asset_metadata_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_print_asset_metadata_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_delete_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_download_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_geometric_match_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_part_match_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_visual_match_asset_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n\n    #[tokio::test]\n    async fn test_create_asset_metadata_batch_with_mock_args() {\n        let _args = create_mock_arg_matches();\n        assert!(true);\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","tests","asset_tests.rs"],"content":"//! Integration tests for the asset command functionality.\n//!\n//! These tests verify that the asset commands work correctly with different\n//! options and formats, ensuring the CLI interface behaves as expected.\n\n#[cfg(test)]\nmod tests {\n    use assert_cmd::Command;\n    use predicates::prelude::*;\n\n    /// Test that the asset list command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows available options like --format, --pretty, and --headers\n    #[test]\n    fn test_asset_list_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"list\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"List all assets\"))\n            .stdout(predicate::str::contains(\"--format\"))\n            .stdout(predicate::str::contains(\"--pretty\"))\n            .stdout(predicate::str::contains(\"--headers\"));\n    }\n\n    /// Test that the asset get command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows available options like --format, --pretty, and --headers\n    #[test]\n    fn test_asset_get_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Get asset details\"))\n            .stdout(predicate::str::contains(\"--format\"))\n            .stdout(predicate::str::contains(\"--pretty\"))\n            .stdout(predicate::str::contains(\"--headers\"));\n    }\n\n    /// Test that the asset create command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --file and --folder-path or --folder-uuid\n    #[test]\n    fn test_asset_create_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"create\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Create a new asset by uploading a file\"))\n            .stdout(predicate::str::contains(\"--file\"))\n            .stdout(predicate::str::contains(\"--folder-path\"));\n    }\n\n    /// Test that the asset create-batch command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --files\n    #[test]\n    fn test_asset_create_batch_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"create-batch\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Create multiple assets by uploading files\"))\n            .stdout(predicate::str::contains(\"--files\"));\n    }\n\n    /// Test that the asset delete command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --uuid or --path\n    #[test]\n    fn test_asset_delete_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"delete\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Delete an asset\"))\n            .stdout(predicate::str::contains(\"--uuid\"))\n            .stdout(predicate::str::contains(\"--path\"));\n    }\n\n    /// Test that the asset download command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --uuid or --path\n    #[test]\n    fn test_asset_download_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"download\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Download asset file\"))\n            .stdout(predicate::str::contains(\"--uuid\"))\n            .stdout(predicate::str::contains(\"--path\"));\n    }\n\n\n    /// Test that all supported output formats are accepted by the asset get command.\n    ///\n    /// This test verifies that:\n    /// - Each supported format (json, csv) is accepted as a valid argument\n    /// - Commands with valid formats execute (may fail for other reasons like API access, but not format-related)\n    /// - The tree format is not supported for asset get command\n    #[test]\n    fn test_asset_get_command_supported_formats() {\n        // Test that supported formats are accepted by the CLI\n        let formats = vec![\"json\", \"csv\"];\n\n        for format in formats {\n            let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n            cmd.arg(\"asset\")\n                .arg(\"get\")\n                .arg(\"--uuid\")\n                .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test format acceptance\n                .arg(\"--format\")\n                .arg(format);\n\n            // For invalid UUID, we expect an error but not a format-related error\n            cmd.assert()\n                .failure();  // Will fail due to API access but not format-related\n        }\n\n        // Test that tree format is not supported (should fail)\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")\n            .arg(\"--format\")\n            .arg(\"tree\");\n\n        cmd.assert()\n            .failure()\n            .stderr(predicate::str::contains(\"invalid value 'tree'\"));\n    }\n\n\n\n    /// Test that the asset get command supports --pretty flag with JSON format.\n    ///\n    /// This test verifies that:\n    /// - The command accepts the --pretty flag\n    /// - The command processes the flag without format-related errors (may fail for other reasons)\n    #[test]\n    fn test_asset_get_command_pretty_format() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test flag acceptance\n            .arg(\"--format\")\n            .arg(\"json\")\n            .arg(\"--pretty\");\n\n        // Should fail due to invalid UUID but should accept the format flags\n        cmd.assert()\n            .failure();  // Will fail due to API access but should accept the flag\n    }\n\n    /// Test that the asset get command supports --headers flag with CSV format.\n    ///\n    /// This test verifies that:\n    /// - The command accepts the --headers flag\n    /// - The command processes the flag without format-related errors (may fail for other reasons)\n    #[test]\n    fn test_asset_get_command_headers_format() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test flag acceptance\n            .arg(\"--format\")\n            .arg(\"csv\")\n            .arg(\"--headers\");\n\n        // Should fail due to invalid UUID but should accept the format flags\n        cmd.assert()\n            .failure();  // Will fail due to API access but should accept the flag\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","tests","folder_list_test.rs"],"content":"//! Integration tests for the folder list command functionality.\\n//!\\n//! These tests verify that the folder list command works correctly with different\\n//! options and formats, ensuring the CLI interface behaves as expected.\\n\\n#[cfg(test)]\\nmod tests {\\n    use assert_cmd::Command;\\n    use predicates::prelude::*;\\n\\n    /// Test that the folder list command displays help information correctly\\n    /// when the --help flag is provided.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Help text contains the command description\\n    /// - Help text shows available options like --format and --tenant\\n    #[test]\\n    fn test_folder_list_command_help() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--help\\\");\\n        \\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::contains(\\\"List all folders\\\"))\\n            .stdout(predicate::str::contains(\\\"--format\\\"))\\n            .stdout(predicate::str::contains(\\\"--tenant\\\"));\\n    }\\n\\n    /// Test that the folder list command works without explicitly providing\\n    /// a tenant parameter.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output is in JSON format (default)\\n    /// - Output contains expected JSON structure with name and path fields\\n    #[test]\\n    fn test_folder_list_command_requires_tenant() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\");\\n        \\n        // When no tenant is provided, it should either show an error or list folders if there's a default\\n        // Based on the test output, it seems to be listing folders (which means there's a default tenant)\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::contains(\\\"[\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"name\\\\\\\"\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"path\\\\\\\"\\\"));\\n    }\\n\\n    /// Test that all supported output formats are accepted by the folder list command.\\n    ///\\n    /// This test verifies that:\\n    /// - Each supported format (json, csv, tree) is accepted as a valid argument\\n    /// - Commands with valid formats execute successfully\\n    /// - Appropriate error messages are shown for invalid tenants\\n    #[test]\\n    fn test_folder_list_command_supported_formats() {\\n        // Test that all supported formats are accepted by the CLI\\n        let formats = vec![\\\"json\\\", \\\"csv\\\", \\\"tree\\\"];\\n        \\n        for format in formats {\\n            let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n            cmd.arg(\\\"folder\\\")\\n                .arg(\\\"list\\\")\\n                .arg(\\\"--tenant\\\")\\n                .arg(\\\"test-tenant\\\")\\n                .arg(\\\"--format\\\")\\n                .arg(format);\\n            \\n            // For invalid tenant, we expect an error message about building folder hierarchy\\n            cmd.assert()\\n                .success()\\n                .stderr(predicate::str::contains(\\\"Error building folder hierarchy\\\"));\\n        }\\n    }\\n    \\n    /// Test that the folder list command produces correctly formatted JSON output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output starts with a JSON array opening bracket\\n    /// - Output contains the expected JSON field names\\n    #[test]\\n    fn test_folder_list_command_json_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"json\\\");\\n        \\n        // Should return JSON formatted folder list\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::starts_with(\\\"[\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"name\\\\\\\"\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"path\\\\\\\"\\\"));\\n    }\\n    \\n    /// Test that the folder list command produces correctly formatted CSV output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output starts with the expected CSV header row\\n    /// - Output contains at least one newline character\\n    #[test]\\n    fn test_folder_list_command_csv_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"csv\\\");\\n        \\n        // Should return CSV formatted folder list\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::starts_with(\\\"NAME,PATH\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\n\\\"));\\n    }\\n    \\n    /// Test that the folder list command works with tree format output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully when using tree format\\n    #[test]\\n    fn test_folder_list_command_tree_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"tree\\\");\\n        \\n        // Tree format should also return data (though implementation may vary)\\n        cmd.assert()\\n            .success();\\n    }\\n}","traces":[],"covered":0,"coverable":0}]};
        var previousData = {"files":[{"path":["/","Users","julian","projects","physna","pcli2","src","actions","assets.rs"],"content":"use std::{path::PathBuf, str::FromStr};\nuse clap::ArgMatches;\nuse uuid::Uuid;\nuse crate::actions::CliActionError;\nuse crate::{actions::folders::resolve_folder_uuid_by_path, commands::params::{PARAMETER_FILE, PARAMETER_FILES, PARAMETER_FOLDER_PATH, PARAMETER_FOLDER_UUID, PARAMETER_PATH, PARAMETER_UUID}, configuration::Configuration, error::CliError, error_utils, format::{OutputFormatter, CsvRecordProducer}, metadata::convert_single_metadata_to_json_value, model::{AssetList, Folder, normalize_path}, param_utils::{get_format_parameter_value, get_tenant}, physna_v3::{PhysnaApiClient, TryDefault}};\nuse indicatif::{MultiProgress, ProgressBar, ProgressStyle};\nuse tracing::{debug, trace};\n\npub async fn list_assets(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Listing assets...\");\n    \n    let format = get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // If a path is specified, get assets filtered by folder path\n    if let Some(path) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH) {\n        trace!(\"Listing assets for folder path: {}\", path);\n        \n        let path = normalize_path(path);\n        trace!(\"Normalized folder path: {}\", \u0026path);\n        \n        let assets = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, path.as_str()).await?;\n\n        println!(\"{}\", assets.format(format)?);\n    };\n    \n\n\tOk(())\n}\n\npub async fn print_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset get\\\" command...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let format = get_format_parameter_value(sub_matches).await;\n    \n    let asset_uuid_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n    \n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        let uuid = Uuid::from_str(uuid).unwrap(); \n        api.get_asset_by_uuid(\u0026tenant.uuid, \u0026uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset cache or fetch assets from API\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    println!(\"{}\", asset.format(format)?);        \n\n\tOk(())\n}\n\npub async fn create_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Executing file upload...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    // Check if the folder exists\n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n\n    let file_path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_FILE).ok_or(CliError::MissingRequiredArgument(\"file\".to_string()))?;\n                \n    // Extract filename from path for use in asset path construction\n    let file_name = file_path\n        .file_name()\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"Invalid file path\".to_string()))?\n        .to_str()\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"Invalid file name\".to_string()))?\n        .to_string();\n\n    \n    // Construct the full asset path by combining folder path with filename\n    let asset_path = match folder_path_param {\n        Some(folder_path) =\u003e {\n            if folder_path.is_empty() {\n                file_name.clone()\n            } else {\n                format!(\"{}/{}\", folder_path, file_name)\n            }\n        },\n        None =\u003e file_name.clone(),\n    };\n    \n    debug!(\"Creating asset with path: {}\", asset_path);\n\n    let asset = api.create_asset(\u0026tenant.uuid, \u0026file_path, \u0026asset_path, \u0026folder_uuid).await?;\n    println!(\"{}\", asset.format(format)?);\n\n    Ok(())\n}\n\npub async fn create_asset_batch(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n     trace!(\"Executing \\\"create asset batch\\\" command...\");\n    \n    let glob_pattern = sub_matches.get_one::\u003cString\u003e(PARAMETER_FILES)\n        .ok_or(CliError::MissingRequiredArgument(\"files\".to_string()))?\n        .clone();\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\")\n        .unwrap_or(\u00265);\n    let concurrent = *concurrent_param;\n    let show_progress = sub_matches.get_flag(\"progress\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    // Check if the folder exists\n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n\n    let assets = api.create_assets_batch(\u0026tenant.uuid, \u0026glob_pattern, Some(folder.path().as_str()), Some(\u0026folder_uuid), concurrent, show_progress).await?;\n    println!(\"{}\", AssetList::from(assets).format(format)?);\n        \n    Ok(())\n}\n\n\nuse std::collections::HashMap;\n\n/// Create metadata for multiple assets from a CSV file.\n///\n/// This function handles the \"asset metadata create-batch\" command, which creates or updates\n/// metadata for multiple assets from a CSV file.\npub async fn create_asset_metadata_batch(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"create asset metadata batch\\\" command...\");\n\n    let csv_file_path = sub_matches.get_one::\u003cstd::path::PathBuf\u003e(\"csv-file\")\n        .ok_or(CliError::MissingRequiredArgument(\"csv-file\".to_string()))?;\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Read the CSV file\n    let file = std::fs::File::open(csv_file_path)\n        .map_err(|e| CliError::ActionError(CliActionError::IoError(e)))?;\n    let mut reader = csv::Reader::from_reader(file);\n\n    // Parse the CSV records\n    let mut asset_metadata_map: HashMap\u003cString, HashMap\u003cString, serde_json::Value\u003e\u003e = HashMap::new();\n\n    for result in reader.records() {\n        let record: csv::StringRecord = result.map_err(|e| CliError::FormattingError(crate::format::FormattingError::CsvError(e)))?;\n\n        if record.len() \u003e= 3 {\n            let asset_path: \u0026str = record[0].trim();\n            let metadata_name: \u0026str = record[1].trim();\n            let metadata_value: \u0026str = record[2].trim();\n\n            // Use the same conversion logic as individual metadata command (default to text type)\n            let json_value = crate::metadata::convert_single_metadata_to_json_value(\n                metadata_name,  // name parameter (not used in function)\n                metadata_value,\n                \"text\"  // default to text type since CSV doesn't specify type\n            );\n\n            // Group metadata by asset path (strip leading slash if present for consistency with asset paths in system)\n            let clean_asset_path = asset_path.strip_prefix('/').unwrap_or(asset_path);\n            asset_metadata_map.entry(clean_asset_path.to_string())\n                .or_insert_with(HashMap::new)\n                .insert(metadata_name.to_string(), json_value);\n        }\n    }\n\n    // Process each asset with its metadata\n    let total_assets = asset_metadata_map.len();\n    let mut current_asset = 0;\n\n    for (asset_path, metadata) in \u0026asset_metadata_map {\n        if show_progress {\n            current_asset += 1;\n            eprint!(\"\\rProcessing asset {}/{}: {}\", current_asset, total_assets, asset_path);\n        }\n\n        // Get the asset by the normalized path\n        match api.get_asset_by_path(\u0026tenant.uuid, asset_path).await {\n            Ok(asset) =\u003e {\n                // Update the asset's metadata with automatic registration of new keys\n                if let Err(e) = api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026asset.uuid(), metadata).await {\n                    error_utils::report_error_with_remediation(\n                        \u0026format!(\"Failed to update metadata for asset '{}': {}\", asset_path, e),\n                        \u0026[\n                            \"Verify metadata field names and values are valid\",\n                            \"Check that you have sufficient permissions to modify this asset\",\n                            \"Verify your network connectivity\",\n                            \"Confirm the asset hasn't been deleted or modified recently\"\n                        ]\n                    );\n                }\n            }\n            Err(_e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Asset not found: '{}'\", asset_path),\n                    \u0026[\n                        \"Verify the asset path in your CSV file matches the actual asset path in Physna\",\n                        \"Check that the asset hasn't been deleted from the system\",\n                        \"Verify you're using the correct tenant for this asset\",\n                        \"Check for path format mismatches (e.g., leading slash differences)\",\n                        \"Verify the asset exists using 'pcli2 asset list --folder-path /' or similar command\"\n                    ]\n                );\n            }\n        }\n    }\n\n    if show_progress {\n        eprintln!(); // New line after progress indicator\n    }\n\n    // No output on success (per UNIX best practices)\n    Ok(())\n}\n\n/// Update an asset's metadata with the specified key-value pair.\n///\n/// This function handles the \"asset metadata create\" command, which adds or updates\n/// metadata for a specific asset identified by either its UUID or path.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the metadata was updated successfully\n/// * `Err(CliError)` - If an error occurred during the update\npub async fn update_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Execute \\\"asset metadata create\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n\n    // Get metadata parameters from command line\n    let metadata_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n        .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n    let metadata_value = sub_matches.get_one::\u003cString\u003e(\"value\")\n        .ok_or(CliError::MissingRequiredArgument(\"value\".to_string()))?;\n    let metadata_type = sub_matches.get_one::\u003cString\u003e(\"type\")\n        .map(|s| s.as_str())\n        .unwrap_or(\"text\");\n\n    // Convert the single metadata entry to JSON value using shared function\n    let json_value = convert_single_metadata_to_json_value(\n        metadata_name,\n        metadata_value,\n        metadata_type\n    );\n\n    // Create a HashMap with the single metadata entry\n    // This hashmap represents the desired metadata fields to update\n    let mut metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e =\n        std::collections::HashMap::new();\n    metadata.insert(metadata_name.clone(), json_value);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Update the asset's metadata with automatic registration of new keys\n    api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026asset.uuid(), \u0026metadata).await?;\n\n    // No output on success (per requirements)\n\n    Ok(())\n}\n\npub async fn print_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let format = get_format_parameter_value(sub_matches).await;\n    \n    let asset_uuid_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PATH);\n    \n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        let uuid = Uuid::from_str(uuid).unwrap(); \n        api.get_asset_by_uuid(\u0026tenant.uuid, \u0026uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset cache or fetch assets from API\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n    \n    match asset.metadata() {\n        Some(metadata) =\u003e println!(\"{}\", metadata.format(format)?),\n        None =\u003e ()\n    };\n            \n    Ok(())\n\n}\n\n/// Delete an asset by UUID or path.\n///\n/// This function handles the \"asset delete\" command, removing a specific asset\n/// identified by either its UUID or path from the Physna API.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the asset was deleted successfully\n/// * `Err(CliError)` - If an error occurred during deletion\npub async fn delete_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset delete\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Delete the asset\n    api.delete_asset(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string()).await?;\n\n    Ok(())\n}\n\n/// Download an asset by UUID or path to a local file.\n///\n/// This function handles the \"asset download\" command, retrieving a specific asset\n/// identified by either its UUID or path from the Physna API and saving it to a local file.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the asset was downloaded successfully\n/// * `Err(CliError)` - If an error occurred during download\npub async fn download_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing \\\"asset download\\\" command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Get the output file path\n    let output_file_path = if let Some(output_path) = sub_matches.get_one::\u003cPathBuf\u003e(crate::commands::params::PARAMETER_FILE) {\n        output_path.clone()\n    } else {\n        // Use the asset name as the default output file name\n        let asset_name = asset.name();\n        let mut path = std::path::PathBuf::new();\n        path.push(asset_name);\n        path\n    };\n\n    // Download the asset file\n    let file_content = api.download_asset(\n        \u0026tenant.uuid.to_string(),\n        \u0026asset.uuid().to_string()\n    ).await?;\n\n    // Write the file content to the output file\n    std::fs::write(\u0026output_file_path, file_content).map_err(|e| CliActionError::IoError(e))?;\n\n    Ok(())\n}\n\npub async fn geometric_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing geometric match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters directly from sub_matches since geometric match commands have all format flags\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT).unwrap();\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform geometric search\n    let mut search_results = api.geometric_search(\u0026tenant.uuid, \u0026asset.uuid(), threshold).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.match_percentage\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.match_percentage\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    let enhanced_response = crate::model::EnhancedGeometricSearchResponse {\n        reference_asset: reference_asset_response,\n        matches: search_results.matches,\n    };\n\n    println!(\"{}\", enhanced_response.format(format)?);\n\n    Ok(())\n}\n\npub async fn part_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing part match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters directly from sub_matches since part match commands have all format flags\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform part search\n    let mut search_results = api.part_search(\u0026tenant.uuid, \u0026asset.uuid(), threshold).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.forward_match_percentage.unwrap_or(0.0),\n                match_result.reverse_match_percentage.unwrap_or(0.0)\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n                match_result.forward_match_percentage.unwrap_or(0.0),\n                match_result.reverse_match_percentage.unwrap_or(0.0)\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    let enhanced_response = crate::model::EnhancedPartSearchResponse {\n        reference_asset: reference_asset_response,\n        matches: search_results.matches,\n    };\n\n    // Format the response considering the metadata flag\n    println!(\"{}\", enhanced_response.format_with_metadata_flag(format, with_metadata)?);\n\n    Ok(())\n}\n\npub async fn geometric_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing geometric match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .map(|s| s.to_string())\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT).unwrap_or(\u0026\"json\".to_string()).clone();\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedGeometricSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting geometric search...\");\n            }\n\n            let result = match api_clone.geometric_search(\u0026tenant_uuid, \u0026asset_uuid, threshold).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.match_percentage\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=geometric\u0026matchPercentage={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.match_percentage\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedGeometricSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform geometric search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::GeometricMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    format!(\"{}\", match_pair.match_percentage),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::GeometricMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn part_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing part match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .cloned()\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get format parameters\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedPartSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting part search...\");\n            }\n\n            let result = match api_clone.part_search(\u0026tenant_uuid, \u0026asset_uuid, threshold).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.forward_match_percentage.unwrap_or(0.0),\n                                match_result.reverse_match_percentage.unwrap_or(0.0)\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=part\u0026forwardMatch={:.2}\u0026reverseMatch={:.2}\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                                match_result.forward_match_percentage.unwrap_or(0.0),\n                                match_result.reverse_match_percentage.unwrap_or(0.0)\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedPartSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform part search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::PartMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.forward_match_percentage.map_or_else(|| \"0.0\".to_string(), |val| format!(\"{}\", val)),\n                    match_pair.reverse_match_percentage.map_or_else(|| \"0.0\".to_string(), |val| format!(\"{}\", val)),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::PartMatchPair::from_reference_and_match(\n                        enhanced_response.reference_asset.clone(),\n                        match_result\n                    ));\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn visual_match_asset(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing visual match command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get format parameters directly from sub_matches since visual match commands have all format flags\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Perform visual search\n    let mut search_results = api.visual_search(\u0026tenant.uuid, \u0026asset.uuid()).await?;\n\n    // Load configuration to get the UI base URL\n    let configuration = crate::configuration::Configuration::load_or_create_default()\n        .map_err(|e| CliError::ConfigurationError(\n            crate::configuration::ConfigurationError::FailedToLoadData {\n                cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n            }\n        ))?;\n    let ui_base_url = configuration.get_ui_base_url();\n\n    // Populate comparison URLs for each match\n    for match_result in \u0026mut search_results.matches {\n        let base_url = ui_base_url.trim_end_matches('/');\n        let comparison_url = if base_url.ends_with(\"/tenants\") {\n            format!(\n                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n            )\n        } else {\n            format!(\n                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                base_url, // Use configurable UI base URL without trailing slash\n                tenant.name, // Use tenant short name in path\n                asset.uuid(),\n                match_result.asset.uuid,\n                tenant.uuid, // Use tenant UUID in query params\n                tenant.uuid, // Use tenant UUID in query params\n            )\n        };\n        match_result.comparison_url = Some(comparison_url);\n    }\n\n    // Create a basic AssetResponse from the asset for the reference\n    let metadata_map = if let Some(asset_metadata) = asset.metadata() {\n        // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n        let mut map = std::collections::HashMap::new();\n        for key in asset_metadata.keys() {\n            if let Some(value) = asset_metadata.get(key) {\n                map.insert(key.clone(), serde_json::Value::String(value.clone()));\n            }\n        }\n        map\n    } else {\n        std::collections::HashMap::new()\n    };\n\n    let reference_asset_response = crate::model::AssetResponse {\n        uuid: asset.uuid(),\n        tenant_id: tenant.uuid, // Use the tenant UUID\n        path: asset.path(),\n        folder_id: None, // We don't have folder ID in the Asset struct\n        asset_type: \"asset\".to_string(), // Default asset type\n        created_at: \"\".to_string(), // Placeholder for creation time\n        updated_at: \"\".to_string(), // Placeholder for update time\n        state: \"active\".to_string(), // Default state\n        is_assembly: false, // Default is not assembly\n        metadata: metadata_map, // Include the asset's metadata\n        parent_folder_id: None, // No parent folder ID\n        owner_id: None, // No owner ID\n    };\n\n    // Create enhanced response that includes the reference asset information\n    // Create visual match pairs that exclude match percentages since visual search doesn't have them\n    let visual_match_pairs: Vec\u003ccrate::model::VisualMatchPair\u003e = search_results.matches\n        .into_iter()\n        .map(|match_result| crate::model::VisualMatchPair {\n            reference_asset: reference_asset_response.clone(),\n            candidate_asset: match_result.asset,\n            comparison_url: match_result.comparison_url,\n        })\n        .collect();\n\n    // Format the response based on the output format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            println!(\"{}\", serde_json::to_string_pretty(\u0026visual_match_pairs)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            let mut wtr = csv::Writer::from_writer(vec![]);\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026visual_match_pairs {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::VisualMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in \u0026visual_match_pairs {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            let output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            println!(\"{}\", serde_json::to_string_pretty(\u0026visual_match_pairs)?);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn visual_match_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing visual match folder command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get folder paths\n    let folder_paths: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(crate::commands::params::PARAMETER_FOLDER_PATH)\n        .ok_or(CliError::MissingRequiredArgument(\"folder-path\".to_string()))?\n        .cloned()\n        .collect();\n\n    // Get format parameters\n    let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        // Check environment variable first, then use default\n        if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n            env_format\n        } else {\n            \"json\".to_string()\n        }\n    };\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    let with_metadata = sub_matches.get_flag(crate::commands::params::PARAMETER_METADATA);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get concurrent and progress parameters\n    let concurrent_param = sub_matches.get_one::\u003cusize\u003e(\"concurrent\").copied();\n    let concurrent = match concurrent_param {\n        Some(val) =\u003e {\n            if val \u003c 1 || val \u003e 10 {\n                return Err(CliError::MissingRequiredArgument(format!(\"Invalid value for '--concurrent': must be between 1 and 10, got {}\", val)));\n            }\n            val\n        },\n        None =\u003e 1, // Default value\n    };\n\n    let show_progress = sub_matches.get_flag(\"progress\");\n\n    // Collect all assets from the specified folders\n    let mut all_assets = std::collections::HashMap::new();\n\n    for folder_path in \u0026folder_paths {\n        trace!(\"Listing assets for folder path: {}\", folder_path);\n        let assets_response = api.list_assets_by_parent_folder_path(\u0026tenant.uuid, folder_path.as_str()).await?;\n\n        for asset in assets_response.get_all_assets() {\n            all_assets.insert(asset.uuid(), asset.clone());\n        }\n    }\n\n    trace!(\"Found {} assets across all folders\", all_assets.len());\n\n    if all_assets.is_empty() {\n        error_utils::report_error_with_remediation(\n            \u0026\"No assets found in the specified folder(s)\",\n            \u0026[\n                \"Verify the folder path is correct\",\n                \"Check that the folder contains assets\",\n                \"Ensure you have permissions to access the specified folder(s)\"\n            ]\n        );\n        return Ok(());\n    }\n\n    // Create multi-progress bar if show_progress is true\n    let multi_progress = if show_progress {\n        let mp = MultiProgress::new();\n\n        // Add an overall progress bar\n        let overall_pb = mp.add(ProgressBar::new(all_assets.len() as u64));\n        overall_pb.set_style(\n            ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) - Overall Progress\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\")\n        );\n        Some((mp, overall_pb))\n    } else {\n        None\n    };\n\n    // Use a semaphore to limit concurrent operations\n    let semaphore = std::sync::Arc::new(tokio::sync::Semaphore::new(concurrent));\n\n    // Prepare for concurrent processing\n    let mut all_matches = Vec::new();\n\n    // Use a set to track unique pairs to avoid duplicates (reference UUID, candidate UUID)\n    let mut seen_pairs = std::collections::HashSet::new();\n\n    // Create tasks for concurrent processing\n    type TaskResult = Result\u003cVec\u003ccrate::model::EnhancedPartSearchResponse\u003e, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e;\n    let mut tasks: Vec\u003ctokio::task::JoinHandle\u003cTaskResult\u003e\u003e = Vec::new();\n    for (asset_uuid, asset) in \u0026all_assets {\n        let semaphore = semaphore.clone();\n        let mut api_clone = api.clone(); // Clone the API client\n        let tenant_uuid = tenant.uuid;\n        let asset_uuid = *asset_uuid;\n        let asset_clone = asset.clone();\n        let folder_paths_clone = folder_paths.clone();\n        let tenant_clone = tenant.clone();\n        let multi_progress_clone = multi_progress.clone();\n\n        let task = tokio::spawn(async move {\n            let _permit = semaphore.acquire().await.unwrap();\n\n            // Create individual progress bar for this task if multi-progress is enabled\n            let individual_pb = if let Some((ref mp, _)) = multi_progress_clone {\n                let pb = mp.add(ProgressBar::new_spinner());\n                pb.set_style(\n                    ProgressStyle::default_spinner()\n                        .template(\u0026format!(\"{{spinner:.green}} Processing: {} {{msg}}\", asset_clone.name()))\n                        .unwrap()\n                );\n                Some(pb)\n            } else {\n                None\n            };\n\n            // Update the progress bar to show that we're starting the search\n            if let Some(ref pb) = individual_pb {\n                pb.set_message(\"Starting visual search...\");\n            }\n\n            let result = match api_clone.visual_search(\u0026tenant_uuid, \u0026asset_uuid).await {\n                Ok(search_results) =\u003e {\n                    // Update progress bar to show processing matches\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Processing {} matches...\", search_results.matches.len()));\n                    }\n\n                    let mut asset_matches = Vec::new();\n\n                    for mut match_result in search_results.matches {\n                        // Skip if the match is with the same asset (self-match)\n                        if match_result.asset.uuid == asset_uuid {\n                            continue;\n                        }\n\n                        // Load configuration to get the UI base URL\n                        let configuration = crate::configuration::Configuration::load_or_create_default()\n                            .map_err(|e| CliError::ConfigurationError(\n                                crate::configuration::ConfigurationError::FailedToLoadData {\n                                    cause: Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e,\n                                }\n                            ))?;\n                        let ui_base_url = configuration.get_ui_base_url();\n\n                        // Populate comparison URL for this match\n                        let base_url = ui_base_url.trim_end_matches('/');\n                        let comparison_url = if base_url.ends_with(\"/tenants\") {\n                            format!(\n                                \"{}/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                            )\n                        } else {\n                            format!(\n                                \"{}/tenants/{}/compare?asset1Id={}\u0026asset2Id={}\u0026tenant1Id={}\u0026tenant2Id={}\u0026searchType=visual\",\n                                base_url, // Use configurable UI base URL without trailing slash\n                                tenant_clone.name, // Use tenant short name in path\n                                asset_uuid,\n                                match_result.asset.uuid,\n                                tenant_uuid, // Use tenant UUID in query params\n                                tenant_uuid, // Use tenant UUID in query params\n                            )\n                        };\n                        match_result.comparison_url = Some(comparison_url);\n\n                        // Check if we want to include matches based on exclusive flag\n                        let candidate_in_specified_folders = folder_paths_clone.iter().any(|folder_path| {\n                            match_result.asset.path.starts_with(folder_path)\n                        });\n\n                        if exclusive \u0026\u0026 !candidate_in_specified_folders {\n                            continue;\n                        }\n\n                        // Create the enhanced response structure for this match\n                        let metadata_map = if let Some(asset_metadata) = asset_clone.metadata() {\n                            // Convert AssetMetadata to HashMap\u003cString, serde_json::Value\u003e\n                            let mut map = std::collections::HashMap::new();\n                            for key in asset_metadata.keys() {\n                                if let Some(value) = asset_metadata.get(key) {\n                                    map.insert(key.clone(), serde_json::Value::String(value.clone()));\n                                }\n                            }\n                            map\n                        } else {\n                            std::collections::HashMap::new()\n                        };\n\n                        let reference_asset_response = crate::model::AssetResponse {\n                            uuid: asset_uuid,\n                            tenant_id: tenant_uuid,\n                            path: asset_clone.path(),\n                            folder_id: None,\n                            asset_type: \"asset\".to_string(), // Default asset type\n                            created_at: \"\".to_string(), // Placeholder for creation time\n                            updated_at: \"\".to_string(), // Placeholder for update time\n                            state: \"active\".to_string(), // Default state\n                            is_assembly: false, // Default is not assembly\n                            metadata: metadata_map,\n                            parent_folder_id: None, // No parent folder ID\n                            owner_id: None, // No owner ID\n                        };\n\n                        let enhanced_match = crate::model::EnhancedPartSearchResponse {\n                            reference_asset: reference_asset_response,\n                            matches: vec![match_result.clone()],\n                        };\n\n                        asset_matches.push(enhanced_match);\n                    }\n\n                    // Update progress bar to show completion\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(format!(\"Found {} matches\", asset_matches.len()));\n                    }\n\n                    Ok(asset_matches)\n                }\n                Err(e) =\u003e {\n                    error_utils::report_warning(\u0026format!(\"üîç Failed to perform visual search for asset {}: {}\", asset_clone.name(), e));\n                    if let Some(ref pb) = individual_pb {\n                        pb.set_message(\"Failed\");\n                    }\n                    Ok(Vec::new()) // Return empty vector on error\n                }\n            };\n\n            // Remove the individual progress bar when done\n            if let Some(pb) = individual_pb {\n                pb.finish_and_clear();\n            }\n\n            result\n        });\n\n        tasks.push(task);\n    }\n\n    // Process tasks and collect results\n    for task in tasks {\n        match task.await {\n            Ok(Ok(asset_matches)) =\u003e {\n                for enhanced_match in asset_matches {\n                    // Apply duplicate filtering to each match\n                    for match_result in \u0026enhanced_match.matches {\n                        // Create a unique pair identifier to avoid duplicates\n                        // We want to avoid having both (A,B) and (B,A) in results\n                        let (ref_uuid, cand_uuid) = if enhanced_match.reference_asset.uuid \u003c match_result.asset.uuid {\n                            (enhanced_match.reference_asset.uuid, match_result.asset.uuid)\n                        } else {\n                            (match_result.asset.uuid, enhanced_match.reference_asset.uuid)\n                        };\n\n                        let pair_key = (ref_uuid, cand_uuid);\n\n                        if !seen_pairs.contains(\u0026pair_key) {\n                            seen_pairs.insert(pair_key);\n                            all_matches.push(enhanced_match.clone());\n                        }\n                    }\n                }\n            }\n            Ok(Err(e)) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Error processing asset: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify the asset exists and is accessible\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n            Err(e) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026format!(\"Task failed: {:?}\", e),\n                    \u0026[\n                        \"Check your network connection\",\n                        \"Verify your authentication credentials are valid\",\n                        \"Retry the operation\"\n                    ]\n                );\n            }\n        }\n\n        if let Some((_, ref overall_pb)) = multi_progress {\n            overall_pb.inc(1);\n        }\n    }\n\n    if let Some((_, ref overall_pb)) = multi_progress {\n        overall_pb.finish_with_message(format!(\"Processed {} assets. Found {} unique matches.\", all_assets.len(), all_matches.len()));\n    }\n\n    // Output the results based on format\n    match format {\n        crate::format::OutputFormat::Json(_) =\u003e {\n            // For JSON, we need to flatten all matches into a single array\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n        crate::format::OutputFormat::Csv(_) =\u003e {\n            // For CSV, we can output all matches together\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n\n            // For CSV with metadata, we need to create a custom implementation\n            let mut wtr = csv::Writer::from_writer(vec![]);\n            let output;\n\n            // Pre-calculate the metadata keys that will be used for headers and all records\n            let mut header_metadata_keys = Vec::new();\n            if with_metadata {\n                // Collect all unique metadata keys from ALL match pairs for consistent headers\n                let mut all_metadata_keys = std::collections::HashSet::new();\n                for match_pair in \u0026flattened_matches {\n                    for key in match_pair.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                    for key in match_pair.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n                }\n\n                // Sort metadata keys for consistent column ordering\n                let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                sorted_keys.sort();\n                header_metadata_keys = sorted_keys;\n            }\n\n            if with_headers {\n                // Build header with metadata columns\n                let mut base_headers = crate::model::VisualMatchPair::csv_header();\n\n                if with_metadata {\n                    // Add metadata columns with prefixes\n                    for key in \u0026header_metadata_keys {\n                        base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                        base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_headers.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for match_pair in flattened_matches {\n                let mut base_values = vec![\n                    match_pair.reference_asset.path.clone(),\n                    match_pair.candidate_asset.path.clone(),\n                    match_pair.reference_asset.uuid.to_string(),\n                    match_pair.candidate_asset.uuid.to_string(),\n                    match_pair.comparison_url.clone().unwrap_or_default(),\n                ];\n\n                if with_metadata {\n                    // Add metadata values for each key that was included in the header\n                    for key in \u0026header_metadata_keys {\n                        // Add reference asset metadata value\n                        let ref_value = match_pair.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = match_pair.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n                }\n\n                if let Err(e) = wtr.serialize(base_values.as_slice()) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            output = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n\n            print!(\"{}\", output);\n        }\n        _ =\u003e {\n            // Default to JSON\n            let mut flattened_matches = Vec::new();\n            for enhanced_response in all_matches {\n                for match_result in enhanced_response.matches {\n                    flattened_matches.push(crate::model::VisualMatchPair {\n                        reference_asset: enhanced_response.reference_asset.clone(),\n                        candidate_asset: match_result.asset,\n                        comparison_url: match_result.comparison_url,\n                    });\n                }\n            }\n            println!(\"{}\", serde_json::to_string_pretty(\u0026flattened_matches)?);\n        }\n    }\n\n    Ok(())\n}\n\n/// Delete specific metadata fields from an asset.\n///\n/// This function handles the \"asset metadata delete\" command, which removes\n/// specified metadata fields from a specific asset identified by either its UUID or path.\n///\n/// # Arguments\n///\n/// * `sub_matches` - The command-line argument matches containing the command parameters\n///\n/// # Returns\n///\n/// * `Ok(())` - If the metadata was deleted successfully\n/// * `Err(CliError)` - If an error occurred during the deletion\npub async fn delete_asset_metadata(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Execute \\\"asset metadata delete\\\" command...\");\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let asset_uuid_param = sub_matches.get_one::\u003cUuid\u003e(crate::commands::params::PARAMETER_UUID);\n    let asset_path_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_PATH);\n\n    // Get metadata name parameter from command line\n    let metadata_names = sub_matches.get_many::\u003cString\u003e(\"field_name\")\n        .ok_or(CliError::MissingRequiredArgument(\"field_name\".to_string()))?\n        .map(|s| s.as_str())\n        .collect::\u003cVec\u003c_\u003e\u003e();\n\n    // Resolve asset ID from either UUID parameter or path\n    let asset = if let Some(uuid) = asset_uuid_param {\n        api.get_asset_by_uuid(\u0026tenant.uuid, uuid).await?\n    } else if let Some(asset_path) = asset_path_param {\n        // Get asset by path\n        api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either asset UUID or path must be provided\".to_string()));\n    };\n\n    // Delete the specified metadata fields using the dedicated API endpoint\n    let metadata_keys: Vec\u003c\u0026str\u003e = metadata_names.iter().map(|s| s.as_ref()).collect();\n    api.delete_asset_metadata(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string(), metadata_keys).await?;\n\n    Ok(())\n}\n\n/// Apply metadata inference from a reference asset to geometrically similar assets\n///\n/// This function finds geometrically similar assets to a reference asset and copies specified metadata fields\n/// from the reference to the similar assets.\n///\n/// # Arguments\n/// * `sub_matches` - The command line arguments\n///\n/// # Returns\n/// * `Ok(())` - If the operation completed successfully\n/// * `Err(CliError)` - If an error occurred during the operation\npub async fn metadata_inference(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    trace!(\"Executing metadata inference command...\");\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Get the reference asset path\n    let asset_path = sub_matches.get_one::\u003cString\u003e(\"path\")\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"path\".to_string()))?;\n\n    // Get the metadata field names to copy\n    let metadata_names: Vec\u003cString\u003e = sub_matches\n        .get_many::\u003cString\u003e(\"inference_name\")\n        .ok_or_else(|| CliError::MissingRequiredArgument(\"name\".to_string()))?\n        .map(|s| s.to_string())\n        .collect();\n\n    // Get threshold parameter\n    let threshold = sub_matches.get_one::\u003cf64\u003e(\"threshold\")\n        .copied()\n        .unwrap_or(80.0);\n\n    // Get exclusive flag\n    let exclusive = sub_matches.get_flag(\"exclusive\");\n\n    // Get format parameters\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n        .map(|s| s.as_str())\n        .unwrap_or(\"json\");\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(format_str, format_options.clone())\n        .map_err(|e| CliActionError::FormattingError(crate::format::FormattingError::FormatFailure { cause: Box::new(e) }))?;\n\n    // Get the reference asset\n    let reference_asset = api.get_asset_by_path(\u0026tenant.uuid, asset_path).await?;\n\n    // Check if the reference asset has any of the requested metadata fields BEFORE performing expensive geometric search\n    let reference_metadata = reference_asset.metadata();\n    let mut available_fields = Vec::new();\n    if let Some(asset_metadata) = reference_metadata {\n        for field_name in \u0026metadata_names {\n            if asset_metadata.get(field_name).is_some() {\n                available_fields.push(field_name.clone());\n            }\n        }\n    }\n\n    // Fail fast if no requested fields exist in the reference asset\n    if available_fields.is_empty() {\n        return Err(CliError::from(CliActionError::MissingRequiredArgument(format!(\n            \"Reference asset '{}' has no metadata fields matching: {:?}\", asset_path, metadata_names\n        ))));\n    }\n\n    // Only perform expensive geometric search if we know we have fields to copy\n    let search_results = api.geometric_search(\u0026tenant.uuid, \u0026reference_asset.uuid(), threshold).await?;\n\n    let mut assets_updated = Vec::new();\n\n    // Extract the parent folder path from the reference asset\n    let reference_parent_folder_path = {\n        let path_str = reference_asset.path().to_string();\n        let path_parts: Vec\u003c\u0026str\u003e = path_str.split('/').collect();\n        if path_parts.len() \u003e 1 {\n            // Join all parts except the last one (filename) to get the parent folder path\n            path_parts[..path_parts.len()-1].join(\"/\")\n        } else {\n            // If there's only one part, the parent is root\n            \"\".to_string()\n        }\n    };\n\n    for match_result in search_results.matches {\n        // If exclusive flag is set, only process assets in the same parent folder\n        if exclusive {\n            let candidate_parent_folder_path = {\n                let path_str = match_result.asset.path.clone();\n                let path_parts: Vec\u003c\u0026str\u003e = path_str.split('/').collect();\n                if path_parts.len() \u003e 1 {\n                    path_parts[..path_parts.len()-1].join(\"/\")\n                } else {\n                    \"\".to_string()\n                }\n            };\n\n            // Skip if the candidate asset is not in the same parent folder as the reference\n            if candidate_parent_folder_path != reference_parent_folder_path {\n                continue;\n            }\n        }\n\n        // Create a new metadata map with only the specified fields from the reference asset\n        let mut new_metadata_map = std::collections::HashMap::new();\n\n        if let Some(asset_metadata) = reference_metadata {\n            for field_name in \u0026available_fields {\n                if let Some(value) = asset_metadata.get(field_name) {\n                    new_metadata_map.insert(field_name.clone(), serde_json::Value::String(value.clone()));\n                }\n            }\n        }\n\n        // Update the similar asset with the copied metadata with automatic registration of new keys\n        if !new_metadata_map.is_empty() {\n            api.update_asset_metadata_with_registration(\u0026tenant.uuid, \u0026match_result.asset.uuid, \u0026new_metadata_map).await?;\n\n            // Track which assets were updated\n            assets_updated.push((match_result.asset.path.clone(), new_metadata_map.clone()));\n        }\n    }\n\n    // Create a response structure to output the results\n    let response = serde_json::json!({\n        \"reference_asset_path\": asset_path,\n        \"reference_asset_uuid\": reference_asset.uuid(),\n        \"threshold\": threshold,\n        \"fields_copied\": metadata_names,\n        \"assets_updated\": assets_updated.len(),\n        \"updated_assets\": assets_updated\n    });\n\n    match format {\n        crate::format::OutputFormat::Json(options) =\u003e {\n            if options.pretty {\n                println!(\"{}\", serde_json::to_string_pretty(\u0026response)?);\n            } else {\n                println!(\"{}\", serde_json::to_string(\u0026response)?);\n            }\n        }\n        crate::format::OutputFormat::Csv(options) =\u003e {\n            // For CSV output, create a simple table\n            let mut wtr = csv::Writer::from_writer(vec![]);\n\n            if options.with_headers {\n                if let Err(e) = wtr.serialize(\u0026[\"REFERENCE_ASSET_PATH\", \"CANDIDATE_ASSET_PATH\", \"FIELD_NAME\", \"FIELD_VALUE\", \"THRESHOLD\"]) {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                }\n            }\n\n            for (candidate_asset_path, metadata_map) in \u0026assets_updated {\n                for (field_name, field_value) in metadata_map {\n                    if let Err(e) = wtr.serialize(\u0026[\n                        asset_path,  // REFERENCE_ASSET_PATH - the reference asset path\n                        candidate_asset_path,  // CANDIDATE_ASSET_PATH - the asset that received the metadata\n                        field_name,  // FIELD_NAME\n                        field_value.as_str().unwrap_or(\"\"), // FIELD_VALUE\n                        \u0026threshold.to_string() // THRESHOLD\n                    ]) {\n                        return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvError(e))));\n                    }\n                }\n            }\n\n            let data = match wtr.into_inner() {\n                Ok(data) =\u003e data,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::CsvIntoInnerError(e))));\n                }\n            };\n            let csv_string = match String::from_utf8(data) {\n                Ok(s) =\u003e s,\n                Err(e) =\u003e {\n                    return Err(CliError::from(CliActionError::FormattingError(crate::format::FormattingError::Utf8Error(e))));\n                }\n            };\n            print!(\"{}\", csv_string);\n        }\n        _ =\u003e {\n            // Default to JSON\n            if format_options.pretty {\n                println!(\"{}\", serde_json::to_string_pretty(\u0026response)?);\n            } else {\n                println!(\"{}\", serde_json::to_string(\u0026response)?);\n            }\n        }\n    }\n\n    Ok(())\n}","traces":[{"line":9,"address":[],"length":0,"stats":{"Line":0}},{"line":10,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":13,"address":[],"length":0,"stats":{"Line":0}},{"line":14,"address":[],"length":0,"stats":{"Line":0}},{"line":15,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":8}},{"line":34,"address":[],"length":0,"stats":{"Line":4}},{"line":36,"address":[],"length":0,"stats":{"Line":8}},{"line":37,"address":[],"length":0,"stats":{"Line":8}},{"line":38,"address":[],"length":0,"stats":{"Line":20}},{"line":39,"address":[],"length":0,"stats":{"Line":12}},{"line":41,"address":[],"length":0,"stats":{"Line":16}},{"line":42,"address":[],"length":0,"stats":{"Line":16}},{"line":45,"address":[],"length":0,"stats":{"Line":8}},{"line":46,"address":[],"length":0,"stats":{"Line":16}},{"line":47,"address":[],"length":0,"stats":{"Line":16}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":236,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":245,"address":[],"length":0,"stats":{"Line":0}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":295,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":330,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":396,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":415,"address":[],"length":0,"stats":{"Line":0}},{"line":417,"address":[],"length":0,"stats":{"Line":0}},{"line":418,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":421,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":437,"address":[],"length":0,"stats":{"Line":0}},{"line":440,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":461,"address":[],"length":0,"stats":{"Line":0}},{"line":462,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":476,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":497,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":504,"address":[],"length":0,"stats":{"Line":0}},{"line":505,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":516,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}},{"line":557,"address":[],"length":0,"stats":{"Line":0}},{"line":558,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":561,"address":[],"length":0,"stats":{"Line":0}},{"line":562,"address":[],"length":0,"stats":{"Line":0}},{"line":563,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":576,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":581,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":585,"address":[],"length":0,"stats":{"Line":0}},{"line":586,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":589,"address":[],"length":0,"stats":{"Line":0}},{"line":592,"address":[],"length":0,"stats":{"Line":0}},{"line":597,"address":[],"length":0,"stats":{"Line":0}},{"line":598,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":602,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":618,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":626,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":0}},{"line":636,"address":[],"length":0,"stats":{"Line":0}},{"line":637,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":642,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":652,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":678,"address":[],"length":0,"stats":{"Line":0}},{"line":679,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":684,"address":[],"length":0,"stats":{"Line":0}},{"line":686,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":695,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":0}},{"line":697,"address":[],"length":0,"stats":{"Line":0}},{"line":707,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":724,"address":[],"length":0,"stats":{"Line":0}},{"line":725,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":731,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":740,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":757,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":761,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":769,"address":[],"length":0,"stats":{"Line":0}},{"line":771,"address":[],"length":0,"stats":{"Line":0}},{"line":772,"address":[],"length":0,"stats":{"Line":0}},{"line":773,"address":[],"length":0,"stats":{"Line":0}},{"line":775,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":780,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":784,"address":[],"length":0,"stats":{"Line":0}},{"line":785,"address":[],"length":0,"stats":{"Line":0}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}},{"line":788,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":799,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":801,"address":[],"length":0,"stats":{"Line":0}},{"line":802,"address":[],"length":0,"stats":{"Line":0}},{"line":803,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":806,"address":[],"length":0,"stats":{"Line":0}},{"line":808,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":815,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":823,"address":[],"length":0,"stats":{"Line":0}},{"line":824,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":827,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":829,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":831,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":841,"address":[],"length":0,"stats":{"Line":0}},{"line":842,"address":[],"length":0,"stats":{"Line":0}},{"line":844,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":850,"address":[],"length":0,"stats":{"Line":0}},{"line":851,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":857,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":861,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":865,"address":[],"length":0,"stats":{"Line":0}},{"line":866,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":872,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":879,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":892,"address":[],"length":0,"stats":{"Line":0}},{"line":893,"address":[],"length":0,"stats":{"Line":0}},{"line":903,"address":[],"length":0,"stats":{"Line":0}},{"line":906,"address":[],"length":0,"stats":{"Line":0}},{"line":907,"address":[],"length":0,"stats":{"Line":0}},{"line":910,"address":[],"length":0,"stats":{"Line":0}},{"line":911,"address":[],"length":0,"stats":{"Line":0}},{"line":915,"address":[],"length":0,"stats":{"Line":0}},{"line":917,"address":[],"length":0,"stats":{"Line":0}},{"line":918,"address":[],"length":0,"stats":{"Line":0}},{"line":919,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":928,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":930,"address":[],"length":0,"stats":{"Line":0}},{"line":931,"address":[],"length":0,"stats":{"Line":0}},{"line":932,"address":[],"length":0,"stats":{"Line":0}},{"line":933,"address":[],"length":0,"stats":{"Line":0}},{"line":934,"address":[],"length":0,"stats":{"Line":0}},{"line":935,"address":[],"length":0,"stats":{"Line":0}},{"line":936,"address":[],"length":0,"stats":{"Line":0}},{"line":937,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":939,"address":[],"length":0,"stats":{"Line":0}},{"line":940,"address":[],"length":0,"stats":{"Line":0}},{"line":943,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":958,"address":[],"length":0,"stats":{"Line":0}},{"line":959,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":961,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":968,"address":[],"length":0,"stats":{"Line":0}},{"line":969,"address":[],"length":0,"stats":{"Line":0}},{"line":972,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":979,"address":[],"length":0,"stats":{"Line":0}},{"line":980,"address":[],"length":0,"stats":{"Line":0}},{"line":981,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":990,"address":[],"length":0,"stats":{"Line":0}},{"line":993,"address":[],"length":0,"stats":{"Line":0}},{"line":995,"address":[],"length":0,"stats":{"Line":0}},{"line":996,"address":[],"length":0,"stats":{"Line":0}},{"line":997,"address":[],"length":0,"stats":{"Line":0}},{"line":1002,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1007,"address":[],"length":0,"stats":{"Line":0}},{"line":1008,"address":[],"length":0,"stats":{"Line":0}},{"line":1012,"address":[],"length":0,"stats":{"Line":0}},{"line":1014,"address":[],"length":0,"stats":{"Line":0}},{"line":1015,"address":[],"length":0,"stats":{"Line":0}},{"line":1016,"address":[],"length":0,"stats":{"Line":0}},{"line":1017,"address":[],"length":0,"stats":{"Line":0}},{"line":1018,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1025,"address":[],"length":0,"stats":{"Line":0}},{"line":1029,"address":[],"length":0,"stats":{"Line":0}},{"line":1030,"address":[],"length":0,"stats":{"Line":0}},{"line":1034,"address":[],"length":0,"stats":{"Line":0}},{"line":1037,"address":[],"length":0,"stats":{"Line":0}},{"line":1038,"address":[],"length":0,"stats":{"Line":0}},{"line":1039,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1041,"address":[],"length":0,"stats":{"Line":0}},{"line":1042,"address":[],"length":0,"stats":{"Line":0}},{"line":1046,"address":[],"length":0,"stats":{"Line":0}},{"line":1050,"address":[],"length":0,"stats":{"Line":0}},{"line":1051,"address":[],"length":0,"stats":{"Line":0}},{"line":1052,"address":[],"length":0,"stats":{"Line":0}},{"line":1053,"address":[],"length":0,"stats":{"Line":0}},{"line":1054,"address":[],"length":0,"stats":{"Line":0}},{"line":1055,"address":[],"length":0,"stats":{"Line":0}},{"line":1061,"address":[],"length":0,"stats":{"Line":0}},{"line":1065,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1070,"address":[],"length":0,"stats":{"Line":0}},{"line":1071,"address":[],"length":0,"stats":{"Line":0}},{"line":1073,"address":[],"length":0,"stats":{"Line":0}},{"line":1074,"address":[],"length":0,"stats":{"Line":0}},{"line":1079,"address":[],"length":0,"stats":{"Line":0}},{"line":1080,"address":[],"length":0,"stats":{"Line":0}},{"line":1081,"address":[],"length":0,"stats":{"Line":0}},{"line":1084,"address":[],"length":0,"stats":{"Line":0}},{"line":1086,"address":[],"length":0,"stats":{"Line":0}},{"line":1088,"address":[],"length":0,"stats":{"Line":0}},{"line":1090,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1092,"address":[],"length":0,"stats":{"Line":0}},{"line":1096,"address":[],"length":0,"stats":{"Line":0}},{"line":1097,"address":[],"length":0,"stats":{"Line":0}},{"line":1101,"address":[],"length":0,"stats":{"Line":0}},{"line":1102,"address":[],"length":0,"stats":{"Line":0}},{"line":1103,"address":[],"length":0,"stats":{"Line":0}},{"line":1104,"address":[],"length":0,"stats":{"Line":0}},{"line":1105,"address":[],"length":0,"stats":{"Line":0}},{"line":1106,"address":[],"length":0,"stats":{"Line":0}},{"line":1107,"address":[],"length":0,"stats":{"Line":0}},{"line":1108,"address":[],"length":0,"stats":{"Line":0}},{"line":1111,"address":[],"length":0,"stats":{"Line":0}},{"line":1113,"address":[],"length":0,"stats":{"Line":0}},{"line":1115,"address":[],"length":0,"stats":{"Line":0}},{"line":1116,"address":[],"length":0,"stats":{"Line":0}},{"line":1117,"address":[],"length":0,"stats":{"Line":0}},{"line":1119,"address":[],"length":0,"stats":{"Line":0}},{"line":1122,"address":[],"length":0,"stats":{"Line":0}},{"line":1123,"address":[],"length":0,"stats":{"Line":0}},{"line":1124,"address":[],"length":0,"stats":{"Line":0}},{"line":1126,"address":[],"length":0,"stats":{"Line":0}},{"line":1130,"address":[],"length":0,"stats":{"Line":0}},{"line":1131,"address":[],"length":0,"stats":{"Line":0}},{"line":1135,"address":[],"length":0,"stats":{"Line":0}},{"line":1136,"address":[],"length":0,"stats":{"Line":0}},{"line":1137,"address":[],"length":0,"stats":{"Line":0}},{"line":1138,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1142,"address":[],"length":0,"stats":{"Line":0}},{"line":1143,"address":[],"length":0,"stats":{"Line":0}},{"line":1144,"address":[],"length":0,"stats":{"Line":0}},{"line":1148,"address":[],"length":0,"stats":{"Line":0}},{"line":1152,"address":[],"length":0,"stats":{"Line":0}},{"line":1153,"address":[],"length":0,"stats":{"Line":0}},{"line":1154,"address":[],"length":0,"stats":{"Line":0}},{"line":1155,"address":[],"length":0,"stats":{"Line":0}},{"line":1156,"address":[],"length":0,"stats":{"Line":0}},{"line":1157,"address":[],"length":0,"stats":{"Line":0}},{"line":1161,"address":[],"length":0,"stats":{"Line":0}},{"line":1165,"address":[],"length":0,"stats":{"Line":0}},{"line":1168,"address":[],"length":0,"stats":{"Line":0}},{"line":1169,"address":[],"length":0,"stats":{"Line":0}},{"line":1171,"address":[],"length":0,"stats":{"Line":0}},{"line":1172,"address":[],"length":0,"stats":{"Line":0}},{"line":1173,"address":[],"length":0,"stats":{"Line":0}},{"line":1176,"address":[],"length":0,"stats":{"Line":0}},{"line":1177,"address":[],"length":0,"stats":{"Line":0}},{"line":1178,"address":[],"length":0,"stats":{"Line":0}},{"line":1183,"address":[],"length":0,"stats":{"Line":0}},{"line":1188,"address":[],"length":0,"stats":{"Line":0}},{"line":1189,"address":[],"length":0,"stats":{"Line":0}},{"line":1192,"address":[],"length":0,"stats":{"Line":0}},{"line":1193,"address":[],"length":0,"stats":{"Line":0}},{"line":1195,"address":[],"length":0,"stats":{"Line":0}},{"line":1199,"address":[],"length":0,"stats":{"Line":0}},{"line":1200,"address":[],"length":0,"stats":{"Line":0}},{"line":1201,"address":[],"length":0,"stats":{"Line":0}},{"line":1209,"address":[],"length":0,"stats":{"Line":0}},{"line":1210,"address":[],"length":0,"stats":{"Line":0}},{"line":1213,"address":[],"length":0,"stats":{"Line":0}},{"line":1216,"address":[],"length":0,"stats":{"Line":0}},{"line":1217,"address":[],"length":0,"stats":{"Line":0}},{"line":1218,"address":[],"length":0,"stats":{"Line":0}},{"line":1219,"address":[],"length":0,"stats":{"Line":0}},{"line":1220,"address":[],"length":0,"stats":{"Line":0}},{"line":1222,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1227,"address":[],"length":0,"stats":{"Line":0}},{"line":1230,"address":[],"length":0,"stats":{"Line":0}},{"line":1232,"address":[],"length":0,"stats":{"Line":0}},{"line":1233,"address":[],"length":0,"stats":{"Line":0}},{"line":1234,"address":[],"length":0,"stats":{"Line":0}},{"line":1236,"address":[],"length":0,"stats":{"Line":0}},{"line":1237,"address":[],"length":0,"stats":{"Line":0}},{"line":1241,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1245,"address":[],"length":0,"stats":{"Line":0}},{"line":1246,"address":[],"length":0,"stats":{"Line":0}},{"line":1247,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1252,"address":[],"length":0,"stats":{"Line":0}},{"line":1256,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1260,"address":[],"length":0,"stats":{"Line":0}},{"line":1261,"address":[],"length":0,"stats":{"Line":0}},{"line":1262,"address":[],"length":0,"stats":{"Line":0}},{"line":1263,"address":[],"length":0,"stats":{"Line":0}},{"line":1264,"address":[],"length":0,"stats":{"Line":0}},{"line":1265,"address":[],"length":0,"stats":{"Line":0}},{"line":1267,"address":[],"length":0,"stats":{"Line":0}},{"line":1269,"address":[],"length":0,"stats":{"Line":0}},{"line":1273,"address":[],"length":0,"stats":{"Line":0}},{"line":1276,"address":[],"length":0,"stats":{"Line":0}},{"line":1279,"address":[],"length":0,"stats":{"Line":0}},{"line":1283,"address":[],"length":0,"stats":{"Line":0}},{"line":1284,"address":[],"length":0,"stats":{"Line":0}},{"line":1285,"address":[],"length":0,"stats":{"Line":0}},{"line":1286,"address":[],"length":0,"stats":{"Line":0}},{"line":1287,"address":[],"length":0,"stats":{"Line":0}},{"line":1288,"address":[],"length":0,"stats":{"Line":0}},{"line":1289,"address":[],"length":0,"stats":{"Line":0}},{"line":1290,"address":[],"length":0,"stats":{"Line":0}},{"line":1291,"address":[],"length":0,"stats":{"Line":0}},{"line":1292,"address":[],"length":0,"stats":{"Line":0}},{"line":1294,"address":[],"length":0,"stats":{"Line":0}},{"line":1295,"address":[],"length":0,"stats":{"Line":0}},{"line":1298,"address":[],"length":0,"stats":{"Line":0}},{"line":1299,"address":[],"length":0,"stats":{"Line":0}},{"line":1300,"address":[],"length":0,"stats":{"Line":0}},{"line":1301,"address":[],"length":0,"stats":{"Line":0}},{"line":1302,"address":[],"length":0,"stats":{"Line":0}},{"line":1303,"address":[],"length":0,"stats":{"Line":0}},{"line":1305,"address":[],"length":0,"stats":{"Line":0}},{"line":1307,"address":[],"length":0,"stats":{"Line":0}},{"line":1311,"address":[],"length":0,"stats":{"Line":0}},{"line":1312,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1316,"address":[],"length":0,"stats":{"Line":0}},{"line":1318,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1322,"address":[],"length":0,"stats":{"Line":0}},{"line":1324,"address":[],"length":0,"stats":{"Line":0}},{"line":1326,"address":[],"length":0,"stats":{"Line":0}},{"line":1327,"address":[],"length":0,"stats":{"Line":0}},{"line":1331,"address":[],"length":0,"stats":{"Line":0}},{"line":1332,"address":[],"length":0,"stats":{"Line":0}},{"line":1333,"address":[],"length":0,"stats":{"Line":0}},{"line":1334,"address":[],"length":0,"stats":{"Line":0}},{"line":1337,"address":[],"length":0,"stats":{"Line":0}},{"line":1340,"address":[],"length":0,"stats":{"Line":0}},{"line":1341,"address":[],"length":0,"stats":{"Line":0}},{"line":1342,"address":[],"length":0,"stats":{"Line":0}},{"line":1343,"address":[],"length":0,"stats":{"Line":0}},{"line":1350,"address":[],"length":0,"stats":{"Line":0}},{"line":1351,"address":[],"length":0,"stats":{"Line":0}},{"line":1354,"address":[],"length":0,"stats":{"Line":0}},{"line":1355,"address":[],"length":0,"stats":{"Line":0}},{"line":1362,"address":[],"length":0,"stats":{"Line":0}},{"line":1363,"address":[],"length":0,"stats":{"Line":0}},{"line":1366,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1370,"address":[],"length":0,"stats":{"Line":0}},{"line":1373,"address":[],"length":0,"stats":{"Line":0}},{"line":1374,"address":[],"length":0,"stats":{"Line":0}},{"line":1378,"address":[],"length":0,"stats":{"Line":0}},{"line":1380,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1382,"address":[],"length":0,"stats":{"Line":0}},{"line":1383,"address":[],"length":0,"stats":{"Line":0}},{"line":1386,"address":[],"length":0,"stats":{"Line":0}},{"line":1388,"address":[],"length":0,"stats":{"Line":0}},{"line":1391,"address":[],"length":0,"stats":{"Line":0}},{"line":1392,"address":[],"length":0,"stats":{"Line":0}},{"line":1393,"address":[],"length":0,"stats":{"Line":0}},{"line":1394,"address":[],"length":0,"stats":{"Line":0}},{"line":1395,"address":[],"length":0,"stats":{"Line":0}},{"line":1396,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1398,"address":[],"length":0,"stats":{"Line":0}},{"line":1399,"address":[],"length":0,"stats":{"Line":0}},{"line":1400,"address":[],"length":0,"stats":{"Line":0}},{"line":1401,"address":[],"length":0,"stats":{"Line":0}},{"line":1402,"address":[],"length":0,"stats":{"Line":0}},{"line":1403,"address":[],"length":0,"stats":{"Line":0}},{"line":1406,"address":[],"length":0,"stats":{"Line":0}},{"line":1407,"address":[],"length":0,"stats":{"Line":0}},{"line":1408,"address":[],"length":0,"stats":{"Line":0}},{"line":1411,"address":[],"length":0,"stats":{"Line":0}},{"line":1415,"address":[],"length":0,"stats":{"Line":0}},{"line":1416,"address":[],"length":0,"stats":{"Line":0}},{"line":1419,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1422,"address":[],"length":0,"stats":{"Line":0}},{"line":1423,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1426,"address":[],"length":0,"stats":{"Line":0}},{"line":1431,"address":[],"length":0,"stats":{"Line":0}},{"line":1432,"address":[],"length":0,"stats":{"Line":0}},{"line":1435,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1443,"address":[],"length":0,"stats":{"Line":0}},{"line":1444,"address":[],"length":0,"stats":{"Line":0}},{"line":1445,"address":[],"length":0,"stats":{"Line":0}},{"line":1447,"address":[],"length":0,"stats":{"Line":0}},{"line":1450,"address":[],"length":0,"stats":{"Line":0}},{"line":1451,"address":[],"length":0,"stats":{"Line":0}},{"line":1453,"address":[],"length":0,"stats":{"Line":0}},{"line":1456,"address":[],"length":0,"stats":{"Line":0}},{"line":1458,"address":[],"length":0,"stats":{"Line":0}},{"line":1459,"address":[],"length":0,"stats":{"Line":0}},{"line":1460,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1467,"address":[],"length":0,"stats":{"Line":0}},{"line":1468,"address":[],"length":0,"stats":{"Line":0}},{"line":1469,"address":[],"length":0,"stats":{"Line":0}},{"line":1470,"address":[],"length":0,"stats":{"Line":0}},{"line":1471,"address":[],"length":0,"stats":{"Line":0}},{"line":1475,"address":[],"length":0,"stats":{"Line":0}},{"line":1477,"address":[],"length":0,"stats":{"Line":0}},{"line":1478,"address":[],"length":0,"stats":{"Line":0}},{"line":1479,"address":[],"length":0,"stats":{"Line":0}},{"line":1480,"address":[],"length":0,"stats":{"Line":0}},{"line":1481,"address":[],"length":0,"stats":{"Line":0}},{"line":1487,"address":[],"length":0,"stats":{"Line":0}},{"line":1488,"address":[],"length":0,"stats":{"Line":0}},{"line":1492,"address":[],"length":0,"stats":{"Line":0}},{"line":1493,"address":[],"length":0,"stats":{"Line":0}},{"line":1497,"address":[],"length":0,"stats":{"Line":0}},{"line":1500,"address":[],"length":0,"stats":{"Line":0}},{"line":1501,"address":[],"length":0,"stats":{"Line":0}},{"line":1502,"address":[],"length":0,"stats":{"Line":0}},{"line":1503,"address":[],"length":0,"stats":{"Line":0}},{"line":1504,"address":[],"length":0,"stats":{"Line":0}},{"line":1505,"address":[],"length":0,"stats":{"Line":0}},{"line":1509,"address":[],"length":0,"stats":{"Line":0}},{"line":1513,"address":[],"length":0,"stats":{"Line":0}},{"line":1514,"address":[],"length":0,"stats":{"Line":0}},{"line":1515,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1518,"address":[],"length":0,"stats":{"Line":0}},{"line":1524,"address":[],"length":0,"stats":{"Line":0}},{"line":1528,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1531,"address":[],"length":0,"stats":{"Line":0}},{"line":1532,"address":[],"length":0,"stats":{"Line":0}},{"line":1533,"address":[],"length":0,"stats":{"Line":0}},{"line":1534,"address":[],"length":0,"stats":{"Line":0}},{"line":1536,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1542,"address":[],"length":0,"stats":{"Line":0}},{"line":1543,"address":[],"length":0,"stats":{"Line":0}},{"line":1544,"address":[],"length":0,"stats":{"Line":0}},{"line":1547,"address":[],"length":0,"stats":{"Line":0}},{"line":1549,"address":[],"length":0,"stats":{"Line":0}},{"line":1551,"address":[],"length":0,"stats":{"Line":0}},{"line":1553,"address":[],"length":0,"stats":{"Line":0}},{"line":1554,"address":[],"length":0,"stats":{"Line":0}},{"line":1555,"address":[],"length":0,"stats":{"Line":0}},{"line":1559,"address":[],"length":0,"stats":{"Line":0}},{"line":1560,"address":[],"length":0,"stats":{"Line":0}},{"line":1564,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1566,"address":[],"length":0,"stats":{"Line":0}},{"line":1567,"address":[],"length":0,"stats":{"Line":0}},{"line":1568,"address":[],"length":0,"stats":{"Line":0}},{"line":1569,"address":[],"length":0,"stats":{"Line":0}},{"line":1570,"address":[],"length":0,"stats":{"Line":0}},{"line":1571,"address":[],"length":0,"stats":{"Line":0}},{"line":1572,"address":[],"length":0,"stats":{"Line":0}},{"line":1575,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1579,"address":[],"length":0,"stats":{"Line":0}},{"line":1580,"address":[],"length":0,"stats":{"Line":0}},{"line":1581,"address":[],"length":0,"stats":{"Line":0}},{"line":1583,"address":[],"length":0,"stats":{"Line":0}},{"line":1586,"address":[],"length":0,"stats":{"Line":0}},{"line":1587,"address":[],"length":0,"stats":{"Line":0}},{"line":1588,"address":[],"length":0,"stats":{"Line":0}},{"line":1590,"address":[],"length":0,"stats":{"Line":0}},{"line":1594,"address":[],"length":0,"stats":{"Line":0}},{"line":1595,"address":[],"length":0,"stats":{"Line":0}},{"line":1599,"address":[],"length":0,"stats":{"Line":0}},{"line":1600,"address":[],"length":0,"stats":{"Line":0}},{"line":1601,"address":[],"length":0,"stats":{"Line":0}},{"line":1602,"address":[],"length":0,"stats":{"Line":0}},{"line":1605,"address":[],"length":0,"stats":{"Line":0}},{"line":1606,"address":[],"length":0,"stats":{"Line":0}},{"line":1607,"address":[],"length":0,"stats":{"Line":0}},{"line":1608,"address":[],"length":0,"stats":{"Line":0}},{"line":1612,"address":[],"length":0,"stats":{"Line":0}},{"line":1616,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1618,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1620,"address":[],"length":0,"stats":{"Line":0}},{"line":1621,"address":[],"length":0,"stats":{"Line":0}},{"line":1625,"address":[],"length":0,"stats":{"Line":0}},{"line":1629,"address":[],"length":0,"stats":{"Line":0}},{"line":1632,"address":[],"length":0,"stats":{"Line":0}},{"line":1633,"address":[],"length":0,"stats":{"Line":0}},{"line":1635,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1637,"address":[],"length":0,"stats":{"Line":0}},{"line":1639,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1643,"address":[],"length":0,"stats":{"Line":0}},{"line":1644,"address":[],"length":0,"stats":{"Line":0}},{"line":1647,"address":[],"length":0,"stats":{"Line":0}},{"line":1648,"address":[],"length":0,"stats":{"Line":0}},{"line":1650,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1655,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1664,"address":[],"length":0,"stats":{"Line":0}},{"line":1665,"address":[],"length":0,"stats":{"Line":0}},{"line":1668,"address":[],"length":0,"stats":{"Line":0}},{"line":1669,"address":[],"length":0,"stats":{"Line":0}},{"line":1670,"address":[],"length":0,"stats":{"Line":0}},{"line":1672,"address":[],"length":0,"stats":{"Line":0}},{"line":1675,"address":[],"length":0,"stats":{"Line":0}},{"line":1679,"address":[],"length":0,"stats":{"Line":0}},{"line":1682,"address":[],"length":0,"stats":{"Line":0}},{"line":1683,"address":[],"length":0,"stats":{"Line":0}},{"line":1684,"address":[],"length":0,"stats":{"Line":0}},{"line":1685,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1691,"address":[],"length":0,"stats":{"Line":0}},{"line":1692,"address":[],"length":0,"stats":{"Line":0}},{"line":1693,"address":[],"length":0,"stats":{"Line":0}},{"line":1694,"address":[],"length":0,"stats":{"Line":0}},{"line":1698,"address":[],"length":0,"stats":{"Line":0}},{"line":1704,"address":[],"length":0,"stats":{"Line":0}},{"line":1708,"address":[],"length":0,"stats":{"Line":0}},{"line":1714,"address":[],"length":0,"stats":{"Line":0}},{"line":1718,"address":[],"length":0,"stats":{"Line":0}},{"line":1720,"address":[],"length":0,"stats":{"Line":0}},{"line":1721,"address":[],"length":0,"stats":{"Line":0}},{"line":1722,"address":[],"length":0,"stats":{"Line":0}},{"line":1723,"address":[],"length":0,"stats":{"Line":0}},{"line":1726,"address":[],"length":0,"stats":{"Line":0}},{"line":1728,"address":[],"length":0,"stats":{"Line":0}},{"line":1732,"address":[],"length":0,"stats":{"Line":0}},{"line":1733,"address":[],"length":0,"stats":{"Line":0}},{"line":1734,"address":[],"length":0,"stats":{"Line":0}},{"line":1736,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1738,"address":[],"length":0,"stats":{"Line":0}},{"line":1739,"address":[],"length":0,"stats":{"Line":0}},{"line":1748,"address":[],"length":0,"stats":{"Line":0}},{"line":1750,"address":[],"length":0,"stats":{"Line":0}},{"line":1751,"address":[],"length":0,"stats":{"Line":0}},{"line":1752,"address":[],"length":0,"stats":{"Line":0}},{"line":1753,"address":[],"length":0,"stats":{"Line":0}},{"line":1758,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1766,"address":[],"length":0,"stats":{"Line":0}},{"line":1767,"address":[],"length":0,"stats":{"Line":0}},{"line":1769,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1771,"address":[],"length":0,"stats":{"Line":0}},{"line":1772,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1780,"address":[],"length":0,"stats":{"Line":0}},{"line":1781,"address":[],"length":0,"stats":{"Line":0}},{"line":1782,"address":[],"length":0,"stats":{"Line":0}},{"line":1785,"address":[],"length":0,"stats":{"Line":0}},{"line":1787,"address":[],"length":0,"stats":{"Line":0}},{"line":1789,"address":[],"length":0,"stats":{"Line":0}},{"line":1791,"address":[],"length":0,"stats":{"Line":0}},{"line":1792,"address":[],"length":0,"stats":{"Line":0}},{"line":1793,"address":[],"length":0,"stats":{"Line":0}},{"line":1797,"address":[],"length":0,"stats":{"Line":0}},{"line":1798,"address":[],"length":0,"stats":{"Line":0}},{"line":1802,"address":[],"length":0,"stats":{"Line":0}},{"line":1803,"address":[],"length":0,"stats":{"Line":0}},{"line":1804,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1806,"address":[],"length":0,"stats":{"Line":0}},{"line":1807,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1811,"address":[],"length":0,"stats":{"Line":0}},{"line":1813,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1816,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1822,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1824,"address":[],"length":0,"stats":{"Line":0}},{"line":1826,"address":[],"length":0,"stats":{"Line":0}},{"line":1830,"address":[],"length":0,"stats":{"Line":0}},{"line":1831,"address":[],"length":0,"stats":{"Line":0}},{"line":1835,"address":[],"length":0,"stats":{"Line":0}},{"line":1836,"address":[],"length":0,"stats":{"Line":0}},{"line":1837,"address":[],"length":0,"stats":{"Line":0}},{"line":1838,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1842,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1848,"address":[],"length":0,"stats":{"Line":0}},{"line":1852,"address":[],"length":0,"stats":{"Line":0}},{"line":1856,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1860,"address":[],"length":0,"stats":{"Line":0}},{"line":1862,"address":[],"length":0,"stats":{"Line":0}},{"line":1863,"address":[],"length":0,"stats":{"Line":0}},{"line":1864,"address":[],"length":0,"stats":{"Line":0}},{"line":1867,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1878,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1881,"address":[],"length":0,"stats":{"Line":0}},{"line":1885,"address":[],"length":0,"stats":{"Line":0}},{"line":1886,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1895,"address":[],"length":0,"stats":{"Line":0}},{"line":1896,"address":[],"length":0,"stats":{"Line":0}},{"line":1899,"address":[],"length":0,"stats":{"Line":0}},{"line":1902,"address":[],"length":0,"stats":{"Line":0}},{"line":1903,"address":[],"length":0,"stats":{"Line":0}},{"line":1904,"address":[],"length":0,"stats":{"Line":0}},{"line":1905,"address":[],"length":0,"stats":{"Line":0}},{"line":1906,"address":[],"length":0,"stats":{"Line":0}},{"line":1908,"address":[],"length":0,"stats":{"Line":0}},{"line":1910,"address":[],"length":0,"stats":{"Line":0}},{"line":1913,"address":[],"length":0,"stats":{"Line":0}},{"line":1916,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1919,"address":[],"length":0,"stats":{"Line":0}},{"line":1920,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1923,"address":[],"length":0,"stats":{"Line":0}},{"line":1927,"address":[],"length":0,"stats":{"Line":0}},{"line":1929,"address":[],"length":0,"stats":{"Line":0}},{"line":1931,"address":[],"length":0,"stats":{"Line":0}},{"line":1932,"address":[],"length":0,"stats":{"Line":0}},{"line":1933,"address":[],"length":0,"stats":{"Line":0}},{"line":1934,"address":[],"length":0,"stats":{"Line":0}},{"line":1935,"address":[],"length":0,"stats":{"Line":0}},{"line":1938,"address":[],"length":0,"stats":{"Line":0}},{"line":1942,"address":[],"length":0,"stats":{"Line":0}},{"line":1943,"address":[],"length":0,"stats":{"Line":0}},{"line":1946,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1948,"address":[],"length":0,"stats":{"Line":0}},{"line":1949,"address":[],"length":0,"stats":{"Line":0}},{"line":1950,"address":[],"length":0,"stats":{"Line":0}},{"line":1951,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1955,"address":[],"length":0,"stats":{"Line":0}},{"line":1959,"address":[],"length":0,"stats":{"Line":0}},{"line":1962,"address":[],"length":0,"stats":{"Line":0}},{"line":1965,"address":[],"length":0,"stats":{"Line":0}},{"line":1969,"address":[],"length":0,"stats":{"Line":0}},{"line":1970,"address":[],"length":0,"stats":{"Line":0}},{"line":1971,"address":[],"length":0,"stats":{"Line":0}},{"line":1972,"address":[],"length":0,"stats":{"Line":0}},{"line":1973,"address":[],"length":0,"stats":{"Line":0}},{"line":1974,"address":[],"length":0,"stats":{"Line":0}},{"line":1975,"address":[],"length":0,"stats":{"Line":0}},{"line":1976,"address":[],"length":0,"stats":{"Line":0}},{"line":1977,"address":[],"length":0,"stats":{"Line":0}},{"line":1978,"address":[],"length":0,"stats":{"Line":0}},{"line":1980,"address":[],"length":0,"stats":{"Line":0}},{"line":1981,"address":[],"length":0,"stats":{"Line":0}},{"line":1984,"address":[],"length":0,"stats":{"Line":0}},{"line":1985,"address":[],"length":0,"stats":{"Line":0}},{"line":1986,"address":[],"length":0,"stats":{"Line":0}},{"line":1987,"address":[],"length":0,"stats":{"Line":0}},{"line":1988,"address":[],"length":0,"stats":{"Line":0}},{"line":1989,"address":[],"length":0,"stats":{"Line":0}},{"line":1991,"address":[],"length":0,"stats":{"Line":0}},{"line":1993,"address":[],"length":0,"stats":{"Line":0}},{"line":1997,"address":[],"length":0,"stats":{"Line":0}},{"line":1998,"address":[],"length":0,"stats":{"Line":0}},{"line":2001,"address":[],"length":0,"stats":{"Line":0}},{"line":2002,"address":[],"length":0,"stats":{"Line":0}},{"line":2004,"address":[],"length":0,"stats":{"Line":0}},{"line":2005,"address":[],"length":0,"stats":{"Line":0}},{"line":2008,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2012,"address":[],"length":0,"stats":{"Line":0}},{"line":2013,"address":[],"length":0,"stats":{"Line":0}},{"line":2017,"address":[],"length":0,"stats":{"Line":0}},{"line":2018,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2023,"address":[],"length":0,"stats":{"Line":0}},{"line":2026,"address":[],"length":0,"stats":{"Line":0}},{"line":2027,"address":[],"length":0,"stats":{"Line":0}},{"line":2028,"address":[],"length":0,"stats":{"Line":0}},{"line":2029,"address":[],"length":0,"stats":{"Line":0}},{"line":2038,"address":[],"length":0,"stats":{"Line":0}},{"line":2039,"address":[],"length":0,"stats":{"Line":0}},{"line":2048,"address":[],"length":0,"stats":{"Line":0}},{"line":2051,"address":[],"length":0,"stats":{"Line":0}},{"line":2052,"address":[],"length":0,"stats":{"Line":0}},{"line":2055,"address":[],"length":0,"stats":{"Line":0}},{"line":2056,"address":[],"length":0,"stats":{"Line":0}},{"line":2060,"address":[],"length":0,"stats":{"Line":0}},{"line":2062,"address":[],"length":0,"stats":{"Line":0}},{"line":2063,"address":[],"length":0,"stats":{"Line":0}},{"line":2064,"address":[],"length":0,"stats":{"Line":0}},{"line":2065,"address":[],"length":0,"stats":{"Line":0}},{"line":2068,"address":[],"length":0,"stats":{"Line":0}},{"line":2070,"address":[],"length":0,"stats":{"Line":0}},{"line":2073,"address":[],"length":0,"stats":{"Line":0}},{"line":2074,"address":[],"length":0,"stats":{"Line":0}},{"line":2075,"address":[],"length":0,"stats":{"Line":0}},{"line":2076,"address":[],"length":0,"stats":{"Line":0}},{"line":2077,"address":[],"length":0,"stats":{"Line":0}},{"line":2078,"address":[],"length":0,"stats":{"Line":0}},{"line":2079,"address":[],"length":0,"stats":{"Line":0}},{"line":2080,"address":[],"length":0,"stats":{"Line":0}},{"line":2081,"address":[],"length":0,"stats":{"Line":0}},{"line":2082,"address":[],"length":0,"stats":{"Line":0}},{"line":2083,"address":[],"length":0,"stats":{"Line":0}},{"line":2084,"address":[],"length":0,"stats":{"Line":0}},{"line":2085,"address":[],"length":0,"stats":{"Line":0}},{"line":2088,"address":[],"length":0,"stats":{"Line":0}},{"line":2089,"address":[],"length":0,"stats":{"Line":0}},{"line":2090,"address":[],"length":0,"stats":{"Line":0}},{"line":2093,"address":[],"length":0,"stats":{"Line":0}},{"line":2097,"address":[],"length":0,"stats":{"Line":0}},{"line":2098,"address":[],"length":0,"stats":{"Line":0}},{"line":2101,"address":[],"length":0,"stats":{"Line":0}},{"line":2103,"address":[],"length":0,"stats":{"Line":0}},{"line":2104,"address":[],"length":0,"stats":{"Line":0}},{"line":2105,"address":[],"length":0,"stats":{"Line":0}},{"line":2106,"address":[],"length":0,"stats":{"Line":0}},{"line":2108,"address":[],"length":0,"stats":{"Line":0}},{"line":2113,"address":[],"length":0,"stats":{"Line":0}},{"line":2114,"address":[],"length":0,"stats":{"Line":0}},{"line":2117,"address":[],"length":0,"stats":{"Line":0}},{"line":2120,"address":[],"length":0,"stats":{"Line":0}},{"line":2124,"address":[],"length":0,"stats":{"Line":0}},{"line":2125,"address":[],"length":0,"stats":{"Line":0}},{"line":2126,"address":[],"length":0,"stats":{"Line":0}},{"line":2127,"address":[],"length":0,"stats":{"Line":0}},{"line":2129,"address":[],"length":0,"stats":{"Line":0}},{"line":2132,"address":[],"length":0,"stats":{"Line":0}},{"line":2133,"address":[],"length":0,"stats":{"Line":0}},{"line":2135,"address":[],"length":0,"stats":{"Line":0}},{"line":2138,"address":[],"length":0,"stats":{"Line":0}},{"line":2140,"address":[],"length":0,"stats":{"Line":0}},{"line":2141,"address":[],"length":0,"stats":{"Line":0}},{"line":2142,"address":[],"length":0,"stats":{"Line":0}},{"line":2147,"address":[],"length":0,"stats":{"Line":0}},{"line":2149,"address":[],"length":0,"stats":{"Line":0}},{"line":2150,"address":[],"length":0,"stats":{"Line":0}},{"line":2151,"address":[],"length":0,"stats":{"Line":0}},{"line":2152,"address":[],"length":0,"stats":{"Line":0}},{"line":2153,"address":[],"length":0,"stats":{"Line":0}},{"line":2157,"address":[],"length":0,"stats":{"Line":0}},{"line":2159,"address":[],"length":0,"stats":{"Line":0}},{"line":2160,"address":[],"length":0,"stats":{"Line":0}},{"line":2161,"address":[],"length":0,"stats":{"Line":0}},{"line":2162,"address":[],"length":0,"stats":{"Line":0}},{"line":2163,"address":[],"length":0,"stats":{"Line":0}},{"line":2169,"address":[],"length":0,"stats":{"Line":0}},{"line":2170,"address":[],"length":0,"stats":{"Line":0}},{"line":2174,"address":[],"length":0,"stats":{"Line":0}},{"line":2175,"address":[],"length":0,"stats":{"Line":0}},{"line":2179,"address":[],"length":0,"stats":{"Line":0}},{"line":2182,"address":[],"length":0,"stats":{"Line":0}},{"line":2183,"address":[],"length":0,"stats":{"Line":0}},{"line":2184,"address":[],"length":0,"stats":{"Line":0}},{"line":2185,"address":[],"length":0,"stats":{"Line":0}},{"line":2186,"address":[],"length":0,"stats":{"Line":0}},{"line":2187,"address":[],"length":0,"stats":{"Line":0}},{"line":2188,"address":[],"length":0,"stats":{"Line":0}},{"line":2192,"address":[],"length":0,"stats":{"Line":0}},{"line":2196,"address":[],"length":0,"stats":{"Line":0}},{"line":2197,"address":[],"length":0,"stats":{"Line":0}},{"line":2198,"address":[],"length":0,"stats":{"Line":0}},{"line":2199,"address":[],"length":0,"stats":{"Line":0}},{"line":2200,"address":[],"length":0,"stats":{"Line":0}},{"line":2201,"address":[],"length":0,"stats":{"Line":0}},{"line":2202,"address":[],"length":0,"stats":{"Line":0}},{"line":2208,"address":[],"length":0,"stats":{"Line":0}},{"line":2212,"address":[],"length":0,"stats":{"Line":0}},{"line":2213,"address":[],"length":0,"stats":{"Line":0}},{"line":2215,"address":[],"length":0,"stats":{"Line":0}},{"line":2216,"address":[],"length":0,"stats":{"Line":0}},{"line":2217,"address":[],"length":0,"stats":{"Line":0}},{"line":2218,"address":[],"length":0,"stats":{"Line":0}},{"line":2220,"address":[],"length":0,"stats":{"Line":0}},{"line":2221,"address":[],"length":0,"stats":{"Line":0}},{"line":2226,"address":[],"length":0,"stats":{"Line":0}},{"line":2227,"address":[],"length":0,"stats":{"Line":0}},{"line":2228,"address":[],"length":0,"stats":{"Line":0}},{"line":2231,"address":[],"length":0,"stats":{"Line":0}},{"line":2233,"address":[],"length":0,"stats":{"Line":0}},{"line":2235,"address":[],"length":0,"stats":{"Line":0}},{"line":2237,"address":[],"length":0,"stats":{"Line":0}},{"line":2238,"address":[],"length":0,"stats":{"Line":0}},{"line":2239,"address":[],"length":0,"stats":{"Line":0}},{"line":2243,"address":[],"length":0,"stats":{"Line":0}},{"line":2244,"address":[],"length":0,"stats":{"Line":0}},{"line":2248,"address":[],"length":0,"stats":{"Line":0}},{"line":2249,"address":[],"length":0,"stats":{"Line":0}},{"line":2250,"address":[],"length":0,"stats":{"Line":0}},{"line":2251,"address":[],"length":0,"stats":{"Line":0}},{"line":2252,"address":[],"length":0,"stats":{"Line":0}},{"line":2253,"address":[],"length":0,"stats":{"Line":0}},{"line":2254,"address":[],"length":0,"stats":{"Line":0}},{"line":2257,"address":[],"length":0,"stats":{"Line":0}},{"line":2259,"address":[],"length":0,"stats":{"Line":0}},{"line":2261,"address":[],"length":0,"stats":{"Line":0}},{"line":2262,"address":[],"length":0,"stats":{"Line":0}},{"line":2263,"address":[],"length":0,"stats":{"Line":0}},{"line":2265,"address":[],"length":0,"stats":{"Line":0}},{"line":2268,"address":[],"length":0,"stats":{"Line":0}},{"line":2269,"address":[],"length":0,"stats":{"Line":0}},{"line":2270,"address":[],"length":0,"stats":{"Line":0}},{"line":2272,"address":[],"length":0,"stats":{"Line":0}},{"line":2276,"address":[],"length":0,"stats":{"Line":0}},{"line":2277,"address":[],"length":0,"stats":{"Line":0}},{"line":2281,"address":[],"length":0,"stats":{"Line":0}},{"line":2282,"address":[],"length":0,"stats":{"Line":0}},{"line":2283,"address":[],"length":0,"stats":{"Line":0}},{"line":2284,"address":[],"length":0,"stats":{"Line":0}},{"line":2287,"address":[],"length":0,"stats":{"Line":0}},{"line":2288,"address":[],"length":0,"stats":{"Line":0}},{"line":2289,"address":[],"length":0,"stats":{"Line":0}},{"line":2290,"address":[],"length":0,"stats":{"Line":0}},{"line":2294,"address":[],"length":0,"stats":{"Line":0}},{"line":2298,"address":[],"length":0,"stats":{"Line":0}},{"line":2299,"address":[],"length":0,"stats":{"Line":0}},{"line":2300,"address":[],"length":0,"stats":{"Line":0}},{"line":2301,"address":[],"length":0,"stats":{"Line":0}},{"line":2302,"address":[],"length":0,"stats":{"Line":0}},{"line":2303,"address":[],"length":0,"stats":{"Line":0}},{"line":2304,"address":[],"length":0,"stats":{"Line":0}},{"line":2308,"address":[],"length":0,"stats":{"Line":0}},{"line":2312,"address":[],"length":0,"stats":{"Line":0}},{"line":2328,"address":[],"length":0,"stats":{"Line":0}},{"line":2330,"address":[],"length":0,"stats":{"Line":0}},{"line":2332,"address":[],"length":0,"stats":{"Line":0}},{"line":2333,"address":[],"length":0,"stats":{"Line":0}},{"line":2334,"address":[],"length":0,"stats":{"Line":0}},{"line":2336,"address":[],"length":0,"stats":{"Line":0}},{"line":2337,"address":[],"length":0,"stats":{"Line":0}},{"line":2340,"address":[],"length":0,"stats":{"Line":0}},{"line":2341,"address":[],"length":0,"stats":{"Line":0}},{"line":2342,"address":[],"length":0,"stats":{"Line":0}},{"line":2346,"address":[],"length":0,"stats":{"Line":0}},{"line":2347,"address":[],"length":0,"stats":{"Line":0}},{"line":2348,"address":[],"length":0,"stats":{"Line":0}},{"line":2350,"address":[],"length":0,"stats":{"Line":0}},{"line":2353,"address":[],"length":0,"stats":{"Line":0}},{"line":2357,"address":[],"length":0,"stats":{"Line":0}},{"line":2358,"address":[],"length":0,"stats":{"Line":0}},{"line":2360,"address":[],"length":0,"stats":{"Line":0}},{"line":2374,"address":[],"length":0,"stats":{"Line":0}},{"line":2375,"address":[],"length":0,"stats":{"Line":0}},{"line":2377,"address":[],"length":0,"stats":{"Line":0}},{"line":2378,"address":[],"length":0,"stats":{"Line":0}},{"line":2379,"address":[],"length":0,"stats":{"Line":0}},{"line":2382,"address":[],"length":0,"stats":{"Line":0}},{"line":2383,"address":[],"length":0,"stats":{"Line":0}},{"line":2386,"address":[],"length":0,"stats":{"Line":0}},{"line":2388,"address":[],"length":0,"stats":{"Line":0}},{"line":2389,"address":[],"length":0,"stats":{"Line":0}},{"line":2393,"address":[],"length":0,"stats":{"Line":0}},{"line":2398,"address":[],"length":0,"stats":{"Line":0}},{"line":2401,"address":[],"length":0,"stats":{"Line":0}},{"line":2402,"address":[],"length":0,"stats":{"Line":0}},{"line":2405,"address":[],"length":0,"stats":{"Line":0}},{"line":2406,"address":[],"length":0,"stats":{"Line":0}},{"line":2414,"address":[],"length":0,"stats":{"Line":0}},{"line":2415,"address":[],"length":0,"stats":{"Line":0}},{"line":2418,"address":[],"length":0,"stats":{"Line":0}},{"line":2421,"address":[],"length":0,"stats":{"Line":0}},{"line":2422,"address":[],"length":0,"stats":{"Line":0}},{"line":2423,"address":[],"length":0,"stats":{"Line":0}},{"line":2424,"address":[],"length":0,"stats":{"Line":0}},{"line":2425,"address":[],"length":0,"stats":{"Line":0}},{"line":2426,"address":[],"length":0,"stats":{"Line":0}},{"line":2432,"address":[],"length":0,"stats":{"Line":0}},{"line":2433,"address":[],"length":0,"stats":{"Line":0}},{"line":2434,"address":[],"length":0,"stats":{"Line":0}},{"line":2439,"address":[],"length":0,"stats":{"Line":0}},{"line":2441,"address":[],"length":0,"stats":{"Line":0}},{"line":2444,"address":[],"length":0,"stats":{"Line":0}},{"line":2445,"address":[],"length":0,"stats":{"Line":0}},{"line":2446,"address":[],"length":0,"stats":{"Line":0}},{"line":2447,"address":[],"length":0,"stats":{"Line":0}},{"line":2449,"address":[],"length":0,"stats":{"Line":0}},{"line":2452,"address":[],"length":0,"stats":{"Line":0}},{"line":2456,"address":[],"length":0,"stats":{"Line":0}},{"line":2458,"address":[],"length":0,"stats":{"Line":0}},{"line":2459,"address":[],"length":0,"stats":{"Line":0}},{"line":2460,"address":[],"length":0,"stats":{"Line":0}},{"line":2461,"address":[],"length":0,"stats":{"Line":0}},{"line":2462,"address":[],"length":0,"stats":{"Line":0}},{"line":2463,"address":[],"length":0,"stats":{"Line":0}},{"line":2465,"address":[],"length":0,"stats":{"Line":0}},{"line":2470,"address":[],"length":0,"stats":{"Line":0}},{"line":2471,"address":[],"length":0,"stats":{"Line":0}},{"line":2476,"address":[],"length":0,"stats":{"Line":0}},{"line":2478,"address":[],"length":0,"stats":{"Line":0}},{"line":2479,"address":[],"length":0,"stats":{"Line":0}},{"line":2480,"address":[],"length":0,"stats":{"Line":0}},{"line":2481,"address":[],"length":0,"stats":{"Line":0}},{"line":2487,"address":[],"length":0,"stats":{"Line":0}},{"line":2488,"address":[],"length":0,"stats":{"Line":0}},{"line":2491,"address":[],"length":0,"stats":{"Line":0}},{"line":2496,"address":[],"length":0,"stats":{"Line":0}},{"line":2497,"address":[],"length":0,"stats":{"Line":0}},{"line":2498,"address":[],"length":0,"stats":{"Line":0}},{"line":2499,"address":[],"length":0,"stats":{"Line":0}},{"line":2500,"address":[],"length":0,"stats":{"Line":0}},{"line":2501,"address":[],"length":0,"stats":{"Line":0}},{"line":2502,"address":[],"length":0,"stats":{"Line":0}},{"line":2505,"address":[],"length":0,"stats":{"Line":0}},{"line":2506,"address":[],"length":0,"stats":{"Line":0}},{"line":2507,"address":[],"length":0,"stats":{"Line":0}},{"line":2508,"address":[],"length":0,"stats":{"Line":0}},{"line":2510,"address":[],"length":0,"stats":{"Line":0}},{"line":2513,"address":[],"length":0,"stats":{"Line":0}},{"line":2515,"address":[],"length":0,"stats":{"Line":0}},{"line":2517,"address":[],"length":0,"stats":{"Line":0}},{"line":2518,"address":[],"length":0,"stats":{"Line":0}},{"line":2519,"address":[],"length":0,"stats":{"Line":0}},{"line":2523,"address":[],"length":0,"stats":{"Line":0}},{"line":2524,"address":[],"length":0,"stats":{"Line":0}},{"line":2525,"address":[],"length":0,"stats":{"Line":0}},{"line":2526,"address":[],"length":0,"stats":{"Line":0}},{"line":2527,"address":[],"length":0,"stats":{"Line":0}},{"line":2528,"address":[],"length":0,"stats":{"Line":0}},{"line":2529,"address":[],"length":0,"stats":{"Line":0}},{"line":2530,"address":[],"length":0,"stats":{"Line":0}},{"line":2532,"address":[],"length":0,"stats":{"Line":0}},{"line":2537,"address":[],"length":0,"stats":{"Line":0}},{"line":2538,"address":[],"length":0,"stats":{"Line":0}},{"line":2539,"address":[],"length":0,"stats":{"Line":0}},{"line":2540,"address":[],"length":0,"stats":{"Line":0}},{"line":2543,"address":[],"length":0,"stats":{"Line":0}},{"line":2544,"address":[],"length":0,"stats":{"Line":0}},{"line":2545,"address":[],"length":0,"stats":{"Line":0}},{"line":2546,"address":[],"length":0,"stats":{"Line":0}},{"line":2549,"address":[],"length":0,"stats":{"Line":0}},{"line":2553,"address":[],"length":0,"stats":{"Line":0}},{"line":2554,"address":[],"length":0,"stats":{"Line":0}},{"line":2556,"address":[],"length":0,"stats":{"Line":0}},{"line":2561,"address":[],"length":0,"stats":{"Line":0}}],"covered":11,"coverable":1255},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","folders.rs"],"content":"use clap::ArgMatches;\nuse tracing::trace;\nuse uuid::Uuid;\nuse crate::{commands::params::{PARAMETER_FOLDER_PATH, PARAMETER_FOLDER_UUID, PARAMETER_NAME, PARAMETER_PARENT_FOLDER_PATH, PARAMETER_PARENT_FOLDER_UUID}, configuration::Configuration, error::CliError, folder_hierarchy::FolderHierarchy, format::{OutputFormat, OutputFormatter}, model::{Folder, Tenant, normalize_path}, param_utils::{get_format_parameter_value, get_tenant}, physna_v3::{PhysnaApiClient, TryDefault}};\n\n\npub async fn resolve_folder_uuid_by_path(api: \u0026mut PhysnaApiClient, tenant: \u0026Tenant, path: \u0026str) -\u003e Result\u003cUuid, CliError\u003e {\n    trace!(\"Resolving the UUID for folder path {}...\", path);\n    if let Some(folder_uuid) = api.get_folder_uuid_by_path(\u0026tenant.uuid, path).await? {\n        Ok(folder_uuid)\n    } else {\n        Err(CliError::FolderNotFound(path.to_string()))\n    }\n}\n\npub async fn list_folders(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    trace!(\"Listing folders...\");\n    \n    let format = get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n    let path = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    let path = normalize_path(path.cloned().unwrap_or_default());\n    trace!(\"Path requested: \\\"{}\\\"\", \u0026path);\n\n    // It is not efficient, but the only option is to read the full directory hieratchy from the API\n    let hierarchy = FolderHierarchy::build_from_api(\u0026mut api, \u0026tenant.uuid).await?;\n\n    \n    // If tree format is requested, display the hierarchical tree structure\n    match format {\n        OutputFormat::Tree(_) =\u003e {\n                let hierarchy = if path.eq(\"/\") {\n                        hierarchy\n                    } else {\n                        hierarchy.filter_by_path(path.as_str()).ok_or(CliError::FolderNotFound(path))?\n                    };\n                hierarchy.print_tree();\n            }\n        _ =\u003e {\n                // Convert to folder list with only direct children if not recursive\n                let folder_list = if path.eq(\"/\") {\n                        hierarchy.to_direct_children_list()\n                    } else {\n                        hierarchy.filter_by_path(path.as_str()).ok_or(CliError::FolderNotFound(path))?.to_folder_list()\n                    };\n\n                println!(\"{}\", folder_list.format(format)?);\n            }\n    }\n\n\tOk(())\n}\n\npub async fn print_folder_details(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    let format = get_format_parameter_value(sub_matches).await;\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    \n    // Must provide either UUID or path\n    if folder_uuid_param.is_none() \u0026\u0026 folder_path_param.is_none() {\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    }\n\n    // Resolve folder UUID from either UUID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        // This shouldn't happen due to our earlier check, but just in case\n        return Err(CliError::MissingRequiredArgument(\"Either folder UUID or path must be provided\".to_string()));\n    };\n            \n    let folder = api.get_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n    let mut folder: Folder = folder.into();\n    match folder_path_param {\n        Some(path) =\u003e folder.set_path(path.to_owned()),\n        None =\u003e (),\n    }\n    println!(\"{}\", folder.format(format)?);\n\n    Ok(())\n}\n\npub async fn create_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n    \n    let name = sub_matches.get_one::\u003cString\u003e(PARAMETER_NAME)\n        .ok_or(CliError::MissingRequiredArgument(PARAMETER_NAME.to_string()))?\n        .clone();\n    let parent_folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_PARENT_FOLDER_UUID);\n    let parent_folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_PARENT_FOLDER_PATH);\n\n    // Validate that only one parent parameter is provided (mutual exclusivity handled by clap group)\n    if parent_folder_uuid_param.is_some() \u0026\u0026 parent_folder_path_param.is_some() {\n        return Err(CliError::MissingRequiredArgument(\"Only one of --parent-folder-uuid or --parent-folder-path can be specified, not both\".to_string()));\n    }\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Resolve parent folder ID from either ID parameter or path\n    let parent_folder_uuid = if let Some(uuid) = parent_folder_uuid_param {\n        Some(uuid.clone())\n    } else if let Some(path) = parent_folder_path_param {\n        Some(resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?)\n    } else {\n        None\n    };\n\n    api.create_folder(\u0026tenant.uuid, name.as_str(), parent_folder_uuid).await?;\n    \n    Ok(())\n}\n\npub async fn delete_folder(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliError\u003e {\n\n    let folder_uuid_param = sub_matches.get_one::\u003cUuid\u003e(PARAMETER_FOLDER_UUID);\n    let folder_path_param = sub_matches.get_one::\u003cString\u003e(PARAMETER_FOLDER_PATH);\n    let force_flag = sub_matches.get_flag(\"force\");\n\n    // Validate that only one parent parameter is provided (mutual exclusivity handled by clap group)\n    if folder_uuid_param.is_some() \u0026\u0026 folder_path_param.is_some() {\n        return Err(CliError::MissingRequiredArgument(\"Only one of --folder-uuid or --folder-path can be specified, not both\".to_string()));\n    }\n\n    let configuration = Configuration::load_or_create_default()?;\n    let mut api = PhysnaApiClient::try_default()?;\n    let tenant = get_tenant(\u0026mut api, sub_matches, \u0026configuration).await?;\n\n    // Resolve parent folder ID from either ID parameter or path\n    let folder_uuid = if let Some(uuid) = folder_uuid_param {\n        uuid.clone()\n    } else if let Some(path) = folder_path_param {\n        resolve_folder_uuid_by_path(\u0026mut api, \u0026tenant, path).await?\n    } else {\n        return Err(CliError::MissingRequiredArgument(format!(\"Missing folder path\")));\n    };\n\n    if force_flag {\n        // Recursively delete all contents before deleting the folder\n        delete_folder_contents(\u0026mut api, \u0026tenant, \u0026folder_uuid).await?;\n    }\n\n    api.delete_folder(\u0026tenant.uuid, \u0026folder_uuid).await?;\n\n    Ok(())\n}\n\nuse std::collections::VecDeque;\n\n/// Delete all assets and subfolders in a folder using iterative approach to avoid recursion\nasync fn delete_folder_contents(api: \u0026mut PhysnaApiClient, tenant: \u0026crate::model::Tenant, folder_uuid: \u0026Uuid) -\u003e Result\u003c(), CliError\u003e {\n    // Use BFS to collect all folders in the hierarchy\n    let mut all_folders = Vec::new();\n    let mut queue = VecDeque::new();\n    queue.push_back(*folder_uuid);\n\n    while let Some(current_folder_uuid) = queue.pop_front() {\n        all_folders.push(current_folder_uuid);\n\n        // Get subfolders of current folder\n        let folders_response = api.list_folders_in_parent(\u0026tenant.uuid, Some(\u0026current_folder_uuid.to_string()), None, None).await?;\n        for folder in folders_response.folders {\n            queue.push_back(folder.uuid);\n        }\n    }\n\n    // Process folders in reverse order (deepest first, then parent)\n    for folder_uuid in all_folders.iter().rev() {\n        // List and delete all assets in this folder\n        let assets = api.list_assets_by_parent_folder_uuid(\u0026tenant.uuid, Some(folder_uuid)).await?;\n        for asset in assets.get_all_assets() {\n            api.delete_asset(\u0026tenant.uuid.to_string(), \u0026asset.uuid().to_string()).await?;\n        }\n    }\n\n    // Now delete the folders in reverse order (children first, then parents)\n    // Skip the original folder since that will be deleted by the caller\n    for folder_uuid in all_folders.iter().skip(1).rev() {\n        api.delete_folder(\u0026tenant.uuid, folder_uuid).await?;\n    }\n\n    Ok(())\n}\n","traces":[{"line":7,"address":[],"length":0,"stats":{"Line":0}},{"line":8,"address":[],"length":0,"stats":{"Line":0}},{"line":9,"address":[],"length":0,"stats":{"Line":0}},{"line":10,"address":[],"length":0,"stats":{"Line":0}},{"line":12,"address":[],"length":0,"stats":{"Line":0}},{"line":16,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":26,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":97},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","mod.rs"],"content":"use thiserror::Error;\n\npub mod assets;\npub mod folders;\npub mod tenants;\n\n#[derive(Debug, Error)]\npub enum CliActionError {\n    #[error(\"{0}\")]\n    JsonError(#[from] serde_json::Error),\n\n    #[error(\"{0}\")]\n    ApiError(#[from] crate::physna_v3::ApiError),\n\n    #[error(\"{0}\")]\n    CsvError(#[from] csv::Error),\n\n    #[error(\"{0}\")]\n    CsvIntoError(#[from] csv::IntoInnerError\u003ccsv::Writer\u003cVec\u003cu8\u003e\u003e\u003e),\n\n    #[error(\"{0}\")]\n    UtfError(#[from] std::string::FromUtf8Error),\n\n    #[error(\"{0}\")]\n    UuidPartsinError(#[from] uuid::Error),\n\n    #[error(\"{0}\")]\n    ConfigurationError(#[from] crate::configuration::ConfigurationError),\n\n    #[error(\"ERROR: Unsupported output format: {0}\")]\n    UnsupportedOutputFormat(String),\n\n    #[error(\"{0}\")]\n    FormattingError(#[from] crate::format::FormattingError),\n\n    #[error(\"Missing required argument: {0}\")]\n    MissingRequiredArgument(String),\n\n    #[error(\"Tenant not found: {identifier}\")]\n    TenantNotFound { identifier: String },\n\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","src","actions","tenants.rs"],"content":"use clap::ArgMatches;\nuse tracing::trace;\nuse crate::{\n    commands::params::{PARAMETER_NAME, PARAMETER_REFRESH},\n    configuration::Configuration,\n    error_utils,\n    format::{OutputFormat, Formattable, FormattingError, OutputFormatter},\n    model::Tenant,\n    physna_v3::{PhysnaApiClient, TryDefault},\n    actions::CliActionError\n};\n\n#[derive(Debug, Clone, serde::Serialize)]\npub struct ContextInfo {\n    pub active_tenant_uuid: Option\u003cuuid::Uuid\u003e,\n    pub active_tenant_short_name: Option\u003cString\u003e,\n    pub active_tenant_display_name: Option\u003cString\u003e,\n}\n\nimpl ContextInfo {\n    pub async fn from_configuration(configuration: \u0026Configuration) -\u003e Result\u003cContextInfo, CliActionError\u003e {\n        if let Some(active_tenant_uuid) = configuration.active_tenant_uuid() {\n            let mut api = PhysnaApiClient::try_default()?;\n            let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n            let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(active_tenant_uuid));\n\n            match active_tenant {\n                Some(active_tenant) =\u003e {\n                    Ok(ContextInfo {\n                        active_tenant_uuid: Some(active_tenant.tenant_uuid),\n                        active_tenant_short_name: Some(active_tenant.tenant_short_name),\n                        active_tenant_display_name: Some(active_tenant.tenant_display_name),\n                    })\n                },\n                None =\u003e {\n                    Ok(ContextInfo {\n                        active_tenant_uuid: Some(*active_tenant_uuid),\n                        active_tenant_short_name: None,\n                        active_tenant_display_name: None,\n                    })\n                }\n            }\n        } else {\n            Ok(ContextInfo {\n                active_tenant_uuid: None,\n                active_tenant_short_name: None,\n                active_tenant_display_name: None,\n            })\n        }\n    }\n}\n\nimpl Formattable for ContextInfo {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                // For CSV format, output with or without header based on options\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    wtr.write_record(\u0026[\"ACTIVE_TENANT_UUID\", \"ACTIVE_TENANT_SHORT_NAME\", \"ACTIVE_TENANT_DISPLAY_NAME\"])?;\n                }\n\n                wtr.serialize((\n                    self.active_tenant_uuid.map(|uuid| uuid.to_string()).unwrap_or_default(),\n                    self.active_tenant_short_name.as_deref().unwrap_or(\"\"),\n                    self.active_tenant_display_name.as_deref().unwrap_or(\"\"),\n                ))?;\n\n                let csv_string = String::from_utf8(wtr.into_inner()?)?;\n                Ok(csv_string)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For tree format, just return the same as default text format\n                let tenant_info = if let Some(uuid) = self.active_tenant_uuid {\n                    if let (Some(short_name), Some(display_name)) = (\u0026self.active_tenant_short_name, \u0026self.active_tenant_display_name) {\n                        format!(\"Active Tenant: {} ({})\", short_name, display_name)\n                    } else {\n                        format!(\"Active Tenant: \u003cunknown tenant UUID: {}\u003e\", uuid)\n                    }\n                } else {\n                    \"Active Tenant: \u003cnot set\u003e\".to_string()\n                };\n                Ok(tenant_info)\n            }\n        }\n    }\n}\n\n\npub async fn list_all_tenants(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n\n    // Get format parameters directly from sub_matches\n    let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n        .cloned()\n        .unwrap_or_else(|| \"json\".to_string());\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n    // Create format options with metadata set to false since tenants don't have metadata\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    let mut api = PhysnaApiClient::try_default()?;\n\n    match crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await {\n        Ok(tenant_settings) =\u003e {\n            // Convert to a format that can be handled by the Formattable trait\n            let tenant_list = crate::model::TenantList::from(tenant_settings);\n\n            println!(\"{}\", tenant_list.format(format)?);\n            Ok(())\n        }\n        Err(e) =\u003e {\n            error_utils::report_error(\u0026e);\n            Ok(())\n        }\n    }\n}\n\npub async fn print_active_tenant_name() -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get' command\");\n\n    let configuration = Configuration::load_default()?;\n\n    if let Some(active_tenant_uuid) = configuration.active_tenant_uuid() {\n        let mut api = PhysnaApiClient::try_default()?;\n        let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n        let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(active_tenant_uuid));\n        match active_tenant {\n            Some(active_tenant) =\u003e {\n                println!(\"{}\", active_tenant.tenant_short_name);\n            },\n            None =\u003e {\n                println!(\"No active tenant selected\");\n            }\n        }\n    } else {\n        println!(\"No active tenant selected\");\n    }\n\n    Ok(())\n}\n\npub async fn set_active_tenant(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n\n    let name = sub_matches.get_one::\u003cString\u003e(PARAMETER_NAME);\n    let refresh = sub_matches.get_flag(PARAMETER_REFRESH);\n    let mut api = PhysnaApiClient::try_default()?;\n\n    // Get tenants from cache or API depending on refresh flag\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, refresh).await\n        .map_err(|e| CliActionError::ApiError(e))?;\n            \n    // If no name was provided, show interactive selection\n    let selected_tenant = if let Some(name) = name {\n        // Find tenant by name (existing logic)\n        tenants.iter().find(|t| t.tenant_short_name == *name).cloned()\n    } else {\n        // Interactive selection using TUI\n        if tenants.is_empty() {\n            error_utils::report_error_with_remediation(\n                \u0026\"No tenants available\",\n                \u0026[\n                    \"Verify your authentication credentials are valid\",\n                    \"Check that you have access to at least one tenant\",\n                    \"Log in again with 'pcli2 auth login'\"\n                ]\n            );\n            return Ok(());\n        }\n        \n        // Create options for the select menu\n        let options: Vec\u003cString\u003e = tenants.iter()\n            .map(|tenant| format!(\"{}: {} ({})\", tenant.tenant_short_name, tenant.tenant_display_name, tenant.tenant_uuid))\n            .collect();\n        \n        // Use inquire to create an interactive selection\n        let ans = inquire::Select::new(\"Select a tenant:\", options)\n            .with_help_message(\"Choose the tenant you want to set as active\")\n            .prompt();\n            \n        match ans {\n            Ok(choice) =\u003e {\n                let tenant_name = choice.split_once(':').map(|(before, _)| before.trim()).unwrap();\n                trace!(\"User selected tenant: {}\", tenant_name);\n                // Find the tenant that matches the selection\n                tenants.iter().find(|t| t.tenant_short_name == tenant_name).cloned()\n            }\n            Err(_) =\u003e {\n                error_utils::report_error_with_remediation(\n                    \u0026\"No tenant selected\",\n                    \u0026[\n                        \"Run 'pcli2 context set tenant' again to select a tenant\",\n                        \"Verify you have access to at least one tenant\",\n                        \"Check your authentication credentials\"\n                    ]\n                );\n                return Ok(());\n            }\n        }\n    };\n                    \n    // Set the active tenant in configuration\n    let mut configuration = Configuration::load_default()?;\n    if let Some(selected_tenant) = selected_tenant {\n        let tenant = Tenant::try_from(\u0026selected_tenant)?;\n        configuration.set_active_tenant(\u0026tenant);\n                \n        // Save configuration\n        configuration.save_to_default()?;\n    } else {\n            error_utils::report_error_with_remediation(\n                \u0026format!(\"Tenant '{}' not found\", name.unwrap()),\n                \u0026[\n                    \"Check the tenant name spelling\",\n                    \"List available tenants with 'pcli2 tenant list'\",\n                    \"Verify you have access to this tenant\"\n                ]\n            ); // Safe to unwrap since we checked above\n    }\n\n    Ok(())\n}\n\npub async fn get_tenant_details(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    let tenant_uuid_param = sub_matches.get_one::\u003cuuid::Uuid\u003e(crate::commands::params::PARAMETER_TENANT_UUID);\n    let tenant_name_param = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_TENANT_NAME);\n\n    let mut api = PhysnaApiClient::try_default()?;\n\n    // Get all tenants to search through\n    let all_tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n\n    // Find the specific tenant based on either UUID or name\n    let tenant_setting = if let Some(uuid) = tenant_uuid_param {\n        all_tenants.iter().find(|t| \u0026t.tenant_uuid == uuid)\n    } else if let Some(name) = tenant_name_param {\n        all_tenants.iter().find(|t| \u0026t.tenant_short_name == name)\n    } else {\n        return Err(CliActionError::MissingRequiredArgument(\"Either tenant UUID (--id) or tenant name (--tenant-name) must be provided\".to_string()));\n    };\n\n    match tenant_setting {\n        Some(tenant_setting) =\u003e {\n            // Convert to Tenant for formatting\n            let tenant: Tenant = tenant_setting.try_into()?;\n\n            // Get format parameters directly from sub_matches\n            let format_str = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT)\n                .cloned()\n                .unwrap_or_else(|| \"json\".to_string());\n\n            let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n            let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n\n            // Create format options (no metadata for tenants)\n            let format_options = crate::format::OutputFormatOptions {\n                with_metadata: false,  // No metadata for tenants\n                with_headers,\n                pretty,\n            };\n\n            let format = crate::format::OutputFormat::from_string_with_options(\u0026format_str, format_options)\n                .map_err(|e| CliActionError::FormattingError(e))?;\n\n            println!(\"{}\", tenant.format(\u0026format)?);\n        },\n        None =\u003e {\n            if let Some(uuid) = tenant_uuid_param {\n                return Err(CliActionError::TenantNotFound { identifier: uuid.to_string() });\n            } else if let Some(name) = tenant_name_param {\n                return Err(CliActionError::TenantNotFound { identifier: name.clone() });\n            }\n            // This shouldn't happen due to the argument group validation, but just in case\n            return Err(CliActionError::MissingRequiredArgument(\"Either tenant UUID (--id) or tenant name (--tenant-name) must be provided\".to_string()));\n        }\n    }\n\n    Ok(())\n}\n\npub async fn print_active_tenant_name_with_format(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get tenant' with format options\");\n\n    // Get format parameters directly from sub_matches since context commands don't have all format flags\n    let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(crate::commands::params::PARAMETER_FORMAT) {\n        format_val.clone()\n    } else {\n        \"json\".to_string()\n    };\n    let format_str = \u0026format_str_owned;\n\n    let with_headers = sub_matches.get_flag(crate::commands::params::PARAMETER_HEADERS);\n    let pretty = sub_matches.get_flag(crate::commands::params::PARAMETER_PRETTY);\n    // Note: context commands don't have metadata flag for tenant\n    let format_options = crate::format::OutputFormatOptions {\n        with_metadata: false,  // No metadata for context tenant\n        with_headers,\n        pretty,\n    };\n\n    let format = crate::format::OutputFormat::from_string_with_options(format_str, format_options)\n        .map_err(|e| CliActionError::FormattingError(e))?;\n\n    let configuration = Configuration::load_default()?;\n\n    if let Some(active_tenant_uuid) = configuration.get_active_tenant_uuid() {\n        let mut api = PhysnaApiClient::try_default()?;\n        let tenants = crate::tenant_cache::TenantCache::get_all_tenants(\u0026mut api, false).await?;\n        let active_tenant = tenants.into_iter().find(|t| t.tenant_uuid.eq(\u0026active_tenant_uuid));\n\n        match active_tenant {\n            Some(tenant_setting) =\u003e {\n                // Convert to Tenant for formatting\n                let tenant = Tenant {\n                    uuid: tenant_setting.tenant_uuid,\n                    name: tenant_setting.tenant_short_name.clone(),\n                    description: tenant_setting.tenant_display_name.clone(),\n                };\n                println!(\"{}\", tenant.format(\u0026format)?);\n            },\n            None =\u003e {\n                // Create a minimal tenant for formatting when UUID exists but tenant not found\n                let tenant = Tenant {\n                    uuid: active_tenant_uuid,\n                    name: \"Unknown Tenant\".to_string(),\n                    description: \"Tenant not found in current user's tenants\".to_string(),\n                };\n                println!(\"{}\", tenant.format(\u0026format)?);\n            }\n        }\n    } else {\n        // Create a minimal tenant for formatting when no active tenant is set\n        let tenant = Tenant {\n            uuid: uuid::Uuid::nil(), // Use nil UUID for no tenant\n            name: \"No active tenant\".to_string(),\n            description: \"No tenant selected\".to_string(),\n        };\n        println!(\"{}\", tenant.format(\u0026format)?);\n    }\n\n    Ok(())\n}\n\npub async fn clear_active_tenant() -\u003e Result\u003c(), CliActionError\u003e {\n\n    let mut configuration = Configuration::load_default()?;\n    configuration.clear_active_tenant();\n    match configuration.save_to_default() {\n        Ok(()) =\u003e {\n            Ok(())\n        }\n        Err(e) =\u003e {\n            error_utils::report_error_with_remediation(\n                \u0026format!(\"Error saving configuration: {}\", e),\n                \u0026[\n                    \"Check that you have write permissions to the configuration directory\",\n                    \"Verify the configuration file is not locked by another process\",\n                    \"Ensure you have sufficient disk space\"\n                ]\n            );\n            Err(CliActionError::ConfigurationError(e))\n        }\n    }\n}\n\npub async fn print_current_context(sub_matches: \u0026ArgMatches) -\u003e Result\u003c(), CliActionError\u003e {\n    trace!(\"Executing 'context get' command\");\n\n    let format = crate::param_utils::get_format_parameter_value(sub_matches).await;\n    let configuration = Configuration::load_default()?;\n    let context_info = ContextInfo::from_configuration(\u0026configuration).await?;\n\n    println!(\"{}\", context_info.format(\u0026format)?);\n\n    Ok(())\n}\n","traces":[{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":23,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":222,"address":[],"length":0,"stats":{"Line":0}},{"line":225,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":244,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":308,"address":[],"length":0,"stats":{"Line":0}},{"line":309,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":322,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":368,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":185},{"path":["/","Users","julian","projects","physna","pcli2","src","auth.rs"],"content":"use reqwest;\nuse serde::{Deserialize, Serialize};\nuse thiserror::Error;\n\n#[derive(Debug, Error)]\npub enum AuthError {\n    #[error(\"HTTP error: {0}\")]\n    HttpError(#[from] reqwest::Error),\n    #[error(\"JSON parsing error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    #[error(\"Authentication failed: {0}\")]\n    AuthFailed(String),\n    #[error(\"Token validation error: {0}\")]\n    TokenValidationError(String),\n}\n\n#[derive(Debug, Clone, Deserialize, Serialize)]\npub struct TokenResponse {\n    #[serde(rename = \"access_token\")]\n    pub access_token: String,\n    #[serde(rename = \"expires_in\")]\n    pub expires_in: u64,\n    #[serde(rename = \"token_type\")]\n    pub token_type: String,\n}\n\npub struct AuthClient {\n    token_url: String,\n    client_id: String,\n    client_secret: String,\n}\n\nimpl AuthClient {\n    pub fn new(client_id: String, client_secret: String) -\u003e Self {\n        Self {\n            token_url: \"https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token\".to_string(),\n            client_id,\n            client_secret,\n        }\n    }\n\n    pub fn new_with_configuration(client_id: String, client_secret: String, configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            token_url: configuration.get_auth_base_url(),\n            client_id,\n            client_secret,\n        }\n    }\n\n    pub async fn get_access_token(\u0026self) -\u003e Result\u003cString, AuthError\u003e {\n        let client = reqwest::Client::new();\n\n        // Add tracing to see which URL is being used\n        tracing::debug!(\"Authenticating with token URL: {}\", \u0026self.token_url);\n        tracing::debug!(\"Client ID: {}\", \u0026self.client_id);\n\n        // For client credentials flow, we don't need to specify a scope\n        // Only send grant_type in form data, client credentials go in Authorization header\n        let params = [\n            (\"grant_type\", \"client_credentials\"),\n        ];\n\n        let response = client\n            .post(\u0026self.token_url)\n            .header(\"Content-Type\", \"application/x-www-form-urlencoded\")\n            .form(\u0026params)\n            .basic_auth(\u0026self.client_id, Some(\u0026self.client_secret))\n            .send()\n            .await?;\n\n        tracing::debug!(\"Authentication response status: {}\", response.status());\n\n        if response.status().is_success() {\n            match response.json::\u003cTokenResponse\u003e().await {\n                Ok(token_response) =\u003e {\n                    tracing::debug!(\"Authentication successful, received token\");\n                    Ok(token_response.access_token)\n                },\n                Err(e) =\u003e Err(AuthError::HttpError(e))\n            }\n        } else {\n            let status = response.status();\n            // Try to get error details - first as text, then try to parse as JSON if needed\n            let error_text = match response.text().await {\n                Ok(text) =\u003e text,\n                Err(_) =\u003e \"Unknown error\".to_string()\n            };\n\n            tracing::debug!(\"Authentication failed with error text: {}\", \u0026error_text);\n\n            // Try to parse as JSON for better formatting\n            let error_details = match serde_json::from_str::\u003cserde_json::Value\u003e(\u0026error_text) {\n                Ok(error_json) =\u003e {\n                    // Extract specific error information for better user messages\n                    if let Some(error_val) = error_json.get(\"error\") {\n                        let error_str = error_val.as_str().unwrap_or(\"unknown\");\n\n                        match error_str {\n                            \"invalid_client\" =\u003e {\n                                \"Invalid client credentials. Please check your client ID and secret.\".to_string()\n                            },\n                            \"invalid_grant\" =\u003e {\n                                \"Invalid grant. The authorization grant or refresh token is invalid.\".to_string()\n                            },\n                            \"unauthorized_client\" =\u003e {\n                                \"Unauthorized client. The client is not authorized to use this authorization grant type.\".to_string()\n                            },\n                            \"invalid_request\" =\u003e {\n                                \"Invalid request. The request is missing required parameters or contains invalid parameters.\".to_string()\n                            },\n                            _ =\u003e format!(\"{:?}\", error_json),\n                        }\n                    } else {\n                        format!(\"{:?}\", error_json)\n                    }\n                },\n                Err(_) =\u003e error_text\n            };\n\n            Err(AuthError::AuthFailed(format!(\"Authentication failed: HTTP {} {}\", status, error_details)))\n        }\n    }\n}\n\n","traces":[{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":44},{"path":["/","Users","julian","projects","physna","pcli2","src","banner.rs"],"content":"use color_print::cprintln;\n\n/// Display the ASCII art banner for PCLI2\npub fn print_banner() {\n    println!();\n    cprintln!(\"\u003cr\u003ePCLI2\u003c/r\u003e - Physna Command Line Interface v2\");\n    println!();\n    println!();\n    \n    // Print ASCII art spelling out \"PCLI2\" with smooth gradient from light to dark orange (top to bottom)\n    cprintln!(\"\u003c#FFA500\u003e ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà       ‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \u003c/#FFA500\u003e\");\n    cprintln!(\"\u003c#FF9500\u003e‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà       ‚ñë‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà\u003c/#FF9500\u003e\");\n    cprintln!(\"\u003c#FF8C00\u003e ‚ñë‚ñà‚ñà‚ñà    ‚ñë‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà     ‚ñë‚ñë‚ñë  ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà ‚ñë‚ñë‚ñë    ‚ñë‚ñà‚ñà‚ñà\u003c/#FF8C00\u003e\");\n    cprintln!(\"\u003c#FF8000\u003e ‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà          ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà \u003c/#FF8000\u003e\");\n    cprintln!(\"\u003c#FF7200\u003e ‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ñë‚ñà‚ñà‚ñà          ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  \u003c/#FF7200\u003e\");\n    cprintln!(\"\u003c#FF6300\u003e ‚ñë‚ñà‚ñà‚ñà        ‚ñë‚ñë‚ñà‚ñà‚ñà     ‚ñà‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñà      ‚ñà ‚ñë‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà      ‚ñà\u003c/#FF6300\u003e\");\n    cprintln!(\"\u003c#FF5500\u003e ‚ñà‚ñà‚ñà‚ñà‚ñà        ‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\u003c/#FF5500\u003e\");\n    cprintln!(\"\u003c#FF4500\u003e‚ñë‚ñë‚ñë‚ñë‚ñë          ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë \u003c/#FF4500\u003e\");\n    println!();\n    println!();\n}\n\n/// Check if the command line arguments include help request\npub fn has_help_flag(args: \u0026[String]) -\u003e bool {\n    for arg in args.iter() {\n        if arg == \"--help\" || arg == \"-h\" || arg == \"help\" {\n            return true;\n        }\n    }\n    false\n}","traces":[{"line":4,"address":[],"length":0,"stats":{"Line":6}},{"line":5,"address":[],"length":0,"stats":{"Line":6}},{"line":6,"address":[],"length":0,"stats":{"Line":6}},{"line":7,"address":[],"length":0,"stats":{"Line":6}},{"line":8,"address":[],"length":0,"stats":{"Line":6}},{"line":11,"address":[],"length":0,"stats":{"Line":6}},{"line":12,"address":[],"length":0,"stats":{"Line":6}},{"line":13,"address":[],"length":0,"stats":{"Line":6}},{"line":14,"address":[],"length":0,"stats":{"Line":6}},{"line":15,"address":[],"length":0,"stats":{"Line":6}},{"line":16,"address":[],"length":0,"stats":{"Line":6}},{"line":17,"address":[],"length":0,"stats":{"Line":6}},{"line":18,"address":[],"length":0,"stats":{"Line":6}},{"line":19,"address":[],"length":0,"stats":{"Line":6}},{"line":20,"address":[],"length":0,"stats":{"Line":6}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":83}},{"line":26,"address":[],"length":0,"stats":{"Line":171}},{"line":27,"address":[],"length":0,"stats":{"Line":6}},{"line":30,"address":[],"length":0,"stats":{"Line":5}}],"covered":20,"coverable":20},{"path":["/","Users","julian","projects","physna","pcli2","src","cache.rs"],"content":"//! Shared caching functionality for the Physna CLI client.\n//!\n//! This module provides common utilities for implementing cache functionality\n//! across different types of data in the application. It reduces code duplication\n//! and provides a consistent interface for cache operations.\n\n/// Common error type for cache operations that implements Send + Sync\n#[derive(Debug)]\npub enum CacheError {\n    IoError(std::io::Error),\n    SerializationError(serde_json::Error),\n    ApiError(Box\u003cdyn std::error::Error + Send + Sync\u003e),\n    Other(String),\n}\n\nimpl std::fmt::Display for CacheError {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            CacheError::IoError(e) =\u003e write!(f, \"IO error: {}\", e),\n            CacheError::SerializationError(e) =\u003e write!(f, \"Serialization error: {}\", e),\n            CacheError::ApiError(e) =\u003e write!(f, \"API error: {}\", e),\n            CacheError::Other(s) =\u003e write!(f, \"Cache error: {}\", s),\n        }\n    }\n}\n\nimpl std::error::Error for CacheError {\n    fn source(\u0026self) -\u003e Option\u003c\u0026(dyn std::error::Error + 'static)\u003e {\n        match self {\n            CacheError::IoError(e) =\u003e Some(e),\n            CacheError::SerializationError(e) =\u003e Some(e),\n            CacheError::ApiError(e) =\u003e Some(e.as_ref()),\n            CacheError::Other(_) =\u003e None,\n        }\n    }\n}\n\nimpl From\u003cstd::io::Error\u003e for CacheError {\n    fn from(error: std::io::Error) -\u003e Self {\n        CacheError::IoError(error)\n    }\n}\n\nimpl From\u003cserde_json::Error\u003e for CacheError {\n    fn from(error: serde_json::Error) -\u003e Self {\n        CacheError::SerializationError(error)\n    }\n}\n\nimpl From\u003cBox\u003cdyn std::error::Error + Send + Sync\u003e\u003e for CacheError {\n    fn from(error: Box\u003cdyn std::error::Error + Send + Sync\u003e) -\u003e Self {\n        CacheError::ApiError(error)\n    }\n}\n\n/// Common cache configuration options\n#[derive(Debug, Clone)]\npub struct CacheConfig {\n    /// Cache expiration time in seconds\n    pub expiration_seconds: u64,\n    /// Whether to compress cached data\n    pub compress: bool,\n    /// The directory where cache files are stored\n    pub cache_dir: std::path::PathBuf,\n}\n\nimpl Default for CacheConfig {\n    fn default() -\u003e Self {\n        Self {\n            expiration_seconds: 24 * 60 * 60, // 24 hours\n            compress: false,\n            cache_dir: dirs::cache_dir()\n                .unwrap_or_else(std::env::temp_dir)\n                .join(\"pcli2\"),\n        }\n    }\n}\n\n/// Base cache functionality that can be shared across different cache implementations\n#[derive(Debug, Default)]\npub struct BaseCache {\n    /// Configuration for the cache\n    pub config: CacheConfig,\n}\n\nimpl BaseCache {\n    /// Create a new BaseCache with default configuration\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    /// Create a new BaseCache with custom configuration\n    pub fn with_config(config: CacheConfig) -\u003e Self {\n        Self { config }\n    }\n\n    /// Get the default cache directory path\n    /// \n    /// In a test environment (when PCLI2_TEST_CACHE_DIR is set), it uses that directory.\n    /// For general cross-platform support (when PCLI2_CACHE_DIR is set), it uses that directory.\n    /// Otherwise, it uses the system's cache directory with a \"pcli2\" subdirectory.\n    pub fn get_cache_dir() -\u003e std::path::PathBuf {\n        // Check if we're in a test environment\n        if let Ok(test_cache_dir) = std::env::var(\"PCLI2_TEST_CACHE_DIR\") {\n            std::path::PathBuf::from(test_cache_dir)\n        } else if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            std::path::PathBuf::from(cache_dir_str)\n        } else {\n            dirs::cache_dir()\n                .unwrap_or_else(std::env::temp_dir)\n                .join(\"pcli2\")\n        }\n    }\n\n    /// Check if a cache file is expired based on file modification time\n    pub fn is_file_expired(cache_file: \u0026std::path::Path) -\u003e bool {\n        match std::fs::metadata(cache_file) {\n            Ok(metadata) =\u003e {\n                match metadata.modified() {\n                    Ok(modified_time) =\u003e {\n                        let now = std::time::SystemTime::now();\n                        match now.duration_since(modified_time) {\n                            Ok(duration) =\u003e {\n                                duration.as_secs() \u003e CacheConfig::default().expiration_seconds\n                            }\n                            Err(_) =\u003e false, // If there's an error calculating duration, don't treat as expired\n                        }\n                    }\n                    Err(_) =\u003e false, // If we can't get the modified time, don't treat as expired\n                }\n            }\n            Err(_) =\u003e true, // If we can't get metadata, treat as expired\n        }\n    }\n\n    /// Get the cache file path for a specific key\n    pub fn get_cache_file_path(cache_dir: \u0026std::path::Path, key: \u0026str, extension: \u0026str) -\u003e std::path::PathBuf {\n        cache_dir.join(format!(\"{}.{}\", key, extension))\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use tempfile::NamedTempFile;\n\n    #[test]\n    fn test_base_cache_creation() {\n        let cache = BaseCache::new();\n        assert_eq!(cache.config.expiration_seconds, 24 * 60 * 60); // 24 hours\n    }\n\n    #[test]\n    fn test_cache_config_default() {\n        let config = CacheConfig::default();\n        assert_eq!(config.expiration_seconds, 24 * 60 * 60); // 24 hours\n        assert!(!config.compress);\n        assert!(config.cache_dir.ends_with(\"pcli2\"));\n    }\n\n    #[test]\n    fn test_is_file_expired_new_file() {\n        let temp_file = NamedTempFile::new().unwrap();\n        assert!(!BaseCache::is_file_expired(temp_file.path()));\n    }\n\n    #[test]\n    fn test_get_cache_file_path() {\n        let cache_dir = std::path::PathBuf::from(\"/tmp/test\");\n        let cache_file = BaseCache::get_cache_file_path(\u0026cache_dir, \"test_tenant\", \"json\");\n        assert!(cache_file.to_string_lossy().contains(\"test_tenant.json\"));\n    }\n}","traces":[{"line":17,"address":[],"length":0,"stats":{"Line":0}},{"line":18,"address":[],"length":0,"stats":{"Line":0}},{"line":19,"address":[],"length":0,"stats":{"Line":0}},{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":21,"address":[],"length":0,"stats":{"Line":0}},{"line":22,"address":[],"length":0,"stats":{"Line":0}},{"line":28,"address":[],"length":0,"stats":{"Line":0}},{"line":29,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":3}},{"line":70,"address":[],"length":0,"stats":{"Line":6}},{"line":72,"address":[],"length":0,"stats":{"Line":3}},{"line":88,"address":[],"length":0,"stats":{"Line":1}},{"line":89,"address":[],"length":0,"stats":{"Line":1}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":1}},{"line":117,"address":[],"length":0,"stats":{"Line":1}},{"line":118,"address":[],"length":0,"stats":{"Line":1}},{"line":119,"address":[],"length":0,"stats":{"Line":1}},{"line":120,"address":[],"length":0,"stats":{"Line":1}},{"line":121,"address":[],"length":0,"stats":{"Line":2}},{"line":122,"address":[],"length":0,"stats":{"Line":2}},{"line":123,"address":[],"length":0,"stats":{"Line":1}},{"line":124,"address":[],"length":0,"stats":{"Line":2}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":1}},{"line":138,"address":[],"length":0,"stats":{"Line":4}}],"covered":16,"coverable":45},{"path":["/","Users","julian","projects","physna","pcli2","src","cli.rs"],"content":"//! CLI command execution logic.\n//!\n//! This module contains the core logic for executing CLI commands parsed by the\n//! command definition module. It handles the execution of all supported commands\n//! including tenant, folder, asset, authentication, context, and configuration operations.\n\nuse clap::ArgMatches;\nuse pcli2::{\n    actions::{\n        assets::{\n            create_asset, create_asset_batch, delete_asset, geometric_match_asset, geometric_match_folder, list_assets, print_asset, print_asset_metadata, download_asset, update_asset_metadata, delete_asset_metadata, metadata_inference, create_asset_metadata_batch, part_match_asset, part_match_folder, visual_match_asset, visual_match_folder\n        },\n        folders::{\n            create_folder,\n            delete_folder,\n            list_folders,\n            print_folder_details\n        },\n        tenants::{\n            clear_active_tenant,\n            get_tenant_details,\n            list_all_tenants,\n            print_active_tenant_name_with_format,\n            print_current_context,\n            set_active_tenant\n        }\n    },\n    commands::{\n        create_cli_commands,\n        params::{\n            COMMAND_ASSET,\n            COMMAND_AUTH,\n            COMMAND_CLEAR,\n            COMMAND_CONFIG,\n            COMMAND_CONTEXT,\n            COMMAND_CREATE,\n            COMMAND_CREATE_BATCH,\n            COMMAND_DELETE,\n            COMMAND_DOWNLOAD,\n            COMMAND_EXPORT,\n            COMMAND_FOLDER,\n            COMMAND_GET,\n            COMMAND_IMPORT,\n            COMMAND_LIST,\n            COMMAND_LOGIN,\n            COMMAND_LOGOUT,\n            COMMAND_MATCH,\n            COMMAND_MATCH_FOLDER,\n            COMMAND_METADATA,\n            COMMAND_PART_MATCH,\n            COMMAND_PART_MATCH_FOLDER,\n            COMMAND_VISUAL_MATCH,\n            COMMAND_VISUAL_MATCH_FOLDER,\n            COMMAND_INFERENCE,\n            COMMAND_SET,\n            COMMAND_TENANT,\n            PARAMETER_API_URL,\n            PARAMETER_AUTH_URL,\n            PARAMETER_CLIENT_ID,\n            PARAMETER_CLIENT_SECRET,\n            PARAMETER_FILE,\n            PARAMETER_FORMAT,\n            PARAMETER_HEADERS,\n            PARAMETER_OUTPUT,\n            PARAMETER_PRETTY,\n            PARAMETER_UI_URL\n        }\n    },\n    format::{Formattable, OutputFormat, OutputFormatOptions, FormattingError}};\nuse pcli2::error_utils;\nuse pcli2::auth::AuthClient;\nuse pcli2::configuration::Configuration;\nuse pcli2::keyring::Keyring;\nuse pcli2::error::CliError;\nuse std::path::PathBuf;\nuse tracing::{debug, trace};\n\nfn extract_subcommand_name(sub_matches: \u0026ArgMatches) -\u003e String {\n    let message = match sub_matches.subcommand() {\n        Some(m) =\u003e m.0,\n        None =\u003e \"unknown\",\n    };\n\n    message.to_string()\n}\n\npub async fn execute_command() -\u003e Result\u003c(), CliError\u003e {\n    let commands = create_cli_commands();\n\n    trace!(\"Executing CLI command\");\n\n    match commands.subcommand() {\n        // Tenant resource commands\n        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_TENANT);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_TENANT, COMMAND_LIST);\n\n                    list_all_tenants(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_TENANT, COMMAND_GET);\n\n                    get_tenant_details(sub_matches).await?;\n                    Ok(())\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Folder resource commands\n        Some((COMMAND_FOLDER, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_FOLDER);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_LIST);\n\n                    list_folders(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_GET);\n\n                    print_folder_details(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_CREATE);\n\n                    create_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_FOLDER, COMMAND_DELETE);\n\n                    delete_folder(sub_matches).await?;\n                    Ok(())\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Asset commands\n        Some((COMMAND_ASSET, sub_matches)) =\u003e {\n            trace!(\"Command: {}\", COMMAND_ASSET);\n            \n            match sub_matches.subcommand() {\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_GET);\n\n                    print_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_CREATE);\n                    trace!(\"Routing to asset create...\");\n\n                    create_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_LIST, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_LIST);\n                    trace!(\"Routing to asset list...\");\n\n                    list_assets(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_CREATE_BATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_CREATE_BATCH);\n                    trace!(\"Routing to asset batch create...\");\n\n                    create_asset_batch(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DOWNLOAD, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_DOWNLOAD);\n                    trace!(\"Routing to asset download...\");\n\n                    download_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_DELETE);\n                    trace!(\"Routing to asset delete...\");\n\n                    delete_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_MATCH);\n                    trace!(\"Routing to asset geometric match...\");\n\n                    geometric_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_PART_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_PART_MATCH);\n                    trace!(\"Routing to asset part match...\");\n\n                    part_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_MATCH_FOLDER);\n                    trace!(\"Routing to asset geometric match folder...\");\n\n                    geometric_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_PART_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_PART_MATCH_FOLDER);\n                    trace!(\"Routing to asset part match folder...\");\n\n                    part_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_VISUAL_MATCH, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_VISUAL_MATCH);\n                    trace!(\"Routing to asset visual match...\");\n\n                    visual_match_asset(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_VISUAL_MATCH_FOLDER, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_VISUAL_MATCH_FOLDER);\n                    trace!(\"Routing to asset visual match folder...\");\n\n                    visual_match_folder(sub_matches).await?;\n                    Ok(())\n                }\n                Some((COMMAND_METADATA, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_ASSET, COMMAND_METADATA);\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_CREATE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_CREATE);\n                            trace!(\"Routing to asset metadata create...\");\n\n                            update_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_GET, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_GET);\n                            trace!(\"Routing to asset metadata get...\");\n\n                            print_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_DELETE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_DELETE);\n                            trace!(\"Routing to asset metadata delete...\");\n\n                            delete_asset_metadata(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((COMMAND_INFERENCE, sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} {}\", COMMAND_ASSET, COMMAND_METADATA, COMMAND_INFERENCE);\n                            trace!(\"Routing to asset metadata inference...\");\n\n                            metadata_inference(sub_matches).await?;\n                            Ok(())\n                        }\n                        Some((\"create-batch\", sub_matches)) =\u003e {\n                            trace!(\"Command: {} {} create-batch\", COMMAND_ASSET, COMMAND_METADATA);\n                            trace!(\"Routing to asset metadata create-batch...\");\n\n                            create_asset_metadata_batch(sub_matches).await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        )))\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                )))\n            }\n        }\n        // Authentication commands\n        Some((COMMAND_AUTH, sub_matches)) =\u003e {\n            match sub_matches.subcommand() {\n                Some((COMMAND_LOGIN, sub_matches)) =\u003e {\n                    trace!(\"Command: {} {}\", COMMAND_AUTH, COMMAND_LOGIN);\n\n                    let configuration = Configuration::load_or_create_default()?;\n\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    // Try to get client credentials from command line or stored values\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    let client_id = match sub_matches.get_one::\u003cString\u003e(PARAMETER_CLIENT_ID) {\n                        Some(id) =\u003e id.clone(),\n                        None =\u003e {\n                            // Try to get stored client ID\n                            match keyring.get(\u0026environment_name, \"client-id\".to_string()) {\n                                Ok(Some(stored_id)) =\u003e stored_id,\n                                _ =\u003e {\n                                    return Err(CliError::MissingRequiredArgument(PARAMETER_CLIENT_ID.to_string()));\n                                }\n                            }\n                        }\n                    };\n\n                    let client_secret = match sub_matches.get_one::\u003cString\u003e(PARAMETER_CLIENT_SECRET) {\n                        Some(secret) =\u003e secret.clone(),\n                        None =\u003e {\n                            // Try to get stored client secret\n                            match keyring.get(\u0026environment_name, \"client-secret\".to_string()) {\n                                Ok(Some(stored_secret)) =\u003e stored_secret,\n                                _ =\u003e {\n                                    return Err(CliError::MissingRequiredArgument(PARAMETER_CLIENT_SECRET.to_string()));\n                                }\n                            }\n                        }\n                    };\n\n                    let auth_client = AuthClient::new_with_configuration(client_id.clone(), client_secret.clone(), \u0026configuration);\n\n                    // Store the client credentials so they're available for token refresh\n                    let client_id_result = keyring.put(\u0026environment_name, \"client-id\".to_string(), client_id.clone());\n                    let client_secret_result = keyring.put(\u0026environment_name, \"client-secret\".to_string(), client_secret.clone());\n\n                    if client_id_result.is_err() || client_secret_result.is_err() {\n                        error_utils::report_error_with_remediation(\n                            \u0026CliError::SecurityError(String::from(\"Failed to store client credentials\")),\n                            \u0026[\n                                \"Check that your system's keyring service is running\",\n                                \"Try logging in again with 'pcli2 auth login'\"\n                            ]\n                        );\n                        return Err(CliError::SecurityError(String::from(\"Failed to store client credentials\")));\n                    }\n\n                    match auth_client.get_access_token().await {\n                        Ok(token) =\u003e {\n                            // Store the access token\n                            let token_result = keyring.put(\u0026environment_name, \"access-token\".to_string(), token);\n\n                            if token_result.is_ok() {\n                                Ok(())\n                            } else {\n                                error_utils::report_error_with_remediation(\n                                    \u0026CliError::SecurityError(String::from(\"Failed to store access token\")),\n                                    \u0026[\n                                        \"Check that your system's keyring service is running\",\n                                        \"Try logging in again with 'pcli2 auth login'\"\n                                    ]\n                                );\n                                Err(CliError::SecurityError(String::from(\"Failed to store access token\")))\n                            }\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026format!(\"Login failed: {}\", e),\n                                \u0026[\n                                    \"Verify your client ID and client secret are correct\",\n                                    \"Check your internet connection\",\n                                    \"Ensure your credentials have not expired\"\n                                ]\n                            );\n                            Err(CliError::SecurityError(String::from(\"Login failed\")))\n                        }\n                    }\n                }\n                Some((COMMAND_LOGOUT, _)) =\u003e {\n                    trace!(\"Executing logout command\");\n\n                    let configuration = Configuration::load_or_create_default()?;\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    match keyring.delete(\u0026environment_name, \"access-token\".to_string()) {\n                        Ok(()) =\u003e {\n                            Ok(())\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026format!(\"Error deleting access token: {}\", e),\n                                \u0026[\n                                    \"Check that your system's keyring service is running\",\n                                    \"Try logging in again with 'pcli2 auth login'\"\n                                ]\n                            );\n                            Err(CliError::SecurityError(String::from(\"Failed to delete access token\")))\n                        }\n                    }\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Executing auth token get command\");\n\n                    // Get format parameters directly from sub_matches since auth commands don't have metadata flag\n                    let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                        format_val.clone()\n                    } else {\n                        \"json\".to_string()\n                    };\n                    let format_str = \u0026format_str_owned;\n\n                    let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                    let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                    // Note: auth commands don't have metadata flag\n\n                    let format_options = OutputFormatOptions {\n                        with_metadata: false,  // No metadata for auth\n                        with_headers,\n                        pretty,\n                    };\n\n                    let format = OutputFormat::from_string_with_options(format_str, format_options).unwrap();\n\n                    let configuration = Configuration::load_or_create_default()?;\n                    // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n                    let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n                    // Try to get access token from keyring\n                    #[allow(unused_mut)]\n                    let mut keyring = Keyring::default();\n                    match keyring.get(\u0026environment_name, \"access-token\".to_string()) {\n                        Ok(Some(token)) =\u003e {\n                            // Create a simple struct to hold the token for formatting\n                            #[derive(serde::Serialize)]\n                            struct TokenResponse {\n                                access_token: String,\n                            }\n\n                            let token_response = TokenResponse {\n                                access_token: token,\n                            };\n\n                            // Format the response based on the requested format\n                            match format {\n                                OutputFormat::Json(options) =\u003e {\n                                    let json_output = if options.pretty {\n                                        serde_json::to_string_pretty(\u0026token_response)\n                                    } else {\n                                        serde_json::to_string(\u0026token_response)\n                                    };\n                                    match json_output {\n                                        Ok(json) =\u003e println!(\"{}\", json),\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                    }\n                                },\n                                OutputFormat::Csv(options) =\u003e {\n                                    let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                    if options.with_headers {\n                                        if let Err(e) = wtr.serialize((\"ACCESS_TOKEN\",)) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    if let Err(e) = wtr.serialize((\u0026token_response.access_token,)) {\n                                        return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                    }\n\n                                    let data = match wtr.into_inner() {\n                                        Ok(data) =\u003e data,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                    };\n                                    let csv_output = match String::from_utf8(data) {\n                                        Ok(csv_str) =\u003e csv_str,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                    };\n                                    print!(\"{}\", csv_output);\n                                },\n                                OutputFormat::Tree(_) =\u003e {\n                                    // For tree format, just print the token\n                                    println!(\"{}\", token_response.access_token);\n                                }\n                            }\n                            Ok(())\n                        }\n                        Ok(None) =\u003e {\n                            error_utils::report_error_with_remediation(\n                                \u0026\"No access token found. Please login first.\",\n                                \u0026[\n                                    \"Log in with 'pcli2 auth login --client-id \u003cid\u003e --client-secret \u003csecret\u003e'\",\n                                    \"Verify your credentials are correct\"\n                                ]\n                            );\n                            Ok(())\n                        }\n                        Err(e) =\u003e {\n                            error_utils::report_error(\u0026CliError::MissingRequiredArgument(format!(\"Error retrieving access token: {}\", e)));\n                            Ok(())\n                        }\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Context commands\n        Some((COMMAND_CONTEXT, sub_matches)) =\u003e {\n            trace!(\"Command: context\");\n\n            match sub_matches.subcommand() {\n                Some((COMMAND_SET, sub_matches)) =\u003e {\n                    trace!(\"Command: context set\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n                            trace!(\"Command: context set tenant\");\n\n                            set_active_tenant(sub_matches).await?;\n\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Command: context get\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, sub_matches)) =\u003e {\n                            trace!(\"Command: context get tenant\");\n                            print_active_tenant_name_with_format(sub_matches).await?;\n                            Ok(())\n                        }\n                        None =\u003e {\n                            // Handle context get without subcommand\n                            trace!(\"Command: context get (no subcommand)\");\n                            print_current_context(sub_matches).await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                Some((COMMAND_CLEAR, sub_matches)) =\u003e {\n                    trace!(\"Command: context clear\");\n\n                    match sub_matches.subcommand() {\n                        Some((COMMAND_TENANT, _)) =\u003e {\n                            trace!(\"Command: context clear tenant\");\n                            clear_active_tenant().await?;\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        // Configuration commands\n        Some((COMMAND_CONFIG, sub_matches)) =\u003e {\n            trace!(\"Executing config command\");\n            match sub_matches.subcommand() {\n                Some((COMMAND_GET, sub_matches)) =\u003e {\n                    trace!(\"Executing config get command\");\n                    match sub_matches.subcommand() {\n                        Some((\"path\", _)) =\u003e {\n                            let path = Configuration::get_default_configuration_file_path()?;\n                            let path = path.into_os_string().into_string()\n                                .map_err(|_| CliError::ConfigurationError(\n                                    pcli2::configuration::ConfigurationError::FailedToFindConfigurationDirectory))?;\n                            println!(\"{}\", path);\n                            Ok(())\n                        }\n                        _ =\u003e {\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str_owned = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n                            let format_str = \u0026format_str_owned;\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: config commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for config\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(format_str, format_options).unwrap();\n\n                            let configuration = Configuration::load_or_create_default()?;\n                            match configuration.format(\u0026format) {\n                                Ok(output) =\u003e {\n                                    println!(\"{}\", output);\n                                    Ok(())\n                                }\n                                Err(e) =\u003e Err(CliError::FormattingError(e)),\n                            }\n                        }\n                    }\n                }\n                Some((COMMAND_EXPORT, sub_matches)) =\u003e {\n                    trace!(\"Executing config export command\");\n                    let path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_OUTPUT)\n                        .ok_or(CliError::MissingRequiredArgument(PARAMETER_OUTPUT.to_string()))?;\n                    let configuration = Configuration::load_or_create_default()?;\n                    configuration.save(path)?;\n                    Ok(())\n                }\n                Some((COMMAND_IMPORT, sub_matches)) =\u003e {\n                    trace!(\"Executing config import command\");\n                    let path = sub_matches.get_one::\u003cPathBuf\u003e(PARAMETER_FILE)\n                        .ok_or(CliError::MissingRequiredArgument(PARAMETER_FILE.to_string()))?;\n                    // Implementation would import configuration\n                    debug!(\"Importing configuration from: {:?}\", path);\n                    Ok(())\n                }\n                Some((\"environment\", sub_matches)) =\u003e {\n                    trace!(\"Executing config environment command\");\n                    match sub_matches.subcommand() {\n                        Some((\"add\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment add command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n                                .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n\n                            let api_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_API_URL).cloned();\n                            let ui_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_UI_URL).cloned();\n                            let auth_url = sub_matches.get_one::\u003cString\u003e(PARAMETER_AUTH_URL).cloned();\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            let env_config = pcli2::configuration::EnvironmentConfig {\n                                api_base_url: api_url.unwrap_or_else(||\n                                    pcli2::configuration::default_api_base_url()),\n                                ui_base_url: ui_url.unwrap_or_else(||\n                                    pcli2::configuration::default_ui_base_url()),\n                                auth_base_url: auth_url.unwrap_or_else(||\n                                    pcli2::configuration::default_auth_base_url()),\n                            };\n\n                            configuration.add_environment(env_name.clone(), env_config);\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment '{}' added successfully\", env_name);\n                            Ok(())\n                        }\n                        Some((\"use\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment use command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\");\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            let selected_env_name = if let Some(name) = env_name {\n                                // Use the provided name\n                                name.clone()\n                            } else {\n                                // Interactive selection using TUI\n                                let available_envs = configuration.list_environments();\n\n                                if available_envs.is_empty() {\n                                    error_utils::report_error_with_remediation(\n                                        \u0026\"No environments available\",\n                                        \u0026[\n                                            \"Add an environment with 'pcli2 config environment add'\",\n                                            \"Check that your configuration file is properly set up\"\n                                        ]\n                                    );\n                                    return Ok(());\n                                }\n\n                                // Create options for the select menu\n                                let options: Vec\u003cString\u003e = available_envs.iter()\n                                    .map(|env_name| {\n                                        let is_active = if let Some(ref active) = configuration.get_active_environment() {\n                                            env_name == active\n                                        } else {\n                                            false\n                                        };\n                                        let active_status = if is_active { \" (active)\" } else { \"\" };\n                                        format!(\"{}{}\", env_name, active_status)\n                                    })\n                                    .collect();\n\n                                // Use inquire to create an interactive selection\n                                let ans = inquire::Select::new(\"Select an environment:\", options)\n                                    .with_help_message(\"Choose the environment you want to set as active\")\n                                    .prompt();\n\n                                match ans {\n                                    Ok(choice) =\u003e {\n                                        // Extract the environment name from the choice (removing \" (active)\" if present)\n                                        let env_name = choice.split_once(\" (active)\").map(|(before, _)| before.trim()).unwrap_or(\u0026choice);\n                                        env_name.to_string()\n                                    }\n                                    Err(_) =\u003e {\n                                        error_utils::report_error_with_remediation(\n                                            \u0026\"No environment selected\",\n                                            \u0026[\n                                                \"Run 'pcli2 config environment use' again to select an environment\",\n                                                \"Add an environment with 'pcli2 config environment add' if none exist\"\n                                            ]\n                                        );\n                                        return Ok(());\n                                    }\n                                }\n                            };\n\n                            configuration.set_active_environment(\u0026selected_env_name)?;\n                            // Clear the active tenant when switching environments to avoid confusion\n                            configuration.clear_active_tenant();\n                            configuration.save_to_default()?;\n\n                            println!(\"Switched to environment '{}' (active tenant cleared)\", selected_env_name);\n                            Ok(())\n                        }\n                        Some((\"remove\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment remove command\");\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\")\n                                .ok_or(CliError::MissingRequiredArgument(\"name\".to_string()))?;\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            configuration.remove_environment(env_name)?;\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment '{}' removed successfully\", env_name);\n                            Ok(())\n                        }\n                        Some((\"list\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment list command\");\n\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: environment list commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for environment list\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(\u0026format_str, format_options).unwrap();\n\n                            let configuration = Configuration::load_or_create_default()?;\n                            let active_env = configuration.get_active_environment();\n\n                            // Create a detailed representation for display\n                            #[derive(serde::Serialize)]\n                            struct EnvironmentDetails {\n                                name: String,\n                                is_active: bool,\n                                api_base_url: String,\n                                ui_base_url: String,\n                                auth_base_url: String,\n                            }\n\n                            let env_details: Vec\u003cEnvironmentDetails\u003e = configuration.list_environments()\n                                .into_iter()\n                                .map(|name| {\n                                    let is_active = if let Some(ref active) = active_env {\n                                        name == *active\n                                    } else {\n                                        false\n                                    };\n\n                                    let env_config = configuration.get_environment_config(\u0026name).unwrap();\n\n                                    EnvironmentDetails {\n                                        name: name.clone(),\n                                        is_active,\n                                        api_base_url: env_config.api_base_url.clone(),\n                                        ui_base_url: env_config.ui_base_url.clone(),\n                                        auth_base_url: env_config.auth_base_url.clone(),\n                                    }\n                                })\n                                .collect();\n\n                            // Format the response based on the requested format\n                            match format {\n                                OutputFormat::Json(options) =\u003e {\n                                    let json_output = if options.pretty {\n                                        serde_json::to_string_pretty(\u0026env_details)\n                                    } else {\n                                        serde_json::to_string(\u0026env_details)\n                                    };\n                                    match json_output {\n                                        Ok(json) =\u003e println!(\"{}\", json),\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                    }\n                                },\n                                OutputFormat::Csv(options) =\u003e {\n                                    let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                    if options.with_headers {\n                                        if let Err(e) = wtr.serialize((\"ENVIRONMENT_NAME\", \"IS_ACTIVE\", \"API_BASE_URL\", \"UI_BASE_URL\", \"AUTH_BASE_URL\")) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    for env_detail in \u0026env_details {\n                                        if let Err(e) = wtr.serialize((\n                                            \u0026env_detail.name,\n                                            \u0026env_detail.is_active,\n                                            \u0026env_detail.api_base_url,\n                                            \u0026env_detail.ui_base_url,\n                                            \u0026env_detail.auth_base_url,\n                                        )) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n                                    }\n\n                                    let data = match wtr.into_inner() {\n                                        Ok(data) =\u003e data,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                    };\n                                    let csv_output = match String::from_utf8(data) {\n                                        Ok(csv_str) =\u003e csv_str,\n                                        Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                    };\n                                    print!(\"{}\", csv_output);\n                                },\n                                OutputFormat::Tree(_) =\u003e {\n                                    // For tree format, show detailed information\n                                    for env_detail in \u0026env_details {\n                                        let active_status = if env_detail.is_active { \" (active)\" } else { \"\" };\n                                        println!(\"{}{}:\", env_detail.name, active_status);\n                                        println!(\"  API Base URL: {}\", env_detail.api_base_url);\n                                        println!(\"  UI Base URL: {}\", env_detail.ui_base_url);\n                                        println!(\"  Auth Base URL: {}\", env_detail.auth_base_url);\n                                        println!(); // Empty line between environments\n                                    }\n                                }\n                            }\n                            Ok(())\n                        }\n                        Some((\"reset\", _sub_matches)) =\u003e {\n                            trace!(\"Executing config environment reset command\");\n\n                            let mut configuration = Configuration::load_or_create_default()?;\n\n                            configuration.reset_environments();\n                            configuration.save_to_default()?;\n\n                            println!(\"Environment configurations reset successfully\");\n                            Ok(())\n                        }\n                        Some((\"get\", sub_matches)) =\u003e {\n                            trace!(\"Executing config environment get command\");\n\n                            // Get format parameters with precedence: 1) explicit --format, 2) PCLI2_FORMAT env var, 3) default \"json\"\n                            let format_str = if let Some(format_val) = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT) {\n                                // User explicitly provided --format argument\n                                format_val.clone()\n                            } else {\n                                // Format was not explicitly provided by user, check environment variable first\n                                if let Ok(env_format) = std::env::var(\"PCLI2_FORMAT\") {\n                                    env_format\n                                } else {\n                                    // Use default value\n                                    \"json\".to_string()\n                                }\n                            };\n\n                            let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n                            let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n                            // Note: environment get commands don't have metadata flag\n\n                            let format_options = OutputFormatOptions {\n                                with_metadata: false,  // No metadata for environment get\n                                with_headers,\n                                pretty,\n                            };\n\n                            let format = OutputFormat::from_string_with_options(\u0026format_str, format_options).unwrap();\n\n                            let env_name = sub_matches.get_one::\u003cString\u003e(\"name\");\n\n                            let configuration = Configuration::load_or_create_default()?;\n\n                            let target_env_name = if let Some(name) = env_name {\n                                // Use the provided name\n                                name.clone()\n                            } else {\n                                // Use the active environment\n                                if let Some(active_env) = configuration.get_active_environment() {\n                                    active_env\n                                } else {\n                                    error_utils::report_error_with_remediation(\n                                        \u0026\"No active environment set\",\n                                        \u0026[\n                                            \"Set an active environment with 'pcli2 config environment use'\",\n                                            \"Add an environment with 'pcli2 config environment add' if none exist\"\n                                        ]\n                                    );\n                                    return Ok(());\n                                }\n                            };\n\n                            // Get the environment configuration\n                            if let Some(env_config) = configuration.get_environment_config(\u0026target_env_name) {\n                                // Create a detailed representation for display\n                                #[derive(serde::Serialize)]\n                                struct EnvironmentDetails {\n                                    name: String,\n                                    is_active: bool,\n                                    api_base_url: String,\n                                    ui_base_url: String,\n                                    auth_base_url: String,\n                                }\n\n                                let is_active = if let Some(active_env) = configuration.get_active_environment() {\n                                    active_env == target_env_name\n                                } else {\n                                    false\n                                };\n\n                                let env_details = EnvironmentDetails {\n                                    name: target_env_name,\n                                    is_active,\n                                    api_base_url: env_config.api_base_url.clone(),\n                                    ui_base_url: env_config.ui_base_url.clone(),\n                                    auth_base_url: env_config.auth_base_url.clone(),\n                                };\n\n                                // Format the response based on the requested format\n                                match format {\n                                    OutputFormat::Json(options) =\u003e {\n                                        let json_output = if options.pretty {\n                                            serde_json::to_string_pretty(\u0026env_details)\n                                        } else {\n                                            serde_json::to_string(\u0026env_details)\n                                        };\n                                        match json_output {\n                                            Ok(json) =\u003e println!(\"{}\", json),\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                        }\n                                    },\n                                    OutputFormat::Csv(options) =\u003e {\n                                        let mut wtr = csv::Writer::from_writer(vec![]);\n\n                                        if options.with_headers {\n                                            if let Err(e) = wtr.serialize((\"ENVIRONMENT_NAME\", \"IS_ACTIVE\", \"API_BASE_URL\", \"UI_BASE_URL\", \"AUTH_BASE_URL\")) {\n                                                return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                            }\n                                        }\n\n                                        if let Err(e) = wtr.serialize((\n                                            \u0026env_details.name,\n                                            \u0026env_details.is_active,\n                                            \u0026env_details.api_base_url,\n                                            \u0026env_details.ui_base_url,\n                                            \u0026env_details.auth_base_url,\n                                        )) {\n                                            return Err(CliError::FormattingError(FormattingError::CsvError(e)));\n                                        }\n\n                                        let data = match wtr.into_inner() {\n                                            Ok(data) =\u003e data,\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::CsvIntoInnerError(e))),\n                                        };\n                                        let csv_output = match String::from_utf8(data) {\n                                            Ok(csv_str) =\u003e csv_str,\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::Utf8Error(e))),\n                                        };\n                                        print!(\"{}\", csv_output);\n                                    },\n                                    OutputFormat::Tree(_) =\u003e {\n                                        // For tree format, output as JSON (since tree doesn't make sense for single environment)\n                                        let json_output = serde_json::to_string_pretty(\u0026env_details);\n                                        match json_output {\n                                            Ok(json) =\u003e println!(\"{}\", json),\n                                            Err(e) =\u003e return Err(CliError::FormattingError(FormattingError::JsonSerializationError(e))),\n                                        }\n                                    }\n                                }\n                            } else {\n                                error_utils::report_error_with_remediation(\n                                    \u0026format!(\"Environment '{}' not found\", target_env_name),\n                                    \u0026[\n                                        \"Check the environment name spelling\",\n                                        \"List available environments with 'pcli2 config environment list'\",\n                                        \"Add the environment with 'pcli2 config environment add'\"\n                                    ]\n                                );\n                            }\n\n                            Ok(())\n                        }\n                        _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                            sub_matches,\n                        ))),\n                    }\n                }\n                _ =\u003e Err(CliError::UnsupportedSubcommand(extract_subcommand_name(\n                    sub_matches,\n                ))),\n            }\n        }\n        _ =\u003e Err(CliError::UnsupportedSubcommand(String::from(\"unknown\"))),\n    }\n}\n\n","traces":[{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":22}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":92,"address":[],"length":0,"stats":{"Line":11}},{"line":94,"address":[],"length":0,"stats":{"Line":4}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":4}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":8}},{"line":151,"address":[],"length":0,"stats":{"Line":4}},{"line":153,"address":[],"length":0,"stats":{"Line":4}},{"line":154,"address":[],"length":0,"stats":{"Line":8}},{"line":155,"address":[],"length":0,"stats":{"Line":4}},{"line":157,"address":[],"length":0,"stats":{"Line":8}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":178,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":218,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":223,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":225,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":235,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":240,"address":[],"length":0,"stats":{"Line":0}},{"line":241,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":0}},{"line":243,"address":[],"length":0,"stats":{"Line":0}},{"line":245,"address":[],"length":0,"stats":{"Line":0}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":248,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":267,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":289,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":292,"address":[],"length":0,"stats":{"Line":0}},{"line":295,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":305,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":314,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":330,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":334,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":352,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":390,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":395,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":400,"address":[],"length":0,"stats":{"Line":0}},{"line":403,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":410,"address":[],"length":0,"stats":{"Line":0}},{"line":411,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":430,"address":[],"length":0,"stats":{"Line":0}},{"line":442,"address":[],"length":0,"stats":{"Line":0}},{"line":443,"address":[],"length":0,"stats":{"Line":0}},{"line":444,"address":[],"length":0,"stats":{"Line":0}},{"line":445,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":450,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":455,"address":[],"length":0,"stats":{"Line":0}},{"line":457,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":467,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":469,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":479,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":487,"address":[],"length":0,"stats":{"Line":0}},{"line":488,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":496,"address":[],"length":0,"stats":{"Line":0}},{"line":500,"address":[],"length":0,"stats":{"Line":0}},{"line":501,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":509,"address":[],"length":0,"stats":{"Line":0}},{"line":510,"address":[],"length":0,"stats":{"Line":0}},{"line":511,"address":[],"length":0,"stats":{"Line":0}},{"line":513,"address":[],"length":0,"stats":{"Line":0}},{"line":514,"address":[],"length":0,"stats":{"Line":0}},{"line":515,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":522,"address":[],"length":0,"stats":{"Line":0}},{"line":526,"address":[],"length":0,"stats":{"Line":0}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":529,"address":[],"length":0,"stats":{"Line":0}},{"line":530,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":532,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":539,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":552,"address":[],"length":0,"stats":{"Line":0}},{"line":553,"address":[],"length":0,"stats":{"Line":0}},{"line":555,"address":[],"length":0,"stats":{"Line":0}},{"line":556,"address":[],"length":0,"stats":{"Line":0}},{"line":560,"address":[],"length":0,"stats":{"Line":0}},{"line":561,"address":[],"length":0,"stats":{"Line":0}},{"line":566,"address":[],"length":0,"stats":{"Line":0}},{"line":567,"address":[],"length":0,"stats":{"Line":0}},{"line":568,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":570,"address":[],"length":0,"stats":{"Line":0}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":572,"address":[],"length":0,"stats":{"Line":0}},{"line":573,"address":[],"length":0,"stats":{"Line":0}},{"line":574,"address":[],"length":0,"stats":{"Line":0}},{"line":575,"address":[],"length":0,"stats":{"Line":0}},{"line":576,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":578,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":584,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":591,"address":[],"length":0,"stats":{"Line":0}},{"line":594,"address":[],"length":0,"stats":{"Line":0}},{"line":596,"address":[],"length":0,"stats":{"Line":0}},{"line":597,"address":[],"length":0,"stats":{"Line":0}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":610,"address":[],"length":0,"stats":{"Line":0}},{"line":611,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":614,"address":[],"length":0,"stats":{"Line":0}},{"line":619,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":632,"address":[],"length":0,"stats":{"Line":0}},{"line":633,"address":[],"length":0,"stats":{"Line":0}},{"line":635,"address":[],"length":0,"stats":{"Line":0}},{"line":636,"address":[],"length":0,"stats":{"Line":0}},{"line":637,"address":[],"length":0,"stats":{"Line":0}},{"line":638,"address":[],"length":0,"stats":{"Line":0}},{"line":639,"address":[],"length":0,"stats":{"Line":0}},{"line":641,"address":[],"length":0,"stats":{"Line":0}},{"line":642,"address":[],"length":0,"stats":{"Line":0}},{"line":644,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":646,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":0}},{"line":653,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":659,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":662,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":670,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":674,"address":[],"length":0,"stats":{"Line":0}},{"line":677,"address":[],"length":0,"stats":{"Line":0}},{"line":679,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":682,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":684,"address":[],"length":0,"stats":{"Line":0}},{"line":687,"address":[],"length":0,"stats":{"Line":0}},{"line":691,"address":[],"length":0,"stats":{"Line":0}},{"line":692,"address":[],"length":0,"stats":{"Line":0}},{"line":693,"address":[],"length":0,"stats":{"Line":0}},{"line":694,"address":[],"length":0,"stats":{"Line":0}},{"line":696,"address":[],"length":0,"stats":{"Line":0}},{"line":698,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":708,"address":[],"length":0,"stats":{"Line":0}},{"line":709,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":719,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":730,"address":[],"length":0,"stats":{"Line":0}},{"line":732,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":735,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":738,"address":[],"length":0,"stats":{"Line":0}},{"line":739,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":743,"address":[],"length":0,"stats":{"Line":0}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":747,"address":[],"length":0,"stats":{"Line":0}},{"line":749,"address":[],"length":0,"stats":{"Line":0}},{"line":750,"address":[],"length":0,"stats":{"Line":0}},{"line":753,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":767,"address":[],"length":0,"stats":{"Line":0}},{"line":776,"address":[],"length":0,"stats":{"Line":0}},{"line":778,"address":[],"length":0,"stats":{"Line":0}},{"line":779,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":793,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":802,"address":[],"length":0,"stats":{"Line":0}},{"line":803,"address":[],"length":0,"stats":{"Line":0}},{"line":804,"address":[],"length":0,"stats":{"Line":0}},{"line":805,"address":[],"length":0,"stats":{"Line":0}},{"line":806,"address":[],"length":0,"stats":{"Line":0}},{"line":807,"address":[],"length":0,"stats":{"Line":0}},{"line":813,"address":[],"length":0,"stats":{"Line":0}},{"line":814,"address":[],"length":0,"stats":{"Line":0}},{"line":815,"address":[],"length":0,"stats":{"Line":0}},{"line":816,"address":[],"length":0,"stats":{"Line":0}},{"line":818,"address":[],"length":0,"stats":{"Line":0}},{"line":820,"address":[],"length":0,"stats":{"Line":0}},{"line":821,"address":[],"length":0,"stats":{"Line":0}},{"line":822,"address":[],"length":0,"stats":{"Line":0}},{"line":825,"address":[],"length":0,"stats":{"Line":0}},{"line":826,"address":[],"length":0,"stats":{"Line":0}},{"line":828,"address":[],"length":0,"stats":{"Line":0}},{"line":829,"address":[],"length":0,"stats":{"Line":0}},{"line":830,"address":[],"length":0,"stats":{"Line":0}},{"line":834,"address":[],"length":0,"stats":{"Line":0}},{"line":835,"address":[],"length":0,"stats":{"Line":0}},{"line":836,"address":[],"length":0,"stats":{"Line":0}},{"line":837,"address":[],"length":0,"stats":{"Line":0}},{"line":838,"address":[],"length":0,"stats":{"Line":0}},{"line":839,"address":[],"length":0,"stats":{"Line":0}},{"line":840,"address":[],"length":0,"stats":{"Line":0}},{"line":842,"address":[],"length":0,"stats":{"Line":0}},{"line":846,"address":[],"length":0,"stats":{"Line":0}},{"line":847,"address":[],"length":0,"stats":{"Line":0}},{"line":848,"address":[],"length":0,"stats":{"Line":0}},{"line":850,"address":[],"length":0,"stats":{"Line":0}},{"line":851,"address":[],"length":0,"stats":{"Line":0}},{"line":852,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":859,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":861,"address":[],"length":0,"stats":{"Line":0}},{"line":862,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":864,"address":[],"length":0,"stats":{"Line":0}},{"line":868,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":875,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":878,"address":[],"length":0,"stats":{"Line":0}},{"line":879,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":885,"address":[],"length":0,"stats":{"Line":0}},{"line":887,"address":[],"length":0,"stats":{"Line":0}},{"line":890,"address":[],"length":0,"stats":{"Line":0}},{"line":891,"address":[],"length":0,"stats":{"Line":0}},{"line":894,"address":[],"length":0,"stats":{"Line":0}},{"line":898,"address":[],"length":0,"stats":{"Line":0}},{"line":899,"address":[],"length":0,"stats":{"Line":0}},{"line":908,"address":[],"length":0,"stats":{"Line":0}},{"line":910,"address":[],"length":0,"stats":{"Line":0}},{"line":912,"address":[],"length":0,"stats":{"Line":0}},{"line":914,"address":[],"length":0,"stats":{"Line":0}},{"line":916,"address":[],"length":0,"stats":{"Line":0}},{"line":919,"address":[],"length":0,"stats":{"Line":0}},{"line":920,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":924,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":926,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":934,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":946,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":0}},{"line":955,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":961,"address":[],"length":0,"stats":{"Line":0}},{"line":962,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":965,"address":[],"length":0,"stats":{"Line":0}},{"line":967,"address":[],"length":0,"stats":{"Line":0}},{"line":968,"address":[],"length":0,"stats":{"Line":0}},{"line":969,"address":[],"length":0,"stats":{"Line":0}},{"line":972,"address":[],"length":0,"stats":{"Line":0}},{"line":973,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":976,"address":[],"length":0,"stats":{"Line":0}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":981,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":985,"address":[],"length":0,"stats":{"Line":0}},{"line":986,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":991,"address":[],"length":0,"stats":{"Line":0}},{"line":992,"address":[],"length":0,"stats":{"Line":0}},{"line":993,"address":[],"length":0,"stats":{"Line":0}},{"line":995,"address":[],"length":0,"stats":{"Line":0}},{"line":996,"address":[],"length":0,"stats":{"Line":0}},{"line":997,"address":[],"length":0,"stats":{"Line":0}},{"line":999,"address":[],"length":0,"stats":{"Line":0}},{"line":1003,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1012,"address":[],"length":0,"stats":{"Line":0}},{"line":1013,"address":[],"length":0,"stats":{"Line":0}},{"line":1014,"address":[],"length":0,"stats":{"Line":0}},{"line":1015,"address":[],"length":0,"stats":{"Line":0}},{"line":1016,"address":[],"length":0,"stats":{"Line":0}},{"line":1021,"address":[],"length":0,"stats":{"Line":0}},{"line":1023,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1028,"address":[],"length":0,"stats":{"Line":0}},{"line":1029,"address":[],"length":0,"stats":{"Line":0}},{"line":1033,"address":[],"length":0,"stats":{"Line":7}}],"covered":13,"coverable":517},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","assets.rs"],"content":"//! Asset command definitions.\n//!\n//! This module defines CLI commands related to asset management, including\n//! upload, download, geometric matching, and metadata operations.\n\nuse crate::commands::metadata::metadata_command;\nuse crate::commands::params::{\n    asset_identifier_group, asset_identifier_multiple_group, file_parameter,\n    folder_identifier_group, folder_path_parameter, folder_uuid_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter, format_with_metadata_parameter,\n    multiple_files_parameter, path_parameter, recursive_parameter,\n    tenant_parameter, uuid_parameter, COMMAND_ASSET, COMMAND_CREATE, COMMAND_CREATE_BATCH,\n    COMMAND_DELETE, COMMAND_DEPENDENCIES, COMMAND_DOWNLOAD, COMMAND_DOWNLOAD_FOLDER, COMMAND_GET,\n    COMMAND_LIST, COMMAND_MATCH, COMMAND_MATCH_FOLDER, COMMAND_PART_MATCH_FOLDER, COMMAND_VISUAL_MATCH, COMMAND_VISUAL_MATCH_FOLDER, FORMAT_CSV, FORMAT_JSON, FORMAT_TREE, PARAMETER_CONCURRENT,\n    PARAMETER_FILE, PARAMETER_FOLDER_PATH, PARAMETER_PROGRESS,\n};\nuse clap::{Arg, ArgAction, Command};\n\n/// Create the asset command with all its subcommands.\npub fn asset_command() -\u003e Command {\n    Command::new(COMMAND_ASSET)\n        .about(\"Manage assets\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get asset details\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n                .group(asset_identifier_multiple_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Create a new asset by uploading a file\")\n                .arg(tenant_parameter())\n                .arg(file_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV])),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE_BATCH)\n                .about(\"Create multiple assets by uploading files matching a glob pattern\")\n                .arg(tenant_parameter())\n                .arg(multiple_files_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n                .arg(\n                    Arg::new(PARAMETER_CONCURRENT)\n                        .long(PARAMETER_CONCURRENT)\n                        .num_args(1)\n                        .required(false)\n                        .default_value(\"5\")\n                        .help(\"Maximum number of concurrent uploads\")\n                        .value_parser(clap::value_parser!(usize)),\n                )\n                .arg(\n                    Arg::new(PARAMETER_PROGRESS)\n                        .long(PARAMETER_PROGRESS)\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Display progress bar during upload\"),\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete an asset\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all assets in a folder\")\n                .visible_alias(\"ls\")\n                .arg(tenant_parameter())\n                .arg(folder_path_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV])),\n        )\n        .subcommand(metadata_command()) // Add the metadata subcommands\n        .subcommand(\n            Command::new(COMMAND_DEPENDENCIES)\n                .about(\"Get dependencies for an asset\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV, FORMAT_TREE]))\n                .arg(recursive_parameter())\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DOWNLOAD)\n                .about(\"Download asset file\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(PARAMETER_FILE)\n                        .num_args(1)\n                        .required(false)\n                        .help(\"Output file path (default: asset filename in current directory)\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n                .group(asset_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DOWNLOAD_FOLDER)\n                .about(\"Download all assets in a folder as a ZIP archive\")\n                .arg(tenant_parameter())\n                .arg(\n                    Arg::new(PARAMETER_FOLDER_PATH)\n                        .num_args(1..) // Accept one or more values\n                        .required(true)\n                        .help(\"Folder path(s) to download (can be provided multiple times or as comma-separated values)\")\n                        .action(clap::ArgAction::Append), // Allow multiple --path flags\n                )\n                .arg(\n                    Arg::new(PARAMETER_FILE)\n                        .num_args(1)\n                        .required(false)\n                        .help(\"Output file path (default: \u003cfolder_name\u003e.zip in the current directory)\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n        )\n    .subcommand(\n        Command::new(COMMAND_MATCH)\n            .about(\"Find geometrically similar assets\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group()),\n    )\n    .subcommand(\n        Command::new(\"part-match\")\n            .about(\"Find geometrically similar assets using part search algorithm\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group()),\n    )\n    .subcommand(\n        Command::new(COMMAND_MATCH_FOLDER)\n            .about(\"Find geometrically similar assets for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n    .subcommand(\n        Command::new(COMMAND_PART_MATCH_FOLDER)\n            .about(\"Find part matches for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"threshold\")\n                    .short('s')\n                    .long(\"threshold\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"80.0\")\n                    .help(\"Similarity threshold (0.00 to 100.00)\")\n                    .value_parser(clap::value_parser!(f64)),\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n    .subcommand(\n        Command::new(COMMAND_VISUAL_MATCH)\n            .about(\"Find visually similar assets for a specific reference asset\")\n            .arg(tenant_parameter())\n            .arg(uuid_parameter())\n            .arg(path_parameter())\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .group(asset_identifier_group())\n    )\n    .subcommand(\n        Command::new(COMMAND_VISUAL_MATCH_FOLDER)\n            .about(\"Find visually similar assets for all assets in one or more folders\")\n            .arg(tenant_parameter())\n            .arg(\n                Arg::new(PARAMETER_FOLDER_PATH)\n                    .short('p')\n                    .long(PARAMETER_FOLDER_PATH)\n                    .num_args(1..) // Accept one or more values\n                    .required(true)\n                    .help(\"Folder path(s) to process (can be provided multiple times or as comma-separated values)\")\n                    .action(clap::ArgAction::Append), // Allow multiple --path flags\n            )\n            .arg(\n                Arg::new(\"exclusive\")\n                    .long(\"exclusive\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Only show matches where both assets belong to the specified paths\"),\n            )\n            .arg(format_with_headers_parameter())\n            .arg(format_with_metadata_parameter())\n            .arg(format_pretty_parameter())\n            .arg(format_parameter().value_parser([FORMAT_JSON, FORMAT_CSV]))\n            .arg(\n                Arg::new(\"concurrent\")\n                    .long(\"concurrent\")\n                    .num_args(1)\n                    .required(false)\n                    .default_value(\"1\")\n                    .help(\"Maximum number of concurrent operations (range: 1-10)\")\n                    .value_parser(clap::value_parser!(usize)),\n            )\n            .arg(\n                Arg::new(\"progress\")\n                    .long(\"progress\")\n                    .action(ArgAction::SetTrue)\n                    .required(false)\n                    .help(\"Display progress bar during processing\"),\n            )\n    )\n}\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":11}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":22}},{"line":28,"address":[],"length":0,"stats":{"Line":22}},{"line":29,"address":[],"length":0,"stats":{"Line":22}},{"line":30,"address":[],"length":0,"stats":{"Line":22}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":44}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":11}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":22}},{"line":42,"address":[],"length":0,"stats":{"Line":22}},{"line":43,"address":[],"length":0,"stats":{"Line":22}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":22}},{"line":46,"address":[],"length":0,"stats":{"Line":22}},{"line":47,"address":[],"length":0,"stats":{"Line":44}},{"line":50,"address":[],"length":0,"stats":{"Line":11}},{"line":51,"address":[],"length":0,"stats":{"Line":11}},{"line":52,"address":[],"length":0,"stats":{"Line":22}},{"line":53,"address":[],"length":0,"stats":{"Line":22}},{"line":54,"address":[],"length":0,"stats":{"Line":22}},{"line":55,"address":[],"length":0,"stats":{"Line":22}},{"line":56,"address":[],"length":0,"stats":{"Line":22}},{"line":57,"address":[],"length":0,"stats":{"Line":22}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":22}},{"line":60,"address":[],"length":0,"stats":{"Line":44}},{"line":61,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":11}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":11}},{"line":68,"address":[],"length":0,"stats":{"Line":22}},{"line":70,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":22}},{"line":74,"address":[],"length":0,"stats":{"Line":11}},{"line":75,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":81,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":22}},{"line":83,"address":[],"length":0,"stats":{"Line":22}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":85,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":22}},{"line":92,"address":[],"length":0,"stats":{"Line":22}},{"line":93,"address":[],"length":0,"stats":{"Line":22}},{"line":94,"address":[],"length":0,"stats":{"Line":22}},{"line":95,"address":[],"length":0,"stats":{"Line":22}},{"line":96,"address":[],"length":0,"stats":{"Line":44}},{"line":98,"address":[],"length":0,"stats":{"Line":22}},{"line":100,"address":[],"length":0,"stats":{"Line":11}},{"line":101,"address":[],"length":0,"stats":{"Line":11}},{"line":102,"address":[],"length":0,"stats":{"Line":22}},{"line":103,"address":[],"length":0,"stats":{"Line":22}},{"line":104,"address":[],"length":0,"stats":{"Line":22}},{"line":105,"address":[],"length":0,"stats":{"Line":22}},{"line":106,"address":[],"length":0,"stats":{"Line":22}},{"line":107,"address":[],"length":0,"stats":{"Line":44}},{"line":108,"address":[],"length":0,"stats":{"Line":22}},{"line":109,"address":[],"length":0,"stats":{"Line":22}},{"line":112,"address":[],"length":0,"stats":{"Line":11}},{"line":113,"address":[],"length":0,"stats":{"Line":11}},{"line":114,"address":[],"length":0,"stats":{"Line":22}},{"line":115,"address":[],"length":0,"stats":{"Line":22}},{"line":116,"address":[],"length":0,"stats":{"Line":22}},{"line":117,"address":[],"length":0,"stats":{"Line":11}},{"line":118,"address":[],"length":0,"stats":{"Line":11}},{"line":119,"address":[],"length":0,"stats":{"Line":11}},{"line":120,"address":[],"length":0,"stats":{"Line":11}},{"line":121,"address":[],"length":0,"stats":{"Line":11}},{"line":122,"address":[],"length":0,"stats":{"Line":22}},{"line":124,"address":[],"length":0,"stats":{"Line":22}},{"line":127,"address":[],"length":0,"stats":{"Line":11}},{"line":128,"address":[],"length":0,"stats":{"Line":11}},{"line":129,"address":[],"length":0,"stats":{"Line":22}},{"line":130,"address":[],"length":0,"stats":{"Line":11}},{"line":131,"address":[],"length":0,"stats":{"Line":11}},{"line":132,"address":[],"length":0,"stats":{"Line":22}},{"line":133,"address":[],"length":0,"stats":{"Line":11}},{"line":134,"address":[],"length":0,"stats":{"Line":11}},{"line":135,"address":[],"length":0,"stats":{"Line":22}},{"line":137,"address":[],"length":0,"stats":{"Line":11}},{"line":138,"address":[],"length":0,"stats":{"Line":11}},{"line":139,"address":[],"length":0,"stats":{"Line":11}},{"line":140,"address":[],"length":0,"stats":{"Line":11}},{"line":141,"address":[],"length":0,"stats":{"Line":11}},{"line":142,"address":[],"length":0,"stats":{"Line":22}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":147,"address":[],"length":0,"stats":{"Line":11}},{"line":148,"address":[],"length":0,"stats":{"Line":22}},{"line":149,"address":[],"length":0,"stats":{"Line":22}},{"line":150,"address":[],"length":0,"stats":{"Line":22}},{"line":151,"address":[],"length":0,"stats":{"Line":11}},{"line":152,"address":[],"length":0,"stats":{"Line":11}},{"line":153,"address":[],"length":0,"stats":{"Line":11}},{"line":154,"address":[],"length":0,"stats":{"Line":11}},{"line":155,"address":[],"length":0,"stats":{"Line":11}},{"line":156,"address":[],"length":0,"stats":{"Line":11}},{"line":157,"address":[],"length":0,"stats":{"Line":11}},{"line":158,"address":[],"length":0,"stats":{"Line":11}},{"line":159,"address":[],"length":0,"stats":{"Line":22}},{"line":161,"address":[],"length":0,"stats":{"Line":22}},{"line":162,"address":[],"length":0,"stats":{"Line":22}},{"line":163,"address":[],"length":0,"stats":{"Line":22}},{"line":164,"address":[],"length":0,"stats":{"Line":44}},{"line":165,"address":[],"length":0,"stats":{"Line":22}},{"line":168,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":11}},{"line":170,"address":[],"length":0,"stats":{"Line":22}},{"line":171,"address":[],"length":0,"stats":{"Line":22}},{"line":172,"address":[],"length":0,"stats":{"Line":22}},{"line":173,"address":[],"length":0,"stats":{"Line":11}},{"line":174,"address":[],"length":0,"stats":{"Line":11}},{"line":175,"address":[],"length":0,"stats":{"Line":11}},{"line":176,"address":[],"length":0,"stats":{"Line":11}},{"line":177,"address":[],"length":0,"stats":{"Line":11}},{"line":178,"address":[],"length":0,"stats":{"Line":11}},{"line":179,"address":[],"length":0,"stats":{"Line":11}},{"line":180,"address":[],"length":0,"stats":{"Line":11}},{"line":181,"address":[],"length":0,"stats":{"Line":22}},{"line":183,"address":[],"length":0,"stats":{"Line":22}},{"line":184,"address":[],"length":0,"stats":{"Line":22}},{"line":185,"address":[],"length":0,"stats":{"Line":22}},{"line":186,"address":[],"length":0,"stats":{"Line":44}},{"line":187,"address":[],"length":0,"stats":{"Line":22}},{"line":190,"address":[],"length":0,"stats":{"Line":11}},{"line":191,"address":[],"length":0,"stats":{"Line":11}},{"line":192,"address":[],"length":0,"stats":{"Line":22}},{"line":193,"address":[],"length":0,"stats":{"Line":11}},{"line":194,"address":[],"length":0,"stats":{"Line":11}},{"line":195,"address":[],"length":0,"stats":{"Line":11}},{"line":196,"address":[],"length":0,"stats":{"Line":11}},{"line":197,"address":[],"length":0,"stats":{"Line":22}},{"line":198,"address":[],"length":0,"stats":{"Line":11}},{"line":199,"address":[],"length":0,"stats":{"Line":11}},{"line":200,"address":[],"length":0,"stats":{"Line":22}},{"line":202,"address":[],"length":0,"stats":{"Line":11}},{"line":203,"address":[],"length":0,"stats":{"Line":11}},{"line":204,"address":[],"length":0,"stats":{"Line":11}},{"line":205,"address":[],"length":0,"stats":{"Line":11}},{"line":206,"address":[],"length":0,"stats":{"Line":11}},{"line":207,"address":[],"length":0,"stats":{"Line":11}},{"line":208,"address":[],"length":0,"stats":{"Line":11}},{"line":209,"address":[],"length":0,"stats":{"Line":11}},{"line":210,"address":[],"length":0,"stats":{"Line":22}},{"line":212,"address":[],"length":0,"stats":{"Line":11}},{"line":213,"address":[],"length":0,"stats":{"Line":11}},{"line":214,"address":[],"length":0,"stats":{"Line":11}},{"line":215,"address":[],"length":0,"stats":{"Line":22}},{"line":216,"address":[],"length":0,"stats":{"Line":11}},{"line":217,"address":[],"length":0,"stats":{"Line":11}},{"line":219,"address":[],"length":0,"stats":{"Line":22}},{"line":220,"address":[],"length":0,"stats":{"Line":22}},{"line":221,"address":[],"length":0,"stats":{"Line":22}},{"line":222,"address":[],"length":0,"stats":{"Line":44}},{"line":223,"address":[],"length":0,"stats":{"Line":11}},{"line":224,"address":[],"length":0,"stats":{"Line":11}},{"line":225,"address":[],"length":0,"stats":{"Line":11}},{"line":226,"address":[],"length":0,"stats":{"Line":11}},{"line":227,"address":[],"length":0,"stats":{"Line":11}},{"line":228,"address":[],"length":0,"stats":{"Line":11}},{"line":229,"address":[],"length":0,"stats":{"Line":11}},{"line":230,"address":[],"length":0,"stats":{"Line":22}},{"line":232,"address":[],"length":0,"stats":{"Line":11}},{"line":233,"address":[],"length":0,"stats":{"Line":11}},{"line":234,"address":[],"length":0,"stats":{"Line":11}},{"line":235,"address":[],"length":0,"stats":{"Line":22}},{"line":236,"address":[],"length":0,"stats":{"Line":11}},{"line":237,"address":[],"length":0,"stats":{"Line":11}},{"line":241,"address":[],"length":0,"stats":{"Line":11}},{"line":242,"address":[],"length":0,"stats":{"Line":11}},{"line":243,"address":[],"length":0,"stats":{"Line":22}},{"line":244,"address":[],"length":0,"stats":{"Line":11}},{"line":245,"address":[],"length":0,"stats":{"Line":11}},{"line":246,"address":[],"length":0,"stats":{"Line":11}},{"line":247,"address":[],"length":0,"stats":{"Line":11}},{"line":248,"address":[],"length":0,"stats":{"Line":22}},{"line":249,"address":[],"length":0,"stats":{"Line":11}},{"line":250,"address":[],"length":0,"stats":{"Line":11}},{"line":251,"address":[],"length":0,"stats":{"Line":22}},{"line":253,"address":[],"length":0,"stats":{"Line":11}},{"line":254,"address":[],"length":0,"stats":{"Line":11}},{"line":255,"address":[],"length":0,"stats":{"Line":11}},{"line":256,"address":[],"length":0,"stats":{"Line":11}},{"line":257,"address":[],"length":0,"stats":{"Line":11}},{"line":258,"address":[],"length":0,"stats":{"Line":11}},{"line":259,"address":[],"length":0,"stats":{"Line":11}},{"line":260,"address":[],"length":0,"stats":{"Line":11}},{"line":261,"address":[],"length":0,"stats":{"Line":22}},{"line":263,"address":[],"length":0,"stats":{"Line":11}},{"line":264,"address":[],"length":0,"stats":{"Line":11}},{"line":265,"address":[],"length":0,"stats":{"Line":11}},{"line":266,"address":[],"length":0,"stats":{"Line":22}},{"line":267,"address":[],"length":0,"stats":{"Line":11}},{"line":268,"address":[],"length":0,"stats":{"Line":11}},{"line":270,"address":[],"length":0,"stats":{"Line":22}},{"line":271,"address":[],"length":0,"stats":{"Line":22}},{"line":272,"address":[],"length":0,"stats":{"Line":22}},{"line":273,"address":[],"length":0,"stats":{"Line":44}},{"line":274,"address":[],"length":0,"stats":{"Line":11}},{"line":275,"address":[],"length":0,"stats":{"Line":11}},{"line":276,"address":[],"length":0,"stats":{"Line":11}},{"line":277,"address":[],"length":0,"stats":{"Line":11}},{"line":278,"address":[],"length":0,"stats":{"Line":11}},{"line":279,"address":[],"length":0,"stats":{"Line":11}},{"line":280,"address":[],"length":0,"stats":{"Line":11}},{"line":281,"address":[],"length":0,"stats":{"Line":22}},{"line":283,"address":[],"length":0,"stats":{"Line":11}},{"line":284,"address":[],"length":0,"stats":{"Line":11}},{"line":285,"address":[],"length":0,"stats":{"Line":11}},{"line":286,"address":[],"length":0,"stats":{"Line":22}},{"line":287,"address":[],"length":0,"stats":{"Line":11}},{"line":288,"address":[],"length":0,"stats":{"Line":11}},{"line":292,"address":[],"length":0,"stats":{"Line":11}},{"line":293,"address":[],"length":0,"stats":{"Line":11}},{"line":294,"address":[],"length":0,"stats":{"Line":22}},{"line":295,"address":[],"length":0,"stats":{"Line":22}},{"line":296,"address":[],"length":0,"stats":{"Line":22}},{"line":297,"address":[],"length":0,"stats":{"Line":22}},{"line":298,"address":[],"length":0,"stats":{"Line":22}},{"line":299,"address":[],"length":0,"stats":{"Line":22}},{"line":300,"address":[],"length":0,"stats":{"Line":44}},{"line":301,"address":[],"length":0,"stats":{"Line":22}},{"line":304,"address":[],"length":0,"stats":{"Line":11}},{"line":305,"address":[],"length":0,"stats":{"Line":11}},{"line":306,"address":[],"length":0,"stats":{"Line":22}},{"line":307,"address":[],"length":0,"stats":{"Line":11}},{"line":308,"address":[],"length":0,"stats":{"Line":11}},{"line":309,"address":[],"length":0,"stats":{"Line":11}},{"line":310,"address":[],"length":0,"stats":{"Line":11}},{"line":311,"address":[],"length":0,"stats":{"Line":22}},{"line":312,"address":[],"length":0,"stats":{"Line":11}},{"line":313,"address":[],"length":0,"stats":{"Line":11}},{"line":314,"address":[],"length":0,"stats":{"Line":22}},{"line":316,"address":[],"length":0,"stats":{"Line":11}},{"line":317,"address":[],"length":0,"stats":{"Line":11}},{"line":318,"address":[],"length":0,"stats":{"Line":11}},{"line":319,"address":[],"length":0,"stats":{"Line":22}},{"line":320,"address":[],"length":0,"stats":{"Line":11}},{"line":321,"address":[],"length":0,"stats":{"Line":11}},{"line":323,"address":[],"length":0,"stats":{"Line":22}},{"line":324,"address":[],"length":0,"stats":{"Line":22}},{"line":325,"address":[],"length":0,"stats":{"Line":22}},{"line":326,"address":[],"length":0,"stats":{"Line":44}},{"line":327,"address":[],"length":0,"stats":{"Line":11}},{"line":328,"address":[],"length":0,"stats":{"Line":11}},{"line":329,"address":[],"length":0,"stats":{"Line":11}},{"line":330,"address":[],"length":0,"stats":{"Line":11}},{"line":331,"address":[],"length":0,"stats":{"Line":11}},{"line":332,"address":[],"length":0,"stats":{"Line":11}},{"line":333,"address":[],"length":0,"stats":{"Line":11}},{"line":334,"address":[],"length":0,"stats":{"Line":22}},{"line":336,"address":[],"length":0,"stats":{"Line":11}},{"line":337,"address":[],"length":0,"stats":{"Line":11}},{"line":338,"address":[],"length":0,"stats":{"Line":11}},{"line":339,"address":[],"length":0,"stats":{"Line":22}},{"line":340,"address":[],"length":0,"stats":{"Line":11}},{"line":341,"address":[],"length":0,"stats":{"Line":11}}],"covered":273,"coverable":273},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","auth.rs"],"content":"//! Authentication command definitions.\n//!\n//! This module defines CLI commands related to authentication and session management.\n\nuse crate::commands::params::{\n    client_id_parameter, client_secret_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter,\n    COMMAND_AUTH, COMMAND_GET, COMMAND_LOGIN, COMMAND_LOGOUT\n};\nuse clap::Command;\n\n/// Create the authentication command with all its subcommands.\npub fn auth_command() -\u003e Command {\n    Command::new(COMMAND_AUTH)\n        .about(\"Authentication operations\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_LOGIN)\n                .about(\"Login using client credentials\")\n                .arg(client_id_parameter())\n                .arg(client_secret_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LOGOUT)\n                .about(\"Logout and clear session\"),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get current access token\")\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter()),\n        )\n}","traces":[{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":14,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":44}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}}],"covered":13,"coverable":13},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","config.rs"],"content":"//! Configuration command definitions.\n//!\n//! This module defines CLI commands related to configuration management.\n\nuse crate::commands::params::{\n    file_parameter, format_parameter, format_pretty_parameter, format_with_headers_parameter,\n    output_file_parameter, api_url_parameter, ui_url_parameter, auth_url_parameter,\n    COMMAND_CONFIG, COMMAND_EXPORT, COMMAND_GET, COMMAND_IMPORT, COMMAND_ENVIRONMENT,\n    COMMAND_ADD, COMMAND_USE, COMMAND_REMOVE, COMMAND_ENVIRONMENT_LIST, COMMAND_ENVIRONMENT_GET, COMMAND_RESET, PARAMETER_NAME,\n};\nuse clap::Arg;\nuse clap::Command;\n\n/// Create the config command with all its subcommands.\npub fn config_command() -\u003e Command {\n    Command::new(COMMAND_CONFIG)\n        .about(\"Configuration management\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get configuration details\")\n                .arg(format_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter())\n                .subcommand(Command::new(\"path\").about(\"Show configuration file path\")),\n        )\n        .subcommand(\n            Command::new(COMMAND_EXPORT)\n                .about(\"Export configuration to file\")\n                .arg(output_file_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_IMPORT)\n                .about(\"Import configuration from file\")\n                .arg(file_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_ENVIRONMENT)\n                .about(\"Manage environment configurations\")\n                .subcommand_required(true)\n                .subcommand(\n                    Command::new(COMMAND_ADD)\n                        .about(\"Add a new environment configuration\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(true)\n                            .help(\"Name of the environment\"))\n                        .arg(api_url_parameter())\n                        .arg(ui_url_parameter())\n                        .arg(auth_url_parameter()),\n                )\n                .subcommand(\n                    Command::new(COMMAND_USE)\n                        .about(\"Switch to an environment\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(false)\n                            .help(\"Name of the environment to switch to\")),\n                )\n                .subcommand(\n                    Command::new(COMMAND_REMOVE)\n                        .about(\"Remove an environment\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(true)\n                            .help(\"Name of the environment to remove\")),\n                )\n                .subcommand(\n                    Command::new(COMMAND_ENVIRONMENT_LIST)\n                        .about(\"List all environments\")\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_with_headers_parameter()),\n                )\n                .subcommand(\n                    Command::new(COMMAND_RESET)\n                        .about(\"Reset all environment configurations to blank state\"),\n                )\n                .subcommand(\n                    Command::new(COMMAND_ENVIRONMENT_GET)\n                        .about(\"Get environment details\")\n                        .arg(Arg::new(PARAMETER_NAME)\n                            .long(PARAMETER_NAME)\n                            .num_args(1)\n                            .required(false)\n                            .help(\"Name of the environment to get details for (defaults to active environment)\"))\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_with_headers_parameter()),\n                ),\n        )\n}\n","traces":[{"line":15,"address":[],"length":0,"stats":{"Line":11}},{"line":16,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":25,"address":[],"length":0,"stats":{"Line":33}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":11}},{"line":34,"address":[],"length":0,"stats":{"Line":11}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":11}},{"line":40,"address":[],"length":0,"stats":{"Line":11}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":11}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":11}},{"line":46,"address":[],"length":0,"stats":{"Line":11}},{"line":47,"address":[],"length":0,"stats":{"Line":11}},{"line":48,"address":[],"length":0,"stats":{"Line":11}},{"line":49,"address":[],"length":0,"stats":{"Line":22}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":22}},{"line":53,"address":[],"length":0,"stats":{"Line":11}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":22}},{"line":57,"address":[],"length":0,"stats":{"Line":11}},{"line":58,"address":[],"length":0,"stats":{"Line":11}},{"line":59,"address":[],"length":0,"stats":{"Line":11}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":11}},{"line":65,"address":[],"length":0,"stats":{"Line":22}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":11}},{"line":68,"address":[],"length":0,"stats":{"Line":11}},{"line":69,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":11}},{"line":74,"address":[],"length":0,"stats":{"Line":44}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":76,"address":[],"length":0,"stats":{"Line":22}},{"line":78,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":11}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":11}},{"line":85,"address":[],"length":0,"stats":{"Line":22}},{"line":86,"address":[],"length":0,"stats":{"Line":11}},{"line":87,"address":[],"length":0,"stats":{"Line":11}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":90,"address":[],"length":0,"stats":{"Line":44}},{"line":91,"address":[],"length":0,"stats":{"Line":22}},{"line":92,"address":[],"length":0,"stats":{"Line":22}}],"covered":64,"coverable":64},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","context.rs"],"content":"//! Context command definitions.\n//!\n//! This module defines CLI commands related to context management.\n\nuse crate::commands::params::{\n    tenant_id_parameter, tenant_name_parameter, COMMAND_CLEAR, COMMAND_CONTEXT, COMMAND_GET,\n    COMMAND_SET, COMMAND_TENANT,\n};\nuse clap::Command;\n\n/// Create the context command with all its subcommands.\npub fn context_command() -\u003e Command {\n    Command::new(COMMAND_CONTEXT)\n        .about(\"Context management\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_SET).about(\"Set context\").subcommand(\n                Command::new(COMMAND_TENANT)\n                    .about(\"Set or select an active tenant\")\n                    .arg(tenant_name_parameter().required(false))\n                    .arg(tenant_id_parameter())\n                    .arg(crate::commands::params::refresh_parameter()),\n            ),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get current context\")\n                .subcommand_required(false) // Allow no subcommand for context get\n                .subcommand(\n                    Command::new(COMMAND_TENANT)\n                        .about(\"Print the active tenant\")\n                        .arg(crate::commands::params::format_with_headers_parameter())\n                        .arg(crate::commands::params::format_with_metadata_parameter())\n                        .arg(crate::commands::params::format_pretty_parameter())\n                        .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n                )\n                .arg(crate::commands::params::format_with_headers_parameter())\n                .arg(crate::commands::params::format_with_metadata_parameter())\n                .arg(crate::commands::params::format_pretty_parameter())\n                .arg(crate::commands::params::format_parameter().value_parser([crate::commands::params::FORMAT_JSON, crate::commands::params::FORMAT_CSV]))\n        )\n        .subcommand(\n            Command::new(COMMAND_CLEAR)\n                .about(\"Clear context\")\n                .subcommand(Command::new(COMMAND_TENANT).about(\"Clear the active tenant\")),\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":33}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":33}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":22}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":44}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":44}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":11}},{"line":45,"address":[],"length":0,"stats":{"Line":33}}],"covered":25,"coverable":25},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","folder.rs"],"content":"//! Folder command definitions.\n//!\n//! This module defines CLI commands related to folder management.\n\nuse crate::commands::params::{\n    folder_identifier_group, folder_path_parameter, folder_uuid_parameter, format_parameter,\n    format_pretty_parameter, format_with_headers_parameter, format_with_metadata_parameter,\n    name_parameter, parent_folder_identifier_group, parent_folder_path_parameter, parent_folder_uuid_parameter, tenant_parameter,\n    COMMAND_CREATE, COMMAND_DELETE, COMMAND_FOLDER, COMMAND_GET,\n    COMMAND_LIST,\n};\nuse clap::Command;\n\n/// Create the folder command with all its subcommands.\npub fn folder_command() -\u003e Command {\n    Command::new(COMMAND_FOLDER)\n        .about(\"Manage folders\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Create a new folder\")\n                .arg(tenant_parameter())\n                .arg(name_parameter())\n                .arg(parent_folder_path_parameter())\n                .arg(parent_folder_uuid_parameter())\n                .group(parent_folder_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get folder details\")\n                .arg(tenant_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter()),\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all folders\")\n                .visible_alias(\"ls\")\n                .arg(tenant_parameter())\n                .arg(format_with_metadata_parameter())\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(format_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .group(folder_identifier_group()),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete a folder\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(folder_uuid_parameter())\n                .arg(folder_path_parameter())\n                .arg(\n                    clap::Arg::new(\"force\")\n                        .long(\"force\")\n                        .short('f')\n                        .action(clap::ArgAction::SetTrue)\n                        .help(\"Force deletion of non-empty folder by deleting all contents first\"),\n                )\n                .group(folder_identifier_group()),\n        )\n}\n","traces":[{"line":15,"address":[],"length":0,"stats":{"Line":11}},{"line":16,"address":[],"length":0,"stats":{"Line":11}},{"line":20,"address":[],"length":0,"stats":{"Line":11}},{"line":21,"address":[],"length":0,"stats":{"Line":11}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":25,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":22}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}},{"line":33,"address":[],"length":0,"stats":{"Line":22}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":36,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":11}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":44,"address":[],"length":0,"stats":{"Line":22}},{"line":45,"address":[],"length":0,"stats":{"Line":22}},{"line":46,"address":[],"length":0,"stats":{"Line":22}},{"line":47,"address":[],"length":0,"stats":{"Line":22}},{"line":48,"address":[],"length":0,"stats":{"Line":22}},{"line":49,"address":[],"length":0,"stats":{"Line":22}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":22}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":11}},{"line":57,"address":[],"length":0,"stats":{"Line":22}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":22}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":61,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":22}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":67,"address":[],"length":0,"stats":{"Line":22}}],"covered":43,"coverable":43},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","metadata.rs"],"content":"//! Metadata command definitions.\n//!\n//! This module defines CLI commands related to asset metadata management.\n\nuse crate::commands::params::{\n    format_parameter, format_pretty_parameter, format_with_headers_parameter, path_parameter, tenant_parameter, uuid_parameter, COMMAND_CREATE,\n    COMMAND_DELETE, COMMAND_GET, COMMAND_METADATA,\n};\nuse clap::{Arg, ArgAction, ArgGroup, Command};\n\n/// Create the metadata command with all its subcommands.\npub fn metadata_command() -\u003e Command {\n    Command::new(COMMAND_METADATA)\n        .about(\"Manage asset metadata\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get metadata for an asset\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_CREATE)\n                .about(\"Add metadata to an asset\")\n                .visible_alias(\"update\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(\"name\")\n                        .long(\"name\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property name\")\n                )\n                .arg(\n                    Arg::new(\"value\")\n                        .long(\"value\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property value\")\n                )\n                .arg(\n                    Arg::new(\"type\")\n                        .long(\"type\")\n                        .num_args(1)\n                        .required(false)\n                        .value_parser([\"text\", \"number\", \"boolean\"])\n                        .default_value(\"text\")\n                        .help(\"Metadata field type (text, number, boolean) - default: text\")\n                )\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(COMMAND_DELETE)\n                .about(\"Delete specific metadata fields from an asset\")\n                .visible_alias(\"rm\")\n                .arg(tenant_parameter())\n                .arg(uuid_parameter())\n                .arg(path_parameter())\n                .arg(\n                    Arg::new(\"field_name\")\n                        .short('n')\n                        .long(\"name\")\n                        .num_args(1)\n                        .required(true)\n                        .value_parser(clap::value_parser!(String))\n                        .help(\"Metadata property name (can be provided multiple times or as comma-separated list)\")\n                        .action(ArgAction::Append)\n                )\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .group(\n                    ArgGroup::new(\"asset_identifier\")\n                        .args([\"uuid\", \"path\"])\n                        .multiple(false)\n                        .required(true)\n                ),\n        )\n        .subcommand(\n            Command::new(\"create-batch\")\n                .about(\"Create metadata for multiple assets from a CSV file\")\n                .visible_alias(\"update-batch\")\n                .long_about(\n                    \"Create metadata for multiple assets from a CSV file.\\n\\n\\\n                    The CSV file must have the following columns in the specified order:\\n\\\n                    - ASSET_PATH: The full path of the asset in Physna\\n\\\n                    - NAME: The name of the metadata field to set\\n\\\n                    - VALUE: The value to set for the metadata field\\n\\n\\\n                    CSV File Requirements:\\n\\\n                    - The first row must contain the headers ASSET_PATH,NAME,VALUE\\n\\\n                    - The file must be UTF-8 encoded\\n\\\n                    - Values containing commas, quotes, or newlines must be enclosed in double quotes\\n\\\n                    - Empty rows will be ignored\\n\\\n                    - Each row represents a single metadata field assignment for an asset\\n\\n\\\n                    If an asset has multiple metadata fields to update, include multiple rows \\n\\\n                    with the same ASSET_PATH but different NAME and VALUE combinations.\\n\\n\\\n                    Example CSV format:\\n\\\n                    ASSET_PATH,NAME,VALUE\\n\\\n                    folder/subfolder/asset1.stl,Material,Steel\\n\\\n                    folder/subfolder/asset1.stl,Weight,\\\"15.5 kg\\\"\\n\\\n                    folder/subfolder/asset2.ipt,Material,Aluminum\\n\\n\\\n                    The command will group metadata by asset path and update all metadata \\\n                    for each asset in a single API call.\"\n                )\n                .arg(tenant_parameter())\n                .arg(\n                    Arg::new(\"csv-file\")\n                        .long(\"csv-file\")\n                        .num_args(1)\n                        .required(true)\n                        .help(\"Path to the CSV file containing metadata entries\")\n                        .value_parser(clap::value_parser!(std::path::PathBuf)),\n                )\n                .arg(\n                    Arg::new(\"progress\")\n                        .long(\"progress\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Display progress bar during processing\"),\n                ),\n        )\n        .subcommand(\n            Command::new(\"inference\")\n                .about(\"Apply metadata from a reference asset to geometrically similar assets\")\n                .arg(path_parameter().required(true))\n                .arg(\n                    Arg::new(\"inference_name\")\n                        .long(\"name\")\n                        .num_args(1..)\n                        .action(ArgAction::Append)\n                        .required(true)\n                        .help(\"Metadata field name(s) to copy (can be specified multiple times or comma-separated)\")\n                )\n                .arg(\n                    Arg::new(\"threshold\")\n                        .short('s')\n                        .long(\"threshold\")\n                        .num_args(1)\n                        .required(false)\n                        .default_value(\"80.0\")\n                        .help(\"Similarity threshold (0.00 to 100.00)\")\n                        .value_parser(clap::value_parser!(f64)),\n                )\n                .arg(\n                    Arg::new(\"recursive\")\n                        .long(\"recursive\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Apply inference recursively to all found similar assets\"),\n                )\n                .arg(\n                    Arg::new(\"exclusive\")\n                        .long(\"exclusive\")\n                        .action(ArgAction::SetTrue)\n                        .required(false)\n                        .help(\"Only apply inference to assets in the same parent folder as the reference asset\"),\n                )\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_with_headers_parameter())\n                .arg(format_pretty_parameter())\n                .arg(tenant_parameter())\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":22}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":22}},{"line":22,"address":[],"length":0,"stats":{"Line":44}},{"line":23,"address":[],"length":0,"stats":{"Line":11}},{"line":24,"address":[],"length":0,"stats":{"Line":11}},{"line":25,"address":[],"length":0,"stats":{"Line":22}},{"line":26,"address":[],"length":0,"stats":{"Line":11}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":11}},{"line":33,"address":[],"length":0,"stats":{"Line":11}},{"line":34,"address":[],"length":0,"stats":{"Line":22}},{"line":35,"address":[],"length":0,"stats":{"Line":22}},{"line":36,"address":[],"length":0,"stats":{"Line":22}},{"line":37,"address":[],"length":0,"stats":{"Line":11}},{"line":38,"address":[],"length":0,"stats":{"Line":11}},{"line":39,"address":[],"length":0,"stats":{"Line":11}},{"line":40,"address":[],"length":0,"stats":{"Line":11}},{"line":41,"address":[],"length":0,"stats":{"Line":11}},{"line":42,"address":[],"length":0,"stats":{"Line":22}},{"line":43,"address":[],"length":0,"stats":{"Line":11}},{"line":45,"address":[],"length":0,"stats":{"Line":11}},{"line":46,"address":[],"length":0,"stats":{"Line":11}},{"line":47,"address":[],"length":0,"stats":{"Line":11}},{"line":48,"address":[],"length":0,"stats":{"Line":11}},{"line":49,"address":[],"length":0,"stats":{"Line":11}},{"line":50,"address":[],"length":0,"stats":{"Line":22}},{"line":51,"address":[],"length":0,"stats":{"Line":11}},{"line":53,"address":[],"length":0,"stats":{"Line":11}},{"line":54,"address":[],"length":0,"stats":{"Line":11}},{"line":55,"address":[],"length":0,"stats":{"Line":11}},{"line":56,"address":[],"length":0,"stats":{"Line":11}},{"line":57,"address":[],"length":0,"stats":{"Line":11}},{"line":58,"address":[],"length":0,"stats":{"Line":22}},{"line":59,"address":[],"length":0,"stats":{"Line":11}},{"line":60,"address":[],"length":0,"stats":{"Line":11}},{"line":62,"address":[],"length":0,"stats":{"Line":11}},{"line":63,"address":[],"length":0,"stats":{"Line":11}},{"line":64,"address":[],"length":0,"stats":{"Line":22}},{"line":65,"address":[],"length":0,"stats":{"Line":11}},{"line":66,"address":[],"length":0,"stats":{"Line":11}},{"line":70,"address":[],"length":0,"stats":{"Line":11}},{"line":71,"address":[],"length":0,"stats":{"Line":11}},{"line":72,"address":[],"length":0,"stats":{"Line":11}},{"line":73,"address":[],"length":0,"stats":{"Line":22}},{"line":74,"address":[],"length":0,"stats":{"Line":22}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":76,"address":[],"length":0,"stats":{"Line":11}},{"line":77,"address":[],"length":0,"stats":{"Line":11}},{"line":78,"address":[],"length":0,"stats":{"Line":11}},{"line":79,"address":[],"length":0,"stats":{"Line":11}},{"line":80,"address":[],"length":0,"stats":{"Line":11}},{"line":81,"address":[],"length":0,"stats":{"Line":11}},{"line":82,"address":[],"length":0,"stats":{"Line":22}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":86,"address":[],"length":0,"stats":{"Line":44}},{"line":87,"address":[],"length":0,"stats":{"Line":11}},{"line":88,"address":[],"length":0,"stats":{"Line":11}},{"line":89,"address":[],"length":0,"stats":{"Line":22}},{"line":90,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":11}},{"line":95,"address":[],"length":0,"stats":{"Line":11}},{"line":96,"address":[],"length":0,"stats":{"Line":11}},{"line":97,"address":[],"length":0,"stats":{"Line":11}},{"line":98,"address":[],"length":0,"stats":{"Line":11}},{"line":120,"address":[],"length":0,"stats":{"Line":22}},{"line":121,"address":[],"length":0,"stats":{"Line":11}},{"line":122,"address":[],"length":0,"stats":{"Line":11}},{"line":123,"address":[],"length":0,"stats":{"Line":11}},{"line":124,"address":[],"length":0,"stats":{"Line":11}},{"line":125,"address":[],"length":0,"stats":{"Line":11}},{"line":126,"address":[],"length":0,"stats":{"Line":11}},{"line":127,"address":[],"length":0,"stats":{"Line":22}},{"line":129,"address":[],"length":0,"stats":{"Line":11}},{"line":130,"address":[],"length":0,"stats":{"Line":11}},{"line":131,"address":[],"length":0,"stats":{"Line":11}},{"line":132,"address":[],"length":0,"stats":{"Line":22}},{"line":133,"address":[],"length":0,"stats":{"Line":11}},{"line":134,"address":[],"length":0,"stats":{"Line":11}},{"line":138,"address":[],"length":0,"stats":{"Line":11}},{"line":139,"address":[],"length":0,"stats":{"Line":11}},{"line":140,"address":[],"length":0,"stats":{"Line":33}},{"line":141,"address":[],"length":0,"stats":{"Line":11}},{"line":142,"address":[],"length":0,"stats":{"Line":11}},{"line":143,"address":[],"length":0,"stats":{"Line":11}},{"line":144,"address":[],"length":0,"stats":{"Line":22}},{"line":145,"address":[],"length":0,"stats":{"Line":22}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":147,"address":[],"length":0,"stats":{"Line":11}},{"line":149,"address":[],"length":0,"stats":{"Line":11}},{"line":150,"address":[],"length":0,"stats":{"Line":11}},{"line":151,"address":[],"length":0,"stats":{"Line":11}},{"line":152,"address":[],"length":0,"stats":{"Line":11}},{"line":153,"address":[],"length":0,"stats":{"Line":11}},{"line":154,"address":[],"length":0,"stats":{"Line":11}},{"line":155,"address":[],"length":0,"stats":{"Line":11}},{"line":156,"address":[],"length":0,"stats":{"Line":11}},{"line":157,"address":[],"length":0,"stats":{"Line":22}},{"line":159,"address":[],"length":0,"stats":{"Line":11}},{"line":160,"address":[],"length":0,"stats":{"Line":11}},{"line":161,"address":[],"length":0,"stats":{"Line":11}},{"line":162,"address":[],"length":0,"stats":{"Line":22}},{"line":163,"address":[],"length":0,"stats":{"Line":11}},{"line":164,"address":[],"length":0,"stats":{"Line":11}},{"line":166,"address":[],"length":0,"stats":{"Line":11}},{"line":167,"address":[],"length":0,"stats":{"Line":11}},{"line":168,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":22}},{"line":170,"address":[],"length":0,"stats":{"Line":11}},{"line":171,"address":[],"length":0,"stats":{"Line":11}},{"line":173,"address":[],"length":0,"stats":{"Line":44}},{"line":174,"address":[],"length":0,"stats":{"Line":22}},{"line":175,"address":[],"length":0,"stats":{"Line":22}},{"line":176,"address":[],"length":0,"stats":{"Line":22}}],"covered":120,"coverable":120},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","mod.rs"],"content":"//! CLI command definitions and argument parsing.\n//!\n//! This module defines all the CLI commands and their arguments using the clap crate.\n//! It provides a structured way to define the command-line interface for the Physna CLI.\n//! The implementation has been modularized into separate files for better maintainability.\n\nuse clap::{ArgMatches, Command};\n\n// Import all submodules\npub mod assets;\npub mod auth;\npub mod config;\npub mod context;\npub mod folder;\npub mod metadata;\npub mod params;\npub mod tenant;\n\n/// Create and configure all CLI commands and their arguments.\n///\n/// This function defines the entire command-line interface for the Physna CLI,\n/// including all subcommands, arguments, and their relationships by combining\n/// the modularized command definitions.\n///\n/// # Returns\n///\n/// An `ArgMatches` instance containing the parsed command-line arguments.\npub fn create_cli_commands() -\u003e ArgMatches {\n    Command::new(env!(\"CARGO_PKG_NAME\"))\n        .version(env!(\"CARGO_PKG_VERSION\"))\n        .author(env!(\"CARGO_PKG_AUTHORS\"))\n        .about(env!(\"CARGO_PKG_DESCRIPTION\"))\n        .propagate_version(true)\n        .subcommand_required(true)\n        .arg_required_else_help(true)\n        // Add all the modularized command groups\n        .subcommand(tenant::tenant_command())\n        .subcommand(folder::folder_command())\n        .subcommand(auth::auth_command())\n        .subcommand(assets::asset_command())\n        .subcommand(context::context_command())\n        .subcommand(config::config_command())\n        .get_matches()\n}\n","traces":[{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":11}},{"line":31,"address":[],"length":0,"stats":{"Line":11}},{"line":32,"address":[],"length":0,"stats":{"Line":11}},{"line":37,"address":[],"length":0,"stats":{"Line":22}},{"line":38,"address":[],"length":0,"stats":{"Line":22}},{"line":39,"address":[],"length":0,"stats":{"Line":22}},{"line":40,"address":[],"length":0,"stats":{"Line":22}},{"line":41,"address":[],"length":0,"stats":{"Line":22}},{"line":42,"address":[],"length":0,"stats":{"Line":22}}],"covered":11,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","params.rs"],"content":"//! Shared command parameters for all CLI commands.\n//!\n//! This module defines common parameters that are used across multiple command modules.\n//! It provides a centralized place to define parameter names and common argument configurations.\n\nuse crate::format::OutputFormat;\nuse clap::{Arg, ArgAction, ArgGroup};\nuse std::path::PathBuf;\nuse uuid::Uuid;\n\n// CRUD operations\npub const COMMAND_CREATE: \u0026str = \"create\";\npub const COMMAND_CREATE_BATCH: \u0026str = \"create-batch\";\npub const COMMAND_GET: \u0026str = \"get\";\npub const COMMAND_LIST: \u0026str = \"list\";\npub const COMMAND_UPDATE: \u0026str = \"update\";\npub const COMMAND_DELETE: \u0026str = \"delete\";\n\n// Asset commands\npub const COMMAND_ASSET: \u0026str = \"asset\";\npub const COMMAND_MATCH: \u0026str = \"geometric-match\";\npub const COMMAND_MATCH_FOLDER: \u0026str = \"geometric-match-folder\";\npub const COMMAND_PART_MATCH: \u0026str = \"part-match\"; // Allow non snake case since it's used as a command name\npub const COMMAND_PART_MATCH_FOLDER: \u0026str = \"part-match-folder\"; // Allow non snake case since it's used as a command name\npub const COMMAND_VISUAL_MATCH: \u0026str = \"visual-match\"; // Allow non snake case since it's used as a command name\npub const COMMAND_VISUAL_MATCH_FOLDER: \u0026str = \"visual-match-folder\"; // Allow non snake case since it's used as a command name\npub const COMMAND_METADATA: \u0026str = \"metadata\";\npub const COMMAND_INFERENCE: \u0026str = \"inference\"; // Allow non snake case since it's used as a command name\npub const COMMAND_DEPENDENCIES: \u0026str = \"dependencies\";\npub const COMMAND_DOWNLOAD: \u0026str = \"download\";\npub const COMMAND_DOWNLOAD_FOLDER: \u0026str = \"download-folder\";\n\n// Auth commands\npub const COMMAND_AUTH: \u0026str = \"auth\";\npub const COMMAND_LOGIN: \u0026str = \"login\";\npub const COMMAND_LOGOUT: \u0026str = \"logout\";\n//\n// Tenant commands\npub const COMMAND_TENANT: \u0026str = \"tenant\";\n\n// Folder commands\npub const COMMAND_FOLDER: \u0026str = \"folder\";\npub const COMMAND_FILE: \u0026str = \"file\";\n\n// Context commands\npub const COMMAND_CONTEXT: \u0026str = \"context\";\npub const COMMAND_SET: \u0026str = \"set\";\npub const COMMAND_CLEAR: \u0026str = \"clear\";\n\n// Config commands\npub const COMMAND_CONFIG: \u0026str = \"config\";\npub const COMMAND_EXPORT: \u0026str = \"export\";\npub const COMMAND_IMPORT: \u0026str = \"import\";\npub const COMMAND_ENVIRONMENT: \u0026str = \"environment\";\npub const COMMAND_ADD: \u0026str = \"add\";\npub const COMMAND_USE: \u0026str = \"use\";\npub const COMMAND_REMOVE: \u0026str = \"remove\";\npub const COMMAND_ENVIRONMENT_LIST: \u0026str = \"list\";\npub const COMMAND_ENVIRONMENT_GET: \u0026str = \"get\";\npub const COMMAND_RESET: \u0026str = \"reset\";\n\n// Environment parameter names\npub const PARAMETER_API_URL: \u0026str = \"api-url\";\npub const PARAMETER_UI_URL: \u0026str = \"ui-url\";\npub const PARAMETER_AUTH_URL: \u0026str = \"auth-url\";\n\n// Parameter names\npub const PARAMETER_FORMAT: \u0026str = \"format\";\npub const PARAMETER_METADATA: \u0026str = \"metadata\";\npub const PARAMETER_PRETTY: \u0026str = \"pretty\";\npub const PARAMETER_HEADERS: \u0026str = \"headers\";\npub const PARAMETER_OUTPUT: \u0026str = \"output\";\npub const PARAMETER_FILE: \u0026str = \"file\";\npub const PARAMETER_FILES: \u0026str = \"files\";\npub const PARAMETER_CLIENT_ID: \u0026str = \"client-id\";\npub const PARAMETER_CLIENT_SECRET: \u0026str = \"client-secret\";\npub const PARAMETER_UUID: \u0026str = \"uuid\";\npub const PARAMETER_NAME: \u0026str = \"name\";\npub const PARAMETER_TENANT_NAME: \u0026str = PARAMETER_NAME;\npub const PARAMETER_TENANT_ID: \u0026str = \"id\";\npub const PARAMETER_TENANT: \u0026str = \"tenant\";\npub const PARAMETER_TENANT_UUID: \u0026str = \"tenant-uuid\";\npub const PARAMETER_FOLDER_UUID: \u0026str = \"folder-uuid\";\npub const PARAMETER_FOLDER_PATH: \u0026str = \"folder-path\";\npub const PARAMETER_PARENT_FOLDER_UUID: \u0026str = \"parent-folder-uuid\";\npub const PARAMETER_PARENT_FOLDER_PATH: \u0026str = \"parent-folder-path\";\npub const PARAMETER_PATH: \u0026str = \"path\";\npub const PARAMETER_REFRESH: \u0026str = \"refresh\";\npub const PARAMETER_RECURSIVE: \u0026str = \"recursive\";\npub const PARAMETER_CONCURRENT: \u0026str = \"concurrent\";\npub const PARAMETER_PROGRESS: \u0026str = \"progress\";\n\n// Format options\npub const FORMAT_CSV: \u0026str = \"csv\";\npub const FORMAT_JSON: \u0026str = \"json\";\npub const FORMAT_TREE: \u0026str = \"tree\";\n\n/// Create the global format parameter.\n///\n/// This parameter is used across multiple commands for output formatting.\npub fn format_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FORMAT)\n        .short('f')\n        .long(PARAMETER_FORMAT)\n        .num_args(1)\n        .required(false)\n        .env(\"PCLI2_FORMAT\")\n        .default_value(\"json\")\n        .global(true)\n        .help(\"Output data format\")\n        .value_parser(OutputFormat::names())\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_pretty_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PRETTY)\n        .long(PARAMETER_PRETTY)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Format the output pretty\")\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_with_headers_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_HEADERS)\n        .long(PARAMETER_HEADERS)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .env(\"PCLI2_HEADERS\")\n        .help(\"Format the output with headers\")\n}\n\n/// This parameter iflag is used across multiple commands for output formatting.\npub fn format_with_metadata_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_METADATA)\n        .long(PARAMETER_METADATA)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Format the output to include metadata\")\n}\n\n/// Create the global output file parameter.\npub fn output_file_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_OUTPUT)\n        .short('o')\n        .long(PARAMETER_OUTPUT)\n        .num_args(1)\n        .required(false)\n        .help(\"Output file path\")\n        .value_parser(clap::value_parser!(PathBuf))\n}\n\n/// Create the global input file parameter.\npub fn file_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FILE)\n        .long(PARAMETER_FILE)\n        .num_args(1)\n        .required(false)\n        .help(\"Input file path\")\n        .value_parser(clap::value_parser!(PathBuf))\n}\n\npub fn multiple_files_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FILES)\n        .long(PARAMETER_FILES)\n        .num_args(1)\n        .required(true)\n        .help(\"Glob pattern to match files to upload (e.g., \\\"data/puzzle/*.STL\\\")\")\n        .value_parser(clap::value_parser!(String))\n}\n\n/// Create the client ID parameter.\npub fn client_id_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_CLIENT_ID)\n        .long(PARAMETER_CLIENT_ID)\n        .num_args(1)\n        .required(false)\n        .help(\"Client ID for OAuth2 authentication\")\n}\n\n/// Create the client secret parameter.\npub fn client_secret_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_CLIENT_SECRET)\n        .long(PARAMETER_CLIENT_SECRET)\n        .num_args(1)\n        .required(false)\n        .help(\"Client secret for OAuth2 authentication\")\n}\n\n/// Create the UUID parameter.\npub fn uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_UUID)\n        .short('u')\n        .long(PARAMETER_UUID)\n        .required(false) // this parameter should be used in a group with the patheee\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Resource UUID\")\n}\n\n/// Create the Folder UUID parameter.\npub fn folder_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FOLDER_UUID)\n        .long(PARAMETER_FOLDER_UUID)\n        .num_args(1)\n        .required(true)\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Resource's folder UUID\")\n}\n\n/// Create the path parameter.\npub fn folder_path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_FOLDER_PATH)\n        .long(PARAMETER_FOLDER_PATH)\n        .num_args(1)\n        .required(true)\n        .help(\"Folder path (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create the parent folder UUID parameter.\npub fn parent_folder_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PARENT_FOLDER_UUID)\n        .long(PARAMETER_PARENT_FOLDER_UUID)\n        .num_args(1)\n        .required(true)\n        .value_parser(clap::value_parser!(Uuid))\n        .help(\"Parent folder UUID where the new folder will be created\")\n}\n\n/// Create the parent folder path parameter.\npub fn parent_folder_path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PARENT_FOLDER_PATH)\n        .long(PARAMETER_PARENT_FOLDER_PATH)\n        .num_args(1)\n        .required(true)\n        .help(\"Parent folder path where the new folder will be created (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create asset idenitfier group: it must be either --uuid or --path\npub fn asset_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"asset-identifier\")\n        .args([PARAMETER_UUID, PARAMETER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\npub fn asset_identifier_multiple_group() -\u003e ArgGroup {\n    ArgGroup::new(\"asset-identifier\")\n        .args([PARAMETER_UUID, PARAMETER_PATH])\n        .multiple(true)\n        .required(true)\n}\n\n/// Create the name parameter.\npub fn name_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_NAME)\n        .short('n')\n        .long(PARAMETER_NAME)\n        .num_args(1)\n        .required(false)\n        .help(\"Resource name\")\n}\n\n/// Create the tenant name parameter.\npub fn tenant_name_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_NAME)\n        .long(PARAMETER_TENANT_NAME)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant short name (as shown in tenant list)\")\n}\n\n/// Create the name parameter.\npub fn tenant_id_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_ID)\n        .long(PARAMETER_TENANT_ID)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant UUID\")\n}\n\n/// Create the tenant UUID parameter.\npub fn tenant_uuid_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT_UUID)\n        .long(PARAMETER_TENANT_UUID)\n        .num_args(1)\n        .required(false)\n        .value_parser(clap::value_parser!(uuid::Uuid))\n        .help(\"Tenant UUID\")\n}\n\n/// Create the tenant parameter.\npub fn tenant_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_TENANT)\n        .short('t')\n        .long(PARAMETER_TENANT)\n        .num_args(1)\n        .required(false)\n        .help(\"Tenant ID or alias\")\n}\n\n/// Create folder identifier group: it must be either --folder-uuid or --folder-path\npub fn folder_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"folder-identifier\")\n        .args([PARAMETER_FOLDER_UUID, PARAMETER_FOLDER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\n/// Create parent folder identifier group: it must be either --parent-folder-uuid or --parent-folder-path\npub fn parent_folder_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"parent-folder-identifier\")\n        .args([PARAMETER_PARENT_FOLDER_UUID, PARAMETER_PARENT_FOLDER_PATH])\n        .multiple(false)\n        .required(true)\n}\n\n/// Create tenant identifier group: it must be either --tenant-uuid or --tenant-name\npub fn tenant_identifier_group() -\u003e ArgGroup {\n    ArgGroup::new(\"tenant-identifier\")\n        .args([PARAMETER_TENANT_UUID, PARAMETER_TENANT_NAME])  // Using PARAMETER_TENANT_UUID for UUID and PARAMETER_TENANT_NAME for name\n        .multiple(false)\n        .required(true)\n}\n\n/// Create the path parameter.\npub fn path_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_PATH)\n        .short('p')\n        .long(PARAMETER_PATH)\n        .num_args(1)\n        .required(false)\n        .help(\"Folder path (e.g., /Root/Child/Grandchild)\")\n}\n\n/// Create the refresh parameter.\npub fn refresh_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_REFRESH)\n        .short('r')\n        .long(PARAMETER_REFRESH)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Force refresh cache data from API\")\n}\n\n/// Create the recursive parameter.\npub fn recursive_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_RECURSIVE)\n        .short('R')\n        .long(PARAMETER_RECURSIVE)\n        .action(ArgAction::SetTrue)\n        .required(false)\n        .help(\"Recursively apply operation (default: false for CSV/JSON, true for tree)\")\n}\n\n/// Create the API URL parameter.\npub fn api_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_API_URL)\n        .long(PARAMETER_API_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"API base URL (e.g., https://app-api.physna.com/v3)\")\n}\n\n/// Create the UI URL parameter.\npub fn ui_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_UI_URL)\n        .long(PARAMETER_UI_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"UI base URL (e.g., https://app.physna.com)\")\n}\n\n/// Create the Auth URL parameter.\npub fn auth_url_parameter() -\u003e Arg {\n    Arg::new(PARAMETER_AUTH_URL)\n        .long(PARAMETER_AUTH_URL)\n        .num_args(1)\n        .required(false)\n        .help(\"Authentication URL (e.g., https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token)\")\n}\n","traces":[{"line":101,"address":[],"length":0,"stats":{"Line":264}},{"line":102,"address":[],"length":0,"stats":{"Line":264}},{"line":104,"address":[],"length":0,"stats":{"Line":264}},{"line":111,"address":[],"length":0,"stats":{"Line":528}},{"line":115,"address":[],"length":0,"stats":{"Line":242}},{"line":116,"address":[],"length":0,"stats":{"Line":242}},{"line":117,"address":[],"length":0,"stats":{"Line":242}},{"line":118,"address":[],"length":0,"stats":{"Line":484}},{"line":124,"address":[],"length":0,"stats":{"Line":242}},{"line":125,"address":[],"length":0,"stats":{"Line":242}},{"line":126,"address":[],"length":0,"stats":{"Line":242}},{"line":127,"address":[],"length":0,"stats":{"Line":484}},{"line":134,"address":[],"length":0,"stats":{"Line":154}},{"line":135,"address":[],"length":0,"stats":{"Line":154}},{"line":136,"address":[],"length":0,"stats":{"Line":154}},{"line":137,"address":[],"length":0,"stats":{"Line":308}},{"line":143,"address":[],"length":0,"stats":{"Line":11}},{"line":144,"address":[],"length":0,"stats":{"Line":11}},{"line":146,"address":[],"length":0,"stats":{"Line":11}},{"line":150,"address":[],"length":0,"stats":{"Line":22}},{"line":154,"address":[],"length":0,"stats":{"Line":22}},{"line":155,"address":[],"length":0,"stats":{"Line":22}},{"line":156,"address":[],"length":0,"stats":{"Line":22}},{"line":160,"address":[],"length":0,"stats":{"Line":44}},{"line":163,"address":[],"length":0,"stats":{"Line":11}},{"line":164,"address":[],"length":0,"stats":{"Line":11}},{"line":165,"address":[],"length":0,"stats":{"Line":11}},{"line":169,"address":[],"length":0,"stats":{"Line":22}},{"line":173,"address":[],"length":0,"stats":{"Line":11}},{"line":174,"address":[],"length":0,"stats":{"Line":11}},{"line":175,"address":[],"length":0,"stats":{"Line":11}},{"line":182,"address":[],"length":0,"stats":{"Line":11}},{"line":183,"address":[],"length":0,"stats":{"Line":11}},{"line":184,"address":[],"length":0,"stats":{"Line":11}},{"line":191,"address":[],"length":0,"stats":{"Line":110}},{"line":192,"address":[],"length":0,"stats":{"Line":110}},{"line":194,"address":[],"length":0,"stats":{"Line":110}},{"line":196,"address":[],"length":0,"stats":{"Line":220}},{"line":201,"address":[],"length":0,"stats":{"Line":55}},{"line":202,"address":[],"length":0,"stats":{"Line":55}},{"line":203,"address":[],"length":0,"stats":{"Line":55}},{"line":206,"address":[],"length":0,"stats":{"Line":110}},{"line":211,"address":[],"length":0,"stats":{"Line":66}},{"line":212,"address":[],"length":0,"stats":{"Line":66}},{"line":213,"address":[],"length":0,"stats":{"Line":66}},{"line":220,"address":[],"length":0,"stats":{"Line":11}},{"line":221,"address":[],"length":0,"stats":{"Line":11}},{"line":222,"address":[],"length":0,"stats":{"Line":11}},{"line":225,"address":[],"length":0,"stats":{"Line":22}},{"line":230,"address":[],"length":0,"stats":{"Line":11}},{"line":231,"address":[],"length":0,"stats":{"Line":11}},{"line":232,"address":[],"length":0,"stats":{"Line":11}},{"line":239,"address":[],"length":0,"stats":{"Line":66}},{"line":240,"address":[],"length":0,"stats":{"Line":66}},{"line":241,"address":[],"length":0,"stats":{"Line":132}},{"line":246,"address":[],"length":0,"stats":{"Line":11}},{"line":247,"address":[],"length":0,"stats":{"Line":11}},{"line":248,"address":[],"length":0,"stats":{"Line":22}},{"line":254,"address":[],"length":0,"stats":{"Line":11}},{"line":255,"address":[],"length":0,"stats":{"Line":11}},{"line":257,"address":[],"length":0,"stats":{"Line":11}},{"line":264,"address":[],"length":0,"stats":{"Line":22}},{"line":265,"address":[],"length":0,"stats":{"Line":22}},{"line":266,"address":[],"length":0,"stats":{"Line":22}},{"line":273,"address":[],"length":0,"stats":{"Line":11}},{"line":274,"address":[],"length":0,"stats":{"Line":11}},{"line":275,"address":[],"length":0,"stats":{"Line":11}},{"line":282,"address":[],"length":0,"stats":{"Line":11}},{"line":283,"address":[],"length":0,"stats":{"Line":11}},{"line":284,"address":[],"length":0,"stats":{"Line":11}},{"line":287,"address":[],"length":0,"stats":{"Line":22}},{"line":292,"address":[],"length":0,"stats":{"Line":253}},{"line":293,"address":[],"length":0,"stats":{"Line":253}},{"line":295,"address":[],"length":0,"stats":{"Line":253}},{"line":302,"address":[],"length":0,"stats":{"Line":55}},{"line":303,"address":[],"length":0,"stats":{"Line":55}},{"line":304,"address":[],"length":0,"stats":{"Line":110}},{"line":310,"address":[],"length":0,"stats":{"Line":11}},{"line":311,"address":[],"length":0,"stats":{"Line":11}},{"line":312,"address":[],"length":0,"stats":{"Line":22}},{"line":318,"address":[],"length":0,"stats":{"Line":11}},{"line":319,"address":[],"length":0,"stats":{"Line":11}},{"line":320,"address":[],"length":0,"stats":{"Line":22}},{"line":326,"address":[],"length":0,"stats":{"Line":121}},{"line":327,"address":[],"length":0,"stats":{"Line":121}},{"line":329,"address":[],"length":0,"stats":{"Line":121}},{"line":336,"address":[],"length":0,"stats":{"Line":11}},{"line":337,"address":[],"length":0,"stats":{"Line":11}},{"line":339,"address":[],"length":0,"stats":{"Line":11}},{"line":340,"address":[],"length":0,"stats":{"Line":22}},{"line":346,"address":[],"length":0,"stats":{"Line":11}},{"line":347,"address":[],"length":0,"stats":{"Line":11}},{"line":349,"address":[],"length":0,"stats":{"Line":11}},{"line":350,"address":[],"length":0,"stats":{"Line":22}},{"line":356,"address":[],"length":0,"stats":{"Line":11}},{"line":357,"address":[],"length":0,"stats":{"Line":11}},{"line":358,"address":[],"length":0,"stats":{"Line":11}},{"line":365,"address":[],"length":0,"stats":{"Line":11}},{"line":366,"address":[],"length":0,"stats":{"Line":11}},{"line":367,"address":[],"length":0,"stats":{"Line":11}},{"line":374,"address":[],"length":0,"stats":{"Line":11}},{"line":375,"address":[],"length":0,"stats":{"Line":11}},{"line":376,"address":[],"length":0,"stats":{"Line":11}}],"covered":103,"coverable":103},{"path":["/","Users","julian","projects","physna","pcli2","src","commands","tenant.rs"],"content":"//! Tenant command definitions.\n//!\n//! This module defines CLI commands related to tenant management.\n\nuse crate::commands::params::{\n    format_parameter, format_pretty_parameter, format_with_headers_parameter,\n    tenant_name_parameter, tenant_uuid_parameter, tenant_identifier_group, COMMAND_GET, COMMAND_LIST, COMMAND_TENANT,\n};\nuse clap::Command;\n\n/// Create the tenant command with all its subcommands.\npub fn tenant_command() -\u003e Command {\n    Command::new(COMMAND_TENANT)\n        .about(\"Manage tenants\")\n        .subcommand_required(true)\n        .subcommand(\n            Command::new(COMMAND_GET)\n                .about(\"Get tenant details\")\n                .arg(tenant_uuid_parameter())    // --tenant-uuid (tenant UUID)\n                .arg(tenant_name_parameter())    // --name (tenant short name, using existing PARAMETER_TENANT_NAME)\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter())\n                .group(tenant_identifier_group()), // Group to ensure only one of --tenant-uuid or --name is provided\n        )\n        .subcommand(\n            Command::new(COMMAND_LIST)\n                .about(\"List all tenants\")\n                .visible_alias(\"ls\")\n                .arg(format_parameter().value_parser([\"json\", \"csv\"]))\n                .arg(format_pretty_parameter())\n                .arg(format_with_headers_parameter()),\n        )\n}\n","traces":[{"line":12,"address":[],"length":0,"stats":{"Line":11}},{"line":13,"address":[],"length":0,"stats":{"Line":11}},{"line":17,"address":[],"length":0,"stats":{"Line":11}},{"line":18,"address":[],"length":0,"stats":{"Line":11}},{"line":19,"address":[],"length":0,"stats":{"Line":22}},{"line":20,"address":[],"length":0,"stats":{"Line":22}},{"line":21,"address":[],"length":0,"stats":{"Line":44}},{"line":22,"address":[],"length":0,"stats":{"Line":22}},{"line":23,"address":[],"length":0,"stats":{"Line":22}},{"line":24,"address":[],"length":0,"stats":{"Line":22}},{"line":27,"address":[],"length":0,"stats":{"Line":11}},{"line":28,"address":[],"length":0,"stats":{"Line":11}},{"line":29,"address":[],"length":0,"stats":{"Line":11}},{"line":30,"address":[],"length":0,"stats":{"Line":44}},{"line":31,"address":[],"length":0,"stats":{"Line":22}},{"line":32,"address":[],"length":0,"stats":{"Line":22}}],"covered":16,"coverable":16},{"path":["/","Users","julian","projects","physna","pcli2","src","configuration.rs"],"content":"use crate::{\n    format::{Formattable, FormattingError, OutputFormat},\n    model::Tenant,\n};\nuse dirs::config_dir;\nuse serde::{Deserialize, Serialize};\nuse serde_yaml;\nuse std::{\n    collections::HashMap,\n    fs::{self, File},\n    io::Write,\n    path::PathBuf,\n};\nuse tracing::debug;\nuse uuid::Uuid;\n\npub const DEFAULT_APPLICATION_ID: \u0026str = \"pcli2\";\npub const DEFAULT_CONFIGURATION_FILE_NAME: \u0026str = \"config.yml\";\n\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnvironmentConfig {\n    #[serde(default = \"default_api_base_url\")]\n    pub api_base_url: String,\n    #[serde(default = \"default_ui_base_url\")]\n    pub ui_base_url: String,\n    #[serde(default = \"default_auth_base_url\")]\n    pub auth_base_url: String,\n}\n\npub fn default_api_base_url() -\u003e String {\n    \"https://app-api.physna.com/v3\".to_string()\n}\n\npub fn default_ui_base_url() -\u003e String {\n    \"https://app.physna.com\".to_string()\n}\n\npub fn default_auth_base_url() -\u003e String {\n    \"https://physna-app.auth.us-east-2.amazoncognito.com/oauth2/token\".to_string()\n}\n\n#[derive(Debug, thiserror::Error)]\npub enum ConfigurationError {\n    #[error(\"failed to resolve the configuration directory\")]\n    FailedToFindConfigurationDirectory,\n    #[error(\"failed to load configuration data, because of: {cause:?}\")]\n    FailedToLoadData { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    #[error(\"failed to write configuration data to file, because of: {cause:?}\")]\n    FailedToWriteData { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    #[error(\"missing value for property {name:?}\")]\n    MissingRequiredPropertyValue { name: String },\n    #[error(\"{cause:?}\")]\n    FormattingError {\n        #[from]\n        cause: FormattingError,\n    },\n}\n\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct Configuration {\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    active_tenant_uuid: Option\u003cUuid\u003e,\n\n    // Environment-specific URLs (for backward compatibility)\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    api_base_url: Option\u003cString\u003e,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    ui_base_url: Option\u003cString\u003e,\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    auth_base_url: Option\u003cString\u003e,\n\n    // Active environment name\n    #[serde(skip_serializing_if = \"Option::is_none\")]\n    active_environment: Option\u003cString\u003e,\n\n    // Named environments\n    #[serde(default)]\n    environments: HashMap\u003cString, EnvironmentConfig\u003e,\n}\n\nimpl Default for Configuration {\n    fn default() -\u003e Self {\n        Self {\n            active_tenant_uuid: None,\n            api_base_url: None,\n            ui_base_url: None,\n            auth_base_url: None,\n            active_environment: None,\n            environments: HashMap::new(),\n        }\n    }\n}\n\nimpl Configuration {\n    pub fn active_tenant_uuid(\u0026self) -\u003e Option\u003c\u0026Uuid\u003e {\n        self.active_tenant_uuid.as_ref()\n    }\n\n    pub fn get_default_configuration_file_path() -\u003e Result\u003cPathBuf, ConfigurationError\u003e {\n        // Check for PCLI2_CONFIG_DIR environment variable first\n        if let Ok(config_dir_str) = std::env::var(\"PCLI2_CONFIG_DIR\") {\n            let mut config_path = PathBuf::from(config_dir_str);\n            config_path.push(DEFAULT_CONFIGURATION_FILE_NAME);\n            return Ok(config_path);\n        }\n\n        let configuration_directory = config_dir();\n        match configuration_directory {\n            Some(configuration_directory) =\u003e {\n                let mut default_config_file_path = configuration_directory;\n                default_config_file_path.push(DEFAULT_APPLICATION_ID);\n                default_config_file_path.push(DEFAULT_CONFIGURATION_FILE_NAME);\n\n                Ok(default_config_file_path)\n            }\n            None =\u003e Err(ConfigurationError::FailedToFindConfigurationDirectory),\n        }\n    }\n\n    pub fn load_default() -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        let default_file_path = Configuration::get_default_configuration_file_path()?;\n        debug!(\n            \"Loading configuration from {}...\",\n            default_file_path\n                .clone()\n                .into_os_string()\n                .into_string()\n                .unwrap()\n        );\n        Configuration::load_from_file(default_file_path)\n    }\n\n    /// Load default configuration, creating a default one if none exists\n    /// This is more user-friendly for first-time users\n    pub fn load_or_create_default() -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        let default_file_path = Configuration::get_default_configuration_file_path()?;\n        debug!(\n            \"Loading or creating configuration from {}...\",\n            default_file_path\n                .clone()\n                .into_os_string()\n                .into_string()\n                .unwrap()\n        );\n\n        // Try to load existing configuration\n        match Configuration::load_from_file(default_file_path.clone()) {\n            Ok(config) =\u003e Ok(config),\n            Err(e) =\u003e {\n                // Check if this is a \"file not found\" error\n                match \u0026e {\n                    ConfigurationError::FailedToLoadData { cause } =\u003e {\n                        if let Some(io_err) = cause.downcast_ref::\u003cstd::io::Error\u003e() {\n                            if io_err.kind() == std::io::ErrorKind::NotFound {\n                                debug!(\n                                    \"Configuration file not found, creating default configuration\"\n                                );\n                                let default_config = Configuration::default();\n\n                                // Try to save the default configuration\n                                match default_config.save(\u0026default_file_path) {\n                                    Ok(()) =\u003e {\n                                        debug!(\"Default configuration created successfully\");\n                                        Ok(default_config)\n                                    }\n                                    Err(save_error) =\u003e {\n                                        // If we can't save, return the original error with more context\n                                        Err(ConfigurationError::FailedToLoadData {\n                                            cause: Box::new(std::io::Error::other(\n                                                format!(\"Configuration file not found and failed to create default configuration. Tried to create at: {:?}. Error: {}\", \n                                                       default_file_path, save_error)\n                                            ))\n                                        })\n                                    }\n                                }\n                            } else {\n                                Err(e)\n                            }\n                        } else {\n                            Err(e)\n                        }\n                    }\n                    _ =\u003e Err(e),\n                }\n            }\n        }\n    }\n\n    pub fn load_from_file(path: PathBuf) -\u003e Result\u003cConfiguration, ConfigurationError\u003e {\n        match fs::read_to_string(path.clone()) {\n            Ok(configuration) =\u003e {\n                let configuration = serde_yaml::from_str(\u0026configuration);\n                match configuration {\n                    Ok(configuration) =\u003e Ok(configuration),\n                    Err(cause) =\u003e Err(ConfigurationError::FailedToLoadData {\n                        cause: Box::new(cause),\n                    }),\n                }\n            }\n            Err(cause) =\u003e Err(ConfigurationError::FailedToLoadData {\n                cause: Box::new(cause),\n            }),\n        }\n    }\n\n    pub fn write(\u0026self, writer: Box\u003cdyn Write\u003e) -\u003e Result\u003c(), ConfigurationError\u003e {\n        match serde_yaml::to_writer(writer, \u0026self.clone()) {\n            Ok(()) =\u003e Ok(()),\n            Err(e) =\u003e Err(ConfigurationError::FailedToWriteData { cause: Box::new(e) }),\n        }\n    }\n\n    pub fn save(\u0026self, path: \u0026PathBuf) -\u003e Result\u003c(), ConfigurationError\u003e {\n        // first check if the parent directory exists and try to create it if not\n        let configuration_directory = path.parent();\n        match configuration_directory {\n            Some(path) =\u003e {\n                // this operation only executes if the directory does not exit\n                match fs::create_dir_all(path) {\n                    Ok(()) =\u003e (),\n                    Err(_) =\u003e return Err(ConfigurationError::FailedToFindConfigurationDirectory),\n                }\n            }\n            None =\u003e return Err(ConfigurationError::FailedToFindConfigurationDirectory),\n        }\n\n        let file = File::create(path);\n        match file {\n            Ok(file) =\u003e {\n                let writer: Box\u003cdyn Write\u003e = Box::new(file);\n                Ok(self.write(writer)?)\n            }\n            Err(e) =\u003e Err(ConfigurationError::FailedToWriteData { cause: Box::new(e) }),\n        }\n    }\n\n    pub fn save_to_default(\u0026self) -\u003e Result\u003c(), ConfigurationError\u003e {\n        self.save(\u0026Self::get_default_configuration_file_path()?)\n    }\n\n    // Context management methods\n    pub fn get_active_tenant_uuid(\u0026self) -\u003e Option\u003cUuid\u003e {\n        self.active_tenant_uuid.clone()\n    }\n\n    pub fn set_active_tenant(\u0026mut self, tenant: \u0026Tenant) {\n        self.active_tenant_uuid = Some(tenant.uuid);\n    }\n\n    pub fn clear_active_tenant(\u0026mut self) {\n        self.active_tenant_uuid = None;\n    }\n\n    // Methods to get URLs with fallback hierarchy\n    pub fn get_api_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.api_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.api_base_url {\n            url.clone()\n        } else {\n            default_api_base_url()\n        }\n    }\n\n    pub fn get_ui_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.ui_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.ui_base_url {\n            url.clone()\n        } else {\n            default_ui_base_url()\n        }\n    }\n\n    pub fn get_auth_base_url(\u0026self) -\u003e String {\n        // Priority: environment-specific -\u003e config-specific -\u003e default\n        if let Some(ref env_name) = self.active_environment {\n            if let Some(env_config) = self.environments.get(env_name) {\n                return env_config.auth_base_url.clone();\n            }\n        }\n\n        if let Some(ref url) = self.auth_base_url {\n            url.clone()\n        } else {\n            default_auth_base_url()\n        }\n    }\n\n    // Methods to manage environments\n    pub fn set_active_environment(\u0026mut self, env_name: \u0026str) -\u003e Result\u003c(), ConfigurationError\u003e {\n        if self.environments.contains_key(env_name) {\n            self.active_environment = Some(env_name.to_string());\n            Ok(())\n        } else {\n            Err(ConfigurationError::MissingRequiredPropertyValue {\n                name: format!(\"Environment '{}' does not exist\", env_name),\n            })\n        }\n    }\n\n    pub fn add_environment(\u0026mut self, name: String, config: EnvironmentConfig) {\n        self.environments.insert(name, config);\n    }\n\n    pub fn remove_environment(\u0026mut self, name: \u0026str) -\u003e Result\u003c(), ConfigurationError\u003e {\n        if self.environments.remove(name).is_some() {\n            // If we're removing the active environment, clear it\n            if let Some(ref active_env) = self.active_environment {\n                if active_env == name {\n                    self.active_environment = None;\n                }\n            }\n            Ok(())\n        } else {\n            Err(ConfigurationError::MissingRequiredPropertyValue {\n                name: format!(\"Environment '{}' does not exist\", name),\n            })\n        }\n    }\n\n    pub fn list_environments(\u0026self) -\u003e Vec\u003cString\u003e {\n        self.environments.keys().cloned().collect()\n    }\n\n    pub fn get_active_environment(\u0026self) -\u003e Option\u003cString\u003e {\n        self.active_environment.clone()\n    }\n\n    /// Reset all environment configurations to a blank state\n    pub fn reset_environments(\u0026mut self) {\n        self.environments.clear();\n        self.active_environment = None;\n    }\n\n    /// Get an environment configuration by name\n    pub fn get_environment_config(\u0026self, name: \u0026str) -\u003e Option\u003c\u0026EnvironmentConfig\u003e {\n        self.environments.get(name)\n    }\n}\n\nimpl Formattable for Configuration {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            },\n            OutputFormat::Csv(options) =\u003e {\n                let uuid_str = self.active_tenant_uuid.unwrap_or_default().to_string();\n                let api_url = self.api_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let ui_url = self.ui_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let auth_url = self.auth_base_url.clone().unwrap_or_else(|| \"default\".to_string());\n                let active_env = self.active_environment.clone().unwrap_or_else(|| \"none\".to_string());\n\n                if options.with_headers {\n                    Ok(format!(\"ACTIVE_TENANT_UUID,API_BASE_URL,UI_BASE_URL,AUTH_BASE_URL,ACTIVE_ENVIRONMENT\\n{},{},{},{},{}\",\n                              uuid_str, api_url, ui_url, auth_url, active_env))\n                } else {\n                    Ok(format!(\"{},{},{},{},{}\", uuid_str, api_url, ui_url, auth_url, active_env))\n                }\n            },\n            OutputFormat::Tree(_) =\u003e {\n                let mut result = String::new();\n                result.push_str(\"Configuration:\\n\");\n                result.push_str(\u0026format!(\"  Active Tenant UUID: {}\\n\",\n                    self.active_tenant_uuid.map_or(\"None\".to_string(), |uuid| uuid.to_string())));\n                result.push_str(\u0026format!(\"  API Base URL: {}\\n\",\n                    self.api_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  UI Base URL: {}\\n\",\n                    self.ui_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  Auth Base URL: {}\\n\",\n                    self.auth_base_url.clone().unwrap_or_else(|| \"default\".to_string())));\n                result.push_str(\u0026format!(\"  Active Environment: {}\\n\",\n                    self.active_environment.clone().unwrap_or_else(|| \"None\".to_string())));\n                result.push_str(\"  Environments:\\n\");\n\n                for (name, env_config) in \u0026self.environments {\n                    result.push_str(\u0026format!(\"    {}: {{api: {}, ui: {}, auth: {}}}\\n\",\n                        name, env_config.api_base_url, env_config.ui_base_url, env_config.auth_base_url));\n                }\n\n                Ok(result)\n            },\n        }\n    }\n}\n\n\n","traces":[{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":35,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":8}},{"line":101,"address":[],"length":0,"stats":{"Line":8}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":16}},{"line":108,"address":[],"length":0,"stats":{"Line":8}},{"line":109,"address":[],"length":0,"stats":{"Line":8}},{"line":110,"address":[],"length":0,"stats":{"Line":16}},{"line":111,"address":[],"length":0,"stats":{"Line":16}},{"line":112,"address":[],"length":0,"stats":{"Line":16}},{"line":114,"address":[],"length":0,"stats":{"Line":8}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":8}},{"line":136,"address":[],"length":0,"stats":{"Line":16}},{"line":137,"address":[],"length":0,"stats":{"Line":8}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":16}},{"line":148,"address":[],"length":0,"stats":{"Line":16}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":189,"address":[],"length":0,"stats":{"Line":8}},{"line":190,"address":[],"length":0,"stats":{"Line":16}},{"line":191,"address":[],"length":0,"stats":{"Line":8}},{"line":192,"address":[],"length":0,"stats":{"Line":24}},{"line":193,"address":[],"length":0,"stats":{"Line":8}},{"line":194,"address":[],"length":0,"stats":{"Line":16}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":215,"address":[],"length":0,"stats":{"Line":0}},{"line":216,"address":[],"length":0,"stats":{"Line":0}},{"line":217,"address":[],"length":0,"stats":{"Line":0}},{"line":219,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":0}},{"line":227,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":242,"address":[],"length":0,"stats":{"Line":4}},{"line":243,"address":[],"length":0,"stats":{"Line":8}},{"line":246,"address":[],"length":0,"stats":{"Line":0}},{"line":247,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":4}},{"line":257,"address":[],"length":0,"stats":{"Line":8}},{"line":258,"address":[],"length":0,"stats":{"Line":12}},{"line":259,"address":[],"length":0,"stats":{"Line":8}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":279,"address":[],"length":0,"stats":{"Line":0}},{"line":281,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":289,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":294,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":302,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":304,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":312,"address":[],"length":0,"stats":{"Line":0}},{"line":313,"address":[],"length":0,"stats":{"Line":0}},{"line":316,"address":[],"length":0,"stats":{"Line":0}},{"line":317,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":320,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":327,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":333,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":4}},{"line":337,"address":[],"length":0,"stats":{"Line":8}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":348,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":370,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":382,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":386,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":393,"address":[],"length":0,"stats":{"Line":0}},{"line":396,"address":[],"length":0,"stats":{"Line":0}}],"covered":28,"coverable":178},{"path":["/","Users","julian","projects","physna","pcli2","src","dev_keyring.rs"],"content":"use std::fs;\nuse std::path::PathBuf;\nuse dirs::config_dir;\nuse thiserror::Error;\nuse tracing;\n\n#[derive(Debug, Error)]\npub enum DevKeyringError {\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n    #[error(\"JSON error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n}\n\n#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]\nstruct EnvironmentCredentials {\n    client_id: String,\n    client_secret: String,\n    access_token: Option\u003cString\u003e,\n}\n\n#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]\nstruct AllCredentials {\n    environments: std::collections::HashMap\u003cString, EnvironmentCredentials\u003e,\n}\n\npub struct DevKeyring {\n    file_path: PathBuf,\n    credentials: Option\u003cAllCredentials\u003e,\n}\n\nimpl Default for DevKeyring {\n    fn default() -\u003e DevKeyring {\n        // Try to get the config directory, fallback to current directory if it fails\n        let config_base = config_dir().unwrap_or_else(|| {\n            // If config_dir fails, try to create a .config directory in the home directory\n            if let Some(home_dir) = dirs::home_dir() {\n                let mut home_config = home_dir;\n                home_config.push(\".config\");\n                if home_config.exists() {\n                    return home_config;\n                } else {\n                    // Create .config directory if it doesn't exist\n                    if fs::create_dir_all(\u0026home_config).is_ok() {\n                        return home_config;\n                    }\n                }\n            }\n            // Fallback to current directory\n            PathBuf::from(\".\")\n        });\n\n        let mut file_path = config_base;\n        file_path.push(\"pcli2\");\n        file_path.push(\"dev_credentials.json\");\n\n        DevKeyring {\n            file_path,\n            credentials: None,\n        }\n    }\n}\n\nimpl DevKeyring {\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    fn load_credentials(\u0026mut self) -\u003e Result\u003c(), DevKeyringError\u003e {\n        if self.file_path.exists() {\n            let content = fs::read_to_string(\u0026self.file_path)?;\n            match serde_json::from_str::\u003cAllCredentials\u003e(\u0026content) {\n                Ok(parsed_credentials) =\u003e {\n                    self.credentials = Some(parsed_credentials);\n                }\n                Err(_) =\u003e {\n                    // If parsing fails, start with empty credentials\n                    self.credentials = Some(AllCredentials {\n                        environments: std::collections::HashMap::new(),\n                    });\n                }\n            }\n        } else {\n            self.credentials = Some(AllCredentials {\n                environments: std::collections::HashMap::new(),\n            });\n        }\n        Ok(())\n    }\n\n    fn save_credentials(\u0026self) -\u003e Result\u003c(), DevKeyringError\u003e {\n        // Create directory if it doesn't exist\n        if let Some(parent) = self.file_path.parent() {\n            fs::create_dir_all(parent)?;\n        }\n\n        if let Some(credentials) = \u0026self.credentials {\n            let content = serde_json::to_string_pretty(credentials)?;\n            fs::write(\u0026self.file_path, content)?;\n        }\n        Ok(())\n    }\n\n    pub fn get(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, DevKeyringError\u003e {\n        // Don't fail if loading credentials fails, just return None\n        if let Err(_) = self.load_credentials() {\n            // If we can't load credentials, return None for the requested key\n            return match key.as_str() {\n                \"access-token\" =\u003e Ok(None),\n                \"client-id\" =\u003e Ok(None),\n                \"client-secret\" =\u003e Ok(None),\n                _ =\u003e Ok(None),\n            };\n        }\n\n        if let Some(all_credentials) = \u0026self.credentials {\n            if let Some(env_credentials) = all_credentials.environments.get(tenant) {\n                match key.as_str() {\n                    \"client-id\" =\u003e {\n                        tracing::debug!(\"Retrieved client-id from dev_keyring for environment: {}\", tenant);\n                        Ok(Some(env_credentials.client_id.clone()))\n                    },\n                    \"client-secret\" =\u003e {\n                        tracing::debug!(\"Retrieved client-secret from dev_keyring for environment: {}\", tenant);\n                        Ok(Some(env_credentials.client_secret.clone()))\n                    },\n                    \"access-token\" =\u003e {\n                        tracing::debug!(\"Retrieved access-token from dev_keyring for environment: {}\", tenant);\n                        Ok(env_credentials.access_token.clone())\n                    },\n                    _ =\u003e Ok(None),\n                }\n            } else {\n                tracing::debug!(\"No credentials found in dev_keyring for environment: {}, key: {}\", tenant, key);\n                Ok(None)\n            }\n        } else {\n            tracing::debug!(\"No credentials found in dev_keyring for environment: {}, key: {}\", tenant, key);\n            Ok(None)\n        }\n    }\n\n    pub fn put(\u0026mut self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), DevKeyringError\u003e {\n        tracing::debug!(\"Storing {} in dev_keyring for environment: {}\", key, tenant);\n\n        // Load existing credentials, but don't fail if the file doesn't exist or is corrupted\n        let existing_credentials = match self.load_credentials() {\n            Ok(_) =\u003e self.credentials.take(),\n            Err(_) =\u003e None, // If loading fails, start with empty credentials\n        };\n\n        let mut all_credentials = existing_credentials.unwrap_or_else(|| AllCredentials {\n            environments: std::collections::HashMap::new(),\n        });\n\n        // Get or create environment-specific credentials\n        let env_credentials = all_credentials.environments.entry(tenant.to_string()).or_insert_with(|| EnvironmentCredentials {\n            client_id: String::new(),\n            client_secret: String::new(),\n            access_token: None,\n        });\n\n        match key.as_str() {\n            \"client-id\" =\u003e {\n                env_credentials.client_id = value;\n                tracing::debug!(\"Stored client-id in dev_keyring for environment: {}\", tenant);\n            },\n            \"client-secret\" =\u003e {\n                env_credentials.client_secret = value;\n                tracing::debug!(\"Stored client-secret in dev_keyring for environment: {}\", tenant);\n            },\n            \"access-token\" =\u003e {\n                env_credentials.access_token = Some(value);\n                tracing::debug!(\"Stored access-token in dev_keyring for environment: {}\", tenant);\n            },\n            _ =\u003e {} // Ignore unknown keys\n        }\n\n        self.credentials = Some(all_credentials);\n        self.save_credentials()\n    }\n\n    pub fn delete(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003c(), DevKeyringError\u003e {\n        // Load existing credentials, but don't fail if the file doesn't exist or is corrupted\n        let existing_credentials = match self.load_credentials() {\n            Ok(_) =\u003e self.credentials.take(),\n            Err(_) =\u003e None, // If loading fails, there's nothing to delete\n        };\n\n        if let Some(mut all_credentials) = existing_credentials {\n            if let Some(env_credentials) = all_credentials.environments.get_mut(tenant) {\n                match key.as_str() {\n                    \"access-token\" =\u003e env_credentials.access_token = None,\n                    \"client-id\" =\u003e env_credentials.client_id = String::new(),\n                    \"client-secret\" =\u003e env_credentials.client_secret = String::new(),\n                    _ =\u003e {} // Ignore unknown keys\n                }\n            }\n\n            self.credentials = Some(all_credentials);\n            self.save_credentials()?;\n        }\n\n        Ok(())\n    }\n}","traces":[{"line":33,"address":[],"length":0,"stats":{"Line":4}},{"line":35,"address":[],"length":0,"stats":{"Line":12}},{"line":37,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":8}},{"line":54,"address":[],"length":0,"stats":{"Line":8}},{"line":55,"address":[],"length":0,"stats":{"Line":8}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":12}},{"line":70,"address":[],"length":0,"stats":{"Line":12}},{"line":71,"address":[],"length":0,"stats":{"Line":36}},{"line":72,"address":[],"length":0,"stats":{"Line":12}},{"line":73,"address":[],"length":0,"stats":{"Line":24}},{"line":74,"address":[],"length":0,"stats":{"Line":12}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":12}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":12}},{"line":106,"address":[],"length":0,"stats":{"Line":12}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":24}},{"line":117,"address":[],"length":0,"stats":{"Line":36}},{"line":118,"address":[],"length":0,"stats":{"Line":12}},{"line":119,"address":[],"length":0,"stats":{"Line":12}},{"line":120,"address":[],"length":0,"stats":{"Line":4}},{"line":121,"address":[],"length":0,"stats":{"Line":4}},{"line":123,"address":[],"length":0,"stats":{"Line":8}},{"line":124,"address":[],"length":0,"stats":{"Line":4}},{"line":125,"address":[],"length":0,"stats":{"Line":4}},{"line":127,"address":[],"length":0,"stats":{"Line":4}},{"line":128,"address":[],"length":0,"stats":{"Line":4}},{"line":129,"address":[],"length":0,"stats":{"Line":4}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":186,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":190,"address":[],"length":0,"stats":{"Line":0}},{"line":191,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}}],"covered":26,"coverable":96},{"path":["/","Users","julian","projects","physna","pcli2","src","error.rs"],"content":"use thiserror::Error;\n\nuse crate::{\n    actions::CliActionError, exit_codes::PcliExitCode, folder_hierarchy::FolderHierarchyError,\n    physna_v3,\n};\n\n/// Error types that can occur during CLI command execution\n#[derive(Debug, Error)]\npub enum CliError {\n    /// Error when an unsupported or undefined subcommand is encountered\n    #[error(\"Undefined or unsupported subcommand\")]\n    UnsupportedSubcommand(String),\n    /// Error related to configuration loading or management\n    #[error(\"Configuration error: {0}\")]\n    ConfigurationError(#[from] crate::configuration::ConfigurationError),\n    /// Error related to data formatting\n    #[error(\"Formatting error: {0}\")]\n    FormattingError(#[from] crate::format::FormattingError),\n    /// Error related to security operations (authentication, keyring access)\n    #[error(\"Security error\")]\n    SecurityError(String),\n    /// Error when a required command-line argument is missing\n    #[error(\"Missing required argument: {0}\")]\n    MissingRequiredArgument(String),\n    /// Error related to JSON serialization/deserialization\n    #[error(\"JSON serialization error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    /// Error when a tenant cannot be found by name or ID\n    #[error(\"Tenant '{identifier}' not found\")]\n    TenantNotFound { identifier: String },\n    /// Error when a folder cannot be found by path or ID\n    #[error(\"Folder '{0}' not found. Please verify the folder path exists in your tenant.\")]\n    FolderNotFound(String),\n\n    #[error(\"API error: {0}\")]\n    PhysnaExtendedApiError(#[from] physna_v3::ApiError),\n\n    #[error(\"UUID parsing error: {0}\")]\n    UuidParsingError(#[from] uuid::Error),\n\n    #[error(\"{0}\")]\n    ActionError(#[from] CliActionError),\n\n    #[error(\"{0}\")]\n    FolderListError(#[from] FolderHierarchyError),\n\n}\n\nimpl CliError {\n    /// Get the appropriate exit code for this error\n    ///\n    /// Returns the corresponding `PcliExitCode` based on the error type:\n    /// - `UsageError` for unsupported commands or missing arguments\n    /// - `ConfigError` for configuration errors\n    /// - `DataError` for formatting or JSON errors\n    /// - `AuthError` for security-related errors\n    pub fn exit_code(\u0026self) -\u003e PcliExitCode {\n        match self {\n            CliError::UnsupportedSubcommand(_) =\u003e PcliExitCode::UsageError,\n            CliError::ConfigurationError(_) =\u003e PcliExitCode::ConfigError,\n            CliError::FormattingError(_) =\u003e PcliExitCode::DataError,\n            CliError::SecurityError(_) =\u003e PcliExitCode::AuthError,\n            CliError::MissingRequiredArgument(_) =\u003e PcliExitCode::UsageError,\n            CliError::JsonError(_) =\u003e PcliExitCode::DataError,\n            CliError::TenantNotFound { .. } =\u003e PcliExitCode::UsageError,\n            CliError::FolderNotFound { .. } =\u003e PcliExitCode::UsageError,\n            _ =\u003e PcliExitCode::SoftwareError,\n        }\n    }\n}\n","traces":[{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","error_utils.rs"],"content":"//! Error handling utilities for the PCLI2 application.\n//! \n//! This module provides consistent error reporting and handling utilities\n//! across the application to ensure uniform user experience.\n\nuse thiserror::Error;\nuse tracing::error;\n\n/// Common error types used throughout the application\n#[derive(Debug, Error)]\npub enum CommonError {\n    /// Error when required arguments are missing\n    #[error(\"Missing required argument: {arg}\")]\n    MissingArgument { arg: String },\n    \n    /// Error when API calls fail\n    #[error(\"API error: {message}\")]\n    ApiError { message: String },\n    \n    /// Error when authentication fails\n    #[error(\"Authentication error: {message}\")]\n    AuthError { message: String },\n    \n    /// Error when resource is not found\n    #[error(\"Resource not found: {resource}\")]\n    NotFound { resource: String },\n    \n    /// Error when cache operations fail\n    #[error(\"Cache error: {message}\")]\n    CacheError { message: String },\n    \n    /// Error when configuration operations fail\n    #[error(\"Configuration error: {message}\")]\n    ConfigError { message: String },\n    \n    /// Error when file operations fail\n    #[error(\"File error: {message}\")]\n    FileError { message: String },\n    \n    /// Error when data formatting fails\n    #[error(\"Formatting error: {message}\")]\n    FormatError { message: String },\n    \n    /// Generic error with custom message\n    #[error(\"Error: {message}\")]\n    Generic { message: String },\n}\n\n/// Report an error consistently with user-facing output.\n///\n/// This function displays errors in a user-friendly format without internal logging.\npub fn report_error\u003cE: std::fmt::Display\u003e(error: \u0026E) {\n    eprintln!(\"‚ùå Error: {}\", error);\n}\n\n/// Report an error with detailed information including technical details and user guidance.\n///\n/// This function provides a comprehensive error message that includes:\n/// - A clear error title\n/// - Technical details about what went wrong\n/// - Actionable steps the user can take to resolve the issue\n/// - Relevant command examples when applicable\npub fn report_detailed_error\u003cE: std::fmt::Display\u003e(error: \u0026E, context: Option\u003c\u0026str\u003e) {\n    let error_str = error.to_string();\n    let user_friendly_msg = create_user_friendly_error(\u0026error_str);\n\n    // Print the main error message\n    eprintln!(\"‚ùå Error: {}\", user_friendly_msg);\n\n    // Add context if provided and meaningful (not generic messages)\n    if let Some(ctx) = context {\n        // Skip generic context messages that don't add value\n        if !ctx.trim().is_empty() \u0026\u0026 ctx != \"Command execution failed\" {\n            eprintln!(\"üìã Context: {}\", ctx);\n        }\n    }\n\n    // Log the technical details for debugging (only in debug/trace mode)\n    tracing::debug!(\"Technical error details: {} (context: {:?})\", error, context);\n}\n\n/// Report an error with suggested remediation steps.\n///\n/// This function provides error messages with specific steps users can take to resolve the issue.\npub fn report_error_with_remediation\u003cE: std::fmt::Display\u003e(error: \u0026E, remediation_steps: \u0026[\u0026str]) {\n    let error_str = error.to_string();\n    let user_friendly_msg = create_user_friendly_error(\u0026error_str);\n\n    eprintln!(\"‚ùå Error: {}\", user_friendly_msg);\n\n    if !remediation_steps.is_empty() {\n        eprintln!(\"\\nüîß To resolve this issue, try the following:\");\n        for (i, step) in remediation_steps.iter().enumerate() {\n            eprintln!(\"  {}. {}\", i + 1, step);\n        }\n    }\n\n    tracing::debug!(\"Error with remediation: {} (steps: {:?})\", error, remediation_steps);\n}\n\n/// Report an error with a custom user message for better clarity.\n///\n/// This function allows providing a more user-friendly message while still\n/// logging the technical error details for debugging.\npub fn report_error_with_message\u003cE: std::fmt::Display\u003e(error: \u0026E, user_message: \u0026str) {\n    error!(\"{} (original error: {})\", user_message, error);\n    eprintln!(\"‚ùå Error: {}\", user_message);\n}\n\n/// Report a warning consistently with both logging and user-facing output.\npub fn report_warning\u003cE: std::fmt::Display\u003e(warning: \u0026E) {\n    tracing::warn!(\"{}\", warning);\n    eprintln!(\"‚ö†Ô∏è  Warning: {}\", warning);\n}\n\n/// Create a user-friendly error message from a technical error\n///\n/// This function tries to provide user-friendly error messages for common technical errors\npub fn create_user_friendly_error\u003cE: std::fmt::Display\u003e(error: E) -\u003e String {\n    let error_str = error.to_string();\n\n    // Check for common error patterns and provide user-friendly messages\n    if error_str.contains(\"invalid_client\") {\n        \"Authentication failed: Invalid client credentials. This could be due to:\\n  - Incorrect client ID or secret\\n  - Expired or revoked client credentials\\n  - Disabled service account\\n  Please verify your credentials and log in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"invalid_grant\") {\n        \"Authentication failed: Invalid authorization grant. Please log in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"unauthorized_client\") {\n        \"Authentication failed: Unauthorized client. Please verify your client credentials and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"invalid_request\") {\n        \"Authentication failed: Invalid request. Please verify your credentials and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"401\") || error_str.to_lowercase().contains(\"unauthorized\") {\n        \"Authentication failed. Please check your access token and try logging in again with 'pcli2 auth login'.\".to_string()\n    } else if error_str.contains(\"403\") || error_str.to_lowercase().contains(\"forbidden\") {\n        \"Access forbidden. You don't have permission to perform this operation.\".to_string()\n    } else if error_str.contains(\"404\") || error_str.to_lowercase().contains(\"not found\") {\n        \"Resource not found. Please check the resource ID or path and try again.\".to_string()\n    } else if error_str.contains(\"409\") || error_str.to_lowercase().contains(\"conflict\") {\n        \"Operation conflict. The resource may already exist or be in use.\".to_string()\n    } else if error_str.to_lowercase().contains(\"timeout\") {\n        \"Request timeout. The server took too long to respond. Please try again.\".to_string()\n    } else if error_str.to_lowercase().contains(\"connection\") || error_str.to_lowercase().contains(\"network\") {\n        \"Network error. Please check your internet connection and try again.\".to_string()\n    } else {\n        // Return the original error if no specific user-friendly message applies\n        error_str\n    }\n}\n\n/// Report an error with a user-friendly message based on error content\npub fn report_error_with_user_friendly_message\u003cE: std::fmt::Display\u003e(error: E) {\n    let user_message = create_user_friendly_error(error);\n    eprintln!(\"‚ùå Error: {}\", user_message);\n}\n\n/// Check if an error is retryable and user should try again\npub fn is_retryable_error\u003cE: std::fmt::Display\u003e(error: E) -\u003e bool {\n    let error_str = error.to_string().to_lowercase();\n    \n    error_str.contains(\"timeout\") \n        || error_str.contains(\"connection\") \n        || error_str.contains(\"network\")\n        || error_str.contains(\"502\")\n        || error_str.contains(\"503\")\n        || error_str.contains(\"504\")\n        || error_str.contains(\"gateway\")\n        || error_str.contains(\"proxy\")\n        || error_str.contains(\"service unavailable\")\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_create_user_friendly_error_auth() {\n        let error_msg = \"HTTP Error: 401 Unauthorized\";\n        let friendly_msg = create_user_friendly_error(error_msg);\n        assert!(friendly_msg.contains(\"Authentication failed\"));\n    }\n\n    #[test]\n    fn test_create_user_friendly_error_not_found() {\n        let error_msg = \"Resource not found\";\n        let friendly_msg = create_user_friendly_error(error_msg);\n        assert!(friendly_msg.contains(\"Resource not found\"));\n    }\n\n    #[test]\n    fn test_is_retryable_error() {\n        assert!(is_retryable_error(\"Connection timeout error\"));\n        assert!(is_retryable_error(\"503 Service Unavailable\"));\n        assert!(!is_retryable_error(\"Invalid argument\"));\n    }\n\n    #[test]\n    fn test_user_friendly_error_messages() {\n        // Test common error patterns\n        assert!(create_user_friendly_error(\"401 Unauthorized\").contains(\"Authentication failed\"));\n        assert!(create_user_friendly_error(\"404 Not Found\").contains(\"Resource not found\"));\n        assert!(create_user_friendly_error(\"timeout\").contains(\"Request timeout\"));\n    }\n\n    #[test]\n    fn test_retryable_errors() {\n        assert!(is_retryable_error(\"Connection timeout\"));\n        assert!(is_retryable_error(\"503 Service Unavailable\"));\n        assert!(!is_retryable_error(\"Invalid argument\"));\n    }\n}\n\n\n","traces":[{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":113,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":5}},{"line":120,"address":[],"length":0,"stats":{"Line":15}},{"line":123,"address":[],"length":0,"stats":{"Line":5}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":5}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":5}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":5}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":8}},{"line":132,"address":[],"length":0,"stats":{"Line":4}},{"line":133,"address":[],"length":0,"stats":{"Line":6}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":5}},{"line":136,"address":[],"length":0,"stats":{"Line":4}},{"line":137,"address":[],"length":0,"stats":{"Line":2}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":1}},{"line":140,"address":[],"length":0,"stats":{"Line":2}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":6}},{"line":157,"address":[],"length":0,"stats":{"Line":12}},{"line":159,"address":[],"length":0,"stats":{"Line":6}},{"line":160,"address":[],"length":0,"stats":{"Line":4}},{"line":161,"address":[],"length":0,"stats":{"Line":4}},{"line":162,"address":[],"length":0,"stats":{"Line":4}},{"line":163,"address":[],"length":0,"stats":{"Line":4}},{"line":164,"address":[],"length":0,"stats":{"Line":2}},{"line":165,"address":[],"length":0,"stats":{"Line":2}},{"line":166,"address":[],"length":0,"stats":{"Line":2}},{"line":167,"address":[],"length":0,"stats":{"Line":2}}],"covered":25,"coverable":62},{"path":["/","Users","julian","projects","physna","pcli2","src","exit_codes.rs"],"content":"//! Custom exit codes for the PCLI2 application\n//! \n//! This module defines specific exit codes for different error conditions\n//! to make scripting and automation easier.\n\n/// Custom exit codes for PCLI2\n/// \n/// These codes follow the BSD sysexits.h conventions where possible:\n/// - 0: Success\n/// - 64-78: Standard exit codes from sysexits.h\n/// - 100+: Custom application-specific codes\n#[derive(Debug, Clone, Copy, PartialEq, Eq)]\npub enum PcliExitCode {\n    /// Success (0) - Command completed successfully\n    Success = 0,\n    \n    /// Command line usage error (64) - User input error\n    UsageError = 64,\n    \n    /// Data format error (65) - Input data was incorrect\n    DataError = 65,\n    \n    /// Cannot open input file (66) - File not found or permission denied\n    NoInput = 66,\n    \n    /// Addressee unknown (67) - User or resource not found\n    NotFound = 67,\n    \n    /// Host name unknown (68) - Server or service not found\n    Unavailable = 68,\n    \n    /// Service unavailable (69) - Temporary service error\n    TempFail = 69,\n    \n    /// Internal software error (70) - Unexpected application error\n    SoftwareError = 70,\n    \n    /// System error (71) - OS-level error\n    OSError = 71,\n    \n    /// Configuration error (78) - Application configuration issue\n    ConfigError = 78,\n    \n    /// Authentication error (100) - Login or token issues\n    AuthError = 100,\n    \n    /// Network error (101) - Connection or communication issues\n    NetworkError = 101,\n    \n    /// API error (102) - Remote API returned an error\n    ApiError = 102,\n}\n\nimpl PcliExitCode {\n    /// Convert to numeric exit code\n    pub fn code(\u0026self) -\u003e i32 {\n        *self as i32\n    }\n    \n    /// Get descriptive message for the exit code\n    pub fn message(\u0026self) -\u003e \u0026'static str {\n        match self {\n            PcliExitCode::Success =\u003e \"Success\",\n            PcliExitCode::UsageError =\u003e \"Command line usage error\",\n            PcliExitCode::DataError =\u003e \"Data format error\",\n            PcliExitCode::NoInput =\u003e \"Cannot open input file\",\n            PcliExitCode::NotFound =\u003e \"Resource not found\",\n            PcliExitCode::Unavailable =\u003e \"Service unavailable\",\n            PcliExitCode::TempFail =\u003e \"Temporary failure\",\n            PcliExitCode::SoftwareError =\u003e \"Internal software error\",\n            PcliExitCode::OSError =\u003e \"Operating system error\",\n            PcliExitCode::ConfigError =\u003e \"Configuration error\",\n            PcliExitCode::AuthError =\u003e \"Authentication error\",\n            PcliExitCode::NetworkError =\u003e \"Network communication error\",\n            PcliExitCode::ApiError =\u003e \"Remote API error\",\n        }\n    }\n}\n\nimpl From\u003cPcliExitCode\u003e for i32 {\n    fn from(code: PcliExitCode) -\u003e Self {\n        code.code()\n    }\n}","traces":[{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":69,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":19},{"path":["/","Users","julian","projects","physna","pcli2","src","folder_cache.rs"],"content":"//! Folder caching functionality for the Physna CLI client.\n//!\n//! This module provides functionality for caching folder hierarchies to improve\n//! performance by reducing API calls. It uses bincode serialization for efficient\n//! storage and retrieval of folder data.\n\nuse crate::cache::BaseCache;\nuse crate::folder_hierarchy::FolderHierarchy;\nuse crate::physna_v3::PhysnaApiClient;\nuse std::fs;\nuse std::path::PathBuf;\nuse serde_json;\nuse uuid::Uuid;\nuse std::io::Write;\n\n/// Manages caching of folder hierarchies for Physna tenants\npub struct FolderCache {\n    // Removed unused base field since we're not using BaseCache directly\n}\n\n\n\nimpl FolderCache {\n    /// Get the cache directory path\n    /// \n    /// In a test environment (when PCLI2_TEST_CACHE_DIR is set), it uses that directory.\n    /// For general cross-platform support (when PCLI2_CACHE_DIR is set), it uses that directory.\n    /// Otherwise, it uses the system's cache directory with a \"pcli2/folder_cache\" subdirectory.\n    pub fn get_cache_dir() -\u003e PathBuf {\n        BaseCache::get_cache_dir().join(\"folder_cache\")\n    }\n    \n    /// Get the cache file path for a specific tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache file path to retrieve\n    /// \n    /// # Returns\n    /// The full path to the tenant's cache file\n    pub fn get_cache_file_path\u003cS: AsRef\u003cstr\u003e\u003e(key: S) -\u003e PathBuf {\n        let key: \u0026str = key.as_ref();\n        BaseCache::get_cache_file_path(\u0026Self::get_cache_dir(), key, \"json\")\n    }\n    \n    /// Load cached folder hierarchy for a tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cached folder hierarchy to load\n    /// \n    /// # Returns\n    /// * `Some(FolderHierarchy)` - If a valid cache file exists for the tenant and hasn't expired\n    /// * `None` - If no cache file exists, is expired, or if deserialization fails\n    pub fn load(tenant_uuid: \u0026Uuid) -\u003e Option\u003cFolderHierarchy\u003e {\n        let cache_file = Self::get_cache_file_path(tenant_uuid.to_string());\n        tracing::debug!(\"Attempting to load folder hierarchy from cache file: {:?}\", cache_file);\n        \n        if cache_file.exists() {\n            tracing::debug!(\"Cache file exists, checking expiration\");\n            // Check if the cache has expired\n            if BaseCache::is_file_expired(\u0026cache_file) {\n                tracing::debug!(\"Cache file expired, removing it\");\n                // Remove expired cache file\n                let _ = fs::remove_file(\u0026cache_file);\n                return None;\n            }\n            \n            tracing::debug!(\"Cache file is valid, attempting to read\");\n            match fs::read(\u0026cache_file) {\n                Ok(data) =\u003e {\n                    tracing::debug!(\"Successfully read {} bytes from cache file\", data.len());\n                    match serde_json::from_slice::\u003cFolderHierarchy\u003e(\u0026data) {\n                        Ok(hierarchy) =\u003e {\n                            tracing::debug!(\"Successfully deserialized folder hierarchy from cache\");\n                            Some(hierarchy)\n                        }\n                        Err(e) =\u003e {\n                            tracing::warn!(\"Failed to deserialize folder hierarchy from cache: {}\", e);\n                            tracing::debug!(\"Deserialization error details: {:?}\", e);\n                            None\n                        }\n                    }\n                }\n                Err(e) =\u003e {\n                    tracing::warn!(\"Failed to read cache file: {}\", e);\n                    None\n                }\n            }\n        } else {\n            tracing::debug!(\"Cache file does not exist: {:?}\", cache_file);\n            None\n        }\n    }\n    \n    /// Save folder hierarchy to cache for a tenant\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant to cache the folder hierarchy for\n    /// * `hierarchy` - The folder hierarchy to cache\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the folder hierarchy was successfully cached\n    /// * `Err` - If there was an error during serialization or file operations\n    pub fn save(tenant_uuid: \u0026Uuid, hierarchy: \u0026FolderHierarchy) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let serialized = serde_json::to_vec(hierarchy)?;\n        tracing::debug!(\"Serialized folder hierarchy to {} bytes\", serialized.len());\n        \n        // Create cache directory if it doesn't exist\n        let cache_dir = Self::get_cache_dir();\n        fs::create_dir_all(\u0026cache_dir)?;\n        \n        let cache_file = Self::get_cache_file_path(tenant_uuid.to_string());\n        tracing::debug!(\"Writing cache file to: {:?}\", cache_file);\n        \n        // Use buffered writer to ensure all data is written properly\n        let file = std::fs::File::create(\u0026cache_file)?;\n        let mut writer = std::io::BufWriter::new(file);\n        writer.write_all(\u0026serialized)?;\n        writer.flush()?;\n        \n        tracing::debug!(\"Successfully wrote cache file\");\n        \n        Ok(())\n    }\n    \n    /// Get folder hierarchy from cache or fetch from API if not available/cached or expired\n    /// \n    /// This method first attempts to load the folder hierarchy from cache. If it's not\n    /// available in cache or has expired, it fetches the data from the Physna API and caches it.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folder hierarchy to retrieve\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The folder hierarchy for the tenant\n    /// * `Err` - If there was an error during cache operations or API calls\n    pub async fn get_or_fetch(\n        client: \u0026mut PhysnaApiClient,\n        tenant_uuid: \u0026Uuid,\n    ) -\u003e Result\u003cFolderHierarchy, Box\u003cdyn std::error::Error\u003e\u003e {\n        // Try to load from cache first\n        if let Some(cached) = Self::load(tenant_uuid) {\n            return Ok(cached);\n        }\n        \n        // If not in cache, fetch from API\n        let hierarchy = FolderHierarchy::build_from_api(client, tenant_uuid).await?;\n        \n        // Save to cache\n        if let Err(e) = Self::save(tenant_uuid, \u0026hierarchy) {\n            tracing::warn!(\"Failed to cache folder hierarchy: {}\", e);\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Refresh the cache for a specific tenant (force fetch from API)\n    /// \n    /// This method always fetches the latest folder hierarchy from the Physna API\n    /// and updates the cache, regardless of whether valid cached data exists.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folder hierarchy to refresh\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The refreshed folder hierarchy for the tenant\n    /// * `Err` - If there was an error during the API call or cache operations\n    pub async fn refresh(\n        client: \u0026mut PhysnaApiClient,\n        tenant_uuid: \u0026Uuid,\n    ) -\u003e Result\u003cFolderHierarchy, Box\u003cdyn std::error::Error\u003e\u003e {\n        let hierarchy = FolderHierarchy::build_from_api(client, tenant_uuid).await?;\n        \n        // Save to cache\n        if let Err(e) = Self::save(tenant_uuid, \u0026hierarchy) {\n            tracing::warn!(\"Failed to cache folder hierarchy: {}\", e);\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Invalidate cache for a specific tenant\n    /// \n    /// This method removes the cached folder hierarchy for the specified tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache to invalidate\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully invalidated or didn't exist\n    /// * `Err` - If there was an error during file operations\n    pub fn invalidate(tenant_id: \u0026str) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_file = Self::get_cache_file_path(tenant_id);\n        if cache_file.exists() {\n            fs::remove_file(cache_file)?;\n        }\n        Ok(())\n    }\n    \n    /// Clean expired cache files\n    /// \n    /// This method removes all expired cache files from the cache directory\n    pub fn clean_expired() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_dir = Self::get_cache_dir();\n        if !cache_dir.exists() {\n            return Ok(());\n        }\n        \n        for entry in fs::read_dir(cache_dir)? {\n            let entry = entry?;\n            let path = entry.path();\n            \n            if path.extension().is_some_and(|ext| ext == \"json\") {\n                let _ = fs::remove_file(\u0026path);\n                tracing::debug!(\"Removed expired cache file: {:?}\", path);\n            }\n        }\n        \n        Ok(())\n    }\n    \n    /// Purge all cached data\n    /// \n    /// This method removes all cache files from the cache directory, \n    /// effectively clearing the entire cache for all tenants.\n    /// \n    /// # Returns\n    /// * `Ok(())` - If all cache files were successfully removed\n    /// * `Err` - If there was an error during file operations\n    pub fn purge_all() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let cache_dir = Self::get_cache_dir();\n        if !cache_dir.exists() {\n            return Ok(());\n        }\n        \n        // Remove all cache files\n        for entry in fs::read_dir(\u0026cache_dir)? {\n            let entry = entry?;\n            let path = entry.path();\n            \n            if path.extension().is_some_and(|ext| ext == \"json\") {\n                fs::remove_file(\u0026path)?;\n                tracing::debug!(\"Removed cache file: {:?}\", path);\n            }\n        }\n        \n        tracing::debug!(\"Successfully purged all cached data\");\n        Ok(())\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use tempfile::TempDir;\n\n    #[test]\n    fn test_folder_cache_get_cache_dir() {\n        // Test that we can get the cache directory path without asserting specific content\n        let cache_dir = FolderCache::get_cache_dir();\n        // Just make sure it doesn't panic and returns a path\n        assert!(cache_dir.is_absolute() || cache_dir.starts_with(\".\"));\n    }\n\n    #[test]\n    fn test_folder_cache_get_cache_file_path() {\n        // Test that we can get the cache file path for a tenant without asserting specific content\n        let cache_file = FolderCache::get_cache_file_path(\"test-tenant\");\n        // Just make sure it doesn't panic and returns a path\n        assert!(cache_file.is_absolute() || cache_file.starts_with(\".\"));\n    }\n\n    #[test]\n    fn test_folder_cache_invalidate_nonexistent() {\n        // Test that we can invalidate a cache file that doesn't exist\n        let temp_dir = TempDir::new().unwrap();\n        \n        // Temporarily override the cache directory\n        std::env::set_var(\"PCLI2_TEST_CACHE_DIR\", temp_dir.path());\n        \n        // This should not panic or return an error\n        let result = FolderCache::invalidate(\"nonexistent-tenant\");\n        assert!(result.is_ok());\n        \n        // Clean up\n        std::env::remove_var(\"PCLI2_TEST_CACHE_DIR\");\n    }\n    \n    #[test]\n    fn test_folder_cache_save_and_load() {\n        use tempfile::TempDir;\n        \n        let temp_dir = TempDir::new().unwrap();\n        std::env::set_var(\"PCLI2_TEST_CACHE_DIR\", temp_dir.path());\n        \n        // Test that save creates cache directory\n        let result = FolderCache::save(\"test_tenant\", \u0026crate::folder_hierarchy::FolderHierarchy::new());\n        assert!(result.is_ok());\n        \n        std::env::remove_var(\"PCLI2_TEST_CACHE_DIR\");\n    }\n}\n","traces":[{"line":40,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":3},{"path":["/","Users","julian","projects","physna","pcli2","src","folder_hierarchy.rs"],"content":"//! Folder hierarchy management for the Physna CLI client.\n//!\n//! This module provides functionality for building, managing, and manipulating\n//! folder hierarchies retrieved from the Physna API. It includes features for\n//! path-based lookups, tree printing, and hierarchical filtering.\n\nuse crate::model::FolderResponse;\nuse crate::physna_v3::{PhysnaApiClient};\nuse ptree::TreeBuilder;\nuse serde::{Deserialize, Serialize};\nuse uuid::Uuid;\nuse std::collections::HashMap;\nuse tracing::trace;\nuse thiserror::Error;\n\n#[derive(Debug, Error)]\npub enum FolderHierarchyError {\n    #[error(\"{0}\")]\n    ApiError(#[from] crate::physna_v3::ApiError),\n}\n\n/// Represents a single folder node in the folder hierarchy\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct FolderNode {\n    /// The folder data from the Physna API\n    pub folder: FolderResponse,\n    /// UUIDs of child folders\n    pub children: Vec\u003cUuid\u003e,\n}\n\nimpl FolderNode {\n    /// Create a new FolderNode from a FolderResponse\n    pub fn new(folder: FolderResponse) -\u003e Self {\n        Self {\n            folder,\n            children: Vec::new(),\n        }\n    }\n    \n    /// Get the ID of the folder\n    pub fn uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.folder.uuid\n    }\n    \n    /// Get the name of the folder\n    pub fn name(\u0026self) -\u003e \u0026str {\n        \u0026self.folder.name\n    }\n    \n    /// Get the parent folder ID, if any\n    pub fn parent_uuid(\u0026self) -\u003e Option\u003c\u0026Uuid\u003e {\n        self.folder.parent_folder_uuid.as_ref()\n    }\n}\n\n/// Represents the complete folder hierarchy for a tenant\n#[derive(Serialize, Deserialize, Clone)]\npub struct FolderHierarchy {\n    /// Map of folder UUID to FolderNode\n    pub nodes: HashMap\u003cUuid, FolderNode\u003e,\n    /// Root folder IDs (folders with no parent)\n    pub root_uuids: Vec\u003cUuid\u003e,\n}\n\nimpl Default for FolderHierarchy {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\nimpl FolderHierarchy {\n    /// Create a new empty FolderHierarchy\n    pub fn new() -\u003e Self {\n        Self {\n            nodes: HashMap::new(),\n            root_uuids: Vec::new(),\n        }\n    }\n    \n    /// Build a folder hierarchy by fetching all folders from the Physna API\n    /// \n    /// This method fetches all folders for a tenant using pagination and constructs\n    /// a complete folder hierarchy with parent-child relationships.\n    /// \n    /// # Arguments\n    /// * `client` - A mutable reference to the Physna API client\n    /// * `tenant_id` - The ID of the tenant whose folders to fetch\n    /// \n    /// # Returns\n    /// * `Ok(FolderHierarchy)` - The complete folder hierarchy for the tenant\n    /// * `Err` - If there was an error during API calls or data processing\n    pub async fn build_from_api(client: \u0026mut PhysnaApiClient, tenant_uuid: \u0026Uuid) -\u003e Result\u003cSelf, FolderHierarchyError\u003e {\n        let mut hierarchy = Self::new();\n        \n        // Fetch all folders using pagination with per_page of 200 for better performance (API max is 1000)\n        let mut page = 1;\n        let per_page = 200;\n        loop {\n            trace!(\"Fetching folder page {} for tenant {} ({} folders so far)\", page, tenant_uuid.to_string(), hierarchy.nodes.len());\n            let response = client.list_folders(tenant_uuid, Some(page), Some(per_page)).await?;\n            \n            let folders_on_page = response.folders.len();\n            trace!(\"Fetched {} folders on page {}\", folders_on_page, page);\n            \n            // Add all folders to the hierarchy\n            for folder in response.folders {\n                let folder_uuid = folder.uuid.clone();\n                let parent_uuid = folder.parent_folder_uuid.clone();\n                \n                // Create node and add to hierarchy\n                let node = FolderNode::new(folder);\n                hierarchy.nodes.insert(folder_uuid.clone(), node);\n                \n                // If folder has a parent, add it as child to the parent\n                if let Some(parent_uuid) = \u0026parent_uuid {\n                    if let Some(parent_node) = hierarchy.nodes.get_mut(parent_uuid) {\n                        parent_node.children.push(folder_uuid.clone());\n                    }\n                } else {\n                    // No parent - this is a root folder\n                    hierarchy.root_uuids.push(folder_uuid.clone());\n                }\n            }\n            \n            // Check if we've reached the last page\n            // The API uses 1-based indexing for pages\n            if response.page_data.current_page \u003e= response.page_data.last_page {\n                trace!(\"Reached last page of folders for tenant {} after {} pages\", tenant_uuid, page);\n                break;\n            }\n            \n            page += 1;\n        }\n        \n        // Second pass to add children to parents that might have been processed after their children\n        let node_uuids: Vec\u003cUuid\u003e = hierarchy.nodes.keys().cloned().collect();\n        let parent_child_relations: Vec\u003c(Uuid, Uuid)\u003e = node_uuids\n            .iter()\n            .filter_map(|uuid| {\n                if let Some(node) = hierarchy.nodes.get(uuid) {\n                    if let Some(parent_uuid) = node.parent_uuid() {\n                        return Some((parent_uuid.clone(), uuid.clone()));\n                    }\n                }\n                None\n            })\n            .collect();\n        \n        for (parent_id, child_id) in parent_child_relations {\n            if let Some(parent_node) = hierarchy.nodes.get_mut(\u0026parent_id) {\n                if !parent_node.children.contains(\u0026child_id) {\n                    parent_node.children.push(child_id);\n                }\n            }\n        }\n        \n        Ok(hierarchy)\n    }\n    \n    /// Convert the folder hierarchy to a flat FolderList containing only direct children of the root folder\n    /// \n    /// This method creates a FolderList with only the direct children of the root folders\n    /// in this hierarchy, rather than all folders. This is useful for efficient folder listing\n    /// when only immediate children are needed.\n    /// \n    /// # Returns\n    /// A FolderList containing only direct children with their computed paths\n    pub fn to_direct_children_list(\u0026self) -\u003e crate::model::FolderList {\n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // For each root folder, add it to the list\n        for root_uuid in \u0026self.root_uuids {\n            if let Some(root_node) = self.nodes.get(root_uuid) {\n                // Add the root folder itself\n                let root_path = self.get_path_for_folder(root_uuid).unwrap_or_else(|| root_node.name().to_string());\n                let root_folder = crate::model::Folder::from_folder_response(root_node.folder.clone(), root_path);\n                folder_list.add(root_folder);\n            }\n        }\n        \n        folder_list\n    }\n    \n    /// Get direct children of a folder by path\n    /// \n    /// This method returns a FolderList containing only the direct children of the specified folder path.\n    /// This is useful for listing only immediate subfolders without recursively listing all descendants.\n    /// \n    /// # Arguments\n    /// * `folder_path` - The path of the folder whose children to retrieve\n    /// \n    /// # Returns\n    /// A FolderList containing only the direct children of the specified folder\n    pub fn get_children_by_path(\u0026self, folder_path: \u0026str) -\u003e Option\u003ccrate::model::FolderList\u003e {\n        // Find the folder node at the specified path\n        let target_node = self.get_folder_by_path(folder_path)?;\n        \n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // Add only the direct children of this folder\n        for child_uuid in \u0026target_node.children {\n            if let Some(child_node) = self.nodes.get(child_uuid) {\n                let child_path = self.get_path_for_folder(child_uuid).unwrap_or_else(|| child_node.name().to_string());\n                let child_folder = crate::model::Folder::from_folder_response(child_node.folder.clone(), child_path);\n                folder_list.add(child_folder);\n            }\n        }\n        \n        Some(folder_list)\n    }\n    \n    /// Get a folder node by its ID\n    /// \n    /// # Arguments\n    /// * `id` - The ID of the folder to retrieve\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder with the specified ID exists\n    /// * `None` - If no folder with the specified ID exists\n    pub fn get_folder_by_uuid(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026FolderNode\u003e {\n        self.nodes.get(uuid)\n    }\n    \n    /// Get a folder node by its path\n    /// \n    /// # Arguments\n    /// * `path` - The path of the folder to retrieve (e.g., \"Root/Child/Grandchild\")\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder with the specified path exists\n    /// * `None` - If no folder with the specified path exists\n    pub fn get_folder_by_path(\u0026self, path: \u0026str) -\u003e Option\u003c\u0026FolderNode\u003e {\n            let clean_path = path.strip_prefix('/').unwrap_or(path);\n            let path_parts: Vec\u003c\u0026str\u003e = clean_path.split('/').collect();\n        \n            // Start from root folders\n            self.find_folder_by_path_parts(\u0026self.root_uuids, \u0026path_parts)\n    }\n    \n    /// Find a folder node by path parts recursively\n    /// \n    /// # Arguments\n    /// * `folder_ids` - The IDs of folders to search within\n    /// * `path_parts` - The remaining path parts to match\n    /// \n    /// # Returns\n    /// * `Some(\u0026FolderNode)` - If a folder matching the path parts is found\n    /// * `None` - If no matching folder is found\n    fn find_folder_by_path_parts(\u0026self, folder_ids: \u0026[Uuid], path_parts: \u0026[\u0026str]) -\u003e Option\u003c\u0026FolderNode\u003e {\n        if path_parts.is_empty() {\n            return None;\n        }\n        \n        let current_part = path_parts[0];\n        \n        // Find folder with matching name among the given folder IDs\n        for folder_id in folder_ids {\n            if let Some(node) = self.nodes.get(folder_id) {\n                if node.name() == current_part {\n                    if path_parts.len() == 1 {\n                        // Found the target folder\n                        return Some(node);\n                    } else {\n                        // Continue searching in children\n                        return self.find_folder_by_path_parts(\u0026node.children, \u0026path_parts[1..]);\n                    }\n                }\n            }\n        }\n        \n        None\n    }\n    \n    /// Get the full path for a folder by its ID\n    /// \n    /// # Arguments\n    /// * `folder_id` - The ID of the folder whose path to retrieve\n    /// \n    /// # Returns\n    /// * `Some(String)` - The full path of the folder (e.g., \"Root/Child/Grandchild\")\n    /// * `None` - If no folder with the specified ID exists\n    pub fn get_path_for_folder(\u0026self, folder_uuid: \u0026Uuid) -\u003e Option\u003cString\u003e {\n        let mut path_parts = Vec::new();\n        let mut current_uuid = folder_uuid;\n        \n        // Traverse up the hierarchy to build the path\n        while let Some(node) = self.nodes.get(current_uuid) {\n            path_parts.push(node.name());\n            \n            if let Some(parent_uuid) = node.parent_uuid() {\n                current_uuid = parent_uuid;\n            } else {\n                break;\n            }\n        }\n        \n        // Reverse the path parts to get the correct order\n        path_parts.reverse();\n        \n        if path_parts.is_empty() {\n            None\n        } else {\n            Some(path_parts.join(\"/\"))\n        }\n    }\n    \n    /// Create a new FolderHierarchy containing only the subtree under the specified path\n    /// \n    /// # Arguments\n    /// * `path` - The path of the folder to use as the root of the new hierarchy\n    /// \n    /// # Returns\n    /// * `Some(FolderHierarchy)` - A new hierarchy containing only the subtree\n    /// * `None` - If no folder exists at the specified path\n    pub fn filter_by_path(\u0026self, path: \u0026str) -\u003e Option\u003cFolderHierarchy\u003e {\n\n        // Find the folder node at the specified path\n        let target_node = self.get_folder_by_path(path)?;\n    \n        // Create a new hierarchy with only the subtree\n        let mut filtered_hierarchy = FolderHierarchy::new();\n    \n        // Add the target folder and all its descendants\n        self.add_subtree_to_hierarchy(\u0026mut filtered_hierarchy, target_node, true);\n    \n        Some(filtered_hierarchy)\n    }\n    \n    /// Recursively add a subtree to a hierarchy\n    /// \n    /// # Arguments\n    /// * `hierarchy` - The hierarchy to add the subtree to\n    /// * `node` - The root node of the subtree to add\n    /// * `is_root` - Whether this node is the root of the new hierarchy\n    fn add_subtree_to_hierarchy(\u0026self, hierarchy: \u0026mut FolderHierarchy, node: \u0026FolderNode, is_root: bool) {\n        // Create a new node with adjusted parent relationship\n        let mut new_node = node.clone();\n        \n        // If this is the root of our filtered hierarchy, remove the parent relationship\n        if is_root {\n            // Create a new folder response with no parent\n            let mut new_folder = new_node.folder.clone();\n            new_folder.parent_folder_uuid = None;\n            new_node.folder = new_folder;\n            \n            // Add this node to root_ids since it's the root of our filtered hierarchy\n            hierarchy.root_uuids.push(node.uuid().clone());\n        }\n        \n        // Add the current node\n        hierarchy.nodes.insert(node.uuid().clone(), new_node);\n        \n        // Recursively add all children\n        for child_id in \u0026node.children {\n            if let Some(child_node) = self.nodes.get(child_id) {\n                self.add_subtree_to_hierarchy(hierarchy, child_node, false);\n            }\n        }\n    }\n    \n    /// Print the folder hierarchy as a tree structure\n    /// \n    /// This method prints the folder hierarchy to stdout using a tree-like format\n    /// with proper indentation to show parent-child relationships.\n    pub fn print_tree(\u0026self) {\n        // Sort root folders by name\n        let mut sorted_roots: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = self.root_uuids\n            .iter()\n            .filter_map(|id| self.nodes.get(id).map(|node| (id, node)))\n            .collect();\n        sorted_roots.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n        \n        for (_root_id, node) in sorted_roots {\n            let mut tree = TreeBuilder::new(node.name().to_string());\n            \n            // Build children for this root (sorted by name)\n            let mut sorted_children: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = node.children\n                .iter()\n                .filter_map(|uuid| self.nodes.get(uuid).map(|node| (uuid, node)))\n                .collect();\n            sorted_children.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n            \n            for (_child_id, child_node) in sorted_children {\n                self.build_tree_node(\u0026mut tree, child_node);\n            }\n            \n            let tree = tree.build();\n            // Ignore broken pipe errors (e.g., when piping to head)\n            let _ = ptree::print_tree(\u0026tree);\n        }\n    }\n    \n    /// Recursively build a tree node for printing\n    /// \n    /// # Arguments\n    /// * `tree` - The TreeBuilder to add nodes to\n    /// * `node` - The current node to process\n    fn build_tree_node(\u0026self, tree: \u0026mut TreeBuilder, node: \u0026FolderNode) {\n        tree.begin_child(node.name().to_string());\n        \n        // Sort children by name\n        let mut sorted_children: Vec\u003c(\u0026Uuid, \u0026FolderNode)\u003e = node.children\n            .iter()\n            .filter_map(|uuid| self.nodes.get(uuid).map(|node| (uuid, node)))\n            .collect();\n        sorted_children.sort_by(|a, b| a.1.name().cmp(b.1.name()));\n        \n        for (_child_id, child_node) in sorted_children {\n            self.build_tree_node(tree, child_node);\n        }\n        \n        tree.end_child();\n    }\n    \n    /// Convert the folder hierarchy to a flat FolderList\n    /// \n    /// This method creates a FolderList with all folders in the hierarchy,\n    /// each with its full path computed from the hierarchy.\n    /// \n    /// # Returns\n    /// A FolderList containing all folders with their computed paths\n    pub fn to_folder_list(\u0026self) -\u003e crate::model::FolderList {\n        let mut folder_list = crate::model::FolderList::empty();\n        \n        // Process each node to create folders with proper paths\n        for (id, node) in \u0026self.nodes {\n            let path = self.get_path_for_folder(id).unwrap_or_else(|| node.name().to_string());\n            let folder = crate::model::Folder::from_folder_response(node.folder.clone(), path);\n            folder_list.add(folder);\n        }\n        \n        folder_list\n    }\n}\n\n","traces":[{"line":33,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":41,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":176,"address":[],"length":0,"stats":{"Line":0}},{"line":177,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":194,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":198,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":204,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}},{"line":220,"address":[],"length":0,"stats":{"Line":0}},{"line":221,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":233,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":249,"address":[],"length":0,"stats":{"Line":0}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":251,"address":[],"length":0,"stats":{"Line":0}},{"line":254,"address":[],"length":0,"stats":{"Line":0}},{"line":257,"address":[],"length":0,"stats":{"Line":0}},{"line":258,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":262,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":282,"address":[],"length":0,"stats":{"Line":0}},{"line":283,"address":[],"length":0,"stats":{"Line":0}},{"line":284,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":293,"address":[],"length":0,"stats":{"Line":0}},{"line":298,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":301,"address":[],"length":0,"stats":{"Line":0}},{"line":303,"address":[],"length":0,"stats":{"Line":0}},{"line":315,"address":[],"length":0,"stats":{"Line":0}},{"line":318,"address":[],"length":0,"stats":{"Line":0}},{"line":321,"address":[],"length":0,"stats":{"Line":0}},{"line":324,"address":[],"length":0,"stats":{"Line":0}},{"line":326,"address":[],"length":0,"stats":{"Line":0}},{"line":335,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":340,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":343,"address":[],"length":0,"stats":{"Line":0}},{"line":344,"address":[],"length":0,"stats":{"Line":0}},{"line":347,"address":[],"length":0,"stats":{"Line":0}},{"line":351,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":355,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":369,"address":[],"length":0,"stats":{"Line":0}},{"line":371,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":379,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":387,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":399,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":404,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":408,"address":[],"length":0,"stats":{"Line":0}},{"line":409,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":136},{"path":["/","Users","julian","projects","physna","pcli2","src","format.rs"],"content":"//! Formatting utilities for the Physna CLI client.\n//!\n//! This module provides functionality for formatting output in various formats\n//! including JSON, CSV, and tree representations.\n\nuse csv::Writer;\nuse serde_json;\nuse std::io::BufWriter;\nuse std::str::FromStr;\nuse strum::EnumIter;\n\npub const JSON: \u0026str = \"json\";\npub const CSV: \u0026str = \"csv\";\npub const TREE: \u0026str = \"tree\";\n\n/// Error types that can occur during formatting operations\n#[derive(Debug, thiserror::Error)]\npub enum FormattingError {\n    /// Error when an unsupported output format is requested\n    #[error(\"invalid output format {0}\")]\n    UnsupportedOutputFormat(String),\n    /// General error when formatting fails\n    #[error(\"failed to format output due to: {cause:?}\")]\n    FormatFailure { cause: Box\u003cdyn std::error::Error + Send + Sync\u003e },\n    /// Error specific to CSV operations\n    #[error(\"CSV error: {0}\")]\n    CsvError(#[from] csv::Error),\n    /// Error when converting bytes to UTF-8 string\n    #[error(\"UTF-8 conversion error: {0}\")]\n    Utf8Error(#[from] std::string::FromUtf8Error),\n    /// Error specific to CSV writer operations\n    #[error(\"CSV writer error: {0}\")]\n    CsvWriterError(String),\n\n    #[error(\"JSON serialization error: {0}\")]\n    JsonSerializationError(#[from] serde_json::Error),\n\n    #[error(\"CSV writer into inner error: {0}\")]\n    CsvIntoInnerError(#[from] csv::IntoInnerError\u003ccsv::Writer\u003cVec\u003cu8\u003e\u003e\u003e),\n}\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub struct OutputFormatOptions {\n    pub with_metadata: bool,\n    pub with_headers: bool,\n    pub pretty: bool,\n}\n\nimpl Default for OutputFormatOptions {\n    fn default() -\u003e Self {\n        OutputFormatOptions {\n            with_metadata: false,\n            with_headers: false,\n            pretty: false,\n        }\n    }\n}\n\n/// Enum representing the supported output formats\n#[derive(Debug, Clone, PartialEq, PartialOrd, EnumIter)]\npub enum OutputFormat {\n    /// CSV (Comma-Separated Values) format\n    Csv(OutputFormatOptions),\n    /// JSON (JavaScript Object Notation) format\n    Json(OutputFormatOptions),\n    /// Tree format for hierarchical data representation\n    Tree(OutputFormatOptions),\n}\n\nimpl OutputFormat {\n    /// Returns a vector of all supported format names as strings\n    pub fn names() -\u003e Vec\u003c\u0026'static str\u003e {\n        vec![JSON, CSV, TREE]\n    }\n\n    pub fn from_string_with_options(\n        format_str: \u0026str,\n        options: OutputFormatOptions,\n    ) -\u003e Result\u003cOutputFormat, FormattingError\u003e {\n        let normalized_format = format_str.to_lowercase();\n        let normalized_format = normalized_format.as_str();\n        match normalized_format {\n            JSON =\u003e Ok(OutputFormat::Json(options)),\n            CSV =\u003e Ok(OutputFormat::Csv(options)),\n            TREE =\u003e Ok(OutputFormat::Tree(options)),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(\n                normalized_format.to_string(),\n            )),\n        }\n    }\n}\n\nimpl Default for OutputFormat {\n    fn default() -\u003e Self {\n        OutputFormat::Json(OutputFormatOptions::default())\n    }\n}\n\nimpl std::fmt::Display for OutputFormat {\n    /// Formats the OutputFormat enum as a string for display purposes\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter) -\u003e std::fmt::Result {\n        match self {\n            OutputFormat::Csv(_) =\u003e write!(f, \"csv\"),\n            OutputFormat::Json(_) =\u003e write!(f, \"json\"),\n            OutputFormat::Tree(_) =\u003e write!(f, \"tree\"),\n        }\n    }\n}\n\nimpl FromStr for OutputFormat {\n    type Err = FormattingError;\n\n    /// Parses a string into an OutputFormat enum variant\n    fn from_str(format_str: \u0026str) -\u003e Result\u003cOutputFormat, FormattingError\u003e {\n        Self::from_string_with_options(format_str, OutputFormatOptions::default())\n    }\n}\n\n/// Trait for formatting data in different output formats\npub trait OutputFormatter {\n    /// The type of item being formatted\n    type Item;\n\n    /// Format the data according to the specified output format\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e;\n}\n\n/// Trait for producing CSV records from data\npub trait CsvRecordProducer {\n    /// Returns the header row for the CSV output\n    fn csv_header() -\u003e Vec\u003cString\u003e;\n\n    /// Converts the data into CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e;\n\n    /// Returns the header row for the CSV output with metadata columns\n    fn csv_header_with_metadata() -\u003e Vec\u003cString\u003e {\n        Self::csv_header()\n    }\n\n    /// Converts the data into CSV records with metadata columns\n    fn as_csv_records_with_metadata(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.as_csv_records()\n    }\n\n    /// Produces CSV output with a header row\n    fn to_csv_with_header(\u0026self) -\u003e Result\u003cString, FormattingError\u003e {\n        self.to_csv(true)\n    }\n\n    /// Produces CSV output without a header row\n    fn to_csv_without_header(\u0026self) -\u003e Result\u003cString, FormattingError\u003e {\n        self.to_csv(false)\n    }\n\n    /// Produces CSV output with or without a header row based on the parameter\n    fn to_csv(\u0026self, with_header: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        let buf = BufWriter::new(Vec::new());\n        let mut wtr = Writer::from_writer(buf);\n        if with_header {\n            wtr.write_record(Self::csv_header()).unwrap();\n        }\n        for record in self.as_csv_records() {\n            wtr.write_record(\u0026record).unwrap();\n        }\n        match wtr.flush() {\n            Ok(_) =\u003e {\n                let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                let csv = String::from_utf8(bytes).unwrap();\n                Ok(csv.clone())\n            }\n            Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n        }\n    }\n}\n\npub trait Formattable {\n    fn format(\u0026self, f: \u0026OutputFormat) -\u003e Result\u003cString, FormattingError\u003e;\n}\n","traces":[{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":264}},{"line":73,"address":[],"length":0,"stats":{"Line":1056}},{"line":76,"address":[],"length":0,"stats":{"Line":4}},{"line":80,"address":[],"length":0,"stats":{"Line":12}},{"line":81,"address":[],"length":0,"stats":{"Line":12}},{"line":82,"address":[],"length":0,"stats":{"Line":4}},{"line":83,"address":[],"length":0,"stats":{"Line":6}},{"line":84,"address":[],"length":0,"stats":{"Line":4}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":137,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":166,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":169,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}}],"covered":8,"coverable":42},{"path":["/","Users","julian","projects","physna","pcli2","src","http_utils.rs"],"content":"//! HTTP utilities for the Physna CLI client.\n//!\n//! This module provides common HTTP request handling utilities to improve\n//! code reuse and consistency across different API clients in the application.\n\nuse reqwest::Client;\nuse serde::de::DeserializeOwned;\nuse tracing::{debug, error, trace};\nuse std::collections::HashMap;\n\n/// Configuration for HTTP requests with common settings\n#[derive(Debug, Clone)]\npub struct HttpRequestConfig {\n    /// Base URL for the API\n    pub base_url: String,\n    /// Default headers to include with all requests  \n    pub default_headers: HashMap\u003cString, String\u003e,\n    /// Request timeout in seconds\n    pub timeout: u64,\n    /// Whether to automatically retry on certain error codes\n    pub retry_on_auth_error: bool,\n}\n\nimpl Default for HttpRequestConfig {\n    fn default() -\u003e Self {\n        Self {\n            base_url: \"https://app-api.physna.com/v3\".to_string(),\n            default_headers: HashMap::new(),\n            timeout: 60, // 60 seconds\n            retry_on_auth_error: true,\n        }\n    }\n}\n\nimpl HttpRequestConfig {\n    pub fn from_configuration(configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            base_url: configuration.get_api_base_url(),\n            default_headers: HashMap::new(),\n            timeout: 60, // 60 seconds\n            retry_on_auth_error: true,\n        }\n    }\n}\n\n/// HTTP client wrapper with common request handling logic\npub struct HttpClient {\n    /// The reqwest client instance\n    client: Client,\n    /// Configuration for the HTTP client\n    config: HttpRequestConfig,\n}\n\nimpl HttpClient {\n    /// Create a new HTTP client with the given configuration\n    pub fn new(config: HttpRequestConfig) -\u003e Result\u003cSelf, Box\u003cdyn std::error::Error + Send + Sync\u003e\u003e {\n        let client = Client::builder()\n            .timeout(std::time::Duration::from_secs(config.timeout))\n            .build()\n            .map_err(|e| Box::new(e) as Box\u003cdyn std::error::Error + Send + Sync\u003e)?;\n        \n        Ok(Self { client, config })\n    }\n\n    /// Make a GET request to the specified path with automatic error handling\n    pub async fn get\u003cT\u003e(\u0026self, path: \u0026str, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.get(format!(\"{}{}\", self.config.base_url, path))\n        }, auth_token).await\n    }\n    \n    /// Make a POST request to the specified path with JSON body and automatic error handling\n    pub async fn post\u003cT, B\u003e(\u0026self, path: \u0026str, body: \u0026B, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.post(format!(\"{}{}\", self.config.base_url, path))\n                .json(body)\n        }, auth_token).await\n    }\n    \n    /// Make a PUT request to the specified path with JSON body and automatic error handling\n    pub async fn put\u003cT, B\u003e(\u0026self, path: \u0026str, body: \u0026B, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        T: DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client_builder| {\n            client_builder.put(format!(\"{}{}\", self.config.base_url, path))\n                .json(body)\n        }, auth_token).await\n    }\n\n    /// Make a DELETE request to the specified path with automatic error handling\n    pub async fn delete(\u0026self, path: \u0026str, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003c(), crate::physna_v3::ApiError\u003e {\n        let mut request = self.client\n            .delete(format!(\"{}{}\", self.config.base_url, path));\n        \n        // Add authorization header if available\n        if let Some(token) = auth_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        // Add default headers\n        for (key, value) in \u0026self.config.default_headers {\n            request = request.header(key, value);\n        }\n        \n        let response = request.send().await\n            .map_err(crate::physna_v3::ApiError::HttpError)?;\n        \n        if response.status().is_success() {\n            Ok(())\n        } else {\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n\n    /// Execute an HTTP request with common error handling and optional authentication\n    async fn execute_request\u003cF, T\u003e(\u0026self, request_builder: F, auth_token: Option\u003c\u0026str\u003e) -\u003e Result\u003cT, crate::physna_v3::ApiError\u003e\n    where\n        F: FnOnce(\u0026Client) -\u003e reqwest::RequestBuilder,\n        T: DeserializeOwned,\n    {\n        let mut request = request_builder(\u0026self.client);\n        \n        // Add authorization header if available\n        if let Some(token) = auth_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        // Add default headers\n        for (key, value) in \u0026self.config.default_headers {\n            request = request.header(key, value);\n        }\n        \n        let response = request.send().await\n            .map_err(crate::physna_v3::ApiError::HttpError)?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), request should be retried with fresh token\", response.status());\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        } else if response.status().is_success() {\n            // Try to get the raw response text for debugging\n            let response_text = response.text().await\n                .map_err(crate::physna_v3::ApiError::HttpError)?;\n            trace!(\"Raw response text for deserialization: {}\", response_text);\n            \n            // Try to parse and return the JSON response\n            match serde_json::from_str::\u003cT\u003e(\u0026response_text) {\n                Ok(result) =\u003e Ok(result),\n                Err(e) =\u003e {\n                    error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response_text);\n                    Err(crate::physna_v3::ApiError::JsonError(e))\n                }\n            }\n        } else {\n            // For all other errors, return the error status\n            Err(crate::physna_v3::ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_http_client_config_default() {\n        let config = HttpRequestConfig::default();\n        assert_eq!(config.base_url, \"https://app-api.physna.com/v3\");\n        assert_eq!(config.timeout, 60);\n        assert!(config.retry_on_auth_error);\n    }\n\n    #[test]\n    fn test_http_client_config() {\n        let config = HttpRequestConfig::default();\n        assert_eq!(config.timeout, 60);\n        assert!(config.retry_on_auth_error);\n    }\n}","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":2}},{"line":27,"address":[],"length":0,"stats":{"Line":4}},{"line":28,"address":[],"length":0,"stats":{"Line":2}},{"line":36,"address":[],"length":0,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":60,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":70,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":76,"address":[],"length":0,"stats":{"Line":0}},{"line":81,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":0}},{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":100,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":114,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":117,"address":[],"length":0,"stats":{"Line":0}},{"line":118,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":139,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":167,"address":[],"length":0,"stats":{"Line":0}}],"covered":3,"coverable":59},{"path":["/","Users","julian","projects","physna","pcli2","src","keyring.rs"],"content":"#[cfg(not(feature = \"dev-keyring\"))]\nmod implementation {\n    use keyring::Entry;\n    use thiserror::Error;\n\n    #[derive(Debug, Error)]\n    pub enum KeyringError {\n        #[error(\"keyring error\")]\n        KeyringAccessError(#[from] KeyringErrorInternal),\n    }\n\n    impl From\u003ckeyring::Error\u003e for KeyringError {\n        fn from(error: keyring::Error) -\u003e Self {\n            KeyringError::KeyringAccessError(KeyringErrorInternal::CannotAccessKeyringEntity(error))\n        }\n    }\n\n    #[derive(Debug, Error)]\n    pub enum KeyringErrorInternal {\n        #[error(\"keyring error\")]\n        CannotAccessKeyringEntity(#[from] keyring::Error),\n    }\n\n    pub struct Keyring {}\n\n    impl Default for Keyring {\n        fn default() -\u003e Keyring {\n            Keyring {}\n        }\n    }\n\n    impl Keyring {\n        pub fn get(\u0026self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            match entry.get_password() {\n                Ok(value) =\u003e Ok(Some(value)),\n                Err(e) =\u003e match e {\n                    keyring::Error::NoEntry =\u003e Ok(None),\n                    _ =\u003e Err(KeyringError::from(e)),\n                },\n            }\n        }\n\n        pub fn put(\u0026self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            entry.set_password(value.as_str())?;\n            Ok(())\n        }\n\n        pub fn delete(\u0026self, tenant: \u0026str, key: String) -\u003e Result\u003c(), KeyringError\u003e {\n            let key = [tenant, key.as_str()].join(\":\");\n            let entry = Entry::new(\"pcli2\", key.as_str())?;\n            entry.delete_password()?;\n            Ok(())\n        }\n\n        /// Get multiple credential values for an environment in a single operation\n        /// This helps reduce multiple keyring access calls that might trigger multiple authorization prompts\n        pub fn get_environment_credentials(\u0026self, tenant: \u0026str) -\u003e Result\u003c(Option\u003cString\u003e, Option\u003cString\u003e, Option\u003cString\u003e), KeyringError\u003e {\n            let access_token = self.get(tenant, \"access-token\".to_string()).ok().flatten();\n            let client_id = self.get(tenant, \"client-id\".to_string()).ok().flatten();\n            let client_secret = self.get(tenant, \"client-secret\".to_string()).ok().flatten();\n\n            Ok((access_token, client_id, client_secret))\n        }\n    }\n}\n\n#[cfg(feature = \"dev-keyring\")]\nmod implementation {\n    use crate::dev_keyring::DevKeyring;\n    use thiserror::Error;\n\n    #[derive(Debug, Error)]\n    pub enum KeyringError {\n        #[error(\"keyring error: {0}\")]\n        KeyringAccessError(String),\n    }\n\n    #[derive(Default)]\n    pub struct Keyring {\n        dev_keyring: DevKeyring,\n    }\n\n    impl Keyring {\n        pub fn get(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003cOption\u003cString\u003e, KeyringError\u003e {\n            self.dev_keyring.get(tenant, key).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        pub fn put(\u0026mut self, tenant: \u0026str, key: String, value: String) -\u003e Result\u003c(), KeyringError\u003e {\n            self.dev_keyring.put(tenant, key, value).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        pub fn delete(\u0026mut self, tenant: \u0026str, key: String) -\u003e Result\u003c(), KeyringError\u003e {\n            self.dev_keyring.delete(tenant, key).map_err(|e| KeyringError::KeyringAccessError(format!(\"{:?}\", e)))\n        }\n\n        /// Get multiple credential values for an environment in a single operation\n        /// This helps reduce multiple keyring access calls that might trigger multiple authorization prompts\n        pub fn get_environment_credentials(\u0026mut self, tenant: \u0026str) -\u003e Result\u003c(Option\u003cString\u003e, Option\u003cString\u003e, Option\u003cString\u003e), KeyringError\u003e {\n            let access_token = self.dev_keyring.get(tenant, \"access-token\".to_string()).ok().flatten();\n            let client_id = self.dev_keyring.get(tenant, \"client-id\".to_string()).ok().flatten();\n            let client_secret = self.dev_keyring.get(tenant, \"client-secret\".to_string()).ok().flatten();\n\n            Ok((access_token, client_id, client_secret))\n        }\n    }\n}\n\npub use implementation::*;","traces":[{"line":88,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":102,"address":[],"length":0,"stats":{"Line":4}},{"line":103,"address":[],"length":0,"stats":{"Line":32}},{"line":104,"address":[],"length":0,"stats":{"Line":32}},{"line":105,"address":[],"length":0,"stats":{"Line":32}},{"line":107,"address":[],"length":0,"stats":{"Line":8}}],"covered":5,"coverable":11},{"path":["/","Users","julian","projects","physna","pcli2","src","lib.rs"],"content":"//! The Physna CLI client library.\n//!\n//! This crate provides the core functionality for the Physna CLI client,\n//! including API interactions, data models, caching, authentication, and\n//! command execution.\n//!\n//! # Modules\n//!\n//! - `api`: Legacy API client implementations\n//! - `asset_cache`: Caching functionality for assets\n//! - `auth`: Authentication mechanisms\n//! - `commands`: CLI command parsing and execution\n//! - `configuration`: Configuration management\n//! - `folder_cache`: Caching functionality for folders\n//! - `folder_hierarchy`: Folder hierarchy management and traversal\n//! - `format`: Data formatting utilities for various output formats\n//! - `model`: Data models for Physna entities (folders, assets, tenants, etc.)\n//! - `physna_v3`: Physna V3 API client implementation\n\npub mod actions;\npub mod auth;\npub mod cache;\npub mod commands;\npub mod configuration;\npub mod dev_keyring;\npub mod error;\npub mod error_utils;\npub mod exit_codes;\npub mod folder_hierarchy;\npub mod format;\npub mod http_utils;\npub mod keyring;\npub mod metadata;\npub mod metadata_cache;\npub mod model;\npub mod param_utils;\npub mod physna_v3;\npub mod tenant_cache;\n","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","src","main.rs"],"content":"//! Main entry point for the Physna CLI client.\n//!\n//! This module contains the main function that serves as the entry point\n//! for the CLI application. It handles initialization, configuration loading,\n//! command parsing, and error handling.\n//! \n//! The application follows a layered architecture pattern:\n//! - main.rs: Entry point and application initialization\n//! - cli.rs: Command execution logic\n//! - commands.rs: Command definitions and parsing\n//! - physna_v3.rs: API client and communication layer  \n//! - model.rs: Data models and structures\n//! - auth.rs: Authentication handling\n//! - configuration.rs: Configuration management\n\nuse configuration::ConfigurationError;\nuse pcli2::error::CliError;\nuse pcli2::{\n    configuration,\n    error_utils,\n};\nuse std::env;\nuse std::process;\nuse thiserror::Error;\nuse tracing_subscriber::EnvFilter;\n\nmod banner;\nmod cli;\nuse cli::execute_command;\nmod exit_codes;\nuse exit_codes::PcliExitCode;\n\n/// Error types that can occur in the main application\n#[derive(Error, Debug)]\nenum MainError {\n    /// Error related to configuration loading or management\n    #[error(transparent)]\n    ConfigurationError(#[from] ConfigurationError),\n    /// Error related to CLI command execution\n    #[error(transparent)]\n    CliError(#[from] CliError),\n}\n\nimpl MainError {\n    /// Get the appropriate exit code for this error\n    /// \n    /// Returns:\n    /// - `PcliExitCode::ConfigError` for configuration errors\n    /// - The CLI error's specific exit code for command execution errors\n    fn exit_code(\u0026self) -\u003e i32 {\n        match self {\n            MainError::ConfigurationError(_) =\u003e PcliExitCode::ConfigError.code(),\n            MainError::CliError(cli_error) =\u003e cli_error.exit_code().code(),\n        }\n    }\n}\n\n/// Main entry point for the Physna CLI client application.\n/// \n/// This function performs the following steps:\n/// 1. Initializes the logging subsystem using tracing with environment-filtered configuration\n/// 2. Loads the application configuration from persistent storage\n/// 3. Parses command-line arguments using the pre-defined command structure\n/// 4. Routes execution to the appropriate command handler based on user input\n/// 5. Handles any errors and exits with appropriate exit codes based on error types\n/// \n/// The function uses structured error handling with the `MainError` enum to provide\n/// clear error categorization and appropriate exit codes based on error types.\n/// \n/// # Returns\n/// \n/// * `Ok(())` - If the command executed successfully (exit code 0)\n/// * `Err(i32)` - If an error occurred, with the appropriate exit code for the error type\n#[tokio::main]\nasync fn main() {\n    // Check if help is requested to show banner\n    let args: Vec\u003cString\u003e = env::args().collect();\n    if banner::has_help_flag(\u0026args) {\n        banner::print_banner();\n    }\n\n    // Initialize the logging subsystem\n    tracing_subscriber::fmt()\n        .with_env_filter(EnvFilter::from_default_env())\n        .init();\n\n    // Parse and execute the CLI command\n    match execute_command().await {\n        Ok(()) =\u003e {\n            // Success - exit with code 0\n            process::exit(0);\n        },\n        Err(e) =\u003e {\n            error_utils::report_detailed_error(\u0026e, None);  // Remove generic context\n            let main_error = MainError::CliError(e);\n            process::exit(main_error.exit_code());\n        }\n    }\n}\n","traces":[{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":22}},{"line":77,"address":[],"length":0,"stats":{"Line":44}},{"line":78,"address":[],"length":0,"stats":{"Line":28}},{"line":79,"address":[],"length":0,"stats":{"Line":6}},{"line":83,"address":[],"length":0,"stats":{"Line":11}},{"line":84,"address":[],"length":0,"stats":{"Line":22}},{"line":88,"address":[],"length":0,"stats":{"Line":33}},{"line":89,"address":[],"length":0,"stats":{"Line":11}},{"line":91,"address":[],"length":0,"stats":{"Line":11}},{"line":93,"address":[],"length":0,"stats":{"Line":11}},{"line":94,"address":[],"length":0,"stats":{"Line":11}},{"line":95,"address":[],"length":0,"stats":{"Line":11}},{"line":96,"address":[],"length":0,"stats":{"Line":11}}],"covered":13,"coverable":17},{"path":["/","Users","julian","projects","physna","pcli2","src","metadata.rs"],"content":"use serde::{Deserialize, Serialize};\nuse std::collections::HashMap;\nuse std::fs::File;\nuse std::io::BufReader;\nuse csv::Reader;\nuse tracing::{debug, trace};\nuse serde_json::Value;\n\n/// Represents a metadata entry from the CSV file\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct MetadataEntry {\n    /// The path of the asset to update\n    #[serde(rename = \"ASSET_PATH\")]\n    pub asset_path: String,\n    /// The name of the metadata field\n    #[serde(rename = \"NAME\")]\n    pub name: String,\n    /// The value of the metadata field\n    #[serde(rename = \"VALUE\")]\n    pub value: String,\n}\n\nimpl MetadataEntry {\n    /// Create a new MetadataEntry\n    pub fn new(asset_path: String, name: String, value: String) -\u003e Self {\n        Self {\n            asset_path,\n            name,\n            value,\n        }\n    }\n}\n\n/// Read metadata entries from a CSV file\n/// \n/// # Arguments\n/// * `file_path` - Path to the CSV file\n/// \n/// # Returns\n/// * `Ok(Vec\u003cMetadataEntry\u003e)` - Vector of metadata entries sorted by asset path\n/// * `Err(csv::Error)` - Error reading or parsing the CSV file\npub fn read_metadata_from_csv(file_path: \u0026str) -\u003e Result\u003cVec\u003cMetadataEntry\u003e, csv::Error\u003e {\n    debug!(\"Reading metadata from CSV file: {}\", file_path);\n    \n    let file = File::open(file_path)?;\n    let reader = BufReader::new(file);\n    let mut csv_reader = Reader::from_reader(reader);\n    \n    let mut entries: Vec\u003cMetadataEntry\u003e = Vec::new();\n    \n    // Read each record from the CSV\n    for result in csv_reader.deserialize() {\n        let record: MetadataEntry = result?;\n        trace!(\"Read metadata entry: {:?}\", record);\n        entries.push(record);\n    }\n    \n    // Sort entries by asset path\n    entries.sort_by(|a, b| a.asset_path.cmp(\u0026b.asset_path));\n    \n    debug!(\"Successfully read {} metadata entries from CSV\", entries.len());\n    Ok(entries)\n}\n\n/// Group metadata entries by asset path\n/// \n/// # Arguments\n/// * `entries` - Vector of metadata entries\n/// \n/// # Returns\n/// * `HashMap\u003cString, HashMap\u003cString, String\u003e\u003e` - Map of asset paths to metadata key-value pairs\npub fn group_metadata_by_asset(entries: Vec\u003cMetadataEntry\u003e) -\u003e HashMap\u003cString, HashMap\u003cString, String\u003e\u003e {\n    let mut grouped: HashMap\u003cString, HashMap\u003cString, String\u003e\u003e = HashMap::new();\n    \n    for entry in entries {\n        // Get or create the metadata map for this asset path\n        let metadata_map = grouped.entry(entry.asset_path).or_default();\n        \n        // Add the metadata key-value pair\n        metadata_map.insert(entry.name, entry.value);\n    }\n    \n    grouped\n}\n\n/// Convert metadata string values to appropriate JSON types\n/// \n/// This function converts string metadata values to appropriate JSON types (string, number, boolean)\n/// based on the provided type information. For now, it treats all values as strings for compatibility.\n/// \n/// # Arguments\n/// * `metadata` - Map of metadata key-value pairs as strings\n/// \n/// # Returns\n/// * `HashMap\u003cString, Value\u003e` - Map of metadata key-value pairs as JSON values\npub fn convert_metadata_to_json_values(metadata: \u0026HashMap\u003cString, String\u003e) -\u003e HashMap\u003cString, Value\u003e {\n    let mut json_metadata: HashMap\u003cString, Value\u003e = HashMap::new();\n    \n    for (key, value) in metadata {\n        // Sanitize the value to remove or replace problematic characters\n        let sanitized_value = sanitize_metadata_value(value);\n        \n        // For now, treat all values as strings to avoid type mismatch issues\n        // The API might be expecting string values for all metadata fields\n        json_metadata.insert(key.clone(), Value::String(sanitized_value));\n    }\n    \n    json_metadata\n}\n\n/// Convert a single metadata value to appropriate JSON type based on the specified meta-type\n/// \n/// This function converts a single metadata value to the appropriate JSON type based on the \n/// provided metadata type (text, number, boolean), with proper sanitization.\n/// \n/// # Arguments\n/// * `name` - The metadata property name\n/// * `value` - The metadata property value as string\n/// * `metadata_type` - The expected type (\"text\", \"number\", \"boolean\")\n/// \n/// # Returns\n/// * `Value` - The converted JSON value\npub fn convert_single_metadata_to_json_value(_name: \u0026str, value: \u0026str, metadata_type: \u0026str) -\u003e Value {\n    match metadata_type {\n        \"number\" =\u003e {\n            // Try to parse as number (integer or float)\n            if let Ok(int_val) = value.parse::\u003ci64\u003e() {\n                serde_json::Value::Number(serde_json::Number::from(int_val))\n            } else if let Ok(float_val) = value.parse::\u003cf64\u003e() {\n                if float_val.fract() == 0.0 {\n                    serde_json::Value::Number(serde_json::Number::from(float_val as i64))\n                } else {\n                    serde_json::Number::from_f64(float_val)\n                        .map(serde_json::Value::Number)\n                        .unwrap_or(serde_json::Value::String(value.to_string()))\n                }\n            } else {\n                serde_json::Value::String(value.to_string())\n            }\n        }\n        \"boolean\" =\u003e {\n            let bool_val = match value.to_lowercase().as_str() {\n                \"true\" | \"1\" | \"yes\" | \"on\" =\u003e true,\n                \"false\" | \"0\" | \"no\" | \"off\" =\u003e false,\n                _ =\u003e {\n                    // Try to parse as boolean string\n                    value.parse::\u003cbool\u003e().unwrap_or(false)\n                }\n            };\n            serde_json::Value::Bool(bool_val)\n        }\n        \"text\" | _ =\u003e {\n            // Default to text/string type, with sanitization\n            let sanitized_value = sanitize_metadata_value(value);\n            serde_json::Value::String(sanitized_value)\n        }\n    }\n}\n\n/// Sanitize metadata values to handle special characters that might cause API issues\n/// \n/// This function replaces or removes special characters that are known to cause issues\n/// with the Physna API, such as Unicode symbols that might not be properly encoded.\n/// \n/// # Arguments\n/// * `value` - The metadata value to sanitize\n/// \n/// # Returns\n/// * `String` - The sanitized metadata value\nfn sanitize_metadata_value(value: \u0026str) -\u003e String {\n    value\n        // Replace special Unicode characters with ASCII equivalents\n        .replace('√ò', \"O\")  // Diameter symbol\n        .replace('¬∞', \" deg\")  // Degree symbol\n        .replace('‚Ä≥', \"\\\"\")  // Double prime (inch symbol)\n        .replace(\"‚Ä¶\", \"...\")  // Ellipsis\n        // Keep other characters as they are\n        .to_string()\n}","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":49,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":55,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":75,"address":[],"length":0,"stats":{"Line":0}},{"line":77,"address":[],"length":0,"stats":{"Line":0}},{"line":80,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":101,"address":[],"length":0,"stats":{"Line":0}},{"line":105,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":125,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":128,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":143,"address":[],"length":0,"stats":{"Line":0}},{"line":144,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":152,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}}],"covered":0,"coverable":49},{"path":["/","Users","julian","projects","physna","pcli2","src","metadata_cache.rs"],"content":"//! Cache for metadata fields to avoid repeated API calls\n//! \n//! This cache stores metadata field data locally to avoid expensive API calls when\n//! checking if metadata fields exist. It caches the list of registered metadata\n//! fields for each tenant.\n\nuse crate::model::MetadataFieldListResponse;\nuse crate::physna_v3::PhysnaApiClient;\nuse serde::{Deserialize, Serialize};\nuse std::collections::HashMap;\nuse std::fs;\nuse std::path::PathBuf;\nuse tracing::{debug, trace, warn};\n\n/// Cache for metadata field data to avoid repeated API calls\n/// \n/// This cache stores metadata field data locally to avoid expensive API calls when listing metadata fields.\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct MetadataCache {\n    /// Map of tenant ID to cached metadata field list response\n    #[serde(rename = \"tenantMetadataFields\")]\n    pub tenant_metadata_fields: HashMap\u003cString, MetadataFieldListResponse\u003e,\n    /// Timestamp when the cache was last updated (for future use)\n    #[serde(rename = \"lastUpdated\")]\n    #[serde(skip_serializing, skip_deserializing)]\n    pub last_updated: Option\u003cu64\u003e, // We'll track this internally but not serialize it\n}\n\nimpl MetadataCache {\n    /// Create a new empty metadata cache\n    pub fn new() -\u003e Self {\n        Self {\n            tenant_metadata_fields: HashMap::new(),\n            last_updated: Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs()),\n        }\n    }\n\n    /// Check if cache is expired for a specific tenant (default expiration: 1 hour)\n    fn is_expired(\u0026self, _tenant_id: \u0026str) -\u003e bool {\n        // For now, we'll use a simple approach where cache is valid for 1 hour\n        // In the future, we might want to track per-tenant timestamps\n        if let Some(updated) = self.last_updated {\n            let current_time = std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs();\n            \n            // Cache expires after 1 hour (3600 seconds)\n            current_time - updated \u003e 3600\n        } else {\n            true\n        }\n    }\n\n    /// Get the default cache file path\n    /// \n    /// # Returns\n    /// * `Ok(PathBuf)` - The path to the metadata cache file\n    /// * `Err` - If there was an error getting the cache directory\n    fn get_cache_file_path() -\u003e Result\u003cPathBuf, Box\u003cdyn std::error::Error\u003e\u003e {\n        // Check for PCLI2_CACHE_DIR environment variable first\n        if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            let mut cache_path = PathBuf::from(cache_dir_str);\n            cache_path.push(\"metadata_cache.json\");\n            return Ok(cache_path);\n        }\n        \n        let mut path = dirs::cache_dir().unwrap_or_else(std::env::temp_dir);\n        path.push(\"pcli2\");\n        path.push(\"metadata_cache.json\");\n        Ok(path)\n    }\n\n    /// Load cache from file\n    /// \n    /// # Returns\n    /// * `Ok(MetadataCache)` - The loaded cache\n    /// * `Err` - If there was an error loading the cache\n    pub fn load() -\u003e Result\u003cSelf, Box\u003cdyn std::error::Error\u003e\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        if path.exists() {\n            let data = fs::read_to_string(path)?;\n            let mut cache: MetadataCache = serde_json::from_str(\u0026data)?;\n            // Set the internal timestamp to current time to indicate when it was loaded\n            cache.last_updated = Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs());\n            debug!(\"Loaded metadata cache from file\");\n            Ok(cache)\n        } else {\n            debug!(\"No metadata cache file found, creating new cache\");\n            Ok(Self::new())\n        }\n    }\n\n    /// Save cache to file\n    /// \n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully saved\n    /// * `Err` - If there was an error saving the cache\n    pub fn save(\u0026self) -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        // Create cache directory if it doesn't exist\n        if let Some(parent) = path.parent() {\n            fs::create_dir_all(parent)?;\n        }\n        \n        let cache_to_save = Self {\n            tenant_metadata_fields: self.tenant_metadata_fields.clone(),\n            last_updated: self.last_updated, // Keep the same timestamp when saving\n        };\n        \n        let data = serde_json::to_string_pretty(\u0026cache_to_save)?;\n        fs::write(path, data)?;\n        debug!(\"Saved metadata cache to file\");\n        Ok(())\n    }\n\n    /// Get metadata fields for a tenant, fetching from API if not cached or expired\n    /// \n    /// # Arguments\n    /// * `client` - The Physna API client\n    /// * `tenant_id` - The ID of the tenant\n    /// * `refresh` - Whether to force refresh the cache\n    /// \n    /// # Returns\n    /// * `Ok(MetadataFieldListResponse)` - The metadata fields for the tenant\n    /// * `Err` - If there was an error during API calls\n    pub async fn get_or_fetch(\n        client: \u0026mut PhysnaApiClient, \n        tenant_id: \u0026str, \n        refresh: bool\n    ) -\u003e Result\u003cMetadataFieldListResponse, crate::physna_v3::ApiError\u003e {\n        trace!(\"Getting or fetching metadata fields for tenant: {}\", tenant_id);\n        \n        let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n        \n        // Check if we have cached data and if it's still valid (not expired) and refresh is not forced\n        if !refresh {\n            if let Some(cached_metadata_fields) = cache.tenant_metadata_fields.get(tenant_id) {\n                if !cache.is_expired(tenant_id) {\n                    trace!(\"Using existing cache for tenant: {}\", tenant_id);\n                    return Ok(cached_metadata_fields.clone());\n                }\n                trace!(\"Cache expired for tenant: {}, fetching from API\", tenant_id);\n            } else {\n                trace!(\"No cache found, fetching metadata fields from API for tenant: {}\", tenant_id);\n            }\n        } else {\n            trace!(\"Refresh requested, fetching metadata fields from API for tenant: {}\", tenant_id);\n        }\n        \n        // Fetch from API\n        let metadata_fields_response = client.get_metadata_fields(tenant_id).await?;\n        \n        // Update cache\n        cache.tenant_metadata_fields.insert(tenant_id.to_string(), metadata_fields_response.clone());\n        if let Err(e) = cache.save() {\n            warn!(\"Failed to save metadata cache: {}\", e);\n        }\n        \n        Ok(metadata_fields_response)\n    }\n\n    /// Get cached metadata fields for a tenant if available and not expired\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// \n    /// # Returns\n    /// * `Some(MetadataFieldListResponse)` - If metadata fields are cached and not expired\n    /// * `None` - If metadata fields are not cached or are expired\n    pub fn get_cached_metadata_fields(\u0026self, tenant_id: \u0026str) -\u003e Option\u003cMetadataFieldListResponse\u003e {\n        if let Some(cached_fields) = self.tenant_metadata_fields.get(tenant_id) {\n            if !self.is_expired(tenant_id) {\n                return Some(cached_fields.clone());\n            }\n        }\n        None\n    }\n\n    /// Invalidate cache for a specific tenant\n    /// \n    /// This method removes cached metadata fields for the specified tenant from the cache.\n    /// This is useful after creating new metadata fields to ensure consistency between \n    /// local cache and remote API.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose cache to invalidate\n    /// \n    /// # Returns\n    /// * `true` if cache entry was removed, `false` if no entry existed\n    pub fn invalidate_tenant(\u0026mut self, tenant_id: \u0026str) -\u003e bool {\n        let existed = self.tenant_metadata_fields.contains_key(tenant_id);\n        self.tenant_metadata_fields.remove(tenant_id);\n        trace!(\"Invalidated metadata cache for tenant {}\", tenant_id);\n        existed\n    }\n}\n\nimpl Default for MetadataCache {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_metadata_cache_creation() {\n        let cache = MetadataCache::new();\n        assert!(cache.tenant_metadata_fields.is_empty());\n    }\n}","traces":[{"line":31,"address":[],"length":0,"stats":{"Line":1}},{"line":33,"address":[],"length":0,"stats":{"Line":2}},{"line":34,"address":[],"length":0,"stats":{"Line":2}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":46,"address":[],"length":0,"stats":{"Line":0}},{"line":47,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":54,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":65,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":67,"address":[],"length":0,"stats":{"Line":0}},{"line":68,"address":[],"length":0,"stats":{"Line":0}},{"line":71,"address":[],"length":0,"stats":{"Line":0}},{"line":72,"address":[],"length":0,"stats":{"Line":0}},{"line":73,"address":[],"length":0,"stats":{"Line":0}},{"line":74,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":0}},{"line":83,"address":[],"length":0,"stats":{"Line":0}},{"line":85,"address":[],"length":0,"stats":{"Line":0}},{"line":86,"address":[],"length":0,"stats":{"Line":0}},{"line":87,"address":[],"length":0,"stats":{"Line":0}},{"line":89,"address":[],"length":0,"stats":{"Line":0}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":93,"address":[],"length":0,"stats":{"Line":0}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":96,"address":[],"length":0,"stats":{"Line":0}},{"line":97,"address":[],"length":0,"stats":{"Line":0}},{"line":106,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":111,"address":[],"length":0,"stats":{"Line":0}},{"line":115,"address":[],"length":0,"stats":{"Line":0}},{"line":116,"address":[],"length":0,"stats":{"Line":0}},{"line":119,"address":[],"length":0,"stats":{"Line":0}},{"line":120,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":122,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":147,"address":[],"length":0,"stats":{"Line":0}},{"line":148,"address":[],"length":0,"stats":{"Line":0}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":160,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":168,"address":[],"length":0,"stats":{"Line":0}},{"line":179,"address":[],"length":0,"stats":{"Line":0}},{"line":180,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":199,"address":[],"length":0,"stats":{"Line":0}},{"line":200,"address":[],"length":0,"stats":{"Line":0}},{"line":201,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":208,"address":[],"length":0,"stats":{"Line":0}},{"line":209,"address":[],"length":0,"stats":{"Line":0}}],"covered":3,"coverable":69},{"path":["/","Users","julian","projects","physna","pcli2","src","model.rs"],"content":"//! Data models for the Physna CLI client.\n//!\n//! This module contains all the data structures used throughout the application,\n//! including models for folders, assets, tenants, and API responses.\n//! It also includes implementations for formatting these models in\n//! various output formats like JSON, CSV, and tree representations.\n//!\n//! The models follow a layered approach:\n//! - API response models (e.g., AssetResponse, FolderResponse) - direct mapping from API JSON\n//! - Internal models (e.g., Asset, Folder) - business logic models with additional functionality\n//! - Collection models (e.g., AssetList, FolderList) - collections of individual models\n//!\n//! All models implement serialization/deserialization with serde,\n//! output formatting capabilities, and appropriate error handling.\n\nuse crate::format::{CsvRecordProducer, FormattingError, OutputFormat, OutputFormatter};\nuse csv::Writer;\nuse serde::{Deserialize, Serialize};\nuse std::cmp::Ordering;\nuse std::collections::HashMap;\nuse std::io::BufWriter;\nuse thiserror::Error;\nuse uuid::Uuid;\n\n/// Error types that can occur when working with models\n#[derive(Debug, Error)]\npub enum ModelError {\n    /// Error when a required property value is missing\n    #[error(\"missing property value {name:?}\")]\n    MissingPropertyValue { name: String },\n}\n\n/// Normalize a path with these rules:\n/// 1) Remove leading \"/HOME\" if present\n/// 2) Remove any trailing '/'\n/// 3) Ensure the result starts with exactly one '/'\n///\n/// Examples:\n///   \"/myroot/mysub/more/\"         -\u003e \"/myroot/mysub/more\"\n///   \"myroot/mysub/more\"           -\u003e \"/myroot/mysub/more\"\n///   \"/HOME/myroot/mysub/more/\"    -\u003e \"/myroot/mysub/more\"\n///   \"/HOME\"                       -\u003e \"/\"\n///   \"////\"                        -\u003e \"/\"\npub fn normalize_path(path: impl AsRef\u003cstr\u003e) -\u003e String {\n    let mut s = path.as_ref().trim();\n\n    // Case-insensitive check for prefix \"/HOME/\"\n    if s.to_ascii_lowercase().starts_with(\"/home/\") {\n        // SAFETY: only slice the original string, not the lowercase temp\n        s = \u0026s[5..]; // remove `/HOME` (5 chars)\n    } else if s.eq_ignore_ascii_case(\"/home\") {\n        return \"/\".into();\n    }\n\n    // Remove trailing '/'\n    s = s.trim_end_matches('/');\n\n    // Remove all leading '/'\n    let without_leading = s.trim_start_matches('/');\n\n    // Ensure exactly one leading '/'\n    let mut out = String::with_capacity(without_leading.len() + 1);\n    out.push('/');\n    out.push_str(without_leading);\n\n    out\n}\n\n/// Represents a folder in the Physna system\n///\n/// This struct represents a folder entity in the Physna system with both\n/// internal tracking properties and API-related identifiers.\n///\n/// Folders form a hierarchical structure in Physna and can contain both\n/// subfolders and assets. The path property represents the full path to\n/// the folder from the root.\n///\n/// # Fields\n/// * `uuid` - Unique identifier from the Physna API (required for API operations)\n/// * `name` - Display name of the folder\n/// * `path` - Full path of the folder in the hierarchy (e.g., \"/Root/Parent/Child\")\n///\n/// # Examples\n/// ```\n/// use pcli2::model::Folder;\n/// use uuid::Uuid;\n///\n/// let folder = Folder::new(\n///     Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap(),\n///     \"My Folder\".to_string(),\n///     \"/Root/My Folder\".to_string()\n/// );\n/// ```\n#[derive(Debug, PartialEq, Clone, Serialize, Deserialize)]\npub struct Folder {\n    /// UUID of the folder from the API\n    #[serde(rename = \"id\")]\n    uuid: Uuid,\n    /// Name of the folder\n    name: String,\n    /// Full path of the folder\n    path: String,\n}\n\nimpl Folder {\n    /// Create a new Folder instance\n    ///\n    /// # Arguments\n    /// * `uuid` - UUID from the API\n    /// * `name` - Name of the folder\n    /// * `path` - Full path of the folder\n    pub fn new(uuid: Uuid, name: String, path: String) -\u003e Folder {\n        Folder { uuid, name, path }\n    }\n\n    /// Create a Folder from a FolderResponse with a specified path\n    ///\n    /// # Arguments\n    /// * `folder_response` - The API response containing folder data\n    /// * `path` - The full path for this folder\n    pub fn from_folder_response(folder_response: FolderResponse, path: String) -\u003e Folder {\n        Folder {\n            uuid: folder_response.uuid,\n            name: folder_response.name,\n            path,\n        }\n    }\n\n    /// Get the UUID of the folder\n    pub fn uuid(\u0026self) -\u003e \u0026Uuid {\n        self.uuid.as_ref()\n    }\n\n    /// Set the name of the folder\n    pub fn set_name(\u0026mut self, name: String) {\n        self.name = name;\n    }\n\n    /// Get the name of the folder\n    pub fn name(\u0026self) -\u003e String {\n        self.name.clone()\n    }\n\n    /// Get the path of the folder\n    pub fn path(\u0026self) -\u003e String {\n        self.path.clone()\n    }\n\n    /// Set the path of the folder\n    pub fn set_path(\u0026mut self, path: String) {\n        self.path = path;\n    }\n\n    /// Create a new FolderBuilder for constructing Folder instances\n    pub fn builder() -\u003e FolderBuilder {\n        FolderBuilder::new()\n    }\n}\n\nimpl From\u003cFolderResponse\u003e for Folder {\n    fn from(fr: FolderResponse) -\u003e Folder {\n        Folder {\n            uuid: fr.uuid.clone(),\n            name: fr.name.clone(),\n            path: \"\".to_string(),\n        }\n    }\n}\n\nimpl From\u003cSingleFolderResponse\u003e for Folder {\n    fn from(fr: SingleFolderResponse) -\u003e Folder {\n        Folder {\n            uuid: fr.folder.uuid.clone(),\n            name: fr.folder.name.clone(),\n            path: \"\".to_string(),\n        }\n    }\n}\n\nimpl CsvRecordProducer for Folder {\n    /// Get the CSV header row for Folder records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\"NAME\".to_string(), \"UUID\".to_string()]\n    }\n\n    /// Convert the Folder to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![self.name(), self.uuid().to_string()]]\n    }\n\n    /// Generate CSV output with a header row\n    fn to_csv(\u0026self, with_headers: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        let mut wtr = Writer::from_writer(vec![]);\n\n        if with_headers {\n            wtr.write_record(Self::csv_header()).map_err(|e| {\n                FormattingError::CsvWriterError(format!(\"Failed to write CSV header: {}\", e))\n            })?;\n        }\n\n        // Sort records by folder name\n        let mut records = self.as_csv_records();\n        records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n        for record in records {\n            wtr.write_record(\u0026record).map_err(|e| {\n                FormattingError::CsvWriterError(format!(\"Failed to write CSV record: {}\", e))\n            })?;\n        }\n        let data = wtr.into_inner().map_err(|e| {\n            FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n        })?;\n        String::from_utf8(data).map_err(FormattingError::Utf8Error)\n    }\n}\n\nimpl OutputFormatter for Folder {\n    type Item = Folder;\n\n    /// Format the Folder according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Builder for constructing Folder instances with a fluent API\npub struct FolderBuilder {\n    /// UUID of the folder from the API\n    uuid: Option\u003cUuid\u003e,\n    /// Name of the folder\n    name: Option\u003cString\u003e,\n    /// Full path of the folder\n    path: Option\u003cString\u003e,\n}\n\nimpl FolderBuilder {\n    /// Create a new FolderBuilder\n    fn new() -\u003e FolderBuilder {\n        FolderBuilder {\n            uuid: None,\n            name: None,\n            path: None,\n        }\n    }\n\n    /// Set the UUID of the folder\n    pub fn uuid(\u0026mut self, uuid: Uuid) -\u003e \u0026mut FolderBuilder {\n        self.uuid = Some(uuid);\n        self\n    }\n\n    /// Set the name of the folder\n    pub fn name(\u0026mut self, name: \u0026str) -\u003e \u0026mut FolderBuilder {\n        self.name = Some(name.to_owned());\n        self\n    }\n\n    /// Set the path of the folder\n    pub fn path(\u0026mut self, path: String) -\u003e \u0026mut FolderBuilder {\n        self.path = Some(path);\n        self\n    }\n\n    /// Build the Folder instance\n    ///\n    /// # Returns\n    /// * `Ok(Folder)` - The constructed Folder instance\n    /// * `Err(ModelError)` - If required properties are missing\n    pub fn build(\u0026self) -\u003e Result\u003cFolder, ModelError\u003e {\n        let uuid = match \u0026self.uuid {\n            Some(uuid) =\u003e uuid.clone(),\n            None =\u003e {\n                return Err(ModelError::MissingPropertyValue {\n                    name: \"uuid\".to_string(),\n                })\n            }\n        };\n\n        let name = match \u0026self.name {\n            Some(name) =\u003e name.clone(),\n            None =\u003e {\n                return Err(ModelError::MissingPropertyValue {\n                    name: \"name\".to_string(),\n                })\n            }\n        };\n\n        let path = match \u0026self.path {\n            Some(path) =\u003e path.clone(),\n            None =\u003e name.clone(),\n        };\n\n        Ok(Folder::new(uuid, name, path))\n    }\n}\n\n/// A collection of Folder instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderList {\n    /// Map of folder hash keys to Folder instances\n    folders: Vec\u003cFolder\u003e,\n}\n\nimpl FolderList {\n    /// Create a new empty FolderList\n    pub fn empty() -\u003e FolderList {\n        FolderList {\n            folders: Vec::new(),\n        }\n    }\n\n    pub fn new(folders: Vec\u003cFolder\u003e) -\u003e Self {\n        FolderList {\n            folders: folders.clone(),\n        }\n    }\n\n    /// Check if the FolderList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.folders.is_empty()\n    }\n\n    /// Get the number of folders in the FolderList\n    pub fn len(\u0026self) -\u003e usize {\n        self.folders.len()\n    }\n\n    /// Find a folder in the FolderList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the folder to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Folder)` - If a folder with the specified name exists\n    /// * `None` - If no folder with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Folder\u003e {\n        self.folders.iter().find(|f| f.name.eq(name))\n    }\n\n    pub fn add(\u0026mut self, folder: Folder) {\n        self.folders.push(folder)\n    }\n\n    pub fn folders(\u0026self) -\u003e Vec\u003cFolder\u003e {\n        self.folders.clone()\n    }\n}\n\nimpl Default for FolderList {\n    fn default() -\u003e Self {\n        FolderList::empty()\n    }\n}\n\nimpl FromIterator\u003cFolder\u003e for FolderList {\n    /// Create a FolderList from an iterator of Folder instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Folder\u003e\u003e(iter: I) -\u003e FolderList {\n        let mut folders = FolderList::empty();\n        for f in iter {\n            folders.add(f);\n        }\n\n        folders\n    }\n}\n\n// for: `for folder in \u0026folder_list`\nimpl\u003c'a\u003e IntoIterator for \u0026'a FolderList {\n    type Item = \u0026'a Folder;\n    type IntoIter = std::slice::Iter\u003c'a, Folder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.iter()\n    }\n}\n\n// for: `for folder in \u0026mut folder_list`\nimpl\u003c'a\u003e IntoIterator for \u0026'a mut FolderList {\n    type Item = \u0026'a mut Folder;\n    type IntoIter = std::slice::IterMut\u003c'a, Folder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.iter_mut()\n    }\n}\n\n// for: `for folder in folder_list` (consumes the list)\nimpl IntoIterator for FolderList {\n    type Item = Folder;\n    type IntoIter = std::vec::IntoIter\u003cFolder\u003e;\n    fn into_iter(self) -\u003e Self::IntoIter {\n        self.folders.into_iter()\n    }\n}\n\nimpl From\u003cFolderListResponse\u003e for FolderList {\n    fn from(response: FolderListResponse) -\u003e Self {\n        let folders: Vec\u003cFolder\u003e = response.folders.into_iter().map(|f| f.into()).collect();\n        FolderList::new(folders)\n    }\n}\n\nimpl CsvRecordProducer for FolderList {\n    /// Get the CSV header row for FolderList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        Folder::csv_header()\n    }\n\n    /// Convert the FolderList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for folder in self.folders.iter() {\n            records.push(folder.as_csv_records()[0].clone());\n        }\n\n        records\n    }\n}\n\nimpl OutputFormatter for FolderList {\n    type Item = FolderList;\n\n    /// Format the FolderList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output, sorted by name\n                let mut folders: Vec\u003cFolder\u003e = self.folders.iter().cloned().collect();\n                folders.sort_by_key(|a| a.name());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026folders)\n                } else {\n                    serde_json::to_string(\u0026folders)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())?;\n                }\n\n                // Sort records by folder name\n                let mut records = self.as_csv_records();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For folder list, tree format is the same as JSON\n                // In practice, tree format should be handled at the command level\n                // where we have access to the full hierarchy\n                let mut folders: Vec\u003cFolder\u003e = self.folders.iter().cloned().collect();\n                folders.sort_by_key(|a| a.name());\n                let json = serde_json::to_string_pretty(\u0026folders);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n        }\n    }\n}\n\n// New models for Physna V3 API\n\n// Represents a tenant configuration\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct Tenant {\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    pub name: String,\n    #[serde(rename = \"description\")]\n    pub description: String,\n}\n\nimpl TryFrom\u003c\u0026TenantSetting\u003e for Tenant {\n    type Error = uuid::Error;\n\n    fn try_from(tenant_setting: \u0026TenantSetting) -\u003e Result\u003cSelf, Self::Error\u003e {\n        Ok(Tenant {\n            uuid: tenant_setting.tenant_uuid.to_owned(),\n            name: tenant_setting.tenant_short_name.to_owned(),\n            description: tenant_setting.tenant_display_name.to_owned(),\n        })\n    }\n}\n\nimpl crate::format::Formattable for Tenant {\n    fn format(\u0026self, f: \u0026crate::format::OutputFormat) -\u003e Result\u003cString, crate::format::FormattingError\u003e {\n        match f {\n            crate::format::OutputFormat::Json(options) =\u003e {\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(self)\n                } else {\n                    serde_json::to_string(self)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(crate::format::FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            crate::format::OutputFormat::Csv(options) =\u003e {\n                // For CSV format, output header with tenant name, UUID, and description columns only if with_headers is true\n                let mut wtr = csv::Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.serialize((\"TENANT_NAME\", \"TENANT_UUID\", \"TENANT_DESCRIPTION\"))?;\n                }\n\n                wtr.serialize((\u0026self.name, \u0026self.uuid.to_string(), \u0026self.description))?;\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(crate::format::FormattingError::Utf8Error)\n            }\n            crate::format::OutputFormat::Tree(_) =\u003e {\n                // For tree format, include name, UUID, and description\n                Ok(format!(\"{} ({}) - {}\", self.name, self.uuid, self.description))\n            }\n        }\n    }\n}\n\n/// A collection of Tenant instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TenantList {\n    /// Vector of Tenant instances\n    tenants: Vec\u003cTenant\u003e,\n}\n\nimpl TenantList {\n    /// Create a new empty TenantList\n    pub fn empty() -\u003e TenantList {\n        TenantList {\n            tenants: Vec::new(),\n        }\n    }\n\n    pub fn new(tenants: Vec\u003cTenant\u003e) -\u003e Self {\n        TenantList {\n            tenants: tenants.clone(),\n        }\n    }\n\n    /// Check if the TenantList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.tenants.is_empty()\n    }\n\n    /// Get the number of tenants in the TenantList\n    pub fn len(\u0026self) -\u003e usize {\n        self.tenants.len()\n    }\n\n    /// Find a tenant in the TenantList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Tenant)` - If a tenant with the specified name exists\n    /// * `None` - If no tenant with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Tenant\u003e {\n        self.tenants.iter().find(|t| t.name.eq(name))\n    }\n\n    pub fn add(\u0026mut self, tenant: Tenant) {\n        self.tenants.push(tenant)\n    }\n\n    pub fn tenants(\u0026self) -\u003e Vec\u003cTenant\u003e {\n        self.tenants.clone()\n    }\n}\n\nimpl Default for TenantList {\n    fn default() -\u003e Self {\n        Self::empty()\n    }\n}\n\nimpl FromIterator\u003cTenant\u003e for TenantList {\n    /// Create a TenantList from an iterator of Tenant instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Tenant\u003e\u003e(iter: I) -\u003e TenantList {\n        let mut tenants = TenantList::empty();\n        for tenant in iter {\n            tenants.add(tenant);\n        }\n        tenants\n    }\n}\n\nimpl\u003c'a\u003e IntoIterator for \u0026'a TenantList {\n    type Item = \u0026'a Tenant;\n    type IntoIter = std::slice::Iter\u003c'a, Tenant\u003e;\n\n    /// Convert the TenantList to an iterator\n    fn into_iter(self) -\u003e std::slice::Iter\u003c'a, Tenant\u003e {\n        self.tenants.iter()\n    }\n}\n\nimpl\u003c'a\u003e IntoIterator for \u0026'a mut TenantList {\n    type Item = \u0026'a mut Tenant;\n    type IntoIter = std::slice::IterMut\u003c'a, Tenant\u003e;\n\n    /// Convert the TenantList to a mutable iterator\n    fn into_iter(self) -\u003e std::slice::IterMut\u003c'a, Tenant\u003e {\n        self.tenants.iter_mut()\n    }\n}\n\nimpl IntoIterator for TenantList {\n    type Item = Tenant;\n    type IntoIter = std::vec::IntoIter\u003cTenant\u003e;\n\n    /// Convert the TenantList to an owned iterator\n    fn into_iter(self) -\u003e std::vec::IntoIter\u003cTenant\u003e {\n        self.tenants.into_iter()\n    }\n}\n\nimpl From\u003cVec\u003cTenantSetting\u003e\u003e for TenantList {\n    fn from(settings: Vec\u003cTenantSetting\u003e) -\u003e Self {\n        let tenants = settings\n            .into_iter()\n            .map(|ts| Tenant {\n                uuid: ts.tenant_uuid,\n                name: ts.tenant_short_name,\n                description: ts.tenant_display_name,\n            })\n            .collect();\n        TenantList::new(tenants)\n    }\n}\n\nimpl CsvRecordProducer for TenantList {\n    /// Get the CSV header row for TenantList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\"TENANT_NAME\".to_string(), \"TENANT_UUID\".to_string(), \"TENANT_DESCRIPTION\".to_string()]\n    }\n\n    /// Convert the TenantList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.tenants\n            .iter()\n            .map(|tenant| vec![tenant.name.clone(), tenant.uuid.to_string(), tenant.description.clone()])\n            .collect()\n    }\n}\n\nimpl OutputFormatter for TenantList {\n    type Item = TenantList;\n\n    /// Format the TenantList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output, sorted by name\n                let mut tenants: Vec\u003cTenant\u003e = self.tenants.iter().cloned().collect();\n                tenants.sort_by_key(|a| a.name.clone());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026tenants)\n                } else {\n                    serde_json::to_string(\u0026tenants)\n                };\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())?;\n                }\n\n                // Sort records by tenant name\n                let mut records = self.as_csv_records();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0])); // Sort by NAME column (index 0)\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For tree format, include name, UUID, and description\n                let mut output = String::new();\n                for tenant in \u0026self.tenants {\n                    output.push_str(\u0026format!(\"{} ({}) - {}\\n\", tenant.name, tenant.uuid, tenant.description));\n                }\n                Ok(output)\n            }\n        }\n    }\n}\n\n/// Represents a tenant setting for a user\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TenantSetting {\n    /// The ID of the tenant\n    #[serde(rename = \"tenantId\")]\n    pub tenant_uuid: Uuid,\n    /// The role of the user in the tenant\n    #[serde(rename = \"tenantRole\")]\n    pub tenant_role: String,\n    /// Whether the user is enabled in this tenant\n    #[serde(rename = \"userEnabled\")]\n    pub user_enabled: bool,\n    /// The display name of the tenant\n    #[serde(rename = \"tenantDisplayName\")]\n    pub tenant_display_name: String,\n    /// The short name of the tenant\n    #[serde(rename = \"tenantShortName\")]\n    pub tenant_short_name: String,\n}\n\n/// Represents a user in the Physna system\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct User {\n    /// The display name of the user\n    #[serde(rename = \"displayName\")]\n    pub display_name: String,\n    /// The tenant settings for the user\n    pub settings: Vec\u003cTenantSetting\u003e,\n}\n\n/// Represents the response for getting the current user\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct CurrentUserResponse {\n    /// The user data\n    pub user: User,\n}\n\nimpl CurrentUserResponse {\n    /// Get a tenant setting by name (display name or short name)\n    ///\n    /// # Arguments\n    /// * `name` - The name of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026TenantSetting)` - If a tenant with the specified name exists\n    /// * `None` - If no tenant with the specified name exists\n    pub fn get_tenant_by_name(\u0026self, name: \u0026str) -\u003e Option\u003c\u0026TenantSetting\u003e {\n        self.user.settings.iter().find(|setting| {\n            setting.tenant_display_name == name || setting.tenant_short_name == name\n        })\n    }\n\n    /// Get a tenant setting by ID\n    ///\n    /// # Arguments\n    /// * `uuid` - The UUID of the tenant to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026TenantSetting)` - If a tenant with the specified UUID exists\n    /// * `None` - If no tenant with the specified ID exists\n    pub fn get_tenant_by_uuid(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026TenantSetting\u003e {\n        self.user\n            .settings\n            .iter()\n            .find(|setting| setting.tenant_uuid.eq(uuid))\n    }\n}\n\n// Folder models for Physna V3 API\n\n/// Represents a folder response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderResponse {\n    /// The ID of the folder\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    /// The ID of the tenant that owns the folder\n    #[serde(rename = \"tenantId\")]\n    pub tenant_uuid: Uuid,\n    /// The name of the folder\n    pub name: String,\n    /// The creation timestamp of the folder\n    #[serde(rename = \"createdAt\")]\n    pub created_at: String,\n    /// The last update timestamp of the folder\n    #[serde(rename = \"updatedAt\")]\n    pub updated_at: String,\n    /// The number of assets in the folder\n    #[serde(rename = \"assetsCount\")]\n    pub assets_count: u32,\n    /// The number of subfolders in the folder\n    #[serde(rename = \"foldersCount\")]\n    pub folders_count: u32,\n    /// The ID of the parent folder, if any\n    #[serde(rename = \"parentFolderId\", skip_serializing_if = \"Option::is_none\")]\n    pub parent_folder_uuid: Option\u003cUuid\u003e,\n    /// The ID of the owner, if any\n    #[serde(rename = \"ownerId\", skip_serializing_if = \"Option::is_none\")]\n    pub owner_id: Option\u003cString\u003e,\n}\n\nimpl FolderResponse {\n    pub fn new(name: \u0026str) -\u003e Self {\n        FolderResponse {\n            uuid: Uuid::new_v4(),\n            tenant_uuid: Uuid::new_v4(),\n            name: name.to_string(),\n            created_at: String::default(),\n            updated_at: String::default(),\n            assets_count: 0,\n            folders_count: 0,\n            parent_folder_uuid: None,\n            owner_id: None,\n        }\n    }\n}\n\n// Asset models for Physna V3 API\n\n/// Represents an asset response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetResponse {\n    /// The UUID of the asset (mapped from JSON \"id\" field)\n    #[serde(rename = \"id\")]\n    pub uuid: Uuid,\n    /// The UUID of the tenant that owns the asset\n    #[serde(rename = \"tenantId\")]\n    pub tenant_id: Uuid,\n    /// The path of the asset\n    pub path: String,\n    /// The ID of the folder containing the asset\n    #[serde(rename = \"folderId\", skip_serializing_if = \"Option::is_none\")]\n    pub folder_id: Option\u003cUuid\u003e,\n    /// The type of the asset\n    #[serde(rename = \"type\")]\n    pub asset_type: String,\n    /// The creation timestamp of the asset\n    #[serde(rename = \"createdAt\")]\n    pub created_at: String,\n    /// The last update timestamp of the asset\n    #[serde(rename = \"updatedAt\")]\n    pub updated_at: String,\n    /// The state of the asset\n    pub state: String,\n    /// Whether the asset is an assembly\n    #[serde(rename = \"isAssembly\")]\n    pub is_assembly: bool,\n    /// Metadata associated with the asset\n    #[serde(rename = \"metadata\")]\n    pub metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e,\n    /// The ID of the parent folder, if any\n    #[serde(rename = \"parentFolderId\", skip_serializing_if = \"Option::is_none\")]\n    pub parent_folder_id: Option\u003cUuid\u003e,\n    /// The ID of the owner, if any\n    #[serde(rename = \"ownerId\", skip_serializing_if = \"Option::is_none\")]\n    pub owner_id: Option\u003cString\u003e,\n}\n\nimpl AssetResponse {}\n\n/// Represents a single asset response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct SingleAssetResponse {\n    /// The asset data\n    #[serde(rename = \"asset\")]\n    pub asset: AssetResponse,\n}\n\n/// Represents an asset list response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetListResponse {\n    /// The list of assets (can be named either \"assets\" or \"contents\" in API responses)\n    #[serde(alias = \"contents\")]\n    pub assets: Vec\u003cAssetResponse\u003e,\n    /// Pagination data\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n}\n\nimpl FolderResponse {\n    /// Convert the FolderResponse to a Folder with the specified path\n    ///\n    /// # Arguments\n    /// * `path` - The path to use for the folder\n    ///\n    /// # Returns\n    /// A new Folder instance\n    pub fn to_folder(\u0026self, path: String) -\u003e Folder {\n        Folder::from_folder_response(self.clone(), path)\n    }\n}\n\nimpl AssetListResponse {\n    /// Convert the AssetListResponse to an AssetList\n    ///\n    /// # Returns\n    /// A new AssetList instance containing the assets from the response\n    pub fn to_asset_list(\u0026self) -\u003e AssetList {\n        let mut asset_list = AssetList::empty();\n        for asset_response in \u0026self.assets {\n            // For assets, use the path from the API response\n            let asset: Asset = asset_response.into();\n            asset_list.insert(asset);\n        }\n        asset_list\n    }\n}\n\n/// Represents a single folder response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct SingleFolderResponse {\n    /// The folder data\n    #[serde(rename = \"folder\")]\n    pub folder: FolderResponse,\n}\n\n/// Represents a folder list response from the Physna V3 API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderListResponse {\n    /// The list of folders (can be named either \"folders\" or \"contents\" in API responses)\n    #[serde(alias = \"contents\")]\n    pub folders: Vec\u003cFolderResponse\u003e,\n    /// Pagination data\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n}\n\nimpl FolderListResponse {\n    /// Convert the FolderListResponse to a FolderList\n    ///\n    /// # Returns\n    /// A new FolderList instance containing the folders from the response\n    pub fn to_folder_list(\u0026self) -\u003e FolderList {\n        let mut folder_list = FolderList::empty();\n        for folder_response in \u0026self.folders {\n            // For now, we'll use the folder name as the path since we don't have the full hierarchy yet\n            // In a real implementation, we would need to build the full hierarchy to get proper paths\n            let folder = folder_response.to_folder(folder_response.name.clone());\n            folder_list.add(folder);\n        }\n        folder_list\n    }\n}\n\n/// Represents pagination data in API responses\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PageData {\n    /// Total number of items\n    pub total: usize,\n    /// Number of items per page\n    #[serde(rename = \"perPage\")]\n    pub per_page: usize,\n    /// Current page number (1-based)\n    #[serde(rename = \"currentPage\")]\n    pub current_page: usize,\n    /// Last page number\n    #[serde(rename = \"lastPage\")]\n    pub last_page: usize,\n    /// Start index of items on this page\n    #[serde(rename = \"startIndex\")]\n    pub start_index: usize,\n    /// End index of items on this page\n    #[serde(rename = \"endIndex\")]\n    pub end_index: usize,\n}\n\n// Asset models for Physna V3 API\n\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct AssetMetadata {\n    meta: HashMap\u003cString, String\u003e,\n}\n\nimpl AssetMetadata {\n    pub fn new() -\u003e Self {\n        Self {\n            meta: HashMap::new(),\n        }\n    }\n\n    pub fn keys(\u0026self) -\u003e impl Iterator\u003cItem = \u0026String\u003e {\n        self.meta.keys()\n    }\n\n    pub fn get(\u0026self, key: \u0026String) -\u003e Option\u003c\u0026String\u003e {\n        self.meta.get(key)\n    }\n}\n\nimpl From\u003cHashMap\u003cString, String\u003e\u003e for AssetMetadata {\n    fn from(meta: HashMap\u003cString, String\u003e) -\u003e Self {\n        Self { meta }\n    }\n}\n\nimpl From\u003cHashMap\u003cString, serde_json::Value\u003e\u003e for AssetMetadata {\n    fn from(ht: HashMap\u003cString, serde_json::Value\u003e) -\u003e Self {\n        let meta: HashMap\u003cString, String\u003e = ht\n            .iter()\n            .map(|(k, v)| {\n                let value_string = if let Some(str_val) = v.as_str() {\n                    str_val.to_string()\n                } else {\n                    v.to_string()  // fallback to generic string representation for non-string values\n                };\n                (k.to_owned(), value_string)\n            })\n            .collect();\n\n        Self::from(meta)\n    }\n}\n\nimpl OutputFormatter for AssetMetadata {\n    type Item = AssetList;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = Writer::from_writer(vec![]);\n                if options.with_headers {\n                    wtr.write_record(vec![\"NAME\", \"VALUE\"])?;\n                }\n\n                // Sort records by folder name\n                let mut records: Vec\u003cVec\u003cString\u003e\u003e = self\n                    .meta\n                    .iter()\n                    .map(|(k, v)| vec![k.to_owned(), v.to_owned()])\n                    .collect();\n                records.sort_by(|a, b| a[0].cmp(\u0026b[0]));\n\n                for record in records {\n                    wtr.write_record(\u0026record).map_err(|e| {\n                        FormattingError::CsvWriterError(format!(\n                            \"Failed to write CSV record: {}\",\n                            e\n                        ))\n                    })?;\n                }\n                let data = wtr.into_inner().map_err(|e| {\n                    FormattingError::CsvWriterError(format!(\"Failed to finalize CSV: {}\", e))\n                })?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents an asset in the Physna system\n///\n/// This struct represents an asset entity in the Physna system with both\n/// internal tracking properties and API-related identifiers.\n///\n/// Assets are 3D models or other geometric files that can be stored in\n/// Physna folders and subjected to geometric analysis and matching.\n///\n/// # Fields\n/// * `uuid` - Unique identifier from the Physna API (required for API operations)\n/// * `name` - Display name of the asset (derived from the file name part of the path)\n/// * `path` - Full path of the asset in the folder hierarchy (e.g., \"/Root/Folder/file.stl\")\n/// * `file_size` - Size of the uploaded file in bytes (optional)\n/// * `file_type` - File type/extension (e.g., \"stl\", \"step\", \"iges\") (optional)\n/// * `processing_status` - Current processing status (e.g., \"processed\", \"processing\", \"failed\") (optional)\n/// * `created_at` - Creation timestamp (optional)\n/// * `updated_at` - Last update timestamp (optional)\n///\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct Asset {\n    uuid: Uuid,\n    name: String,\n    path: String,\n    file_size: Option\u003cu64\u003e,\n    file_type: Option\u003cString\u003e,\n    processing_status: Option\u003cString\u003e,\n    created_at: Option\u003cString\u003e,\n    updated_at: Option\u003cString\u003e,\n    metadata: Option\u003cAssetMetadata\u003e,\n}\n\n// Equality is determined solely by name\nimpl PartialEq for Asset {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        self.name == other.name\n    }\n}\n\nimpl Eq for Asset {}\n\n// Ordering is determined solely by name\nimpl PartialOrd for Asset {\n    fn partial_cmp(\u0026self, other: \u0026Self) -\u003e Option\u003cOrdering\u003e {\n        Some(self.name.cmp(\u0026other.name))\n    }\n}\n\nimpl Ord for Asset {\n    fn cmp(\u0026self, other: \u0026Self) -\u003e Ordering {\n        self.name.cmp(\u0026other.name)\n    }\n}\n\nimpl Asset {\n    /// Create a new Asset instance\n    ///\n    /// # Arguments\n    /// * `uuid` - Optional UUID from the API\n    /// * `name` - Name of the asset\n    /// * `path` - Full path of the asset\n    /// * `file_size` - Optional file size of the asset\n    /// * `file_type` - Optional file type of the asset\n    /// * `processing_status` - Optional processing status of the asset\n    /// * `created_at` - Optional creation timestamp of the asset\n    /// * `updated_at` - Optional last update timestamp of the asset\n    /// * `metadata` - Optional metadata key-value pairs for the asset\n    pub fn new(\n        uuid: Uuid,\n        name: String,\n        path: String,\n        file_size: Option\u003cu64\u003e,\n        file_type: Option\u003cString\u003e,\n        processing_status: Option\u003cString\u003e,\n        created_at: Option\u003cString\u003e,\n        updated_at: Option\u003cString\u003e,\n        metadata: Option\u003cAssetMetadata\u003e,\n    ) -\u003e Asset {\n        Asset {\n            uuid,\n            name,\n            path,\n            file_size,\n            file_type,\n            processing_status,\n            created_at,\n            updated_at,\n            metadata,\n        }\n    }\n\n    /// Get the UUID of the asset\n    pub fn uuid(\u0026self) -\u003e Uuid {\n        self.uuid.to_owned()\n    }\n\n    /// Set the name of the asset\n    pub fn set_name(\u0026mut self, name: String) {\n        self.name = name;\n    }\n\n    /// Get the name of the asset\n    pub fn name(\u0026self) -\u003e String {\n        self.name.clone()\n    }\n\n    /// Get the path of the asset\n    pub fn path(\u0026self) -\u003e String {\n        self.path.clone()\n    }\n\n    /// Set the path of the asset\n    pub fn set_path(\u0026mut self, path: String) {\n        self.path = path;\n    }\n\n    /// Get the file size of the asset\n    pub fn file_size(\u0026self) -\u003e Option\u003cu64\u003e {\n        self.file_size\n    }\n\n    /// Get the file type of the asset\n    pub fn file_type(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.file_type.as_ref()\n    }\n\n    /// Get the processing status of the asset\n    pub fn processing_status(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.processing_status.as_ref()\n    }\n\n    /// Get the creation timestamp of the asset\n    pub fn created_at(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.created_at.as_ref()\n    }\n\n    /// Get the last update timestamp of the asset\n    pub fn updated_at(\u0026self) -\u003e Option\u003c\u0026String\u003e {\n        self.updated_at.as_ref()\n    }\n\n    /// Get the metadata of the asset\n    pub fn metadata(\u0026self) -\u003e Option\u003c\u0026AssetMetadata\u003e {\n        self.metadata.as_ref()\n    }\n}\n\nimpl From\u003c\u0026AssetResponse\u003e for Asset {\n    fn from(asset_response: \u0026AssetResponse) -\u003e Self {\n        // Extract the name from the path (last part after the last slash)\n        let name = asset_response\n            .path\n            .split('/')\n            .next_back()\n            .unwrap_or(\u0026asset_response.path)\n            .to_string();\n\n        Asset::new(\n            asset_response.uuid.to_owned(),\n            name,\n            asset_response.path.clone(),\n            None, // file_size not in current API response\n            Some(asset_response.asset_type.clone()),\n            Some(asset_response.state.clone()),\n            Some(asset_response.created_at.clone()),\n            Some(asset_response.updated_at.clone()),\n            Some(asset_response.metadata.clone().into()),\n        )\n    }\n}\n\nimpl From\u003cAssetResponse\u003e for Asset {\n    fn from(asset_response: AssetResponse) -\u003e Self {\n        \u003cAsset as From\u003c\u0026AssetResponse\u003e\u003e::from(\u0026asset_response)\n    }\n}\n\nimpl CsvRecordProducer for Asset {\n    /// Get the CSV header row for Asset records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"NAME\".to_string(),\n            \"PATH\".to_string(),\n            \"TYPE\".to_string(),\n            \"STATE\".to_string(),\n            \"UUID\".to_string(),\n        ]\n    }\n\n    /// Convert the Asset to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.name(),\n            self.path(),\n            self.file_type().cloned().unwrap_or_default(),\n            self.processing_status().cloned().unwrap_or_default(),\n            self.uuid().to_string(),\n        ]]\n    }\n\n    /// Get the extended CSV header row for Asset records including metadata\n    fn csv_header_with_metadata() -\u003e Vec\u003cString\u003e {\n        let header = Self::csv_header();\n        // We'll add metadata columns dynamically when we know what metadata keys exist\n        header\n    }\n\n    /// Convert the Asset to CSV records including metadata\n    fn as_csv_records_with_metadata(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let record = vec![\n            self.name(),\n            self.path(),\n            self.file_type().cloned().unwrap_or_default(),\n            self.processing_status().cloned().unwrap_or_default(),\n            self.uuid().to_string(),\n        ];\n\n        // Add metadata values if they exist\n        if let Some(_metadata) = self.metadata() {\n            // We'll need to collect all unique metadata keys when building the CSV\n            // For now, we just return the basic record without metadata columns\n            // The metadata will be added when building the full CSV with dynamic columns\n        }\n\n        vec![record]\n    }\n}\n\nimpl OutputFormatter for Asset {\n    type Item = Asset;\n\n    /// Format the Asset according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// A collection of Asset instances\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetList {\n    /// Map of asset IDs to Asset instances\n    assets: HashMap\u003cUuid, Asset\u003e, // ID -\u003e Asset\n}\n\nimpl AssetList {\n    /// Create a new empty AssetList\n    pub fn empty() -\u003e AssetList {\n        AssetList {\n            assets: HashMap::new(),\n        }\n    }\n\n    /// Check if the AssetList is empty\n    pub fn is_empty(\u0026self) -\u003e bool {\n        self.assets.is_empty()\n    }\n\n    /// Get the number of assets in the AssetList\n    pub fn len(\u0026self) -\u003e usize {\n        self.assets.len()\n    }\n\n    /// Insert an asset into the AssetList\n    ///\n    /// # Arguments\n    /// * `asset` - The asset to insert\n    pub fn insert(\u0026mut self, asset: Asset) {\n        self.assets.insert(asset.uuid(), asset);\n    }\n\n    /// Remove an asset from the AssetList by ID\n    ///\n    /// # Arguments\n    /// * `uuid` - The ID of the asset to remove\n    pub fn remove(\u0026mut self, uuid: \u0026Uuid) {\n        self.assets.remove(uuid);\n    }\n\n    /// Get an asset from the AssetList by UUID\n    ///\n    /// # Arguments\n    /// * `uuid` - The UUID of the asset to retrieve\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified ID exists\n    /// * `None` - If no asset with the specified ID exists\n    pub fn get(\u0026self, uuid: \u0026Uuid) -\u003e Option\u003c\u0026Asset\u003e {\n        self.assets.get(uuid)\n    }\n\n    /// Find an asset in the AssetList by name\n    ///\n    /// # Arguments\n    /// * `name` - The name of the asset to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified name exists\n    /// * `None` - If no asset with the specified name exists\n    pub fn find_by_name(\u0026self, name: \u0026String) -\u003e Option\u003c\u0026Asset\u003e {\n        let result = self.assets.iter().find(|(_, f)| f.name.eq(name));\n\n        match result {\n            Some((_key, folder)) =\u003e Some(folder),\n            None =\u003e None,\n        }\n    }\n\n    /// Find an asset in the AssetList by path\n    ///\n    /// # Arguments\n    /// * `path` - The path of the asset to find\n    ///\n    /// # Returns\n    /// * `Some(\u0026Asset)` - If an asset with the specified path exists\n    /// * `None` - If no asset with the specified path exists\n    pub fn find_by_path(\u0026self, path: \u0026str) -\u003e Option\u003c\u0026Asset\u003e {\n        let result = self.assets.iter().find(|(_, a)| a.path().eq(path));\n\n        match result {\n            Some((_key, asset)) =\u003e Some(asset),\n            None =\u003e None,\n        }\n    }\n\n    /// Get all assets as a vector\n    ///\n    /// # Returns\n    /// A vector containing all assets in the AssetList\n    pub fn get_all_assets(\u0026self) -\u003e Vec\u003c\u0026Asset\u003e {\n        self.assets.values().collect()\n    }\n\n    /// Convert the AssetList to CSV records including metadata\n    ///\n    /// This method converts the AssetList to CSV records with additional metadata columns.\n    ///\n    /// # Arguments\n    /// * `metadata_keys` - Sorted list of metadata keys to include as columns\n    ///\n    /// # Returns\n    /// Vector of CSV records with metadata columns\n    fn as_csv_records_with_metadata(\u0026self, metadata_keys: \u0026[String]) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for asset in self.assets.values() {\n            // Start with standard asset record\n            let mut record = vec![\n                asset.name(),\n                asset.path(),\n                asset.file_type().cloned().unwrap_or_default(),\n                asset.processing_status().cloned().unwrap_or_default(),\n                asset.uuid().to_string(),\n            ];\n\n            // Add metadata values for each key\n            if let Some(metadata) = asset.metadata() {\n                for key in metadata_keys {\n                    let value = metadata.get(key).cloned().unwrap_or_default();\n                    record.push(value);\n                }\n            } else {\n                // No metadata, add empty strings for all metadata columns\n                for _ in metadata_keys {\n                    record.push(String::new());\n                }\n            }\n\n            records.push(record);\n        }\n\n        records\n    }\n}\n\nimpl Default for AssetList {\n    fn default() -\u003e Self {\n        AssetList::empty()\n    }\n}\n\nimpl FromIterator\u003cAsset\u003e for AssetList {\n    /// Create an AssetList from an iterator of Asset instances\n    fn from_iter\u003cI: IntoIterator\u003cItem = Asset\u003e\u003e(iter: I) -\u003e AssetList {\n        let mut assets = AssetList::empty();\n        for a in iter {\n            assets.insert(a);\n        }\n\n        assets\n    }\n}\n\nimpl From\u003cVec\u003cAsset\u003e\u003e for AssetList {\n    fn from(assets: Vec\u003cAsset\u003e) -\u003e Self {\n        AssetList::from_iter(assets.into_iter())\n    }\n}\n\nimpl From\u003cAssetListResponse\u003e for AssetList {\n    fn from(response: AssetListResponse) -\u003e Self {\n        response.to_asset_list()\n    }\n}\n\nimpl CsvRecordProducer for AssetList {\n    /// Get the CSV header row for AssetList records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        Asset::csv_header()\n    }\n\n    /// Convert the AssetList to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        let mut records: Vec\u003cVec\u003cString\u003e\u003e = Vec::new();\n\n        for asset in self.assets.values() {\n            records.push(asset.as_csv_records()[0].clone());\n        }\n\n        records\n    }\n}\n\nimpl OutputFormatter for AssetList {\n    type Item = AssetList;\n\n    /// Format the AssetList according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV, or Tree)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, format: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match format {\n            OutputFormat::Json(options) =\u003e {\n                // convert to a simple vector for output and sort by path\n                let mut assets: Vec\u003cAsset\u003e = self.assets.values().cloned().collect();\n                assets.sort_by_key(|a| a.path());\n                let json = if options.pretty {\n                    serde_json::to_string_pretty(\u0026assets)\n                } else {\n                    serde_json::to_string(\u0026assets)\n                };\n\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                if options.with_metadata {\n                    // For CSV with metadata, we need to collect all unique metadata keys first\n                    let mut metadata_keys: std::collections::HashSet\u003cString\u003e =\n                        std::collections::HashSet::new();\n\n                    // Collect all unique metadata keys\n                    for asset in self.assets.values() {\n                        if let Some(metadata) = asset.metadata() {\n                            for key in metadata.keys() {\n                                metadata_keys.insert(key.clone());\n                            }\n                        }\n                    }\n\n                    // Convert to sorted vector for consistent column ordering\n                    let mut sorted_metadata_keys: Vec\u003cString\u003e = metadata_keys.into_iter().collect();\n                    sorted_metadata_keys.sort();\n\n                    // Build CSV with metadata columns\n                    let buf = BufWriter::new(Vec::new());\n                    let mut wtr = Writer::from_writer(buf);\n\n                    if options.with_headers {\n                        // Build header with metadata columns\n                        let mut header = Asset::csv_header();\n                        for key in \u0026sorted_metadata_keys {\n                            header.push(key.clone());\n                        }\n                        wtr.write_record(\u0026header).unwrap();\n                    }\n\n                    // Sort records by asset path\n                    let mut records = self.as_csv_records_with_metadata(\u0026sorted_metadata_keys);\n                    records.sort_by(|a, b| a[1].cmp(\u0026b[1])); // Sort by PATH column (index 1)\n\n                    for record in records {\n                        wtr.write_record(\u0026record).unwrap();\n                    }\n\n                    match wtr.flush() {\n                        Ok(_) =\u003e {\n                            let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                            let csv = String::from_utf8(bytes).unwrap();\n                            Ok(csv.clone())\n                        }\n                        Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                    }\n                } else {\n                    let buf = BufWriter::new(Vec::new());\n                    let mut wtr = Writer::from_writer(buf);\n\n                    if options.with_headers {\n                        wtr.write_record(Self::csv_header()).unwrap();\n                    }\n\n                    // Sort records by asset path\n                    let mut records = self.as_csv_records();\n                    records.sort_by(|a, b| a[1].cmp(\u0026b[1])); // Sort by PATH column (index 1)\n\n                    for record in records {\n                        wtr.write_record(\u0026record).unwrap();\n                    }\n                    match wtr.flush() {\n                        Ok(_) =\u003e {\n                            let bytes = wtr.into_inner().unwrap().into_inner().unwrap();\n                            let csv = String::from_utf8(bytes).unwrap();\n                            Ok(csv.clone())\n                        }\n                        Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                    }\n                }\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // For asset list, tree format is the same as JSON\n                // In practice, tree format should be handled at the command level\n                // where we have access to the full hierarchy\n                // convert to a simple vector for output and sort by path\n                let mut assets: Vec\u003cAsset\u003e = self.assets.values().cloned().collect();\n                assets.sort_by_key(|a| a.path());\n                let json = serde_json::to_string_pretty(\u0026assets);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n        }\n    }\n}\n\n// Geometric search models\n\n/// Represents a match result from the geometric search\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricMatch {\n    /// The matching asset details\n    pub asset: AssetResponse,\n    /// The similarity percentage\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl GeometricMatch {\n    /// Get the asset ID\n    pub fn asset_uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.asset.uuid\n    }\n\n    /// Get the asset path\n    pub fn path(\u0026self) -\u003e \u0026str {\n        \u0026self.asset.path\n    }\n\n    /// Get the similarity score (0.0 to 100.0)\n    pub fn score(\u0026self) -\u003e f64 {\n        self.match_percentage\n    }\n}\n\n/// Represents a part match with forward and reverse similarity percentages\n///\n/// This structure holds information about a single part match, including the\n/// matching asset and both forward and reverse match percentages.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartMatch {\n    /// The matching asset details\n    pub asset: AssetResponse,\n    /// The forward match percentage\n    #[serde(rename = \"forwardMatchPercentage\")]\n    pub forward_match_percentage: Option\u003cf64\u003e,\n    /// The reverse match percentage\n    #[serde(rename = \"reverseMatchPercentage\")]\n    pub reverse_match_percentage: Option\u003cf64\u003e,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl PartMatch {\n    /// Get the asset ID\n    pub fn asset_uuid(\u0026self) -\u003e \u0026Uuid {\n        \u0026self.asset.uuid\n    }\n\n    /// Get the asset path\n    pub fn path(\u0026self) -\u003e \u0026str {\n        \u0026self.asset.path\n    }\n\n    /// Get the forward match percentage (0.0 to 100.0)\n    pub fn forward_score(\u0026self) -\u003e f64 {\n        self.forward_match_percentage.unwrap_or(0.0)\n    }\n\n    /// Get the reverse match percentage (0.0 to 100.0)\n    pub fn reverse_score(\u0026self) -\u003e f64 {\n        self.reverse_match_percentage.unwrap_or(0.0)\n    }\n}\n\n/// Response structure for part search operations\n///\n/// This structure holds the results of a part search operation, including\n/// the list of matching assets and pagination/filter information.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartSearchResponse {\n    /// The list of matching assets\n    pub matches: Vec\u003cPartMatch\u003e,\n    /// Pagination information\n    #[serde(rename = \"pageData\")]\n    pub page_data: Option\u003cPageData\u003e,\n    /// Filter information\n    #[serde(rename = \"filterData\")]\n    pub filter_data: Option\u003cFilterData\u003e,\n}\n\nimpl CsvRecordProducer for PartSearchResponse {\n    /// Get the CSV header row for PartSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"ASSET_ID\".to_string(),\n            \"PATH\".to_string(),\n            \"FORWARD_SCORE\".to_string(),\n            \"REVERSE_SCORE\".to_string(),\n        ]\n    }\n\n    /// Convert the PartSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    m.asset_uuid().to_string(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.forward_score()), // Full precision\n                    format!(\"{}\", m.reverse_score()), // Full precision\n                ]\n            })\n            .collect()\n    }\n}\n\n/// Enhanced response structure for part search that includes reference asset information\n///\n/// This structure extends the basic PartSearchResponse by including information about\n/// the reference asset that was searched against, making it easier to understand\n/// the context of the matches.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnhancedPartSearchResponse {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The list of matching assets\n    pub matches: Vec\u003cPartMatch\u003e,\n}\n\nimpl CsvRecordProducer for EnhancedPartSearchResponse {\n    /// Get the CSV header row for EnhancedPartSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"FORWARD_MATCH_PERCENTAGE\".to_string(),\n            \"REVERSE_MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the EnhancedPartSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    self.reference_asset.path.clone(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.forward_score()), // Full precision\n                    format!(\"{}\", m.reverse_score()), // Full precision\n                    self.reference_asset.uuid.to_string(),\n                    m.asset_uuid().to_string(),\n                    m.comparison_url.clone().unwrap_or_default(),\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for EnhancedPartSearchResponse {\n    type Item = EnhancedPartSearchResponse;\n\n    /// Format the EnhancedPartSearchResponse according to the specified output format\n    ///\n    /// This method formats the EnhancedPartSearchResponse based on the requested format:\n    /// - JSON: Outputs as JSON with optional pretty printing\n    /// - CSV: Outputs as CSV with optional headers\n    /// - Tree: Not supported for this type\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        // Extract the metadata flag from the format options\n        let with_metadata = match \u0026f {\n            OutputFormat::Json(options) =\u003e options.with_metadata,\n            OutputFormat::Csv(options) =\u003e options.with_metadata,\n            OutputFormat::Tree(options) =\u003e options.with_metadata,\n        };\n\n        self.format_with_metadata_flag(f, with_metadata)\n    }\n}\n\nimpl EnhancedPartSearchResponse {\n    /// Format the EnhancedPartSearchResponse with consideration for metadata flag\n    pub fn format_with_metadata_flag(\u0026self, f: OutputFormat, include_metadata: bool) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                // Pre-calculate the metadata keys that will be used for both header and all records to ensure consistency\n                let mut header_metadata_keys = Vec::new();\n                if include_metadata {\n                    // Collect all unique metadata keys from ALL matches for consistent headers\n                    let mut all_metadata_keys = std::collections::HashSet::new();\n\n                    // Collect metadata keys from reference asset\n                    for key in self.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Collect metadata keys from all matching assets\n                    for match_result in \u0026self.matches {\n                        for key in match_result.asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n                    }\n\n                    // Sort metadata keys for consistent column ordering\n                    let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                    sorted_keys.sort();\n                    header_metadata_keys = sorted_keys;\n                }\n\n                if options.with_headers {\n                    if include_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n\n                        // Extend headers with metadata columns using the pre-calculated keys\n                        for key in \u0026header_metadata_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedPartSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if include_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.forward_score()),\n                            format!(\"{}\", match_result.reverse_score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026header_metadata_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        let base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.forward_score()),\n                            format!(\"{}\", match_result.reverse_score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n                        wtr.serialize(base_values.as_slice())?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents a matching pair from part search with both reference and candidate assets\n///\n/// This structure holds information about a single part match, including both the\n/// reference asset (the one being searched) and the candidate asset (the matching one),\n/// along with both forward and reverse match percentages.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct PartMatchPair {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The matching candidate asset\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The forward match percentage\n    #[serde(rename = \"forwardMatchPercentage\")]\n    pub forward_match_percentage: Option\u003cf64\u003e,\n    /// The reverse match percentage\n    #[serde(rename = \"reverseMatchPercentage\")]\n    pub reverse_match_percentage: Option\u003cf64\u003e,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\n/// Represents a pair of assets that matched in a visual search\n/// This structure excludes match percentages since visual search doesn't provide them\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct VisualMatchPair {\n    /// The reference asset (the one being compared against)\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The candidate asset (the one that matched)\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl PartMatchPair {\n    /// Create a new PartMatchPair from a reference asset and a part match\n    pub fn from_reference_and_match(reference_asset: AssetResponse, match_result: PartMatch) -\u003e Self {\n        PartMatchPair {\n            reference_asset,\n            candidate_asset: match_result.asset,\n            forward_match_percentage: match_result.forward_match_percentage,\n            reverse_match_percentage: match_result.reverse_match_percentage,\n            transformation: match_result.transformation,\n            comparison_url: match_result.comparison_url,\n        }\n    }\n}\n\nimpl CsvRecordProducer for PartMatchPair {\n    /// Get the CSV header row for PartMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"SCORE_1\".to_string(), // Generic score field that can be forward match % for geometric/part or empty for visual\n            \"SCORE_2\".to_string(), // Generic score field that can be reverse match % for geometric/part or empty for visual\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the PartMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            format!(\"{}\", self.forward_match_percentage.unwrap_or(0.0)),\n            format!(\"{}\", self.reverse_match_percentage.unwrap_or(0.0)),\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\nimpl CsvRecordProducer for VisualMatchPair {\n    /// Get the CSV header row for VisualMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the VisualMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\n/// Represents a 4x4 transformation matrix\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct TransformationMatrix {\n    /// The 4x4 matrix values in row-major order\n    pub matrix: [f64; 16],\n}\n\n/// Represents filter data in API responses\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FilterData {\n    /// Extensions filter information\n    pub extensions: Vec\u003cFilterCount\u003e,\n    /// Folders filter information\n    pub folders: Vec\u003cFilterCount\u003e,\n    /// Metadata filter information\n    pub metadata: std::collections::HashMap\u003cString, serde_json::Value\u003e,\n}\n\n/// Represents a filter and its count\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FilterCount {\n    /// The filter value\n    pub filter: String,\n    /// The count of items matching this filter\n    pub count: u32,\n}\n\n/// Represents a matching pair from folder-based geometric matching\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct FolderGeometricMatch {\n    /// Name of the reference asset (the one from the source folder)\n    #[serde(rename = \"referenceAssetName\")]\n    pub reference_asset_name: String,\n    /// Name of the candidate asset (the one that matched)\n    #[serde(rename = \"candidateAssetName\")]\n    pub candidate_asset_name: String,\n    /// Match percentage between the assets\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// Full path of the reference asset\n    #[serde(rename = \"referenceAssetPath\")]\n    pub reference_asset_path: String,\n    /// Full path of the candidate asset\n    #[serde(rename = \"candidateAssetPath\")]\n    pub candidate_asset_path: String,\n    /// UUID of the reference asset\n    #[serde(rename = \"referenceAssetUuid\")]\n    pub reference_asset_uuid: Uuid,\n    /// UUID of the candidate asset\n    #[serde(rename = \"candidateAssetUuid\")]\n    pub candidate_asset_uuid: Uuid,\n    /// URL to the Physna comparison viewer for these two assets\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: String,\n}\n\nimpl CsvRecordProducer for FolderGeometricMatch {\n    /// Get the CSV header row for FolderGeometricMatch records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_NAME\".to_string(),\n            \"CANDIDATE_ASSET_NAME\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the FolderGeometricMatch to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset_name.clone(),\n            self.candidate_asset_name.clone(),\n            format!(\"{:.2}\", self.match_percentage),\n            self.reference_asset_path.clone(),\n            self.candidate_asset_path.clone(),\n            self.reference_asset_uuid.to_string(),\n            self.candidate_asset_uuid.to_string(),\n            self.comparison_url.clone(),\n        ]]\n    }\n}\n\n/// Represents the response from folder-based geometric matching\npub type FolderGeometricMatchResponse = Vec\u003cFolderGeometricMatch\u003e;\n\n// For FolderGeometricMatchResponse (Vec\u003cFolderGeometricMatch\u003e), we need to implement the traits manually\nimpl CsvRecordProducer for FolderGeometricMatchResponse {\n    /// Get the CSV header row for FolderGeometricMatchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        FolderGeometricMatch::csv_header()\n    }\n\n    /// Convert the FolderGeometricMatchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.iter().flat_map(|m| m.as_csv_records()).collect()\n    }\n}\n\nimpl OutputFormatter for FolderGeometricMatchResponse {\n    type Item = FolderGeometricMatchResponse;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e Ok(self.to_csv(options.with_headers)?),\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Represents the response from the geometric search API\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricSearchResponse {\n    /// The list of matching assets\n    pub matches: Vec\u003cGeometricMatch\u003e,\n    /// Pagination information\n    #[serde(rename = \"pageData\")]\n    pub page_data: Option\u003cPageData\u003e,\n    /// Filter information\n    #[serde(rename = \"filterData\")]\n    pub filter_data: Option\u003cFilterData\u003e,\n}\n\nimpl CsvRecordProducer for GeometricSearchResponse {\n    /// Get the CSV header row for GeometricSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"ASSET_ID\".to_string(),\n            \"PATH\".to_string(),\n            \"SCORE\".to_string(),\n        ]\n    }\n\n    /// Convert the GeometricSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    m.asset_uuid().to_string(),\n                    m.path().to_string(),\n                    format!(\"{}\", m.score()), // Full precision\n                ]\n            })\n            .collect()\n    }\n}\n\n/// Structure to represent a geometric match with both reference and candidate assets.\n///\n/// This structure holds information about a single geometric match, including both the\n/// reference asset (the one being searched) and the candidate asset (the matching one),\n/// along with the similarity percentage and transformation matrix.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct GeometricMatchPair {\n    /// The reference asset that was searched against\n    #[serde(rename = \"referenceAsset\")]\n    pub reference_asset: AssetResponse,\n    /// The matching candidate asset\n    #[serde(rename = \"candidateAsset\")]\n    pub candidate_asset: AssetResponse,\n    /// The similarity percentage\n    #[serde(rename = \"matchPercentage\")]\n    pub match_percentage: f64,\n    /// The transformation matrix for the match\n    #[serde(rename = \"transformation\")]\n    pub transformation: Option\u003cTransformationMatrix\u003e,\n    /// The comparison URL for viewing the match in the UI\n    #[serde(rename = \"comparisonUrl\")]\n    pub comparison_url: Option\u003cString\u003e,\n}\n\nimpl GeometricMatchPair {\n    /// Create a new GeometricMatchPair from a reference asset and a geometric match\n    pub fn from_reference_and_match(reference_asset: AssetResponse, match_result: GeometricMatch) -\u003e Self {\n        GeometricMatchPair {\n            reference_asset,\n            candidate_asset: match_result.asset,\n            match_percentage: match_result.match_percentage,\n            transformation: match_result.transformation,\n            comparison_url: match_result.comparison_url,\n        }\n    }\n}\n\nimpl CsvRecordProducer for GeometricMatchPair {\n    /// Get the CSV header row for GeometricMatchPair records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the GeometricMatchPair to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        vec![vec![\n            self.reference_asset.path.clone(),\n            self.candidate_asset.path.clone(),\n            format!(\"{}\", self.match_percentage), // Full precision\n            self.reference_asset.uuid.to_string(),\n            self.candidate_asset.uuid.to_string(),\n            self.comparison_url.clone().unwrap_or_default(),\n        ]]\n    }\n}\n\nimpl OutputFormatter for GeometricMatchPair {\n    type Item = GeometricMatchPair;\n\n    /// Format the GeometricMatchPair according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = GeometricMatchPair::csv_header();\n\n                        // Get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from candidate asset\n                        for key in self.candidate_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(GeometricMatchPair::csv_header())?;\n                    }\n                }\n\n                if options.with_metadata {\n                    // Include metadata values in the output\n                    let mut base_values = vec![\n                        self.reference_asset.path.clone(),\n                        self.candidate_asset.path.clone(),\n                        format!(\"{}\", self.match_percentage),\n                        self.reference_asset.uuid.to_string(),\n                        self.candidate_asset.uuid.to_string(),\n                        self.comparison_url.clone().unwrap_or_default(),\n                    ];\n\n                    // Get unique metadata keys from both reference and candidate assets\n                    let mut all_metadata_keys = std::collections::HashSet::new();\n\n                    // Collect metadata keys from reference asset\n                    for key in self.reference_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Collect metadata keys from candidate asset\n                    for key in self.candidate_asset.metadata.keys() {\n                        all_metadata_keys.insert(key.clone());\n                    }\n\n                    // Sort metadata keys for consistent column ordering\n                    let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                    sorted_keys.sort();\n\n                    // Add metadata values for each key\n                    for key in \u0026sorted_keys {\n                        // Add reference asset metadata value\n                        let ref_value = self.reference_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(ref_value);\n\n                        // Add candidate asset metadata value\n                        let cand_value = self.candidate_asset.metadata.get(key)\n                            .and_then(|v| v.as_str())\n                            .map(|s| s.to_string())\n                            .unwrap_or_default();\n                        base_values.push(cand_value);\n                    }\n\n                    wtr.serialize(base_values.as_slice())?;\n                } else {\n                    wtr.serialize((\n                        \u0026self.reference_asset.path,\n                        \u0026self.candidate_asset.path,\n                        \u0026self.match_percentage,\n                        \u0026self.reference_asset.uuid.to_string(),\n                        \u0026self.candidate_asset.uuid.to_string(),\n                        \u0026self.comparison_url.clone().unwrap_or_default(),\n                    ))?;\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n/// Enhanced response structure for geometric match that includes reference asset information.\n///\n/// This structure extends the basic geometric search response to include information about\n/// the reference asset that was searched against, providing complete context for the matches.\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct EnhancedGeometricSearchResponse {\n    /// The reference asset that was searched against\n    pub reference_asset: AssetResponse,\n    /// The list of matching assets\n    pub matches: Vec\u003cGeometricMatch\u003e,\n}\n\nimpl CsvRecordProducer for EnhancedGeometricSearchResponse {\n    /// Get the CSV header row for EnhancedGeometricSearchResponse records\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"REFERENCE_ASSET_PATH\".to_string(),\n            \"CANDIDATE_ASSET_PATH\".to_string(),\n            \"MATCH_PERCENTAGE\".to_string(),\n            \"REFERENCE_ASSET_UUID\".to_string(),\n            \"CANDIDATE_ASSET_UUID\".to_string(),\n            \"COMPARISON_URL\".to_string(),\n        ]\n    }\n\n    /// Convert the EnhancedGeometricSearchResponse to CSV records\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.matches\n            .iter()\n            .map(|m| {\n                vec![\n                    self.reference_asset.path.clone(),  // Reference asset path\n                    m.path().to_string(),               // Candidate asset path\n                    format!(\"{}\", m.score()),           // Full precision match percentage\n                    self.reference_asset.uuid.to_string(), // Reference asset UUID\n                    m.asset_uuid().to_string(),         // Candidate asset UUID\n                    m.comparison_url.clone().unwrap_or_default(), // Comparison URL\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for EnhancedGeometricSearchResponse {\n    type Item = EnhancedGeometricSearchResponse;\n\n    /// Format the EnhancedGeometricSearchResponse according to the specified output format\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n                        // Add metadata columns - we need to get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets\n                        for match_result in \u0026self.matches {\n                            for key in match_result.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedGeometricSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if options.with_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Get ALL unique metadata keys that were used in the header\n                        // (collected from reference asset and ALL match assets)\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets (same as header generation)\n                        for match_result_iter in \u0026self.matches {\n                            for key in match_result_iter.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026sorted_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        wtr.serialize((\n                            \u0026self.reference_asset.path,\n                            \u0026match_result.path(),\n                            \u0026match_result.score(),\n                            \u0026self.reference_asset.uuid.to_string(),\n                            \u0026match_result.asset_uuid().to_string(),\n                            \u0026match_result.comparison_url.clone().unwrap_or_default(),\n                        ))?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\nimpl EnhancedGeometricSearchResponse {\n    /// Format the EnhancedGeometricSearchResponse with consideration for metadata flag\n    ///\n    /// # Arguments\n    /// * `format` - The output format to use (JSON, CSV)\n    ///\n    /// # Returns\n    /// * `Ok(String)` - The formatted output\n    /// * `Err(FormattingError)` - If formatting fails\n    pub fn format_with_metadata_option(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(options) =\u003e {\n                if options.pretty {\n                    Ok(serde_json::to_string_pretty(self)?)\n                } else {\n                    Ok(serde_json::to_string(self)?)\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                let mut wtr = csv::Writer::from_writer(vec![]);\n\n                if options.with_headers {\n                    if options.with_metadata {\n                        // Include metadata columns in the header\n                        let mut base_headers = Self::csv_header();\n                        // Add metadata columns - we need to get unique metadata keys from both reference and candidate assets\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets\n                        for match_result in \u0026self.matches {\n                            for key in match_result.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Extend headers with metadata columns\n                        for key in \u0026sorted_keys {\n                            base_headers.push(format!(\"REF_{}\", key.to_uppercase()));\n                            base_headers.push(format!(\"CAND_{}\", key.to_uppercase()));\n                        }\n\n                        wtr.serialize(base_headers.as_slice())?;\n                    } else {\n                        wtr.serialize(EnhancedGeometricSearchResponse::csv_header())?;\n                    }\n                }\n\n                for match_result in \u0026self.matches {\n                    if options.with_metadata {\n                        // Include metadata values in the output\n                        let mut base_values = vec![\n                            self.reference_asset.path.clone(),\n                            match_result.path().to_string(),\n                            format!(\"{}\", match_result.score()),\n                            self.reference_asset.uuid.to_string(),\n                            match_result.asset_uuid().to_string(),\n                            match_result.comparison_url.clone().unwrap_or_default(),\n                        ];\n\n                        // Get ALL unique metadata keys that were used in the header\n                        // (collected from reference asset and ALL match assets)\n                        let mut all_metadata_keys = std::collections::HashSet::new();\n\n                        // Collect metadata keys from reference asset\n                        for key in self.reference_asset.metadata.keys() {\n                            all_metadata_keys.insert(key.clone());\n                        }\n\n                        // Collect metadata keys from all matching assets (same as header generation)\n                        for match_result_iter in \u0026self.matches {\n                            for key in match_result_iter.asset.metadata.keys() {\n                                all_metadata_keys.insert(key.clone());\n                            }\n                        }\n\n                        // Sort metadata keys for consistent column ordering\n                        let mut sorted_keys: Vec\u003cString\u003e = all_metadata_keys.into_iter().collect();\n                        sorted_keys.sort();\n\n                        // Add metadata values for each key that was included in the header\n                        for key in \u0026sorted_keys {\n                            // Add reference asset metadata value (same for all records)\n                            let ref_value = self.reference_asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(ref_value);\n\n                            // Add candidate asset metadata value (specific to this match)\n                            let cand_value = match_result.asset.metadata.get(key)\n                                .and_then(|v| v.as_str())\n                                .map(|s| s.to_string())\n                                .unwrap_or_default();\n                            base_values.push(cand_value);\n                        }\n\n                        wtr.serialize(base_values.as_slice())?;\n                    } else {\n                        wtr.serialize((\n                            \u0026self.reference_asset.path,\n                            \u0026match_result.path(),\n                            \u0026match_result.score(),\n                            \u0026self.reference_asset.uuid.to_string(),\n                            \u0026match_result.asset_uuid().to_string(),\n                            \u0026match_result.comparison_url.clone().unwrap_or_default(),\n                        ))?;\n                    }\n                }\n\n                let data = wtr.into_inner()?;\n                String::from_utf8(data).map_err(FormattingError::Utf8Error)\n            }\n            _ =\u003e Err(FormattingError::UnsupportedOutputFormat(f.to_string())),\n        }\n    }\n}\n\n\n// Metadata field models for Physna V3 API\n\n/// Represents a metadata field definition\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct MetadataField {\n    /// The name of the metadata field\n    pub name: String,\n    /// The type of the metadata field (e.g., \"text\", \"number\", etc.)\n    #[serde(rename = \"type\")]\n    pub field_type: String,\n}\n\n/// Represents a response containing a list of metadata fields\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct MetadataFieldListResponse {\n    /// List of metadata fields\n    #[serde(rename = \"metadataFields\")]\n    pub metadata_fields: Vec\u003cMetadataField\u003e,\n}\n\n/// Represents a dependency relationship for an asset\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetDependency {\n    /// The path of the dependent asset\n    pub path: String,\n    /// The asset details\n    pub asset: AssetResponse,\n    /// Number of occurrences\n    pub occurrences: u32,\n    /// Whether the dependency has its own dependencies\n    #[serde(rename = \"hasDependencies\")]\n    pub has_dependencies: bool,\n}\n\n/// Represents the response from the asset dependencies API endpoint\n#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]\npub struct AssetDependenciesResponse {\n    /// List of assets that depend on this asset\n    pub dependencies: Vec\u003cAssetDependency\u003e,\n    /// Pagination data for the response\n    #[serde(rename = \"pageData\")]\n    pub page_data: PageData,\n    /// The path of the original asset that was queried (for tree formatting)\n    #[serde(skip_serializing, skip_deserializing)]\n    pub original_asset_path: String,\n}\n\nimpl CsvRecordProducer for AssetDependenciesResponse {\n    fn csv_header() -\u003e Vec\u003cString\u003e {\n        vec![\n            \"PATH\".to_string(),\n            \"ASSET_ID\".to_string(),\n            \"ASSET_NAME\".to_string(),\n            \"OCCURRENCES\".to_string(),\n            \"HAS_DEPENDENCIES\".to_string(),\n        ]\n    }\n\n    fn as_csv_records(\u0026self) -\u003e Vec\u003cVec\u003cString\u003e\u003e {\n        self.dependencies\n            .iter()\n            .map(|dep| {\n                vec![\n                    dep.path.clone(),\n                    dep.asset.uuid.to_string(),\n                    dep.asset\n                        .path\n                        .split('/')\n                        .next_back()\n                        .unwrap_or(\u0026dep.asset.path)\n                        .to_string(), // Just the filename\n                    dep.occurrences.to_string(),\n                    dep.has_dependencies.to_string(),\n                ]\n            })\n            .collect()\n    }\n}\n\nimpl OutputFormatter for AssetDependenciesResponse {\n    type Item = AssetDependenciesResponse;\n\n    fn format(\u0026self, f: OutputFormat) -\u003e Result\u003cString, FormattingError\u003e {\n        match f {\n            OutputFormat::Json(_) =\u003e {\n                let json = serde_json::to_string_pretty(self);\n                match json {\n                    Ok(json) =\u003e Ok(json),\n                    Err(e) =\u003e Err(FormattingError::FormatFailure { cause: Box::new(e) }),\n                }\n            }\n            OutputFormat::Csv(options) =\u003e {\n                use csv::Writer;\n                use std::io::BufWriter;\n\n                let buf = BufWriter::new(Vec::new());\n                let mut wtr = Writer::from_writer(buf);\n\n                if options.with_headers {\n                    wtr.write_record(Self::csv_header())\n                        .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n                }\n\n                for record in self.as_csv_records() {\n                    wtr.write_record(\u0026record)\n                        .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n                }\n\n                wtr.flush()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n\n                let bytes = wtr\n                    .into_inner()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?\n                    .into_inner()\n                    .map_err(|e| FormattingError::FormatFailure { cause: Box::new(e) })?;\n\n                String::from_utf8(bytes).map_err(|e| FormattingError::FormatFailure {\n                    cause: Box::new(std::io::Error::other(e)),\n                })\n            }\n            OutputFormat::Tree(_) =\u003e {\n                // Create a tree representation of the dependencies with original asset as root\n                let mut output = String::new();\n\n                // Extract the original asset name from the path (last part after the last slash)\n                let original_asset_name = self\n                    .original_asset_path\n                    .split('/')\n                    .next_back()\n                    .unwrap_or(\u0026self.original_asset_path);\n\n                output.push_str(\u0026format!(\"{}\\n\", original_asset_name));\n\n                for dep in \u0026self.dependencies {\n                    let asset_name = dep\n                        .asset\n                        .path\n                        .split('/')\n                        .next_back()\n                        .unwrap_or(\u0026dep.asset.path);\n                    output.push_str(\u0026format!(\n                        \"‚îú‚îÄ‚îÄ {} ({} occurrences)\\n\",\n                        asset_name, dep.occurrences\n                    ));\n                }\n\n                Ok(output)\n            }\n        }\n    }\n}\n\n\n","traces":[{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[],"length":0,"stats":{"Line":0}},{"line":48,"address":[],"length":0,"stats":{"Line":0}},{"line":50,"address":[],"length":0,"stats":{"Line":0}},{"line":51,"address":[],"length":0,"stats":{"Line":0}},{"line":52,"address":[],"length":0,"stats":{"Line":0}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":59,"address":[],"length":0,"stats":{"Line":0}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":63,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":0}},{"line":66,"address":[],"length":0,"stats":{"Line":0}},{"line":112,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":0}},{"line":123,"address":[],"length":0,"stats":{"Line":0}},{"line":124,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":140,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":0}},{"line":145,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":151,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":161,"address":[],"length":0,"stats":{"Line":0}},{"line":163,"address":[],"length":0,"stats":{"Line":0}},{"line":164,"address":[],"length":0,"stats":{"Line":0}},{"line":165,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":173,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":175,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":188,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}},{"line":195,"address":[],"length":0,"stats":{"Line":0}},{"line":196,"address":[],"length":0,"stats":{"Line":0}},{"line":197,"address":[],"length":0,"stats":{"Line":0}},{"line":202,"address":[],"length":0,"stats":{"Line":0}},{"line":203,"address":[],"length":0,"stats":{"Line":0}},{"line":205,"address":[],"length":0,"stats":{"Line":0}},{"line":206,"address":[],"length":0,"stats":{"Line":0}},{"line":207,"address":[],"length":0,"stats":{"Line":0}},{"line":210,"address":[],"length":0,"stats":{"Line":0}},{"line":211,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":228,"address":[],"length":0,"stats":{"Line":0}},{"line":229,"address":[],"length":0,"stats":{"Line":0}},{"line":230,"address":[],"length":0,"stats":{"Line":0}},{"line":231,"address":[],"length":0,"stats":{"Line":0}},{"line":232,"address":[],"length":0,"stats":{"Line":0}},{"line":234,"address":[],"length":0,"stats":{"Line":0}},{"line":237,"address":[],"length":0,"stats":{"Line":0}},{"line":238,"address":[],"length":0,"stats":{"Line":0}},{"line":255,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":265,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":277,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":286,"address":[],"length":0,"stats":{"Line":0}},{"line":287,"address":[],"length":0,"stats":{"Line":0}},{"line":288,"address":[],"length":0,"stats":{"Line":0}},{"line":290,"address":[],"length":0,"stats":{"Line":0}},{"line":291,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":299,"address":[],"length":0,"stats":{"Line":0}},{"line":300,"address":[],"length":0,"stats":{"Line":0}},{"line":305,"address":[],"length":0,"stats":{"Line":0}},{"line":306,"address":[],"length":0,"stats":{"Line":0}},{"line":307,"address":[],"length":0,"stats":{"Line":0}},{"line":310,"address":[],"length":0,"stats":{"Line":0}},{"line":323,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":331,"address":[],"length":0,"stats":{"Line":0}},{"line":336,"address":[],"length":0,"stats":{"Line":0}},{"line":337,"address":[],"length":0,"stats":{"Line":0}},{"line":341,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":354,"address":[],"length":0,"stats":{"Line":0}},{"line":357,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":361,"address":[],"length":0,"stats":{"Line":0}},{"line":362,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":368,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":376,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":380,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":398,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":407,"address":[],"length":0,"stats":{"Line":0}},{"line":412,"address":[],"length":0,"stats":{"Line":0}},{"line":413,"address":[],"length":0,"stats":{"Line":0}},{"line":414,"address":[],"length":0,"stats":{"Line":0}},{"line":420,"address":[],"length":0,"stats":{"Line":0}},{"line":421,"address":[],"length":0,"stats":{"Line":0}},{"line":425,"address":[],"length":0,"stats":{"Line":0}},{"line":426,"address":[],"length":0,"stats":{"Line":0}},{"line":428,"address":[],"length":0,"stats":{"Line":0}},{"line":429,"address":[],"length":0,"stats":{"Line":0}},{"line":432,"address":[],"length":0,"stats":{"Line":0}},{"line":447,"address":[],"length":0,"stats":{"Line":0}},{"line":448,"address":[],"length":0,"stats":{"Line":0}},{"line":449,"address":[],"length":0,"stats":{"Line":0}},{"line":451,"address":[],"length":0,"stats":{"Line":0}},{"line":452,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":454,"address":[],"length":0,"stats":{"Line":0}},{"line":456,"address":[],"length":0,"stats":{"Line":0}},{"line":458,"address":[],"length":0,"stats":{"Line":0}},{"line":459,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":466,"address":[],"length":0,"stats":{"Line":0}},{"line":470,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":473,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":476,"address":[],"length":0,"stats":{"Line":0}},{"line":477,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":482,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":491,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":493,"address":[],"length":0,"stats":{"Line":0}},{"line":494,"address":[],"length":0,"stats":{"Line":0}},{"line":495,"address":[],"length":0,"stats":{"Line":0}},{"line":517,"address":[],"length":0,"stats":{"Line":4}},{"line":518,"address":[],"length":0,"stats":{"Line":4}},{"line":519,"address":[],"length":0,"stats":{"Line":12}},{"line":520,"address":[],"length":0,"stats":{"Line":12}},{"line":521,"address":[],"length":0,"stats":{"Line":4}},{"line":527,"address":[],"length":0,"stats":{"Line":0}},{"line":528,"address":[],"length":0,"stats":{"Line":0}},{"line":529,"address":[],"length":0,"stats":{"Line":0}},{"line":530,"address":[],"length":0,"stats":{"Line":0}},{"line":531,"address":[],"length":0,"stats":{"Line":0}},{"line":533,"address":[],"length":0,"stats":{"Line":0}},{"line":535,"address":[],"length":0,"stats":{"Line":0}},{"line":536,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":540,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":543,"address":[],"length":0,"stats":{"Line":0}},{"line":544,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":549,"address":[],"length":0,"stats":{"Line":0}},{"line":550,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":0}},{"line":569,"address":[],"length":0,"stats":{"Line":0}},{"line":571,"address":[],"length":0,"stats":{"Line":0}},{"line":575,"address":[],"length":0,"stats":{"Line":0}},{"line":577,"address":[],"length":0,"stats":{"Line":0}},{"line":582,"address":[],"length":0,"stats":{"Line":0}},{"line":583,"address":[],"length":0,"stats":{"Line":0}},{"line":587,"address":[],"length":0,"stats":{"Line":0}},{"line":588,"address":[],"length":0,"stats":{"Line":0}},{"line":599,"address":[],"length":0,"stats":{"Line":0}},{"line":600,"address":[],"length":0,"stats":{"Line":0}},{"line":603,"address":[],"length":0,"stats":{"Line":0}},{"line":604,"address":[],"length":0,"stats":{"Line":0}},{"line":607,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":614,"address":[],"length":0,"stats":{"Line":0}},{"line":620,"address":[],"length":0,"stats":{"Line":0}},{"line":621,"address":[],"length":0,"stats":{"Line":0}},{"line":622,"address":[],"length":0,"stats":{"Line":0}},{"line":623,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":634,"address":[],"length":0,"stats":{"Line":0}},{"line":635,"address":[],"length":0,"stats":{"Line":0}},{"line":644,"address":[],"length":0,"stats":{"Line":0}},{"line":645,"address":[],"length":0,"stats":{"Line":0}},{"line":654,"address":[],"length":0,"stats":{"Line":0}},{"line":655,"address":[],"length":0,"stats":{"Line":0}},{"line":660,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":663,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":666,"address":[],"length":0,"stats":{"Line":0}},{"line":669,"address":[],"length":0,"stats":{"Line":0}},{"line":675,"address":[],"length":0,"stats":{"Line":0}},{"line":676,"address":[],"length":0,"stats":{"Line":0}},{"line":680,"address":[],"length":0,"stats":{"Line":0}},{"line":681,"address":[],"length":0,"stats":{"Line":0}},{"line":683,"address":[],"length":0,"stats":{"Line":0}},{"line":699,"address":[],"length":0,"stats":{"Line":0}},{"line":700,"address":[],"length":0,"stats":{"Line":0}},{"line":701,"address":[],"length":0,"stats":{"Line":0}},{"line":703,"address":[],"length":0,"stats":{"Line":0}},{"line":704,"address":[],"length":0,"stats":{"Line":0}},{"line":705,"address":[],"length":0,"stats":{"Line":0}},{"line":706,"address":[],"length":0,"stats":{"Line":0}},{"line":708,"address":[],"length":0,"stats":{"Line":0}},{"line":710,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":715,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":723,"address":[],"length":0,"stats":{"Line":0}},{"line":725,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":727,"address":[],"length":0,"stats":{"Line":0}},{"line":728,"address":[],"length":0,"stats":{"Line":0}},{"line":729,"address":[],"length":0,"stats":{"Line":0}},{"line":733,"address":[],"length":0,"stats":{"Line":0}},{"line":734,"address":[],"length":0,"stats":{"Line":0}},{"line":736,"address":[],"length":0,"stats":{"Line":0}},{"line":740,"address":[],"length":0,"stats":{"Line":0}},{"line":741,"address":[],"length":0,"stats":{"Line":0}},{"line":742,"address":[],"length":0,"stats":{"Line":0}},{"line":744,"address":[],"length":0,"stats":{"Line":0}},{"line":796,"address":[],"length":0,"stats":{"Line":0}},{"line":797,"address":[],"length":0,"stats":{"Line":0}},{"line":798,"address":[],"length":0,"stats":{"Line":0}},{"line":810,"address":[],"length":0,"stats":{"Line":0}},{"line":811,"address":[],"length":0,"stats":{"Line":0}},{"line":812,"address":[],"length":0,"stats":{"Line":0}},{"line":814,"address":[],"length":0,"stats":{"Line":0}},{"line":852,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":857,"address":[],"length":0,"stats":{"Line":0}},{"line":858,"address":[],"length":0,"stats":{"Line":0}},{"line":937,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":947,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":949,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":952,"address":[],"length":0,"stats":{"Line":0}},{"line":954,"address":[],"length":0,"stats":{"Line":0}},{"line":982,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":984,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":990,"address":[],"length":0,"stats":{"Line":0}},{"line":1024,"address":[],"length":0,"stats":{"Line":0}},{"line":1026,"address":[],"length":0,"stats":{"Line":0}},{"line":1030,"address":[],"length":0,"stats":{"Line":0}},{"line":1031,"address":[],"length":0,"stats":{"Line":0}},{"line":1034,"address":[],"length":0,"stats":{"Line":0}},{"line":1035,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1046,"address":[],"length":0,"stats":{"Line":0}},{"line":1047,"address":[],"length":0,"stats":{"Line":0}},{"line":1049,"address":[],"length":0,"stats":{"Line":0}},{"line":1050,"address":[],"length":0,"stats":{"Line":0}},{"line":1051,"address":[],"length":0,"stats":{"Line":0}},{"line":1053,"address":[],"length":0,"stats":{"Line":0}},{"line":1055,"address":[],"length":0,"stats":{"Line":0}},{"line":1059,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1067,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1070,"address":[],"length":0,"stats":{"Line":0}},{"line":1072,"address":[],"length":0,"stats":{"Line":0}},{"line":1075,"address":[],"length":0,"stats":{"Line":0}},{"line":1076,"address":[],"length":0,"stats":{"Line":0}},{"line":1077,"address":[],"length":0,"stats":{"Line":0}},{"line":1078,"address":[],"length":0,"stats":{"Line":0}},{"line":1082,"address":[],"length":0,"stats":{"Line":0}},{"line":1083,"address":[],"length":0,"stats":{"Line":0}},{"line":1085,"address":[],"length":0,"stats":{"Line":0}},{"line":1087,"address":[],"length":0,"stats":{"Line":0}},{"line":1089,"address":[],"length":0,"stats":{"Line":0}},{"line":1090,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1092,"address":[],"length":0,"stats":{"Line":0}},{"line":1093,"address":[],"length":0,"stats":{"Line":0}},{"line":1097,"address":[],"length":0,"stats":{"Line":0}},{"line":1098,"address":[],"length":0,"stats":{"Line":0}},{"line":1100,"address":[],"length":0,"stats":{"Line":0}},{"line":1102,"address":[],"length":0,"stats":{"Line":0}},{"line":1140,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1149,"address":[],"length":0,"stats":{"Line":0}},{"line":1150,"address":[],"length":0,"stats":{"Line":0}},{"line":1155,"address":[],"length":0,"stats":{"Line":0}},{"line":1156,"address":[],"length":0,"stats":{"Line":0}},{"line":1173,"address":[],"length":0,"stats":{"Line":0}},{"line":1198,"address":[],"length":0,"stats":{"Line":0}},{"line":1199,"address":[],"length":0,"stats":{"Line":0}},{"line":1203,"address":[],"length":0,"stats":{"Line":0}},{"line":1204,"address":[],"length":0,"stats":{"Line":0}},{"line":1208,"address":[],"length":0,"stats":{"Line":0}},{"line":1209,"address":[],"length":0,"stats":{"Line":0}},{"line":1213,"address":[],"length":0,"stats":{"Line":0}},{"line":1214,"address":[],"length":0,"stats":{"Line":0}},{"line":1218,"address":[],"length":0,"stats":{"Line":0}},{"line":1219,"address":[],"length":0,"stats":{"Line":0}},{"line":1223,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1228,"address":[],"length":0,"stats":{"Line":0}},{"line":1229,"address":[],"length":0,"stats":{"Line":0}},{"line":1233,"address":[],"length":0,"stats":{"Line":0}},{"line":1234,"address":[],"length":0,"stats":{"Line":0}},{"line":1238,"address":[],"length":0,"stats":{"Line":0}},{"line":1239,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1244,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1254,"address":[],"length":0,"stats":{"Line":0}},{"line":1256,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1260,"address":[],"length":0,"stats":{"Line":0}},{"line":1264,"address":[],"length":0,"stats":{"Line":0}},{"line":1265,"address":[],"length":0,"stats":{"Line":0}},{"line":1266,"address":[],"length":0,"stats":{"Line":0}},{"line":1267,"address":[],"length":0,"stats":{"Line":0}},{"line":1268,"address":[],"length":0,"stats":{"Line":0}},{"line":1269,"address":[],"length":0,"stats":{"Line":0}},{"line":1270,"address":[],"length":0,"stats":{"Line":0}},{"line":1271,"address":[],"length":0,"stats":{"Line":0}},{"line":1272,"address":[],"length":0,"stats":{"Line":0}},{"line":1278,"address":[],"length":0,"stats":{"Line":0}},{"line":1279,"address":[],"length":0,"stats":{"Line":0}},{"line":1285,"address":[],"length":0,"stats":{"Line":0}},{"line":1286,"address":[],"length":0,"stats":{"Line":0}},{"line":1287,"address":[],"length":0,"stats":{"Line":0}},{"line":1288,"address":[],"length":0,"stats":{"Line":0}},{"line":1289,"address":[],"length":0,"stats":{"Line":0}},{"line":1290,"address":[],"length":0,"stats":{"Line":0}},{"line":1291,"address":[],"length":0,"stats":{"Line":0}},{"line":1296,"address":[],"length":0,"stats":{"Line":0}},{"line":1297,"address":[],"length":0,"stats":{"Line":0}},{"line":1298,"address":[],"length":0,"stats":{"Line":0}},{"line":1299,"address":[],"length":0,"stats":{"Line":0}},{"line":1300,"address":[],"length":0,"stats":{"Line":0}},{"line":1301,"address":[],"length":0,"stats":{"Line":0}},{"line":1302,"address":[],"length":0,"stats":{"Line":0}},{"line":1307,"address":[],"length":0,"stats":{"Line":0}},{"line":1308,"address":[],"length":0,"stats":{"Line":0}},{"line":1310,"address":[],"length":0,"stats":{"Line":0}},{"line":1314,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1316,"address":[],"length":0,"stats":{"Line":0}},{"line":1317,"address":[],"length":0,"stats":{"Line":0}},{"line":1318,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1320,"address":[],"length":0,"stats":{"Line":0}},{"line":1324,"address":[],"length":0,"stats":{"Line":0}},{"line":1330,"address":[],"length":0,"stats":{"Line":0}},{"line":1345,"address":[],"length":0,"stats":{"Line":0}},{"line":1346,"address":[],"length":0,"stats":{"Line":0}},{"line":1347,"address":[],"length":0,"stats":{"Line":0}},{"line":1348,"address":[],"length":0,"stats":{"Line":0}},{"line":1349,"address":[],"length":0,"stats":{"Line":0}},{"line":1351,"address":[],"length":0,"stats":{"Line":0}},{"line":1354,"address":[],"length":0,"stats":{"Line":0}},{"line":1355,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1371,"address":[],"length":0,"stats":{"Line":0}},{"line":1376,"address":[],"length":0,"stats":{"Line":0}},{"line":1377,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1382,"address":[],"length":0,"stats":{"Line":0}},{"line":1389,"address":[],"length":0,"stats":{"Line":0}},{"line":1390,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1398,"address":[],"length":0,"stats":{"Line":0}},{"line":1409,"address":[],"length":0,"stats":{"Line":0}},{"line":1410,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1422,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1425,"address":[],"length":0,"stats":{"Line":0}},{"line":1426,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1439,"address":[],"length":0,"stats":{"Line":0}},{"line":1441,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1443,"address":[],"length":0,"stats":{"Line":0}},{"line":1451,"address":[],"length":0,"stats":{"Line":0}},{"line":1452,"address":[],"length":0,"stats":{"Line":0}},{"line":1464,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1467,"address":[],"length":0,"stats":{"Line":0}},{"line":1469,"address":[],"length":0,"stats":{"Line":0}},{"line":1470,"address":[],"length":0,"stats":{"Line":0}},{"line":1471,"address":[],"length":0,"stats":{"Line":0}},{"line":1472,"address":[],"length":0,"stats":{"Line":0}},{"line":1473,"address":[],"length":0,"stats":{"Line":0}},{"line":1474,"address":[],"length":0,"stats":{"Line":0}},{"line":1478,"address":[],"length":0,"stats":{"Line":0}},{"line":1479,"address":[],"length":0,"stats":{"Line":0}},{"line":1480,"address":[],"length":0,"stats":{"Line":0}},{"line":1481,"address":[],"length":0,"stats":{"Line":0}},{"line":1485,"address":[],"length":0,"stats":{"Line":0}},{"line":1486,"address":[],"length":0,"stats":{"Line":0}},{"line":1490,"address":[],"length":0,"stats":{"Line":0}},{"line":1493,"address":[],"length":0,"stats":{"Line":0}},{"line":1498,"address":[],"length":0,"stats":{"Line":0}},{"line":1499,"address":[],"length":0,"stats":{"Line":0}},{"line":1505,"address":[],"length":0,"stats":{"Line":0}},{"line":1506,"address":[],"length":0,"stats":{"Line":0}},{"line":1507,"address":[],"length":0,"stats":{"Line":0}},{"line":1508,"address":[],"length":0,"stats":{"Line":0}},{"line":1511,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1522,"address":[],"length":0,"stats":{"Line":0}},{"line":1523,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1530,"address":[],"length":0,"stats":{"Line":0}},{"line":1534,"address":[],"length":0,"stats":{"Line":0}},{"line":1535,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1538,"address":[],"length":0,"stats":{"Line":0}},{"line":1541,"address":[],"length":0,"stats":{"Line":0}},{"line":1556,"address":[],"length":0,"stats":{"Line":0}},{"line":1557,"address":[],"length":0,"stats":{"Line":0}},{"line":1558,"address":[],"length":0,"stats":{"Line":0}},{"line":1560,"address":[],"length":0,"stats":{"Line":0}},{"line":1561,"address":[],"length":0,"stats":{"Line":0}},{"line":1562,"address":[],"length":0,"stats":{"Line":0}},{"line":1563,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1568,"address":[],"length":0,"stats":{"Line":0}},{"line":1569,"address":[],"length":0,"stats":{"Line":0}},{"line":1570,"address":[],"length":0,"stats":{"Line":0}},{"line":1573,"address":[],"length":0,"stats":{"Line":0}},{"line":1574,"address":[],"length":0,"stats":{"Line":0}},{"line":1576,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1580,"address":[],"length":0,"stats":{"Line":0}},{"line":1581,"address":[],"length":0,"stats":{"Line":0}},{"line":1582,"address":[],"length":0,"stats":{"Line":0}},{"line":1583,"address":[],"length":0,"stats":{"Line":0}},{"line":1589,"address":[],"length":0,"stats":{"Line":0}},{"line":1590,"address":[],"length":0,"stats":{"Line":0}},{"line":1593,"address":[],"length":0,"stats":{"Line":0}},{"line":1594,"address":[],"length":0,"stats":{"Line":0}},{"line":1596,"address":[],"length":0,"stats":{"Line":0}},{"line":1598,"address":[],"length":0,"stats":{"Line":0}},{"line":1599,"address":[],"length":0,"stats":{"Line":0}},{"line":1600,"address":[],"length":0,"stats":{"Line":0}},{"line":1602,"address":[],"length":0,"stats":{"Line":0}},{"line":1606,"address":[],"length":0,"stats":{"Line":0}},{"line":1607,"address":[],"length":0,"stats":{"Line":0}},{"line":1609,"address":[],"length":0,"stats":{"Line":0}},{"line":1610,"address":[],"length":0,"stats":{"Line":0}},{"line":1613,"address":[],"length":0,"stats":{"Line":0}},{"line":1615,"address":[],"length":0,"stats":{"Line":0}},{"line":1616,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1622,"address":[],"length":0,"stats":{"Line":0}},{"line":1623,"address":[],"length":0,"stats":{"Line":0}},{"line":1625,"address":[],"length":0,"stats":{"Line":0}},{"line":1626,"address":[],"length":0,"stats":{"Line":0}},{"line":1630,"address":[],"length":0,"stats":{"Line":0}},{"line":1631,"address":[],"length":0,"stats":{"Line":0}},{"line":1633,"address":[],"length":0,"stats":{"Line":0}},{"line":1634,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1638,"address":[],"length":0,"stats":{"Line":0}},{"line":1639,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1642,"address":[],"length":0,"stats":{"Line":0}},{"line":1651,"address":[],"length":0,"stats":{"Line":0}},{"line":1652,"address":[],"length":0,"stats":{"Line":0}},{"line":1653,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1655,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1683,"address":[],"length":0,"stats":{"Line":0}},{"line":1684,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1689,"address":[],"length":0,"stats":{"Line":0}},{"line":1693,"address":[],"length":0,"stats":{"Line":0}},{"line":1694,"address":[],"length":0,"stats":{"Line":0}},{"line":1722,"address":[],"length":0,"stats":{"Line":0}},{"line":1723,"address":[],"length":0,"stats":{"Line":0}},{"line":1727,"address":[],"length":0,"stats":{"Line":0}},{"line":1728,"address":[],"length":0,"stats":{"Line":0}},{"line":1732,"address":[],"length":0,"stats":{"Line":0}},{"line":1733,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1738,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1761,"address":[],"length":0,"stats":{"Line":0}},{"line":1762,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1764,"address":[],"length":0,"stats":{"Line":0}},{"line":1765,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1771,"address":[],"length":0,"stats":{"Line":0}},{"line":1773,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1776,"address":[],"length":0,"stats":{"Line":0}},{"line":1777,"address":[],"length":0,"stats":{"Line":0}},{"line":1778,"address":[],"length":0,"stats":{"Line":0}},{"line":1801,"address":[],"length":0,"stats":{"Line":0}},{"line":1802,"address":[],"length":0,"stats":{"Line":0}},{"line":1803,"address":[],"length":0,"stats":{"Line":0}},{"line":1804,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1806,"address":[],"length":0,"stats":{"Line":0}},{"line":1807,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1809,"address":[],"length":0,"stats":{"Line":0}},{"line":1814,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1818,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1820,"address":[],"length":0,"stats":{"Line":0}},{"line":1821,"address":[],"length":0,"stats":{"Line":0}},{"line":1822,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1824,"address":[],"length":0,"stats":{"Line":0}},{"line":1825,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1845,"address":[],"length":0,"stats":{"Line":0}},{"line":1846,"address":[],"length":0,"stats":{"Line":0}},{"line":1849,"address":[],"length":0,"stats":{"Line":0}},{"line":1855,"address":[],"length":0,"stats":{"Line":0}},{"line":1856,"address":[],"length":0,"stats":{"Line":0}},{"line":1857,"address":[],"length":0,"stats":{"Line":0}},{"line":1858,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1861,"address":[],"length":0,"stats":{"Line":0}},{"line":1864,"address":[],"length":0,"stats":{"Line":0}},{"line":1865,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1871,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1880,"address":[],"length":0,"stats":{"Line":0}},{"line":1881,"address":[],"length":0,"stats":{"Line":0}},{"line":1886,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1888,"address":[],"length":0,"stats":{"Line":0}},{"line":1891,"address":[],"length":0,"stats":{"Line":0}},{"line":1892,"address":[],"length":0,"stats":{"Line":0}},{"line":1894,"address":[],"length":0,"stats":{"Line":0}},{"line":1897,"address":[],"length":0,"stats":{"Line":0}},{"line":1898,"address":[],"length":0,"stats":{"Line":0}},{"line":1899,"address":[],"length":0,"stats":{"Line":0}},{"line":1902,"address":[],"length":0,"stats":{"Line":0}},{"line":1904,"address":[],"length":0,"stats":{"Line":0}},{"line":1908,"address":[],"length":0,"stats":{"Line":0}},{"line":1909,"address":[],"length":0,"stats":{"Line":0}},{"line":1911,"address":[],"length":0,"stats":{"Line":0}},{"line":1912,"address":[],"length":0,"stats":{"Line":0}},{"line":1913,"address":[],"length":0,"stats":{"Line":0}},{"line":1914,"address":[],"length":0,"stats":{"Line":0}},{"line":1915,"address":[],"length":0,"stats":{"Line":0}},{"line":1916,"address":[],"length":0,"stats":{"Line":0}},{"line":1917,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1924,"address":[],"length":0,"stats":{"Line":0}},{"line":1925,"address":[],"length":0,"stats":{"Line":0}},{"line":1926,"address":[],"length":0,"stats":{"Line":0}},{"line":1928,"address":[],"length":0,"stats":{"Line":0}},{"line":1931,"address":[],"length":0,"stats":{"Line":0}},{"line":1932,"address":[],"length":0,"stats":{"Line":0}},{"line":1933,"address":[],"length":0,"stats":{"Line":0}},{"line":1935,"address":[],"length":0,"stats":{"Line":0}},{"line":1938,"address":[],"length":0,"stats":{"Line":0}},{"line":1940,"address":[],"length":0,"stats":{"Line":0}},{"line":1941,"address":[],"length":0,"stats":{"Line":0}},{"line":1942,"address":[],"length":0,"stats":{"Line":0}},{"line":1943,"address":[],"length":0,"stats":{"Line":0}},{"line":1944,"address":[],"length":0,"stats":{"Line":0}},{"line":1945,"address":[],"length":0,"stats":{"Line":0}},{"line":1946,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1949,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1954,"address":[],"length":0,"stats":{"Line":0}},{"line":1956,"address":[],"length":0,"stats":{"Line":0}},{"line":2005,"address":[],"length":0,"stats":{"Line":0}},{"line":2008,"address":[],"length":0,"stats":{"Line":0}},{"line":2009,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2011,"address":[],"length":0,"stats":{"Line":0}},{"line":2012,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2021,"address":[],"length":0,"stats":{"Line":0}},{"line":2022,"address":[],"length":0,"stats":{"Line":0}},{"line":2023,"address":[],"length":0,"stats":{"Line":0}},{"line":2024,"address":[],"length":0,"stats":{"Line":0}},{"line":2025,"address":[],"length":0,"stats":{"Line":0}},{"line":2026,"address":[],"length":0,"stats":{"Line":0}},{"line":2027,"address":[],"length":0,"stats":{"Line":0}},{"line":2032,"address":[],"length":0,"stats":{"Line":0}},{"line":2033,"address":[],"length":0,"stats":{"Line":0}},{"line":2034,"address":[],"length":0,"stats":{"Line":0}},{"line":2035,"address":[],"length":0,"stats":{"Line":0}},{"line":2036,"address":[],"length":0,"stats":{"Line":0}},{"line":2037,"address":[],"length":0,"stats":{"Line":0}},{"line":2038,"address":[],"length":0,"stats":{"Line":0}},{"line":2039,"address":[],"length":0,"stats":{"Line":0}},{"line":2040,"address":[],"length":0,"stats":{"Line":0}},{"line":2047,"address":[],"length":0,"stats":{"Line":0}},{"line":2048,"address":[],"length":0,"stats":{"Line":0}},{"line":2049,"address":[],"length":0,"stats":{"Line":0}},{"line":2050,"address":[],"length":0,"stats":{"Line":0}},{"line":2051,"address":[],"length":0,"stats":{"Line":0}},{"line":2052,"address":[],"length":0,"stats":{"Line":0}},{"line":2053,"address":[],"length":0,"stats":{"Line":0}},{"line":2058,"address":[],"length":0,"stats":{"Line":0}},{"line":2059,"address":[],"length":0,"stats":{"Line":0}},{"line":2060,"address":[],"length":0,"stats":{"Line":0}},{"line":2061,"address":[],"length":0,"stats":{"Line":0}},{"line":2062,"address":[],"length":0,"stats":{"Line":0}},{"line":2063,"address":[],"length":0,"stats":{"Line":0}},{"line":2064,"address":[],"length":0,"stats":{"Line":0}},{"line":2127,"address":[],"length":0,"stats":{"Line":0}},{"line":2128,"address":[],"length":0,"stats":{"Line":0}},{"line":2129,"address":[],"length":0,"stats":{"Line":0}},{"line":2130,"address":[],"length":0,"stats":{"Line":0}},{"line":2131,"address":[],"length":0,"stats":{"Line":0}},{"line":2132,"address":[],"length":0,"stats":{"Line":0}},{"line":2133,"address":[],"length":0,"stats":{"Line":0}},{"line":2134,"address":[],"length":0,"stats":{"Line":0}},{"line":2135,"address":[],"length":0,"stats":{"Line":0}},{"line":2136,"address":[],"length":0,"stats":{"Line":0}},{"line":2141,"address":[],"length":0,"stats":{"Line":0}},{"line":2142,"address":[],"length":0,"stats":{"Line":0}},{"line":2143,"address":[],"length":0,"stats":{"Line":0}},{"line":2144,"address":[],"length":0,"stats":{"Line":0}},{"line":2145,"address":[],"length":0,"stats":{"Line":0}},{"line":2146,"address":[],"length":0,"stats":{"Line":0}},{"line":2147,"address":[],"length":0,"stats":{"Line":0}},{"line":2148,"address":[],"length":0,"stats":{"Line":0}},{"line":2149,"address":[],"length":0,"stats":{"Line":0}},{"line":2150,"address":[],"length":0,"stats":{"Line":0}},{"line":2161,"address":[],"length":0,"stats":{"Line":0}},{"line":2162,"address":[],"length":0,"stats":{"Line":0}},{"line":2166,"address":[],"length":0,"stats":{"Line":0}},{"line":2167,"address":[],"length":0,"stats":{"Line":0}},{"line":2174,"address":[],"length":0,"stats":{"Line":0}},{"line":2175,"address":[],"length":0,"stats":{"Line":0}},{"line":2176,"address":[],"length":0,"stats":{"Line":0}},{"line":2177,"address":[],"length":0,"stats":{"Line":0}},{"line":2178,"address":[],"length":0,"stats":{"Line":0}},{"line":2180,"address":[],"length":0,"stats":{"Line":0}},{"line":2183,"address":[],"length":0,"stats":{"Line":0}},{"line":2184,"address":[],"length":0,"stats":{"Line":0}},{"line":2204,"address":[],"length":0,"stats":{"Line":0}},{"line":2205,"address":[],"length":0,"stats":{"Line":0}},{"line":2206,"address":[],"length":0,"stats":{"Line":0}},{"line":2207,"address":[],"length":0,"stats":{"Line":0}},{"line":2208,"address":[],"length":0,"stats":{"Line":0}},{"line":2213,"address":[],"length":0,"stats":{"Line":0}},{"line":2214,"address":[],"length":0,"stats":{"Line":0}},{"line":2216,"address":[],"length":0,"stats":{"Line":0}},{"line":2217,"address":[],"length":0,"stats":{"Line":0}},{"line":2218,"address":[],"length":0,"stats":{"Line":0}},{"line":2219,"address":[],"length":0,"stats":{"Line":0}},{"line":2220,"address":[],"length":0,"stats":{"Line":0}},{"line":2253,"address":[],"length":0,"stats":{"Line":0}},{"line":2256,"address":[],"length":0,"stats":{"Line":0}},{"line":2257,"address":[],"length":0,"stats":{"Line":0}},{"line":2258,"address":[],"length":0,"stats":{"Line":0}},{"line":2259,"address":[],"length":0,"stats":{"Line":0}},{"line":2266,"address":[],"length":0,"stats":{"Line":0}},{"line":2267,"address":[],"length":0,"stats":{"Line":0}},{"line":2268,"address":[],"length":0,"stats":{"Line":0}},{"line":2269,"address":[],"length":0,"stats":{"Line":0}},{"line":2270,"address":[],"length":0,"stats":{"Line":0}},{"line":2271,"address":[],"length":0,"stats":{"Line":0}},{"line":2272,"address":[],"length":0,"stats":{"Line":0}},{"line":2273,"address":[],"length":0,"stats":{"Line":0}},{"line":2278,"address":[],"length":0,"stats":{"Line":0}},{"line":2279,"address":[],"length":0,"stats":{"Line":0}},{"line":2280,"address":[],"length":0,"stats":{"Line":0}},{"line":2281,"address":[],"length":0,"stats":{"Line":0}},{"line":2282,"address":[],"length":0,"stats":{"Line":0}},{"line":2283,"address":[],"length":0,"stats":{"Line":0}},{"line":2284,"address":[],"length":0,"stats":{"Line":0}},{"line":2285,"address":[],"length":0,"stats":{"Line":0}},{"line":2301,"address":[],"length":0,"stats":{"Line":0}},{"line":2302,"address":[],"length":0,"stats":{"Line":0}},{"line":2303,"address":[],"length":0,"stats":{"Line":0}},{"line":2304,"address":[],"length":0,"stats":{"Line":0}},{"line":2305,"address":[],"length":0,"stats":{"Line":0}},{"line":2307,"address":[],"length":0,"stats":{"Line":0}},{"line":2310,"address":[],"length":0,"stats":{"Line":0}},{"line":2311,"address":[],"length":0,"stats":{"Line":0}},{"line":2313,"address":[],"length":0,"stats":{"Line":0}},{"line":2314,"address":[],"length":0,"stats":{"Line":0}},{"line":2316,"address":[],"length":0,"stats":{"Line":0}},{"line":2319,"address":[],"length":0,"stats":{"Line":0}},{"line":2322,"address":[],"length":0,"stats":{"Line":0}},{"line":2323,"address":[],"length":0,"stats":{"Line":0}},{"line":2327,"address":[],"length":0,"stats":{"Line":0}},{"line":2328,"address":[],"length":0,"stats":{"Line":0}},{"line":2332,"address":[],"length":0,"stats":{"Line":0}},{"line":2333,"address":[],"length":0,"stats":{"Line":0}},{"line":2336,"address":[],"length":0,"stats":{"Line":0}},{"line":2337,"address":[],"length":0,"stats":{"Line":0}},{"line":2338,"address":[],"length":0,"stats":{"Line":0}},{"line":2341,"address":[],"length":0,"stats":{"Line":0}},{"line":2343,"address":[],"length":0,"stats":{"Line":0}},{"line":2347,"address":[],"length":0,"stats":{"Line":0}},{"line":2349,"address":[],"length":0,"stats":{"Line":0}},{"line":2350,"address":[],"length":0,"stats":{"Line":0}},{"line":2351,"address":[],"length":0,"stats":{"Line":0}},{"line":2352,"address":[],"length":0,"stats":{"Line":0}},{"line":2353,"address":[],"length":0,"stats":{"Line":0}},{"line":2354,"address":[],"length":0,"stats":{"Line":0}},{"line":2355,"address":[],"length":0,"stats":{"Line":0}},{"line":2359,"address":[],"length":0,"stats":{"Line":0}},{"line":2362,"address":[],"length":0,"stats":{"Line":0}},{"line":2363,"address":[],"length":0,"stats":{"Line":0}},{"line":2367,"address":[],"length":0,"stats":{"Line":0}},{"line":2368,"address":[],"length":0,"stats":{"Line":0}},{"line":2372,"address":[],"length":0,"stats":{"Line":0}},{"line":2373,"address":[],"length":0,"stats":{"Line":0}},{"line":2376,"address":[],"length":0,"stats":{"Line":0}},{"line":2378,"address":[],"length":0,"stats":{"Line":0}},{"line":2379,"address":[],"length":0,"stats":{"Line":0}},{"line":2380,"address":[],"length":0,"stats":{"Line":0}},{"line":2382,"address":[],"length":0,"stats":{"Line":0}},{"line":2385,"address":[],"length":0,"stats":{"Line":0}},{"line":2386,"address":[],"length":0,"stats":{"Line":0}},{"line":2387,"address":[],"length":0,"stats":{"Line":0}},{"line":2389,"address":[],"length":0,"stats":{"Line":0}},{"line":2392,"address":[],"length":0,"stats":{"Line":0}},{"line":2394,"address":[],"length":0,"stats":{"Line":0}},{"line":2395,"address":[],"length":0,"stats":{"Line":0}},{"line":2396,"address":[],"length":0,"stats":{"Line":0}},{"line":2397,"address":[],"length":0,"stats":{"Line":0}},{"line":2398,"address":[],"length":0,"stats":{"Line":0}},{"line":2399,"address":[],"length":0,"stats":{"Line":0}},{"line":2400,"address":[],"length":0,"stats":{"Line":0}},{"line":2404,"address":[],"length":0,"stats":{"Line":0}},{"line":2405,"address":[],"length":0,"stats":{"Line":0}},{"line":2407,"address":[],"length":0,"stats":{"Line":0}},{"line":2426,"address":[],"length":0,"stats":{"Line":0}},{"line":2427,"address":[],"length":0,"stats":{"Line":0}},{"line":2428,"address":[],"length":0,"stats":{"Line":0}},{"line":2429,"address":[],"length":0,"stats":{"Line":0}},{"line":2430,"address":[],"length":0,"stats":{"Line":0}},{"line":2431,"address":[],"length":0,"stats":{"Line":0}},{"line":2432,"address":[],"length":0,"stats":{"Line":0}},{"line":2433,"address":[],"length":0,"stats":{"Line":0}},{"line":2438,"address":[],"length":0,"stats":{"Line":0}},{"line":2439,"address":[],"length":0,"stats":{"Line":0}},{"line":2441,"address":[],"length":0,"stats":{"Line":0}},{"line":2442,"address":[],"length":0,"stats":{"Line":0}},{"line":2443,"address":[],"length":0,"stats":{"Line":0}},{"line":2444,"address":[],"length":0,"stats":{"Line":0}},{"line":2445,"address":[],"length":0,"stats":{"Line":0}},{"line":2446,"address":[],"length":0,"stats":{"Line":0}},{"line":2447,"address":[],"length":0,"stats":{"Line":0}},{"line":2448,"address":[],"length":0,"stats":{"Line":0}},{"line":2466,"address":[],"length":0,"stats":{"Line":0}},{"line":2467,"address":[],"length":0,"stats":{"Line":0}},{"line":2468,"address":[],"length":0,"stats":{"Line":0}},{"line":2469,"address":[],"length":0,"stats":{"Line":0}},{"line":2470,"address":[],"length":0,"stats":{"Line":0}},{"line":2472,"address":[],"length":0,"stats":{"Line":0}},{"line":2475,"address":[],"length":0,"stats":{"Line":0}},{"line":2476,"address":[],"length":0,"stats":{"Line":0}},{"line":2478,"address":[],"length":0,"stats":{"Line":0}},{"line":2479,"address":[],"length":0,"stats":{"Line":0}},{"line":2481,"address":[],"length":0,"stats":{"Line":0}},{"line":2483,"address":[],"length":0,"stats":{"Line":0}},{"line":2486,"address":[],"length":0,"stats":{"Line":0}},{"line":2487,"address":[],"length":0,"stats":{"Line":0}},{"line":2491,"address":[],"length":0,"stats":{"Line":0}},{"line":2492,"address":[],"length":0,"stats":{"Line":0}},{"line":2493,"address":[],"length":0,"stats":{"Line":0}},{"line":2498,"address":[],"length":0,"stats":{"Line":0}},{"line":2499,"address":[],"length":0,"stats":{"Line":0}},{"line":2502,"address":[],"length":0,"stats":{"Line":0}},{"line":2503,"address":[],"length":0,"stats":{"Line":0}},{"line":2504,"address":[],"length":0,"stats":{"Line":0}},{"line":2507,"address":[],"length":0,"stats":{"Line":0}},{"line":2509,"address":[],"length":0,"stats":{"Line":0}},{"line":2513,"address":[],"length":0,"stats":{"Line":0}},{"line":2514,"address":[],"length":0,"stats":{"Line":0}},{"line":2516,"address":[],"length":0,"stats":{"Line":0}},{"line":2517,"address":[],"length":0,"stats":{"Line":0}},{"line":2518,"address":[],"length":0,"stats":{"Line":0}},{"line":2519,"address":[],"length":0,"stats":{"Line":0}},{"line":2520,"address":[],"length":0,"stats":{"Line":0}},{"line":2521,"address":[],"length":0,"stats":{"Line":0}},{"line":2522,"address":[],"length":0,"stats":{"Line":0}},{"line":2527,"address":[],"length":0,"stats":{"Line":0}},{"line":2530,"address":[],"length":0,"stats":{"Line":0}},{"line":2531,"address":[],"length":0,"stats":{"Line":0}},{"line":2535,"address":[],"length":0,"stats":{"Line":0}},{"line":2536,"address":[],"length":0,"stats":{"Line":0}},{"line":2537,"address":[],"length":0,"stats":{"Line":0}},{"line":2542,"address":[],"length":0,"stats":{"Line":0}},{"line":2543,"address":[],"length":0,"stats":{"Line":0}},{"line":2546,"address":[],"length":0,"stats":{"Line":0}},{"line":2548,"address":[],"length":0,"stats":{"Line":0}},{"line":2549,"address":[],"length":0,"stats":{"Line":0}},{"line":2550,"address":[],"length":0,"stats":{"Line":0}},{"line":2552,"address":[],"length":0,"stats":{"Line":0}},{"line":2555,"address":[],"length":0,"stats":{"Line":0}},{"line":2556,"address":[],"length":0,"stats":{"Line":0}},{"line":2557,"address":[],"length":0,"stats":{"Line":0}},{"line":2559,"address":[],"length":0,"stats":{"Line":0}},{"line":2562,"address":[],"length":0,"stats":{"Line":0}},{"line":2564,"address":[],"length":0,"stats":{"Line":0}},{"line":2565,"address":[],"length":0,"stats":{"Line":0}},{"line":2566,"address":[],"length":0,"stats":{"Line":0}},{"line":2567,"address":[],"length":0,"stats":{"Line":0}},{"line":2568,"address":[],"length":0,"stats":{"Line":0}},{"line":2569,"address":[],"length":0,"stats":{"Line":0}},{"line":2570,"address":[],"length":0,"stats":{"Line":0}},{"line":2575,"address":[],"length":0,"stats":{"Line":0}},{"line":2576,"address":[],"length":0,"stats":{"Line":0}},{"line":2578,"address":[],"length":0,"stats":{"Line":0}},{"line":2592,"address":[],"length":0,"stats":{"Line":0}},{"line":2593,"address":[],"length":0,"stats":{"Line":0}},{"line":2594,"address":[],"length":0,"stats":{"Line":0}},{"line":2595,"address":[],"length":0,"stats":{"Line":0}},{"line":2596,"address":[],"length":0,"stats":{"Line":0}},{"line":2598,"address":[],"length":0,"stats":{"Line":0}},{"line":2601,"address":[],"length":0,"stats":{"Line":0}},{"line":2602,"address":[],"length":0,"stats":{"Line":0}},{"line":2604,"address":[],"length":0,"stats":{"Line":0}},{"line":2605,"address":[],"length":0,"stats":{"Line":0}},{"line":2607,"address":[],"length":0,"stats":{"Line":0}},{"line":2609,"address":[],"length":0,"stats":{"Line":0}},{"line":2612,"address":[],"length":0,"stats":{"Line":0}},{"line":2613,"address":[],"length":0,"stats":{"Line":0}},{"line":2617,"address":[],"length":0,"stats":{"Line":0}},{"line":2618,"address":[],"length":0,"stats":{"Line":0}},{"line":2619,"address":[],"length":0,"stats":{"Line":0}},{"line":2624,"address":[],"length":0,"stats":{"Line":0}},{"line":2625,"address":[],"length":0,"stats":{"Line":0}},{"line":2628,"address":[],"length":0,"stats":{"Line":0}},{"line":2629,"address":[],"length":0,"stats":{"Line":0}},{"line":2630,"address":[],"length":0,"stats":{"Line":0}},{"line":2633,"address":[],"length":0,"stats":{"Line":0}},{"line":2635,"address":[],"length":0,"stats":{"Line":0}},{"line":2639,"address":[],"length":0,"stats":{"Line":0}},{"line":2640,"address":[],"length":0,"stats":{"Line":0}},{"line":2642,"address":[],"length":0,"stats":{"Line":0}},{"line":2643,"address":[],"length":0,"stats":{"Line":0}},{"line":2644,"address":[],"length":0,"stats":{"Line":0}},{"line":2645,"address":[],"length":0,"stats":{"Line":0}},{"line":2646,"address":[],"length":0,"stats":{"Line":0}},{"line":2647,"address":[],"length":0,"stats":{"Line":0}},{"line":2648,"address":[],"length":0,"stats":{"Line":0}},{"line":2653,"address":[],"length":0,"stats":{"Line":0}},{"line":2656,"address":[],"length":0,"stats":{"Line":0}},{"line":2657,"address":[],"length":0,"stats":{"Line":0}},{"line":2661,"address":[],"length":0,"stats":{"Line":0}},{"line":2662,"address":[],"length":0,"stats":{"Line":0}},{"line":2663,"address":[],"length":0,"stats":{"Line":0}},{"line":2668,"address":[],"length":0,"stats":{"Line":0}},{"line":2669,"address":[],"length":0,"stats":{"Line":0}},{"line":2672,"address":[],"length":0,"stats":{"Line":0}},{"line":2674,"address":[],"length":0,"stats":{"Line":0}},{"line":2675,"address":[],"length":0,"stats":{"Line":0}},{"line":2676,"address":[],"length":0,"stats":{"Line":0}},{"line":2678,"address":[],"length":0,"stats":{"Line":0}},{"line":2681,"address":[],"length":0,"stats":{"Line":0}},{"line":2682,"address":[],"length":0,"stats":{"Line":0}},{"line":2683,"address":[],"length":0,"stats":{"Line":0}},{"line":2685,"address":[],"length":0,"stats":{"Line":0}},{"line":2688,"address":[],"length":0,"stats":{"Line":0}},{"line":2690,"address":[],"length":0,"stats":{"Line":0}},{"line":2691,"address":[],"length":0,"stats":{"Line":0}},{"line":2692,"address":[],"length":0,"stats":{"Line":0}},{"line":2693,"address":[],"length":0,"stats":{"Line":0}},{"line":2694,"address":[],"length":0,"stats":{"Line":0}},{"line":2695,"address":[],"length":0,"stats":{"Line":0}},{"line":2696,"address":[],"length":0,"stats":{"Line":0}},{"line":2701,"address":[],"length":0,"stats":{"Line":0}},{"line":2702,"address":[],"length":0,"stats":{"Line":0}},{"line":2704,"address":[],"length":0,"stats":{"Line":0}},{"line":2758,"address":[],"length":0,"stats":{"Line":0}},{"line":2759,"address":[],"length":0,"stats":{"Line":0}},{"line":2760,"address":[],"length":0,"stats":{"Line":0}},{"line":2761,"address":[],"length":0,"stats":{"Line":0}},{"line":2762,"address":[],"length":0,"stats":{"Line":0}},{"line":2763,"address":[],"length":0,"stats":{"Line":0}},{"line":2764,"address":[],"length":0,"stats":{"Line":0}},{"line":2768,"address":[],"length":0,"stats":{"Line":0}},{"line":2769,"address":[],"length":0,"stats":{"Line":0}},{"line":2771,"address":[],"length":0,"stats":{"Line":0}},{"line":2772,"address":[],"length":0,"stats":{"Line":0}},{"line":2773,"address":[],"length":0,"stats":{"Line":0}},{"line":2774,"address":[],"length":0,"stats":{"Line":0}},{"line":2775,"address":[],"length":0,"stats":{"Line":0}},{"line":2776,"address":[],"length":0,"stats":{"Line":0}},{"line":2777,"address":[],"length":0,"stats":{"Line":0}},{"line":2778,"address":[],"length":0,"stats":{"Line":0}},{"line":2779,"address":[],"length":0,"stats":{"Line":0}},{"line":2780,"address":[],"length":0,"stats":{"Line":0}},{"line":2781,"address":[],"length":0,"stats":{"Line":0}},{"line":2782,"address":[],"length":0,"stats":{"Line":0}},{"line":2792,"address":[],"length":0,"stats":{"Line":0}},{"line":2793,"address":[],"length":0,"stats":{"Line":0}},{"line":2795,"address":[],"length":0,"stats":{"Line":0}},{"line":2796,"address":[],"length":0,"stats":{"Line":0}},{"line":2797,"address":[],"length":0,"stats":{"Line":0}},{"line":2798,"address":[],"length":0,"stats":{"Line":0}},{"line":2801,"address":[],"length":0,"stats":{"Line":0}},{"line":2805,"address":[],"length":0,"stats":{"Line":0}},{"line":2806,"address":[],"length":0,"stats":{"Line":0}},{"line":2808,"address":[],"length":0,"stats":{"Line":0}},{"line":2809,"address":[],"length":0,"stats":{"Line":0}},{"line":2810,"address":[],"length":0,"stats":{"Line":0}},{"line":2813,"address":[],"length":0,"stats":{"Line":0}},{"line":2814,"address":[],"length":0,"stats":{"Line":0}},{"line":2815,"address":[],"length":0,"stats":{"Line":0}},{"line":2818,"address":[],"length":0,"stats":{"Line":0}},{"line":2819,"address":[],"length":0,"stats":{"Line":0}},{"line":2821,"address":[],"length":0,"stats":{"Line":0}},{"line":2823,"address":[],"length":0,"stats":{"Line":0}},{"line":2825,"address":[],"length":0,"stats":{"Line":0}},{"line":2827,"address":[],"length":0,"stats":{"Line":0}},{"line":2828,"address":[],"length":0,"stats":{"Line":0}},{"line":2833,"address":[],"length":0,"stats":{"Line":0}},{"line":2836,"address":[],"length":0,"stats":{"Line":0}},{"line":2837,"address":[],"length":0,"stats":{"Line":0}},{"line":2840,"address":[],"length":0,"stats":{"Line":0}},{"line":2842,"address":[],"length":0,"stats":{"Line":0}},{"line":2844,"address":[],"length":0,"stats":{"Line":0}},{"line":2845,"address":[],"length":0,"stats":{"Line":0}},{"line":2846,"address":[],"length":0,"stats":{"Line":0}},{"line":2847,"address":[],"length":0,"stats":{"Line":0}},{"line":2850,"address":[],"length":0,"stats":{"Line":0}},{"line":2851,"address":[],"length":0,"stats":{"Line":0}},{"line":2852,"address":[],"length":0,"stats":{"Line":0}},{"line":2853,"address":[],"length":0,"stats":{"Line":0}},{"line":2857,"address":[],"length":0,"stats":{"Line":0}}],"covered":5,"coverable":971},{"path":["/","Users","julian","projects","physna","pcli2","src","param_utils.rs"],"content":"use clap::ArgMatches;\nuse uuid::Uuid;\nuse crate::{commands::params::{PARAMETER_FORMAT, PARAMETER_HEADERS, PARAMETER_METADATA, PARAMETER_PRETTY, PARAMETER_TENANT}, configuration::Configuration, error::CliError, format::{OutputFormat, OutputFormatOptions}, model::Tenant, physna_v3::PhysnaApiClient};\nuse tracing::{debug, trace};\n\n\n/// Resolve a tenant by name \n/// \n/// This function handles the case where users provide a tenant name\n/// via the --tenant parameter, and resolves names to UUID by\n/// calling the list_tenants API endpoint.\n/// \n/// # Arguments\n/// * `client` - The Physna API client\n/// * `tenant_name` - The tenant name\n/// \n/// # Returns\n/// * `Ok(Tenant)` - The resolved tenant\n/// * `Err(CliError)` - If the tenant cannot be found\nasync fn resolve_tenant_by_name(\n    client: \u0026mut PhysnaApiClient,\n    tenant_name: \u0026String,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    debug!(\"Resolving tenant by name: {}\", tenant_name);\n    \n    // First, try to list all tenants to see if we can resolve the identifier\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(client, false).await?;\n\n    // Look for an exact match by tenant ID first\n    match tenants.iter().find(|t| t.tenant_short_name.eq(tenant_name)) {\n        Some(tenant) =\u003e Ok(tenant.try_into()?),\n        None =\u003e Err(CliError::TenantNotFound {identifier: tenant_name.to_owned(),}),\n    }\n}\n\npub async fn get_format_parameter_value(sub_matches: \u0026ArgMatches) -\u003e OutputFormat {\n\n    trace!(\"Resolving output format options...\");\n\n    // Get format parameter - Clap handles environment variable precedence automatically\n    // 1. User specified --format (explicit command line)\n    // 2. Environment variable PCLI2_FORMAT (when no explicit format provided)\n    // 3. Default value of \"json\" (set in the argument definition)\n    let format_string = sub_matches.get_one::\u003cString\u003e(PARAMETER_FORMAT).unwrap().clone();\n\n    let with_metadata = sub_matches.get_flag(PARAMETER_METADATA);\n\n    // Get headers flag - Clap handles environment variable precedence automatically\n    // 1. User specified --headers (explicit command line)\n    // 2. Environment variable PCLI2_HEADERS (when no explicit headers flag provided)\n    // 3. Default value of false (implicit for boolean flags)\n    let with_headers = sub_matches.get_flag(PARAMETER_HEADERS);\n\n    let pretty = sub_matches.get_flag(PARAMETER_PRETTY);\n\n    trace!(\"Format: {}\", format_string);\n    trace!(\"With headers: {}\", with_headers);\n    trace!(\"With metadata: {}\", with_metadata);\n    trace!(\"Pretty: {}\", pretty);\n\n    let options = OutputFormatOptions { with_metadata, with_headers, pretty };\n\n    // Using clap, we allow only valid values for the --format parameter. Because of that it is safe to unwrap.\n    OutputFormat::from_string_with_options(\u0026format_string, options).unwrap().to_owned()\n}\n\npub async fn resolve_tenant_by_uuid(\n    client: \u0026mut PhysnaApiClient,\n    tenant_uuid: \u0026Uuid,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    debug!(\"Resolving tenant by UID: {}\", tenant_uuid);\n    \n    // First, try to list all tenants to see if we can resolve the identifier\n    let tenants = crate::tenant_cache::TenantCache::get_all_tenants(client, false).await?;\n\n    // Look for an exact match by tenant ID first\n    match tenants.iter().find(|t| t.tenant_uuid.eq(tenant_uuid)) {\n        Some(tenant) =\u003e Ok(tenant.try_into()?),\n        None =\u003e Err(CliError::TenantNotFound {identifier: tenant_uuid.to_string(),}),\n    }\n}\n\n/// Helper function to get tenant from parameter or configuration with resolution\npub async fn get_tenant(\n    client: \u0026mut PhysnaApiClient,\n    sub_matches: \u0026ArgMatches,\n    configuration: \u0026Configuration,\n) -\u003e Result\u003cTenant, CliError\u003e {\n    match sub_matches.get_one::\u003cString\u003e(PARAMETER_TENANT) {\n        Some(tenant_name) =\u003e {\n            let tenant = resolve_tenant_by_name(client, tenant_name).await?;\n            Ok(tenant)\n        },\n        None =\u003e {\n            if let Some(active_tenant_uuid) = configuration.get_active_tenant_uuid() {\n                let tenant = resolve_tenant_by_uuid(client, \u0026active_tenant_uuid).await?;\n                Ok(tenant)\n            } else {\n                return Err(CliError::MissingRequiredArgument(PARAMETER_TENANT.to_string()));\n            }\n        }\n    }\n}\n","traces":[{"line":20,"address":[],"length":0,"stats":{"Line":0}},{"line":24,"address":[],"length":0,"stats":{"Line":0}},{"line":27,"address":[],"length":0,"stats":{"Line":0}},{"line":30,"address":[],"length":0,"stats":{"Line":0}},{"line":31,"address":[],"length":0,"stats":{"Line":0}},{"line":32,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[],"length":0,"stats":{"Line":8}},{"line":38,"address":[],"length":0,"stats":{"Line":4}},{"line":44,"address":[],"length":0,"stats":{"Line":20}},{"line":46,"address":[],"length":0,"stats":{"Line":16}},{"line":52,"address":[],"length":0,"stats":{"Line":16}},{"line":54,"address":[],"length":0,"stats":{"Line":16}},{"line":56,"address":[],"length":0,"stats":{"Line":4}},{"line":57,"address":[],"length":0,"stats":{"Line":4}},{"line":58,"address":[],"length":0,"stats":{"Line":4}},{"line":59,"address":[],"length":0,"stats":{"Line":4}},{"line":61,"address":[],"length":0,"stats":{"Line":12}},{"line":64,"address":[],"length":0,"stats":{"Line":16}},{"line":67,"address":[],"length":0,"stats":{"Line":4}},{"line":71,"address":[],"length":0,"stats":{"Line":4}},{"line":74,"address":[],"length":0,"stats":{"Line":12}},{"line":77,"address":[],"length":0,"stats":{"Line":20}},{"line":78,"address":[],"length":0,"stats":{"Line":12}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":84,"address":[],"length":0,"stats":{"Line":4}},{"line":89,"address":[],"length":0,"stats":{"Line":8}},{"line":90,"address":[],"length":0,"stats":{"Line":0}},{"line":91,"address":[],"length":0,"stats":{"Line":0}},{"line":92,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":8}},{"line":96,"address":[],"length":0,"stats":{"Line":16}},{"line":97,"address":[],"length":0,"stats":{"Line":4}},{"line":99,"address":[],"length":0,"stats":{"Line":0}}],"covered":22,"coverable":33},{"path":["/","Users","julian","projects","physna","pcli2","src","physna_v3.rs"],"content":"use std::path::Path;\nuse crate::auth::AuthClient;\nuse crate::folder_hierarchy::FolderHierarchy;\nuse crate::keyring::{Keyring, KeyringError};\nuse crate::model::{Asset, AssetList, AssetListResponse, CurrentUserResponse, FolderList, FolderListResponse, SingleAssetResponse, SingleFolderResponse};\nuse reqwest;\nuse serde_json;\nuse serde_urlencoded;\nuse tracing::{debug, trace, error};\nuse glob::glob;\nuse futures::stream::{self, StreamExt};\nuse indicatif::{ProgressBar, ProgressStyle};\nuse uuid::Uuid;\n\n/// Error emitted by the Physna V3 Api\n/// \n/// This enum represents all possible errors that can occur when interacting with the Physna V3 API.\n/// It includes HTTP errors, JSON parsing errors, authentication errors, and retry failures.\n#[derive(Debug, thiserror::Error)]\npub enum ApiError {\n    /// HTTP request error from the reqwest crate\n    #[error(\"HTTP error: {0}\")]\n    HttpError(#[from] reqwest::Error),\n    \n    /// JSON parsing error from serde_json\n    #[error(\"JSON parsing error: {0}\")]\n    JsonError(#[from] serde_json::Error),\n    \n    /// IO error from std::io operations\n    #[error(\"IO error: {0}\")]\n    IoError(#[from] std::io::Error),\n    \n    /// Authentication error with a descriptive message\n    #[error(\"Authentication error: {0}\")]\n    AuthError(String),\n    \n    /// Request failed after retry attempts with a descriptive message\n    #[error(\"Request failed after retry: {0}\")]\n    RetryFailed(String),\n    \n    /// Glob pattern error\n    #[error(\"Glob pattern error: {0}\")]\n    GlobError(#[from] glob::GlobError),\n    \n    /// Glob pattern error for path matching\n    #[error(\"Glob pattern path error: {0}\")]\n    GlobPatternError(#[from] glob::PatternError),\n    \n    /// Conflict error (e.g., asset already exists)\n    #[error(\"Conflict: {0}\")]\n    ConflictError(String),\n\n    #[error(\"{0}\")]\n    KeyringError(#[from] KeyringError),\n\n    #[error(\"Access token not found. Please login first with 'pcli2 auth login --client-id \u003cid\u003e --client-secret \u003csecret\u003e'\")]\n    InvalidToken,\n\n    #[error(\"Login credentials not provided\")]\n    MissingCredentials,\n\n    #[error(\"Path not found: {0}\")]\n    PathNotFound(String),\n    \n    #[error(\"Invalid path for asset. Check asset name: {0}\")]\n    InvalidAssetPath(String),\n}\n\npub trait TryDefault: Sized {\n    type Error;\n    fn try_default() -\u003e Result\u003cSelf, Self::Error\u003e;\n}\n\n/// Physna V3 API client\n/// \n/// This client provides methods to interact with the Physna V3 REST API.\n/// It handles authentication, automatic token refresh, and common HTTP operations.\n/// \n/// The client supports:\n/// - Automatic access token management with refresh on expiration\n/// - Client credentials for token refresh\n/// - Common HTTP operations (GET, POST, PUT, DELETE, PATCH)\n/// - Automatic retry on authentication failures (401/403)\n/// - Batch operations for efficient processing of multiple resources\n/// - Comprehensive error handling with detailed error types\n/// \n/// Usage example:\n/// ```no_run\n/// use pcli2::physna_v3::PhysnaApiClient;\n/// \n/// #[tokio::main]\n/// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n///     let mut client = PhysnaApiClient::new()\n///         .with_access_token(\"your_access_token\".to_string())\n///         .with_client_credentials(\"your_client_id\".to_string(), \"your_client_secret\".to_string());\n///     \n///     let tenants = client.list_tenants().await?;\n///     Ok(())\n/// }\n/// ```\n#[derive(Clone)]\npub struct PhysnaApiClient {\n    /// Base URL for the Physna V3 API (e.g., \"https://app-api.physna.com/v3\")\n    base_url: String,\n    \n    /// Current access token for API authentication\n    access_token: Option\u003cString\u003e,\n    \n    /// Client credentials (client_id, client_secret) for token refresh\n    client_credentials: Option\u003c(String, String)\u003e, // (client_id, client_secret)\n    \n    /// HTTP client for making requests\n    http_client: reqwest::Client,\n}\n\n\nimpl TryDefault for PhysnaApiClient {\n    type Error = ApiError;\n\n    fn try_default() -\u003e Result\u003cPhysnaApiClient, ApiError\u003e {\n        // Load configuration to get the base URL\n        let configuration = crate::configuration::Configuration::load_or_create_default()\n            .map_err(|e| ApiError::AuthError(format!(\"Failed to load configuration: {}\", e)))?;\n\n        // Use the active environment name for keyring storage, fallback to \"default\" if no environment is set\n        let environment_name = configuration.get_active_environment().unwrap_or_else(|| \"default\".to_string());\n\n        #[allow(unused_mut)]\n        let mut keyring = Keyring::default();\n        // Get all environment credentials in a single operation to reduce keyring access calls\n        let (access_token, client_id, client_secret) = keyring.get_environment_credentials(\u0026environment_name)?;\n\n        match access_token {\n            Some(token) =\u003e {\n                let mut client = PhysnaApiClient::new_with_configuration(\u0026configuration).with_access_token(token);\n\n                // Try to get client credentials for automatic token refresh\n                if let (Some(id), Some(secret)) = (client_id, client_secret) {\n                    client = client.with_client_credentials(id, secret);\n                    Ok(client)\n                } else {\n                    Err(ApiError::MissingCredentials)\n                }\n            }\n            None =\u003e {\n                Err(ApiError::InvalidToken)\n            }\n        }\n    }\n}\n\nimpl PhysnaApiClient {\n    /// Create a new Physna API client with default configuration\n    ///\n    /// The client is initialized with:\n    /// - Default base URL: \"https://app-api.physna.com/v3\"\n    /// - No access token (must be set with `with_access_token`)\n    /// - No client credentials (must be set with `with_client_credentials`)\n    /// - Default HTTP client with appropriate timeouts and headers\n    ///\n    /// # Returns\n    /// A new `PhysnaApiClient` instance ready for configuration\n    ///\n    /// # Example\n    /// ```\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    ///\n    /// let client = PhysnaApiClient::new();\n    /// // Configure with your credentials\n    /// let configured_client = client\n    ///     .with_access_token(\"your_token\".to_string())\n    ///     .with_client_credentials(\"client_id\".to_string(), \"client_secret\".to_string());\n    /// ```\n    pub fn new() -\u003e Self {\n        Self {\n            base_url: \"https://app-api.physna.com/v3\".to_string(),\n            access_token: None,\n            client_credentials: None,\n            http_client: reqwest::Client::builder()\n                .timeout(std::time::Duration::from_secs(60)) // 60-second timeout for all requests\n                .build()\n                .expect(\"Failed to build HTTP client with timeout\"),\n        }\n    }\n\n    /// Create a new Physna API client with configuration-based URLs\n    ///\n    /// # Arguments\n    /// * `configuration` - The configuration containing the base URL\n    ///\n    /// # Returns\n    /// A new `PhysnaApiClient` instance with the configured base URL\n    pub fn new_with_configuration(configuration: \u0026crate::configuration::Configuration) -\u003e Self {\n        Self {\n            base_url: configuration.get_api_base_url(),\n            access_token: None,\n            client_credentials: None,\n            http_client: reqwest::Client::builder()\n                .timeout(std::time::Duration::from_secs(60)) // 60-second timeout for all requests\n                .build()\n                .expect(\"Failed to build HTTP client with timeout\"),\n        }\n    }\n    \n    /// Set the base URL for the API client\n    /// \n    /// # Arguments\n    /// * `base_url` - The base URL for the Physna V3 API (e.g., \"https://app-api.physna.com/v3\")\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with the new base URL\n    pub fn with_base_url(mut self, base_url: String) -\u003e Self {\n        self.base_url = base_url;\n        self\n    }\n\n    /// Set the access token for API authentication\n    /// \n    /// # Arguments\n    /// * `token` - The access token to use for API requests\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with the access token set\n    pub fn with_access_token(mut self, token: String) -\u003e Self {\n        self.access_token = Some(token);\n        self\n    }\n    \n    /// Set the client credentials for automatic token refresh\n    /// \n    /// # Arguments\n    /// * `client_id` - The client ID for authentication\n    /// * `client_secret` - The client secret for authentication\n    /// \n    /// # Returns\n    /// The updated `PhysnaApiClient` instance with client credentials set\n    pub fn with_client_credentials(mut self, client_id: String, client_secret: String) -\u003e Self {\n        self.client_credentials = Some((client_id, client_secret));\n        self\n    }\n    \n    /// Attempt to refresh the access token using client credentials\n    /// \n    /// This method tries to obtain a new access token using the stored client credentials.\n    /// It's called automatically when API requests fail with authentication errors (401/403).\n    /// \n    /// # Returns\n    /// * `Ok(())` - Token successfully refreshed\n    /// * `Err(ApiError::AuthError)` - Failed to refresh token or no credentials available\n    async fn refresh_token(\u0026mut self) -\u003e Result\u003c(), ApiError\u003e {\n        // Check if we have client credentials available for token refresh\n        if let Some((client_id, client_secret)) = \u0026self.client_credentials {\n            trace!(\"Refreshing access token\");\n            \n            // Create a new auth client with the stored credentials\n            let auth_client = AuthClient::new(client_id.clone(), client_secret.clone());\n            \n            // Attempt to get a new access token\n            match auth_client.get_access_token().await {\n                Ok(new_token) =\u003e {\n                    debug!(\"Successfully refreshed access token\");\n                    // Update the stored access token\n                    self.access_token = Some(new_token);\n                    Ok(())\n                }\n                Err(e) =\u003e {\n                    // Return an authentication error with details\n                    let error_msg = e.to_string();\n                    let user_friendly_msg = if error_msg.contains(\"invalid_client\") {\n                        \"Failed to refresh token: Invalid client credentials. This could be due to:\\n  - Incorrect client ID or secret\\n  - Expired or revoked client credentials\\n  - Disabled service account\\n  Please verify your credentials and log in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"invalid_grant\") {\n                        \"Failed to refresh token: Invalid authorization grant. Please log in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"unauthorized_client\") {\n                        \"Failed to refresh token: Unauthorized client. Please verify your client credentials and try logging in again with 'pcli2 auth login'.\"\n                    } else if error_msg.contains(\"invalid_request\") {\n                        \"Failed to refresh token: Invalid request. Please verify your credentials and try logging in again with 'pcli2 auth login'.\"\n                    } else {\n                        \u0026format!(\"Failed to refresh token: {}\", e)\n                    };\n                    Err(ApiError::AuthError(user_friendly_msg.to_string()))\n                }\n            }\n        } else {\n            // No client credentials available for token refresh\n            Err(ApiError::AuthError(\"No client credentials available for token refresh\".to_string()))\n        }\n    }\n    \n    /// Get the current access token from the client\n    /// \n    /// This method allows external code to retrieve the current access token,\n    /// which is useful for persisting updated tokens after refresh operations.\n    /// \n    /// # Returns\n    /// * `Option\u003cString\u003e` - The current access token if available, None otherwise\n    pub fn get_access_token(\u0026self) -\u003e Option\u003cString\u003e {\n        self.access_token.clone()\n    }\n    \n    /// Generic method to build and execute HTTP requests with automatic token refresh on 401/403 errors\n    /// \n    /// This method provides a unified interface for making HTTP requests to the Physna V3 API.\n    /// It automatically handles:\n    /// - Adding access tokens to authenticated requests\n    /// - Detecting authentication failures (401/403)\n    /// - Refreshing expired tokens using client credentials\n    /// - Retrying failed requests with refreshed tokens\n    /// \n    /// # Type Parameters\n    /// * `T` - The type to deserialize the response into (must implement `DeserializeOwned`)\n    /// * `F` - A closure that builds the HTTP request\n    /// \n    /// # Arguments\n    /// * `request_builder` - A closure that takes a `reqwest::Client` and returns a `RequestBuilder`\n    /// \n    /// # Returns\n    /// * `Ok(T)` - Successfully executed request with parsed response\n    /// * `Err(ApiError)` - HTTP error, JSON parsing error, or authentication failure\n    async fn execute_request\u003cT, F\u003e(\u0026mut self, request_builder: F) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        F: Fn(\u0026reqwest::Client) -\u003e reqwest::RequestBuilder,\n    {\n        // Build and execute the initial request\n        let mut request = request_builder(\u0026self.http_client);\n        \n        // Add access token header if available for authentication\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        // A 401 clearly indicates an invalid token\n        // A 403 can also indicate an expired token in some cases\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the expired or invalid access token\n            self.refresh_token().await?;\n            \n            // Retry the original request with the newly refreshed token\n            debug!(\"Retrying request with refreshed token\");\n            let mut retry_request = request_builder(\u0026self.http_client);\n            \n            // Add the refreshed access token to the retry request\n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            // Check if the retry was successful\n            if retry_response.status().is_success() {\n                // Try to get the raw response text for debugging deserialization issues\n                let response = retry_response.text().await?;\n                trace!(\"Raw response for deserialization: {}\", response);\n                trace!(\"Deserializing into: {}\", std::any::type_name::\u003cT\u003e());\n                \n                // Try to parse and return the JSON response\n                match serde_json::from_str::\u003cT\u003e(\u0026response) {\n                    Ok(result) =\u003e Ok(result),\n                    Err(e) =\u003e {\n                        error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response);\n                        Err(ApiError::JsonError(e))\n                    }\n                }\n            } else {\n                // Retry failed - provide clear error information\n                let status = retry_response.status();\n                let error_text = retry_response.text().await.unwrap_or_else(|_| \"Unknown error\".to_string());\n                error!(\"API request failed after retry. Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text);\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text\n                )))\n            }\n        } else if response.status().is_success() {\n            // Initial request was successful - try to get the raw response text for debugging\n            let response = response.text().await?;\n            trace!(\"Raw response for deserialization: {}\", response);\n            trace!(\"Deserializing into: {}\", std::any::type_name::\u003cT\u003e());\n            \n            // Try to parse and return the JSON response\n            match serde_json::from_str::\u003cT\u003e(\u0026response) {\n                Ok(result) =\u003e Ok(result),\n                Err(e) =\u003e {\n                    error!(\"Failed to deserialize response: {}. Raw response: {}\", e, response);\n                    Err(ApiError::JsonError(e))\n                }\n            }\n        } else {\n            // For all other errors, return the error status\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n    \n    /// Generic method to build and execute GET requests\n    async fn get\u003cT\u003e(\u0026mut self, url: \u0026str) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n    {\n        self.execute_request(|client| client.get(url)).await\n    }\n    \n    /// Generic method to build and execute POST requests\n    async fn post\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        // Log the request for debugging\n        let body_json = serde_json::to_string_pretty(body).unwrap_or_else(|_| \"Unable to serialize body\".to_string());\n        trace!(\"POST request to {}: {}\", url, body_json);\n        \n        let result = self.execute_request(|client| client.post(url).json(body)).await;\n        \n        // Log the response for debugging\n        match \u0026result {\n            Ok(_) =\u003e trace!(\"POST request to {} succeeded\", url),\n            Err(e) =\u003e trace!(\"POST request to {} failed: {}\", url, e),\n        }\n        \n        result\n    }\n    \n    /// Generic method to build and execute PUT requests\n    async fn put\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client| client.put(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute PATCH requests\n    #[allow(dead_code)]\n    async fn patch\u003cT, B\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003cT, ApiError\u003e\n    where\n        T: serde::de::DeserializeOwned,\n        B: serde::Serialize,\n    {\n        self.execute_request(|client| client.patch(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute DELETE requests with automatic token refresh\n    async fn delete(\u0026mut self, url: \u0026str) -\u003e Result\u003c(), ApiError\u003e {\n        // For DELETE requests, we build and execute the request directly\n        // without trying to parse JSON from the response\n        let mut request = self.http_client.delete(url);\n        \n        // Add access token if available\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n        \n        // Check if we need to retry due to authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the token\n            self.refresh_token().await?;\n            \n            // Retry the request with the new token\n            debug!(\"Retrying DELETE request with refreshed token\");\n            let mut retry_request = self.http_client.delete(url);\n            \n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            if retry_response.status().is_success() {\n                Ok(())\n            } else {\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {}\", \n                    response.status(), \n                    retry_response.status()\n                )))\n            }\n        } else if response.status().is_success() {\n            Ok(())\n        } else {\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n\n    /// Get the current user's information from the Physna V3 API\n    /// \n    /// This method fetches information about the currently authenticated user,\n    /// including their tenant settings and other user-specific configuration.\n    /// The response contains the user's profile information and available tenants.\n    /// \n    /// # Returns\n    /// * `Ok(CurrentUserResponse)` - Successfully fetched current user information\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_current_user(\u0026mut self) -\u003e Result\u003cCurrentUserResponse, ApiError\u003e {\n        let url = format!(\"{}/users/me\", self.base_url);\n        self.get(\u0026url).await\n    }\n\n    /// List all available tenants for the current user\n    /// \n    /// This method fetches all tenants available to the currently authenticated user.\n    /// Tenants represent different organizations or environments that the user has access to.\n    /// Each tenant has its own set of folders, assets, and configurations.\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003cTenantSetting\u003e)` - Successfully fetched list of available tenants\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn list_tenants(\u0026mut self) -\u003e Result\u003cVec\u003ccrate::model::TenantSetting\u003e, ApiError\u003e {\n        let user = self.get_current_user().await?;\n        Ok(user.user.settings)\n    }\n    \n    /// List folders for a specific tenant with optional pagination\n    /// \n    /// This method fetches a list of folders for the specified tenant.\n    /// It supports pagination through the optional `page` and `per_page` parameters.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant whose folders to list\n    /// * `page` - Optional page number (1-based indexing)\n    /// * `per_page` - Optional number of items per page (default: 100)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - Successfully fetched list of folders with pagination metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn list_folders(\u0026mut self, tenant_uuid: \u0026Uuid, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_val = page.unwrap_or(1).to_string();\n        let per_page_val = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        // Build query parameters for pagination with defaults\n        let query_params = vec![\n            (\"page\", page_val.as_str()),\n            (\"perPage\", per_page_val.as_str()),\n        ];\n        \n        // Add query parameters to URL\n        let url = format!(\"{}?{}\", url, serde_urlencoded::to_string(\u0026query_params).unwrap());\n        \n        // Execute GET request to fetch folders\n        self.get(\u0026url).await\n    }\n    \n    /// List folders in a specific parent folder with optional pagination\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    \n    /// Get details for a specific folder by ID\n    /// \n    /// This method fetches detailed information about a specific folder by its ID.\n    /// The response includes folder metadata such as name, creation date, asset count, etc.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the folder\n    /// * `folder_id` - The UUID of the folder to retrieve\n    \n    /// List folders in a specific parent folder with optional pagination\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_folders_in_parent(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_id: Option\u003c\u0026str\u003e, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Build query parameters for parent filtering, pagination\n        let mut query_params = vec![(\"contentType\", \"folders\")];\n        if let Some(parent_id) = parent_folder_id {\n            query_params.push((\"parentFolderId\", parent_id));\n        }\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_val = page.unwrap_or(1).to_string();\n        let per_page_val = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_val.as_str()));\n        query_params.push((\"perPage\", per_page_val.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Making API call to list folders in parent: {}\", url);\n        self.get(\u0026url).await\n    }\n    \n\n    /// \n    /// # Returns\n    /// * `Ok(FolderResponse)` - Successfully fetched folder details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_folder(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::Folder, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_uuid, folder_uuid);\n\n        trace!(\"Getting folder details...\");\n        let response: SingleFolderResponse = self.get(\u0026url).await?;\n        let folder = response.into();\n        trace!(\"Found: {:?}\", \u0026folder);\n        Ok(folder)\n    }\n    \n    /// Create a new folder within a tenant\n    /// \n    /// This method creates a new folder with the specified name within the given tenant.\n    /// Optionally, the folder can be created as a subfolder of an existing parent folder.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the folder\n    /// * `name` - The name for the new folder\n    /// * `parent_folder_id` - Optional UUID of the parent folder (creates subfolder if provided)\n    /// \n    /// # Returns\n    /// * `Ok(FolderResponse)` - Successfully created folder details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn create_folder(\u0026mut self, tenant_uuid: \u0026Uuid, name: \u0026str, parent_folder_uuid: Option\u003cUuid\u003e) -\u003e Result\u003ccrate::model::SingleFolderResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders\", self.base_url, tenant_uuid);\n        \n        // Build request body with folder name\n        let mut body = serde_json::json!({\n            \"name\": name\n        });\n        \n        // Add parent folder ID if provided to create a subfolder\n        if let Some(parent_uuid) = parent_folder_uuid {\n            body[\"parentFolderId\"] = serde_json::Value::String(parent_uuid.to_string());\n        }\n        \n        // Execute POST request to create the folder\n        self.post(\u0026url, \u0026body).await\n    }\n    \n    pub async fn update_folder(\u0026mut self, tenant_id: \u0026str, folder_id: \u0026str, name: \u0026str) -\u003e Result\u003ccrate::model::FolderResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_id, folder_id);\n        \n        let body = serde_json::json!({\n            \"name\": name\n        });\n        \n        // The API returns a SingleFolderResponse with a \"folder\" field\n        let response: crate::model::SingleFolderResponse = self.put(\u0026url, \u0026body).await?;\n        Ok(response.folder)\n    }\n    \n    /// Delete a folder by ID\n    /// \n    /// This method deletes the specified folder from the tenant.\n    /// Note: Deleting a folder will also delete all its contents (subfolders and assets).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the folder\n    /// * `folder_id` - The UUID of the folder to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted folder\n    /// * `Err(ApiError)` - HTTP error or other error\n    pub async fn delete_folder(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: \u0026Uuid) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/folders/{}\", self.base_url, tenant_uuid, folder_uuid);\n        self.delete(\u0026url).await\n    }\n    \n    // Asset operations\n    \n\n    /// List all assets in a specific folder by folder UUID\n    /// \n    /// This method lists assets that are contained in a specific folder using the \n    /// /tenants/{tenantId}/folders/{folderId}/contents endpoint with contentType=assets.\n    /// This is the efficient way to list assets in a specific folder, unlike the\n    /// list_assets method which fetches all assets in the tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant\n    /// * `folder_uuid` - The ID of the folder to list assets from. If None, it will list the root folder\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_assets_by_parent_folder_uuid(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_uuid: Option\u003c\u0026Uuid\u003e) -\u003e Result\u003cAssetList, ApiError\u003e {\n        let mut page: usize = 1;\n        let per_page: usize = 200;\n        let mut assets: Vec\u003cAsset\u003e = Vec::new();\n\n        loop {\n            let response = self.list_assets_by_parent_folder_uuid_with_pagination(tenant_uuid, parent_folder_uuid, page, per_page).await?;\n            let partial_asset_list: Vec\u003cAsset\u003e = response.assets.iter().map(|a| a.into()).collect();\n            assets.extend(partial_asset_list);\n            \n            page = response.page_data.current_page;\n            if response.page_data.current_page \u003e= response.page_data.last_page {\n                break;\n            }\n        }\n\n        Ok(assets.into())\n    }\n    \n    /// List a single page of assets in a specific folder by folder UUID\n    /// \n    /// This method lists assets that are contained in a specific folder using the \n    /// /tenants/{tenantId}/folders/{folderId}/contents endpoint with contentType=assets.\n    /// This is the efficient way to list assets in a specific folder, unlike the\n    /// list_assets method which fetches all assets in the tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant\n    /// * `folder_uuid` - The ID of the folder to list assets from\n    /// * `page` - Page number for pagination\n    /// * `per_page` - Number of items per page for pagination\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    async fn list_assets_by_parent_folder_uuid_with_pagination(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: Option\u003c\u0026Uuid\u003e, page: usize, per_page: usize) -\u003e Result\u003cAssetListResponse, ApiError\u003e {\n        let url = match folder_uuid {\n            Some(folder_uuid) =\u003e format!(\"{}/tenants/{}/folders/{}/contents\", self.base_url, tenant_uuid, folder_uuid),\n            None =\u003e format!(\"{}/tenants/{}/folders/root/contents\", self.base_url, tenant_uuid),\n        }; \n        \n        // Build query parameters\n        let mut query_params = vec![(\"contentType\", \"assets\")];\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_str = page.to_string();\n        let per_page_str = per_page.to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_str.as_str()));\n        query_params.push((\"perPage\", per_page_str.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Constructed URL for asset listing: {}\", url);\n        self.get(\u0026url).await\n    }\n    \n    /// Get the folder ID for a given path by traversing the folder structure efficiently\n    /// \n    /// This method efficiently resolves a folder path to its corresponding folder ID\n    /// by using the root/content and folderId/contents API endpoints, with content filtering.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `folder_path` - The path to resolve (e.g., \"Root/Child/Grandchild\" or \"/Root/Child/Grandchild\")\n    /// \n    /// # Returns\n    /// * `Ok(Some(String))` - The folder ID if found\n    /// * `Ok(None)` - If the path doesn't exist\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_folder_uuid_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, folder_path: \u0026str) -\u003e Result\u003cOption\u003cUuid\u003e, ApiError\u003e {\n        debug!(\"Resolving folder path: {} for tenant: {} using FolderHierarchy\", folder_path, tenant_uuid);\n        \n        // Use the proven FolderHierarchy implementation to resolve the path\n        match FolderHierarchy::build_from_api(self, tenant_uuid).await {\n            Ok(hierarchy) =\u003e {\n                \n                // Use the hierarchy to find the folder by path\n                if let Some(folder_node) = hierarchy.get_folder_by_path(folder_path) {\n                    debug!(\"Found folder at path '{}': {}\", folder_path, folder_node.folder.uuid);\n                    Ok(Some(folder_node.folder.uuid.clone()))\n                } else {\n                    debug!(\"Folder not found at path: {}\", folder_path);\n                    Ok(None)\n                }\n            }\n            Err(e) =\u003e {\n                error!(\"Error building folder hierarchy: {}\", e);\n                Err(ApiError::ConflictError(format!(\"Failed to build folder hierarchy: {}\", e)))\n            }\n        }\n    }\n    \n    /// List folders in a specific parent folder\n    /// \n    /// This method lists folders that have a specific parent folder, allowing\n    /// for efficient traversal of the folder hierarchy without fetching all folders.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_id` - The ID of the parent folder (None for root level)\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of folders in the parent\n    /// * `Err(ApiError)` - If there was an error during API calls\n    \n    /// Get contents of root folder by tenant ID, filtered by content type\n    /// \n    /// This method gets contents of the root folder with a specific content type (folders only, assets only, or all).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `content_type` - The type of content to return (\"all\", \"assets\", \"folders\")\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of contents in the root folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_root_contents(\u0026mut self, tenant_uuid: \u0026Uuid, _content_type: \u0026str, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderListResponse, ApiError\u003e {\n        // Use list_folders_in_parent with None parent to get root contents\n        // The list_folders_in_parent function now handles default values\n        self.list_folders_in_parent(tenant_uuid, None, page, per_page).await\n    }\n    \n    /// Get contents of a specific folder by ID, filtered by content type\n    /// \n    /// This method gets contents of a specific folder with a specific content type (folders only, assets only, or all).\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// * `folder_id` - The ID of the folder to get contents from\n    /// * `content_type` - The type of content to return (\"all\", \"assets\", \"folders\")\n    /// * `page` - Page number for pagination (optional)\n    /// * `per_page` - Number of items per page for pagination (optional)\n    /// \n    /// # Returns\n    /// * `Ok(FolderListResponse)` - List of contents in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_folder_contents(\u0026mut self, tenant_uuid: \u0026Uuid, folder_uuid: Option\u003c\u0026Uuid\u003e, content_type: \u0026str, page: Option\u003cu32\u003e, per_page: Option\u003cu32\u003e) -\u003e Result\u003cFolderList, ApiError\u003e {\n        let url = match folder_uuid {\n            Some(folder_uuid) =\u003e format!(\"{}/tenants/{}/folders/{}/contents\", self.base_url, tenant_uuid, folder_uuid),\n            None =\u003e format!(\"{}/tenants/{}/folders/root/contents\", self.base_url, tenant_uuid),\n        };        \n\n        // Build query parameters\n        let mut query_params = vec![(\"contentType\", content_type)];\n        \n        // Handle defaults - always provide values to avoid API defaulting to 20\n        let page_str = page.unwrap_or(1).to_string();\n        let per_page_str = per_page.unwrap_or(200).to_string(); // Default to 200 instead of API's default of 20\n        \n        query_params.push((\"page\", page_str.as_str()));\n        query_params.push((\"perPage\", per_page_str.as_str()));\n        \n        // Add query parameters to URL\n        let query_string = serde_urlencoded::to_string(\u0026query_params).unwrap();\n        let url = format!(\"{}?{}\", url, query_string);\n        \n        trace!(\"Constructed URL for folder contents listing: {}\", url);\n        let response: FolderListResponse = self.get(\u0026url).await?;\n\n        Ok(response.into())\n    }\n\n    /// This method is a wrapper around get_folder_uuid_by_path(...), but it will return None if the path is the root.\n    pub async fn resolve_folder_uuid_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, folder_path: \u0026str) -\u003e Result\u003cOption\u003cUuid\u003e, ApiError\u003e {\n        if folder_path.eq(\"/\") {\n            Ok(None)\n        } else {\n            Ok(self.get_folder_uuid_by_path(tenant_uuid, folder_path).await?)\n        }\n    }\n    \n    /// List only the assets in a specific folder by path\n    /// \n    /// This method efficiently lists assets in a specific folder by first\n    /// resolving the folder path to a folder ID and then listing assets in that folder.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `parent_folder_path` - The path of the folder to list assets from\n    /// \n    /// # Returns\n    /// * `Ok(AssetListResponse)` - List of assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_assets_by_parent_folder_path(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_path: \u0026str) -\u003e Result\u003cAssetList, ApiError\u003e {\n        debug!(\"Listing assets in a folder by path: {} for tenant: {}\", parent_folder_path, tenant_uuid);\n        \n        let parent_folder_uuid = self.resolve_folder_uuid_by_path(tenant_uuid, parent_folder_path).await?;\n        \n        // Now list all assets in this specific folder using the efficient API endpoint with pagination\n        let assets = self.list_assets_by_parent_folder_uuid(tenant_uuid, parent_folder_uuid.clone().as_ref()).await?;\n        Ok(assets.into())\n    }\n    \n    /// Get all contents (both folders and assets) of a specific folder path\n    /// \n    /// This method efficiently gets both subfolders and assets within a specific folder\n    /// by first resolving the path and then making separate API calls for each.\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant\n    /// * `folder_path` - The path of the folder to get contents from\n    /// \n    /// # Returns\n    /// * `Ok((Vec\u003cFolderResponse\u003e, Vec\u003cAssetResponse\u003e))` - Folders and assets in the folder\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn list_all_contents_by_parent_folder_path(\u0026mut self, tenant_uuid: \u0026Uuid, parent_folder_path: \u0026str) -\u003e Result\u003c(FolderList, AssetList), ApiError\u003e {\n        debug!(\"Listing all folder contents by path: {} for tenant: {}\", parent_folder_path, tenant_uuid);\n        \n        let parent_folder_uuid = self.resolve_folder_uuid_by_path(tenant_uuid, parent_folder_path).await?;\n\n        // Get subfolders in the folder using the more efficient content API\n        let subfolders_response = self.get_folder_contents(tenant_uuid, parent_folder_uuid.clone().as_ref(), \"folders\", Some(1), Some(1000)).await?;\n        let subfolders = subfolders_response;\n\n        // Get assets in the folder\n        let assets_response = self.list_assets_by_parent_folder_uuid(tenant_uuid, parent_folder_uuid.clone().as_ref()).await?;\n        let assets = assets_response;\n\n        Ok((subfolders, assets))\n    }\n\n    fn get_parent_folder_path(asset_path: \u0026String) -\u003e Result\u003cString, ApiError\u003e {\n        let path = Path::new(\u0026asset_path);\n        let parent = path.parent()\n            .ok_or_else(|| ApiError::InvalidAssetPath(asset_path.to_owned()))?;\n\n        // Convert the parent path to string\n        let parent_str = parent.to_str()\n            .ok_or_else(|| ApiError::InvalidAssetPath(asset_path.to_owned()))?;\n\n        // Handle the case where the parent is root \"/\"\n        let normalized_parent = if parent_str.is_empty() {\n            \"/\".to_string()\n        } else if parent_str.starts_with('/') {\n            parent_str.to_string()\n        } else {\n            format!(\"/{}\", parent_str)\n        };\n\n        Ok(normalized_parent)\n    }\n\n    fn asset_name_from_path(path: \u0026String) -\u003e Option\u003cString\u003e {\n    Path::new(\u0026path)\n        .file_name()\n        .and_then(|s| s.to_str())\n        .map(|s| s.to_string())\n    }    \n\n    /// Get details for a specific asset by ID\n    /// \n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant that owns the asset\n    /// * `asset_uuid` - The UUID of the asset to retrieve\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully fetched asset details\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_asset_by_uuid(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid) -\u003e Result\u003cAsset, ApiError\u003e {\n        debug!(\"Getting asset details for tenant_uuid: {}, asset_uuid: {}\", tenant_uuid, asset_uuid);\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_uuid, asset_uuid);\n        let response: SingleAssetResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved asset details for asset_id: {}\", asset_uuid);\n        Ok(response.asset.into())\n    }\n\n    pub async fn get_asset_by_path(\u0026mut self, tenant_uuid: \u0026Uuid, asset_path: \u0026String) -\u003e Result\u003cAsset, ApiError\u003e {\n\n        let parent_folder_path = Self::get_parent_folder_path(asset_path)?;\n        let assets = self.list_assets_by_parent_folder_path(tenant_uuid, \u0026parent_folder_path).await?;\n        match Self::asset_name_from_path(asset_path) {\n            Some(asset_name) =\u003e {\n                assets.find_by_name(\u0026asset_name).cloned().ok_or(ApiError::PathNotFound(asset_path.to_owned()))\n            },\n            None =\u003e Err(ApiError::InvalidAssetPath(asset_path.to_owned())),\n        }\n    }\n    \n    /// Delete an asset by ID\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted asset\n    /// * `Err(ApiError)` - HTTP error or other error\n    pub async fn delete_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_id, asset_id);\n        self.delete(\u0026url).await\n    }\n    \n    /// Update an asset's metadata\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `name` - The new name for the asset\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully updated asset with new metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str, name: \u0026str) -\u003e Result\u003ccrate::model::AssetResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_id, asset_id);\n        \n        let body = serde_json::json!({\n            \"name\": name\n        });\n        \n        self.put(\u0026url, \u0026body).await\n    }\n    \n    /// Update an asset's metadata fields\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `metadata` - A map of metadata key-value pairs to update\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully updated asset with new metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset_metadata(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, metadata: \u0026std::collections::HashMap\u003cString, serde_json::Value\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}\", self.base_url, tenant_uuid, asset_uuid);\n        \n        let body = serde_json::json!({\n            \"metadata\": metadata\n        });\n        \n        // Log the request body for debugging\n        debug!(\"Updating asset metadata with JSON body: {}\", serde_json::to_string_pretty(\u0026body).unwrap_or_else(|_| \"Unable to serialize body\".to_string()));\n        \n        self.patch_no_response(\u0026url, \u0026body).await\n    }\n\n    /// Update an asset's metadata fields, automatically registering new metadata keys if needed\n    ///\n    /// # Arguments\n    /// * `tenant_uuid` - The ID of the tenant that owns the asset\n    /// * `asset_uuid` - The UUID of the asset to update\n    /// * `metadata` - A map of metadata key-value pairs to update\n    ///\n    /// # Returns\n    /// * `Ok(())` - Successfully updated asset metadata\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn update_asset_metadata_with_registration(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, metadata: \u0026std::collections::HashMap\u003cString, serde_json::Value\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        // Get existing metadata fields for the tenant\n        let existing_fields_response = self.get_metadata_fields(\u0026tenant_uuid.to_string()).await;\n\n        let mut existing_field_names = std::collections::HashSet::new();\n        if let Ok(fields_response) = existing_fields_response {\n            for field in fields_response.metadata_fields {\n                existing_field_names.insert(field.name);\n            }\n        }\n\n        // Check each metadata key and register if it doesn't exist\n        for (key, _value) in metadata.iter() {\n            if !existing_field_names.contains(key) {\n                // Register the new metadata field (default to text type)\n                let field_result = self.create_metadata_field(\u0026tenant_uuid.to_string(), key, Some(\"text\")).await;\n\n                // Log the result of field creation\n                match field_result {\n                    Ok(_) =\u003e debug!(\"Successfully registered new metadata field: {}\", key),\n                    Err(e) =\u003e {\n                        debug!(\"Failed to register metadata field '{}': {}\", key, e);\n                        // Continue anyway, as the API might allow setting values for unregistered keys\n                    }\n                }\n            }\n        }\n\n        // Now update the asset metadata\n        self.update_asset_metadata(tenant_uuid, asset_uuid, metadata).await\n    }\n\n    /// Delete specific metadata fields from an asset\n    /// \n    /// This method deletes specific metadata fields from the specified asset.\n    /// The metadata keys are sent as a direct array in the request body.\n    /// \n    /// # Arguments\n    /// Delete specific metadata fields from an asset\n    /// \n    /// This method deletes specific metadata fields from the specified asset.\n    /// The metadata keys are sent as an object with a \"metadataFieldNames\" array.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to update\n    /// * `metadata_keys` - A vector of metadata field names to delete\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully deleted metadata from the asset\n    /// * `Err(ApiError)` - HTTP error or other error occurred\n    pub async fn delete_asset_metadata(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str, metadata_keys: Vec\u003c\u0026str\u003e) -\u003e Result\u003c(), ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/assets/{}/metadata\", self.base_url, tenant_id, asset_id);\n        \n        // Send metadata keys wrapped in \"metadataFieldNames\" object as required by API\n        let body = serde_json::json!({\n            \"metadataFieldNames\": metadata_keys\n        });\n        \n        // Log the request body for debugging\n        debug!(\"Deleting asset metadata with JSON body: {}\", serde_json::to_string_pretty(\u0026body).unwrap_or_else(|_| \"Unable to serialize body\".to_string()));\n        \n        self.delete_with_body(\u0026url, \u0026body).await\n    }\n    /// * `field_name` - The name of the metadata field to create\n    /// * `field_type` - The type of the metadata field (e.g., \"text\", \"number\", \"boolean\") - defaults to \"text\"\n    /// \n    /// # Returns\n    /// * `Ok(serde_json::Value)` - Response from the API confirming the field was created\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn create_metadata_field(\u0026mut self, tenant_id: \u0026str, field_name: \u0026str, field_type: Option\u003c\u0026str\u003e) -\u003e Result\u003cserde_json::Value, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/metadata-fields\", self.base_url, tenant_id);\n        \n        let effective_type = field_type.unwrap_or(\"text\");\n        let body = serde_json::json!({\n            \"name\": field_name,\n            \"type\": effective_type\n        });\n        \n        self.post(\u0026url, \u0026body).await\n    }\n    \n    /// Generic method to build and execute PATCH requests that may return empty responses\n    /// \n    /// This method is similar to the standard patch method but handles empty responses gracefully.\n    /// It's useful for API endpoints that return 204 No Content or empty bodies on success.\n    /// \n    /// # Type Parameters\n    /// * `B` - The type of the request body (must implement `Serialize`)\n    /// \n    /// # Arguments\n    /// * `url` - The URL to send the PATCH request to\n    /// * `body` - The request body to send with the PATCH request\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn patch_no_response\u003cB\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003c(), ApiError\u003e\n    where\n        B: serde::Serialize,\n    {\n        self.execute_request_no_response(|client| client.patch(url).json(body)).await\n    }\n    \n    /// Generic method to build and execute DELETE requests that may have a request body and return empty responses\n    /// \n    /// This method is similar to the standard delete method but allows request bodies for DELETE operations.\n    /// It's useful for API endpoints like deleting specific metadata that require a body.\n    /// \n    /// # Type Parameters\n    /// * `B` - The type of the request body (must implement `Serialize`)\n    /// \n    /// # Arguments\n    /// * `url` - The URL to send the DELETE request to\n    /// * `body` - The request body to send with the DELETE request\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn delete_with_body\u003cB\u003e(\u0026mut self, url: \u0026str, body: \u0026B) -\u003e Result\u003c(), ApiError\u003e\n    where\n        B: serde::Serialize,\n    {\n        self.execute_request_no_response(|client| client.delete(url).json(body)).await\n    }\n    \n    /// Generic method to execute requests that may return empty responses\n    /// \n    /// This method is similar to execute_request but handles empty responses gracefully.\n    /// It's useful for API endpoints that return 204 No Content or empty bodies on success.\n    /// \n    /// # Type Parameters\n    /// * `F` - A closure that builds the HTTP request\n    /// \n    /// # Arguments\n    /// * `request_builder` - A closure that takes a `reqwest::Client` and returns a `RequestBuilder`\n    /// \n    /// # Returns\n    /// * `Ok(())` - Successfully executed request (empty response is considered success)\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    async fn execute_request_no_response\u003cF\u003e(\u0026mut self, request_builder: F) -\u003e Result\u003c(), ApiError\u003e\n    where\n        F: Fn(\u0026reqwest::Client) -\u003e reqwest::RequestBuilder,\n    {\n        // Build and execute the initial request\n        let mut request = request_builder(\u0026self.http_client);\n        \n        // Add access token header if available for authentication\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n\n        // Check if we should retry due to authentication issues (401 Unauthorized or 403 Forbidden)\n        // We retry on both 401 and 403 as they can both indicate authentication issues\n        // A 401 clearly indicates an invalid token\n        // A 403 can also indicate an expired token in some cases\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the expired or invalid access token\n            self.refresh_token().await?;\n            \n            // Retry the original request with the newly refreshed token\n            debug!(\"Retrying request with refreshed token\");\n            let mut retry_request = request_builder(\u0026self.http_client);\n            \n            // Add the refreshed access token to the retry request\n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            // Check if the retry was successful\n            if retry_response.status().is_success() {\n                // For empty responses, we consider success as a successful update\n                Ok(())\n            } else {\n                // Retry failed - provide clear error information\n                let status = retry_response.status();\n                let error_text = retry_response.text().await.unwrap_or_else(|_| \"Unknown error\".to_string());\n                error!(\"API request failed after retry. Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text);\n                Err(ApiError::RetryFailed(format!(\n                    \"Original error: {}, Retry failed with status: {} and body: {}\", \n                    response.status(), status, error_text\n                )))\n            }\n        } else if response.status().is_success() {\n            // Initial request was successful - for empty responses, we consider this a success\n            Ok(())\n        } else {\n            // For all other errors, return the error status\n            Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n        }\n    }\n    \n    /// Get all metadata fields for a tenant\n    /// \n    /// This method retrieves the list of all metadata fields defined for the specified tenant.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant\n    /// \n    /// # Returns\n    /// * `Ok(MetadataFieldListResponse)` - List of metadata fields for the tenant\n    /// * `Err(ApiError)` - HTTP error or JSON parsing error\n    pub async fn get_metadata_fields(\u0026mut self, tenant_id: \u0026str) -\u003e Result\u003ccrate::model::MetadataFieldListResponse, ApiError\u003e {\n        let url = format!(\"{}/tenants/{}/metadata-fields\", self.base_url, tenant_id);\n        \n        self.get(\u0026url).await\n    }\n    \n    /// Create a new asset by uploading a file\n    /// \n    /// This method uploads a file as a new asset in the specified tenant.\n    /// The file is sent as multipart/form-data with appropriate metadata.\n    /// \n    /// The method handles automatic token refresh on authentication errors (401/403)\n    /// and includes retry logic for handling conflict errors that may occur when\n    /// the asset service is temporarily busy.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the asset\n    /// * `file_path` - The local file system path to the file to upload\n    /// * `folder_path` - Optional folder path where to place the asset (e.g., \"/Root/Folder/Subfolder\")\n    /// * `folder_id` - Optional folder ID where to place the asset (takes precedence if both path and ID are provided)\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::AssetResponse)` - Successfully created asset details from the API\n    /// * `Err(ApiError)` - If there's an HTTP error, IO error, authentication issue, or other API error\n    ///                     including conflict errors if the asset already exists\n    /// \n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    /// use std::path::Path;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let folder_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let asset = client.create_asset(\u0026tenant_uuid, Path::new(\"/path/to/file.stl\"), \u0026\"/Root/MyFolder\".to_string(), \u0026folder_uuid).await?;\n    ///     println!(\"Created asset with UUID: {}\", asset.uuid());\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn create_asset(\u0026mut self, tenant_uuid: \u0026Uuid, file_path: \u0026Path, asset_path: \u0026String, folder_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::Asset, ApiError\u003e {\n\n        trace!(\"Creating new asset by uploading a file...\");\n        \n        let url = format!(\"{}/tenants/{}/assets\", self.base_url, tenant_uuid);\n\n        if !file_path.exists() || !file_path.is_file() {\n            return Err(ApiError::PathNotFound(file_path.to_string_lossy().into_owned()));\n        }\n        \n        let file_name = file_path.file_name().unwrap().to_string_lossy().into_owned(); // It is save to unwrap because we already confired the file exists\n        \n        // Read the file content\n        let file_data = tokio::fs::read(file_path).await?;\n        trace!(\"Derived asset path: {}\", \u0026asset_path);\n            \n        \n        \n        // Create a file part from the file data\n        let file_part = reqwest::multipart::Part::bytes(file_data)\n            .file_name(file_name.clone());\n        \n        // Build the multipart form with file part and required parameters\n        let mut form = reqwest::multipart::Form::new()\n            .part(\"file\", file_part)\n            .text(\"path\", asset_path.clone())  // Use the full asset path including folder\n            .text(\"metadata\", \"\")  // Empty metadata as in the working example\n            .text(\"createMissingFolders\", \"\");  // Empty createMissingFolders as in the working example\n        \n        // Add folder ID if provided\n        form = form.text(\"folderId\", folder_uuid.to_string());\n        \n        debug!(\"Creating asset with path: {}\", asset_path);\n        \n        // Build and execute the request with multipart form data\n        let mut request = self.http_client.post(\u0026url)\n            .multipart(form);\n        \n        // Add access token if available\n        if let Some(token) = \u0026self.access_token {\n            request = request.header(\"Authorization\", format!(\"Bearer {}\", token));\n        }\n        \n        let response = request.send().await?;\n        \n        // Check if we need to retry due to authentication issues\n        if response.status() == reqwest::StatusCode::UNAUTHORIZED || \n           response.status() == reqwest::StatusCode::FORBIDDEN {\n            debug!(\"Received authentication error ({}), attempting token refresh\", response.status());\n            \n            // Try to refresh the token\n            self.refresh_token().await?;\n            \n            // Create a new form for the retry\n            let file_data = tokio::fs::read(file_path).await?;\n            let file_part = reqwest::multipart::Part::bytes(file_data)\n                .file_name(file_name.clone());\n            \n            // Build the multipart form with file part and required parameters\n            let mut retry_form = reqwest::multipart::Form::new()\n                .part(\"file\", file_part)\n                .text(\"path\", asset_path.clone())  // Use the full asset path including folder\n                .text(\"metadata\", \"\")  // Empty metadata as in the working example\n                .text(\"createMissingFolders\", \"\");  // Empty createMissingFolders as in the working example\n            \n            // Add folder ID if provided\n            retry_form = retry_form.text(\"folderId\", folder_uuid.to_string());\n            \n            debug!(\"Retrying asset creation with path: {}\", asset_path);\n            \n            // Retry the request with the new token\n            debug!(\"Retrying asset creation request with refreshed token\");\n            let mut retry_request = self.http_client.post(\u0026url)\n                .multipart(retry_form);\n            \n            if let Some(token) = \u0026self.access_token {\n                retry_request = retry_request.header(\"Authorization\", format!(\"Bearer {}\", token));\n            }\n            \n            let retry_response = retry_request.send().await?;\n            \n            if retry_response.status().is_success() {\n                // Try to get the raw response text for debugging\n                let text = retry_response.text().await?;\n                debug!(\"Raw asset creation retry response: {}\", text);\n                \n                // Try to parse as SingleAssetResponse\n                match serde_json::from_str::\u003ccrate::model::SingleAssetResponse\u003e(\u0026text) {\n                    Ok(result) =\u003e Ok(Asset::from(\u0026result.asset)),\n                    Err(_) =\u003e {\n                        // Try to parse as AssetResponse directly\n                        match serde_json::from_str::\u003ccrate::model::AssetResponse\u003e(\u0026text) {\n                            Ok(asset) =\u003e Ok(Asset::from(\u0026asset)),\n                            Err(e) =\u003e {\n                                error!(\"Failed to parse retry response as either SingleAssetResponse or AssetResponse: {}\", e);\n                                Err(ApiError::JsonError(e))\n                            }\n                        }\n                    }\n                }\n            } else {\n                // Handle specific HTTP error codes with user-friendly messages\n                let status = retry_response.status();\n                match status {\n                    reqwest::StatusCode::CONFLICT =\u003e {\n                        Err(ApiError::ConflictError(\"Asset already exists. Please use a different filename or delete the existing asset first.\".to_string()))\n                    }\n                    reqwest::StatusCode::UNPROCESSABLE_ENTITY =\u003e {\n                        Err(ApiError::ConflictError(\"Invalid request data. Please check your input and try again.\".to_string()))\n                    }\n                    reqwest::StatusCode::PAYLOAD_TOO_LARGE =\u003e {\n                        Err(ApiError::ConflictError(\"File is too large. Please check the file size limits and try again.\".to_string()))\n                    }\n                    _ =\u003e {\n                        Err(ApiError::RetryFailed(format!(\n                            \"Original error: {}, Retry failed with status: {}\", \n                            response.status(), \n                            retry_response.status()\n                        )))\n                    }\n                }\n            }\n        } else if response.status().is_success() {\n            // Try to get the raw response text for debugging\n            let text = response.text().await?;\n            debug!(\"Raw asset creation response: {}\", text);\n            \n            // Try to parse as SingleAssetResponse\n            match serde_json::from_str::\u003ccrate::model::SingleAssetResponse\u003e(\u0026text) {\n                Ok(result) =\u003e Ok(Asset::from(\u0026result.asset)),\n                Err(_) =\u003e {\n                    // Try to parse as AssetResponse directly\n                    match serde_json::from_str::\u003ccrate::model::AssetResponse\u003e(\u0026text) {\n                        Ok(asset) =\u003e Ok(Asset::from(\u0026asset)),\n                        Err(e) =\u003e {\n                            error!(\"Failed to parse response as either SingleAssetResponse or AssetResponse: {}\", e);\n                            Err(ApiError::JsonError(e))\n                        }\n                    }\n                }\n            }\n        } else {\n            // Handle specific HTTP error codes with user-friendly messages\n            let status = response.status();\n            match status {\n                reqwest::StatusCode::CONFLICT =\u003e {\n                    Err(ApiError::ConflictError(\"Asset already exists. Please use a different filename or delete the existing asset first.\".to_string()))\n                }\n                reqwest::StatusCode::UNPROCESSABLE_ENTITY =\u003e {\n                    Err(ApiError::ConflictError(\"Invalid request data. Please check your input and try again.\".to_string()))\n                }\n                reqwest::StatusCode::PAYLOAD_TOO_LARGE =\u003e {\n                    Err(ApiError::ConflictError(\"File is too large. Please check the file size limits and try again.\".to_string()))\n                }\n                _ =\u003e {\n                    Err(ApiError::HttpError(response.error_for_status().unwrap_err()))\n                }\n            }\n        }\n    }\n    \n    /// Perform a geometric search for similar assets with pagination support\n    /// \n    /// This method searches for assets that are geometrically similar to the reference asset.\n    /// It uses Physna's advanced geometric matching algorithms to find assets with similar\n    /// shapes, regardless of orientation, scale, or position differences.\n    /// \n    /// The method includes automatic retry logic for handling conflict errors (HTTP 409),\n    /// which can occur when the search service is temporarily busy.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the reference asset\n    /// * `asset_id` - The UUID of the reference asset to search for similar matches\n    /// * `threshold` - The similarity threshold as a percentage (0.00 to 100.00)\n    ///                Lower values return more matches, higher values return fewer but more similar matches\n    /// \n    /// # Returns\n    /// * `Ok(crate::model::GeometricSearchResponse)` - The search results containing similar assets\n    /// * `Err(ApiError)` - If there's an HTTP error, authentication issue, or other API error\n    /// \n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let asset_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\").unwrap();\n    ///     let matches = client.geometric_search(\u0026tenant_uuid, \u0026asset_uuid, 85.0).await?;\n    ///     for match_result in \u0026matches.matches {\n    ///         println!(\"Found match: {} ({}% similar)\", match_result.path(), match_result.score());\n    ///     }\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn geometric_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, threshold: f64) -\u003e Result\u003ccrate::model::GeometricSearchResponse, ApiError\u003e {\n        debug!(\"Starting geometric search for tenant_uuid: {}, asset_uuid: {}, threshold: {}\", tenant_uuid, asset_uuid, threshold);\n        let url = format!(\"{}/tenants/{}/assets/{}/geometric-search\", self.base_url, tenant_uuid, asset_uuid);\n        \n        // Initialize with page 1 and reasonable page size\n        let mut all_matches = Vec::new();\n        let mut page = 1;\n        let per_page = 100; // Larger page size for efficiency\n        \n        loop {\n            debug!(\"Fetching page {} of geometric search results\", page);\n            \n            // Build request body with the correct structure\n            let body = serde_json::json!({\n                \"page\": page,\n                \"perPage\": per_page,\n                \"searchQuery\": \"\",\n                \"filters\": {\n                    \"folders\": [],\n                    \"metadata\": {},\n                    \"extensions\": []  // Empty array as requested\n                },\n                \"minThreshold\": threshold  // Use threshold directly as percentage\n            });\n            \n            debug!(\"Sending geometric search request to: {}\", url);\n            // Execute POST request\n            let result: Result\u003ccrate::model::GeometricSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n            \n            match result {\n                Ok(response) =\u003e {\n                    // Check if we have pagination data\n                    if let Some(page_data) = \u0026response.page_data {\n                        debug!(\"Page {}/{} with {} total matches\", page_data.current_page, page_data.last_page, page_data.total);\n                        \n                        // Add matches from this page to our collection\n                        all_matches.extend(response.matches);\n                        \n                        // Check if we've reached the last page\n                        if page_data.current_page \u003e= page_data.last_page {\n                            debug!(\"Reached last page of results\");\n                            break;\n                        }\n                        \n                        // Move to next page\n                        page += 1;\n                    } else {\n                        // No pagination data - just return the response as-is\n                        debug!(\"No pagination data in response, returning single page\");\n                        return Ok(response);\n                    }\n                }\n                Err(e) =\u003e {\n                    // Return error immediately\n                    debug!(\"Geometric search failed: {}\", e);\n                    return Err(e);\n                }\n            }\n        }\n        \n        // Create a response with all matches and combined pagination data\n        let final_response = crate::model::GeometricSearchResponse {\n            matches: all_matches,\n            page_data: None, // We've aggregated all pages\n            filter_data: None,\n        };\n        \n        debug!(\"Geometric search completed for asset_id: {} with {} total matches\", asset_uuid, final_response.matches.len());\n        Ok(final_response)\n    }\n\n    /// Perform a part search to find geometrically similar assets using the part search algorithm\n    ///\n    /// This method uses Physna's advanced part search algorithms to find assets with similar\n    /// geometry to the provided reference asset. The part search algorithm may provide different\n    /// results than the standard geometric search, potentially with forward and reverse match percentages.\n    ///\n    /// # Arguments\n    /// * `tenant_uuid` - The UUID of the tenant containing the assets\n    /// * `asset_uuid` - The UUID of the reference asset to search for matches\n    /// * `threshold` - The similarity threshold as a percentage (0.00 to 100.00)\n    ///                Lower values return more matches, higher values return fewer but more similar matches\n    ///\n    /// # Returns\n    /// * `Ok(GeometricSearchResponse)` - The search results containing similar assets\n    /// * `Err(ApiError)` - If there's an HTTP error, authentication issue, or other API error\n    ///\n    /// # Example\n    /// ```no_run\n    /// use pcli2::physna_v3::PhysnaApiClient;\n    /// use uuid::Uuid;\n    ///\n    /// #[tokio::main]\n    /// async fn main() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    ///     let mut client = PhysnaApiClient::new();\n    ///     let tenant_uuid = Uuid::parse_str(\"550e8400-e29b-41d4-a716-446655440000\")?;\n    ///     let asset_uuid = Uuid::parse_str(\"660e8400-e29b-41d4-a716-446655440000\")?;\n    ///     let matches = client.part_search(\u0026tenant_uuid, \u0026asset_uuid, 85.0).await?;\n    ///     for match_result in \u0026matches.matches {\n    ///         println!(\"Found match: {} (forward: {:.2}%, reverse: {:.2}%)\",\n    ///             match_result.path(),\n    ///             match_result.forward_match_percentage.unwrap_or(0.0),\n    ///             match_result.reverse_match_percentage.unwrap_or(0.0));\n    ///     }\n    ///     Ok(())\n    /// }\n    /// ```\n    pub async fn part_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid, threshold: f64) -\u003e Result\u003ccrate::model::PartSearchResponse, ApiError\u003e {\n        debug!(\"Starting part search for tenant_uuid: {}, asset_uuid: {}, threshold: {}\", tenant_uuid, asset_uuid, threshold);\n        let url = format!(\"{}/tenants/{}/assets/{}/part-search\", self.base_url, tenant_uuid, asset_uuid);\n\n        // Initialize with page 1 and reasonable page size\n        let mut all_matches = Vec::new();\n        let mut page = 1;\n        let per_page = 100; // Larger page size for efficiency\n\n        // Track the maximum last_page value seen to prevent infinite loops\n        let mut max_last_page_seen = 0;\n        let max_pages_limit = 50; // Hard limit to prevent excessive API calls\n\n        loop {\n            debug!(\"Fetching page {} of part search results\", page);\n\n            // Check if we've hit the hard limit\n            if page \u003e max_pages_limit {\n                debug!(\"Reached hard page limit of {}, stopping to prevent excessive API calls\", max_pages_limit);\n                break;\n            }\n\n            // Build request body with the correct structure\n            let body = serde_json::json!({\n                \"page\": page,\n                \"perPage\": per_page,\n                \"searchQuery\": \"\",\n                \"filters\": {\n                    \"folders\": [],\n                    \"metadata\": {},\n                    \"extensions\": []  // Empty array as requested\n                },\n                \"minThreshold\": threshold  // Use threshold directly as percentage\n            });\n\n            debug!(\"Sending part search request to: {}\", url);\n            // Execute POST request\n            let result: Result\u003ccrate::model::PartSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n\n            match result {\n                Ok(response) =\u003e {\n                    // Check if we have pagination data\n                    if let Some(page_data) = \u0026response.page_data {\n                        debug!(\"Page {}/{} with {} total matches\", page_data.current_page, page_data.last_page, page_data.total);\n\n                        // Update the maximum last_page value seen\n                        if page_data.last_page \u003e max_last_page_seen {\n                            max_last_page_seen = page_data.last_page;\n                        }\n\n                        // Add matches from this page to our collection\n                        all_matches.extend(response.matches);\n\n                        // Check if we've reached the last page or gone beyond what we've seen\n                        if page_data.current_page \u003e= page_data.last_page || page \u003e max_last_page_seen {\n                            debug!(\"Reached last page of results or beyond max seen: current={}, last={}, requested={}\",\n                                   page_data.current_page, page_data.last_page, page);\n                            break;\n                        }\n\n                        // Move to next page\n                        page += 1;\n                    } else {\n                        // No pagination data - just return the response as-is\n                        debug!(\"No pagination data in response, returning single page\");\n                        return Ok(response);\n                    }\n                }\n                Err(e) =\u003e {\n                    // Return error immediately\n                    debug!(\"Part search failed: {}\", e);\n                    return Err(e);\n                }\n            }\n        }\n\n        // Create a response with all matches and combined pagination data\n        let final_response = crate::model::PartSearchResponse {\n            matches: all_matches,\n            page_data: None, // We've aggregated all pages\n            filter_data: None,\n        };\n\n        debug!(\"Part search completed for asset_id: {} with {} total matches\", asset_uuid, final_response.matches.len());\n        Ok(final_response)\n    }\n\n    /// Performs a visual search for similar assets\n    ///\n    /// This method performs a visual search to find assets that are visually similar to the provided asset.\n    /// The search results are ordered by relevance as determined by the visual search algorithm.\n    ///\n    /// # Arguments\n    ///\n    /// * `tenant_uuid` - The UUID of the tenant to search within\n    /// * `asset_uuid` - The UUID of the reference asset to search for visually similar matches\n    ///\n    /// # Returns\n    ///\n    /// * `Ok(PartSearchResponse)` - The search results with visually similar assets\n    /// * `Err(ApiError)` - If the API request fails\n    ///\n    /// # Example\n    ///\n    /// ```no_run\n    /// # use pcli2::physna_v3::PhysnaApiClient;\n    /// # use uuid::Uuid;\n    /// # async fn example() -\u003e Result\u003c(), Box\u003cdyn std::error::Error\u003e\u003e {\n    /// # let mut client = PhysnaApiClient::new();\n    /// # let tenant_uuid = Uuid::nil();\n    /// # let asset_uuid = Uuid::nil();\n    /// let matches = client.visual_search(\u0026tenant_uuid, \u0026asset_uuid).await?;\n    /// for match_result in \u0026matches.matches {\n    ///     println!(\"Found visually similar asset: {}\", match_result.path());\n    /// }\n    /// # Ok(())\n    /// # }\n    /// ```\n    pub async fn visual_search(\u0026mut self, tenant_uuid: \u0026Uuid, asset_uuid: \u0026Uuid) -\u003e Result\u003ccrate::model::PartSearchResponse, ApiError\u003e {\n        debug!(\"Starting visual search for tenant_uuid: {}, asset_uuid: {}\", tenant_uuid, asset_uuid);\n        let url = format!(\"{}/tenants/{}/assets/{}/visual-search\", self.base_url, tenant_uuid, asset_uuid);\n\n        // Visual search - get first page with 50 results (top matches)\n        let page = 1;\n        let per_page = 50; // Reasonable page size for visual search\n\n        // Build request body with the correct structure\n        let body = serde_json::json!({\n            \"page\": page,\n            \"perPage\": per_page,\n            \"searchQuery\": \"\",\n            \"filters\": {\n                \"folders\": [],\n                \"metadata\": {},\n                \"extensions\": []  // Empty array as requested\n            }\n        });\n\n        debug!(\"Sending visual search request to: {}\", url);\n        // Execute POST request\n        let result: Result\u003ccrate::model::PartSearchResponse, ApiError\u003e = self.post(\u0026url, \u0026body).await;\n\n        match result {\n            Ok(mut response) =\u003e {\n                // Limit results to 50 to ensure we don't exceed expected page size\n                if response.matches.len() \u003e 50 {\n                    response.matches.truncate(50);\n                }\n\n                // Clear pagination data since we're only getting the first page\n                response.page_data = None;\n\n                debug!(\"Visual search completed for asset_id: {} with {} total matches\", asset_uuid, response.matches.len());\n                Ok(response)\n            }\n            Err(e) =\u003e {\n                // Return error immediately\n                debug!(\"Visual search failed: {}\", e);\n                Err(e)\n            }\n        }\n    }\n\n    /// Create multiple assets by uploading files matching a glob pattern\n    /// \n    /// This method uploads multiple files as assets in the specified tenant.\n    /// Files are matched using a glob pattern and uploaded concurrently.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant where to create the assets\n    /// * `glob_pattern` - The glob pattern to match files to upload (e.g., \"data/puzzle/*.STL\")\n    /// * `folder_path` - Optional folder path where to place the assets\n    /// * `folder_id` - Optional folder ID where to place the assets\n    /// * `concurrent` - Maximum number of concurrent uploads\n    /// * `show_progress` - Whether to display a progress bar during upload\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003ccrate::model::AssetResponse\u003e)` - Successfully created assets\n    /// * `Err(ApiError)` - HTTP error, IO error, or other error\n    pub async fn create_assets_batch(\n        \u0026mut self, \n        tenant_uuid: \u0026Uuid, \n        glob_pattern: \u0026str, \n        folder_path: Option\u003c\u0026str\u003e,\n        folder_uuid: Option\u003c\u0026Uuid\u003e,\n        concurrent: usize,\n        show_progress: bool\n    ) -\u003e Result\u003cVec\u003ccrate::model::Asset\u003e, ApiError\u003e {\n        debug!(\"Creating batch assets in tenant: {}, folder_path: {:?}, folder_id: {:?}\", \u0026tenant_uuid, folder_path, folder_uuid);\n        \n        // Expand the glob pattern to get matching files\n        let paths: Vec\u003c_\u003e = glob(glob_pattern)?\n            .filter_map(|path_result| path_result.ok()) // Filter out any errors and extract the PathBuf\n            .collect();\n        \n        debug!(\"Found {} files matching pattern: {}\", paths.len(), glob_pattern);\n        \n        // Create progress bar if requested\n        let progress_bar = if show_progress {\n            let pb = ProgressBar::new(paths.len() as u64);\n            pb.set_style(ProgressStyle::default_bar()\n                .template(\"{spinner:.green} [{elapsed_precise}] [{bar:40.cyan/blue}] {pos}/{len} ({eta}) {msg}\")\n                .unwrap()\n                .progress_chars(\"#\u003e-\"));\n            Some(pb)\n        } else {\n            None\n        };\n        \n        // Create a stream of futures for uploading files concurrently\n        let base_url = self.base_url.clone();\n        let access_token = self.access_token.clone();\n        let client_credentials = self.client_credentials.clone();\n        let folder_path = folder_path.map(|s| s.to_string());\n        \n        debug!(\"Folder path for batch upload: {:?}, folder ID: {:?}\", folder_path, folder_uuid);\n        \n        let results: Result\u003cVec\u003c_\u003e, _\u003e = stream::iter(paths)\n            .filter(|path_buf| {\n                futures::future::ready(path_buf.exists() \u0026\u0026 path_buf.is_file())\n            })\n            .map(|path_buf| {\n                let base_url = base_url.clone();\n                let access_token = access_token.clone();\n                let client_credentials = client_credentials.clone();\n                let folder_path = folder_path.clone();\n                let folder_uuid = folder_uuid.clone();\n                let progress_bar = progress_bar.clone();\n                \n                async move {\n                    let path_str = path_buf.to_string_lossy().to_string();\n                    let file_name = path_buf.file_name();\n\n                    let file_name = match file_name {\n                        Some(file_name) =\u003e file_name,\n                        None =\u003e return Err(ApiError::PathNotFound(path_buf.to_string_lossy().into())),\n                    };\n\n                \n                \n                    // Create a new client for each request to avoid borrowing issues\n                    let mut client = PhysnaApiClient::new().with_base_url(base_url);\n                    if let Some(token) = access_token {\n                        client = client.with_access_token(token);\n                    }\n                    if let Some((client_id, client_secret)) = client_credentials {\n                        client = client.with_client_credentials(client_id, client_secret);\n                    }\n                \n                    // Upload the file\n                    let asset_path = format!(\"{}/{}\", folder_path.unwrap(), file_name.to_string_lossy());\n                    debug!(\"Uploading file: {}, as asset_path: {}, folder_uuid: {:?}\", path_str, asset_path, folder_uuid);\n                    let result = client.create_asset(\u0026tenant_uuid, \u0026path_buf, \u0026asset_path, folder_uuid.unwrap()).await;\n                \n                    // Update progress bar if present\n                    if let Some(pb) = \u0026progress_bar {\n                        pb.inc(1);\n                        match \u0026result {\n                            Ok(asset) =\u003e {\n                                pb.set_message(format!(\"Uploaded: {}\", asset.path()));\n                            }\n                            Err(_) =\u003e {\n                                pb.set_message(format!(\"Failed: {}\", path_buf.file_name().unwrap_or_default().to_string_lossy()));\n                            }\n                        }\n                    }\n                \n                    result\n                }\n            })\n            .buffer_unordered(concurrent)\n            .collect::\u003cVec\u003c_\u003e\u003e()\n            .await\n            .into_iter()\n            .collect();\n        \n        // Finish progress bar if present\n        if let Some(pb) = progress_bar {\n            pb.finish_with_message(\"Batch upload complete\");\n        }\n        \n        results\n    }\n\n    /// Get dependencies for a specific asset by path\n    /// \n    /// This method retrieves all dependencies for the specified asset from the Physna API.\n    /// The dependencies represent other assets that are related to this asset, such as\n    /// components in an assembly or referenced assets.\n    /// \n    /// IMPORTANT: Despite the parameter name, this endpoint expects the asset path,\n    /// not the asset ID/UUID. The Physna API uses the path in the URL for this endpoint.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_path` - The path of the asset to retrieve dependencies for (e.g., \"/Root/Folder/assembly.stl\")\n    /// \n    /// # Returns\n    /// * `Ok(AssetDependenciesResponse)` - Successfully fetched asset dependencies\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_asset_dependencies(\u0026mut self, tenant_id: \u0026str, asset_path: \u0026str) -\u003e Result\u003ccrate::model::AssetDependenciesResponse, ApiError\u003e {\n        debug!(\"Getting asset dependencies for tenant_id: {}, asset_path: {}\", tenant_id, asset_path);\n        \n        let encoded_asset_path = urlencoding::encode(asset_path);\n        let url = format!(\"{}/tenants/{}/assets/{}/dependencies\", self.base_url, tenant_id, encoded_asset_path);\n        debug!(\"Dependencies request URL: {}\", url);\n        \n        // Execute the GET request using the generic method\n        let response: crate::model::AssetDependenciesResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved {} dependencies for asset_path: {}\", response.dependencies.len(), asset_path);\n        \n        Ok(response)\n    }\n    \n    /// Get dependencies for a specific asset by path\n    /// \n    /// This method retrieves all dependencies for the specified asset from the Physna API.\n    /// The dependencies represent other assets that are related to this asset, such as\n    /// components in an assembly or referenced assets.\n    /// \n    /// This method uses the path directly in the API endpoint, as the dependencies endpoint\n    /// specifically requires the asset path rather than the asset ID.\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_path` - The path of the asset to retrieve dependencies for (e.g., \"/Root/Folder/assembly.stl\")\n    /// \n    /// # Returns\n    /// * `Ok(AssetDependenciesResponse)` - Successfully fetched asset dependencies\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn get_asset_dependencies_by_path(\u0026mut self, tenant_id: \u0026str, asset_path: \u0026str) -\u003e Result\u003ccrate::model::AssetDependenciesResponse, ApiError\u003e {\n        debug!(\"Getting asset dependencies by path for tenant_id: {}, asset_path: {}\", tenant_id, asset_path);\n        \n        // URL encode the asset path to handle special characters properly\n        let encoded_asset_path = urlencoding::encode(asset_path);\n        \n        let url = format!(\"{}/tenants/{}/assets/{}/dependencies\", self.base_url, tenant_id, encoded_asset_path);\n        debug!(\"Dependencies request URL: {}\", url);\n        \n        // Execute the GET request using the generic method\n        let response: crate::model::AssetDependenciesResponse = self.get(\u0026url).await?;\n        debug!(\"Successfully retrieved {} dependencies for asset_path: {}\", response.dependencies.len(), asset_path);\n        \n        Ok(response)\n    }\n    \n    /// Download asset file from the Physna API\n    /// \n    /// This method downloads the raw file content of the specified asset from the Physna API.\n    /// The file content is returned as a vector of bytes that can be saved to disk.\n    /// \n    /// The API endpoint follows the pattern: GET /tenants/{tenantId}/assets/{assetId}/file\n    /// \n    /// # Arguments\n    /// * `tenant_id` - The ID of the tenant that owns the asset\n    /// * `asset_id` - The UUID of the asset to download\n    /// \n    /// # Returns\n    /// * `Ok(Vec\u003cu8\u003e)` - Successfully downloaded file content as bytes\n    /// * `Err(ApiError)` - If there was an error during API calls\n    pub async fn download_asset(\u0026mut self, tenant_id: \u0026str, asset_id: \u0026str) -\u003e Result\u003cVec\u003cu8\u003e, ApiError\u003e {\n        debug!(\"Downloading asset file for tenant_id: {}, asset_id: {}\", tenant_id, asset_id);\n        \n        let url = format!(\"{}/tenants/{}/assets/{}/file\", self.base_url, tenant_id, asset_id);\n        debug!(\"Download asset file request URL: {}\", url);\n        \n        // Execute GET request for file content\n        let response = self\n            .http_client\n            .get(\u0026url)\n            .bearer_auth(\u0026self.access_token.as_ref().ok_or_else(|| ApiError::AuthError(\"No access token available for download\".to_string()))?)\n            .send()\n            .await\n            .map_err(|e| {\n                debug!(\"Failed to send download request: {}\", e);\n                ApiError::from(e)\n            })?;\n        \n        // Check status code\n        if !response.status().is_success() {\n            debug!(\"Download request failed with status: {}\", response.status());\n            // Create an appropriate error based on the response status\n            match response.status() {\n                reqwest::StatusCode::UNAUTHORIZED =\u003e {\n                    return Err(ApiError::AuthError(\"Unauthorized access - access token may have expired or is invalid\".to_string()));\n                }\n                reqwest::StatusCode::FORBIDDEN =\u003e {\n                    return Err(ApiError::AuthError(\"Access forbidden - you don't have permission to download this asset\".to_string()));\n                }\n                reqwest::StatusCode::NOT_FOUND =\u003e {\n                    return Err(ApiError::AuthError(\"Asset not found - the asset may have been deleted or the path is incorrect\".to_string()));\n                }\n                _ =\u003e {\n                    return Err(ApiError::HttpError(response.error_for_status().unwrap_err()));\n                }\n            }\n        }\n        \n        // Get the file content as bytes\n        let bytes = response\n            .bytes()\n            .await\n            .map_err(|e| {\n                debug!(\"Failed to read response bytes: {}\", e);\n                ApiError::HttpError(e)\n            })?;\n        \n        debug!(\"Successfully downloaded {} bytes for asset_id: {}\", bytes.len(), asset_id);\n        Ok(bytes.to_vec())\n    }\n}\n\nimpl Default for PhysnaApiClient {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_create_asset_url() {\n        let client = PhysnaApiClient::new();\n        // This test verifies that the URL is constructed correctly\n        // We're not actually making a network request in this test\n        let tenant_id = \"test-tenant\";\n        let url = format!(\"{}/tenants/{}/assets\", client.base_url, tenant_id);\n        assert_eq!(url, \"https://app-api.physna.com/v3/tenants/test-tenant/assets\");\n    }\n}\n","traces":[{"line":120,"address":[],"length":0,"stats":{"Line":4}},{"line":122,"address":[],"length":0,"stats":{"Line":8}},{"line":123,"address":[],"length":0,"stats":{"Line":4}},{"line":126,"address":[],"length":0,"stats":{"Line":16}},{"line":129,"address":[],"length":0,"stats":{"Line":8}},{"line":131,"address":[],"length":0,"stats":{"Line":24}},{"line":133,"address":[],"length":0,"stats":{"Line":4}},{"line":134,"address":[],"length":0,"stats":{"Line":4}},{"line":135,"address":[],"length":0,"stats":{"Line":20}},{"line":138,"address":[],"length":0,"stats":{"Line":16}},{"line":139,"address":[],"length":0,"stats":{"Line":20}},{"line":140,"address":[],"length":0,"stats":{"Line":4}},{"line":142,"address":[],"length":0,"stats":{"Line":0}},{"line":146,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":1}},{"line":176,"address":[],"length":0,"stats":{"Line":3}},{"line":179,"address":[],"length":0,"stats":{"Line":2}},{"line":193,"address":[],"length":0,"stats":{"Line":4}},{"line":195,"address":[],"length":0,"stats":{"Line":12}},{"line":198,"address":[],"length":0,"stats":{"Line":8}},{"line":212,"address":[],"length":0,"stats":{"Line":0}},{"line":213,"address":[],"length":0,"stats":{"Line":0}},{"line":214,"address":[],"length":0,"stats":{"Line":0}},{"line":224,"address":[],"length":0,"stats":{"Line":4}},{"line":225,"address":[],"length":0,"stats":{"Line":8}},{"line":226,"address":[],"length":0,"stats":{"Line":4}},{"line":237,"address":[],"length":0,"stats":{"Line":4}},{"line":238,"address":[],"length":0,"stats":{"Line":8}},{"line":239,"address":[],"length":0,"stats":{"Line":4}},{"line":250,"address":[],"length":0,"stats":{"Line":0}},{"line":252,"address":[],"length":0,"stats":{"Line":0}},{"line":253,"address":[],"length":0,"stats":{"Line":0}},{"line":256,"address":[],"length":0,"stats":{"Line":0}},{"line":259,"address":[],"length":0,"stats":{"Line":0}},{"line":260,"address":[],"length":0,"stats":{"Line":0}},{"line":261,"address":[],"length":0,"stats":{"Line":0}},{"line":263,"address":[],"length":0,"stats":{"Line":0}},{"line":264,"address":[],"length":0,"stats":{"Line":0}},{"line":266,"address":[],"length":0,"stats":{"Line":0}},{"line":268,"address":[],"length":0,"stats":{"Line":0}},{"line":269,"address":[],"length":0,"stats":{"Line":0}},{"line":270,"address":[],"length":0,"stats":{"Line":0}},{"line":271,"address":[],"length":0,"stats":{"Line":0}},{"line":272,"address":[],"length":0,"stats":{"Line":0}},{"line":273,"address":[],"length":0,"stats":{"Line":0}},{"line":274,"address":[],"length":0,"stats":{"Line":0}},{"line":275,"address":[],"length":0,"stats":{"Line":0}},{"line":276,"address":[],"length":0,"stats":{"Line":0}},{"line":278,"address":[],"length":0,"stats":{"Line":0}},{"line":280,"address":[],"length":0,"stats":{"Line":0}},{"line":285,"address":[],"length":0,"stats":{"Line":0}},{"line":296,"address":[],"length":0,"stats":{"Line":0}},{"line":297,"address":[],"length":0,"stats":{"Line":0}},{"line":319,"address":[],"length":0,"stats":{"Line":0}},{"line":325,"address":[],"length":0,"stats":{"Line":0}},{"line":328,"address":[],"length":0,"stats":{"Line":0}},{"line":329,"address":[],"length":0,"stats":{"Line":0}},{"line":332,"address":[],"length":0,"stats":{"Line":0}},{"line":338,"address":[],"length":0,"stats":{"Line":0}},{"line":339,"address":[],"length":0,"stats":{"Line":0}},{"line":342,"address":[],"length":0,"stats":{"Line":0}},{"line":345,"address":[],"length":0,"stats":{"Line":0}},{"line":346,"address":[],"length":0,"stats":{"Line":0}},{"line":349,"address":[],"length":0,"stats":{"Line":0}},{"line":350,"address":[],"length":0,"stats":{"Line":0}},{"line":353,"address":[],"length":0,"stats":{"Line":0}},{"line":356,"address":[],"length":0,"stats":{"Line":0}},{"line":358,"address":[],"length":0,"stats":{"Line":0}},{"line":359,"address":[],"length":0,"stats":{"Line":0}},{"line":360,"address":[],"length":0,"stats":{"Line":0}},{"line":363,"address":[],"length":0,"stats":{"Line":0}},{"line":364,"address":[],"length":0,"stats":{"Line":0}},{"line":365,"address":[],"length":0,"stats":{"Line":0}},{"line":366,"address":[],"length":0,"stats":{"Line":0}},{"line":367,"address":[],"length":0,"stats":{"Line":0}},{"line":372,"address":[],"length":0,"stats":{"Line":0}},{"line":373,"address":[],"length":0,"stats":{"Line":0}},{"line":374,"address":[],"length":0,"stats":{"Line":0}},{"line":375,"address":[],"length":0,"stats":{"Line":0}},{"line":376,"address":[],"length":0,"stats":{"Line":0}},{"line":377,"address":[],"length":0,"stats":{"Line":0}},{"line":378,"address":[],"length":0,"stats":{"Line":0}},{"line":381,"address":[],"length":0,"stats":{"Line":0}},{"line":383,"address":[],"length":0,"stats":{"Line":0}},{"line":384,"address":[],"length":0,"stats":{"Line":0}},{"line":385,"address":[],"length":0,"stats":{"Line":0}},{"line":388,"address":[],"length":0,"stats":{"Line":0}},{"line":389,"address":[],"length":0,"stats":{"Line":0}},{"line":390,"address":[],"length":0,"stats":{"Line":0}},{"line":391,"address":[],"length":0,"stats":{"Line":0}},{"line":392,"address":[],"length":0,"stats":{"Line":0}},{"line":397,"address":[],"length":0,"stats":{"Line":0}},{"line":402,"address":[],"length":0,"stats":{"Line":0}},{"line":406,"address":[],"length":0,"stats":{"Line":0}},{"line":410,"address":[],"length":0,"stats":{"Line":0}},{"line":416,"address":[],"length":0,"stats":{"Line":0}},{"line":417,"address":[],"length":0,"stats":{"Line":0}},{"line":419,"address":[],"length":0,"stats":{"Line":0}},{"line":422,"address":[],"length":0,"stats":{"Line":0}},{"line":423,"address":[],"length":0,"stats":{"Line":0}},{"line":424,"address":[],"length":0,"stats":{"Line":0}},{"line":427,"address":[],"length":0,"stats":{"Line":0}},{"line":431,"address":[],"length":0,"stats":{"Line":0}},{"line":436,"address":[],"length":0,"stats":{"Line":0}},{"line":441,"address":[],"length":0,"stats":{"Line":0}},{"line":446,"address":[],"length":0,"stats":{"Line":0}},{"line":450,"address":[],"length":0,"stats":{"Line":0}},{"line":453,"address":[],"length":0,"stats":{"Line":0}},{"line":456,"address":[],"length":0,"stats":{"Line":0}},{"line":457,"address":[],"length":0,"stats":{"Line":0}},{"line":460,"address":[],"length":0,"stats":{"Line":0}},{"line":463,"address":[],"length":0,"stats":{"Line":0}},{"line":464,"address":[],"length":0,"stats":{"Line":0}},{"line":465,"address":[],"length":0,"stats":{"Line":0}},{"line":468,"address":[],"length":0,"stats":{"Line":0}},{"line":471,"address":[],"length":0,"stats":{"Line":0}},{"line":472,"address":[],"length":0,"stats":{"Line":0}},{"line":474,"address":[],"length":0,"stats":{"Line":0}},{"line":475,"address":[],"length":0,"stats":{"Line":0}},{"line":478,"address":[],"length":0,"stats":{"Line":0}},{"line":480,"address":[],"length":0,"stats":{"Line":0}},{"line":481,"address":[],"length":0,"stats":{"Line":0}},{"line":483,"address":[],"length":0,"stats":{"Line":0}},{"line":484,"address":[],"length":0,"stats":{"Line":0}},{"line":485,"address":[],"length":0,"stats":{"Line":0}},{"line":486,"address":[],"length":0,"stats":{"Line":0}},{"line":489,"address":[],"length":0,"stats":{"Line":0}},{"line":490,"address":[],"length":0,"stats":{"Line":0}},{"line":492,"address":[],"length":0,"stats":{"Line":0}},{"line":505,"address":[],"length":0,"stats":{"Line":0}},{"line":506,"address":[],"length":0,"stats":{"Line":0}},{"line":507,"address":[],"length":0,"stats":{"Line":0}},{"line":519,"address":[],"length":0,"stats":{"Line":0}},{"line":520,"address":[],"length":0,"stats":{"Line":0}},{"line":521,"address":[],"length":0,"stats":{"Line":0}},{"line":537,"address":[],"length":0,"stats":{"Line":0}},{"line":538,"address":[],"length":0,"stats":{"Line":0}},{"line":541,"address":[],"length":0,"stats":{"Line":0}},{"line":542,"address":[],"length":0,"stats":{"Line":0}},{"line":545,"address":[],"length":0,"stats":{"Line":0}},{"line":546,"address":[],"length":0,"stats":{"Line":0}},{"line":547,"address":[],"length":0,"stats":{"Line":0}},{"line":551,"address":[],"length":0,"stats":{"Line":0}},{"line":554,"address":[],"length":0,"stats":{"Line":0}},{"line":595,"address":[],"length":0,"stats":{"Line":0}},{"line":596,"address":[],"length":0,"stats":{"Line":0}},{"line":599,"address":[],"length":0,"stats":{"Line":0}},{"line":600,"address":[],"length":0,"stats":{"Line":0}},{"line":601,"address":[],"length":0,"stats":{"Line":0}},{"line":605,"address":[],"length":0,"stats":{"Line":0}},{"line":606,"address":[],"length":0,"stats":{"Line":0}},{"line":608,"address":[],"length":0,"stats":{"Line":0}},{"line":609,"address":[],"length":0,"stats":{"Line":0}},{"line":612,"address":[],"length":0,"stats":{"Line":0}},{"line":613,"address":[],"length":0,"stats":{"Line":0}},{"line":615,"address":[],"length":0,"stats":{"Line":0}},{"line":616,"address":[],"length":0,"stats":{"Line":0}},{"line":624,"address":[],"length":0,"stats":{"Line":0}},{"line":625,"address":[],"length":0,"stats":{"Line":0}},{"line":627,"address":[],"length":0,"stats":{"Line":0}},{"line":628,"address":[],"length":0,"stats":{"Line":0}},{"line":629,"address":[],"length":0,"stats":{"Line":0}},{"line":630,"address":[],"length":0,"stats":{"Line":0}},{"line":631,"address":[],"length":0,"stats":{"Line":0}},{"line":647,"address":[],"length":0,"stats":{"Line":0}},{"line":648,"address":[],"length":0,"stats":{"Line":0}},{"line":651,"address":[],"length":0,"stats":{"Line":0}},{"line":652,"address":[],"length":0,"stats":{"Line":0}},{"line":656,"address":[],"length":0,"stats":{"Line":0}},{"line":657,"address":[],"length":0,"stats":{"Line":0}},{"line":661,"address":[],"length":0,"stats":{"Line":0}},{"line":664,"address":[],"length":0,"stats":{"Line":0}},{"line":665,"address":[],"length":0,"stats":{"Line":0}},{"line":667,"address":[],"length":0,"stats":{"Line":0}},{"line":668,"address":[],"length":0,"stats":{"Line":0}},{"line":672,"address":[],"length":0,"stats":{"Line":0}},{"line":673,"address":[],"length":0,"stats":{"Line":0}},{"line":688,"address":[],"length":0,"stats":{"Line":0}},{"line":689,"address":[],"length":0,"stats":{"Line":0}},{"line":690,"address":[],"length":0,"stats":{"Line":0}},{"line":710,"address":[],"length":0,"stats":{"Line":0}},{"line":711,"address":[],"length":0,"stats":{"Line":0}},{"line":712,"address":[],"length":0,"stats":{"Line":0}},{"line":713,"address":[],"length":0,"stats":{"Line":0}},{"line":716,"address":[],"length":0,"stats":{"Line":0}},{"line":717,"address":[],"length":0,"stats":{"Line":0}},{"line":718,"address":[],"length":0,"stats":{"Line":0}},{"line":720,"address":[],"length":0,"stats":{"Line":0}},{"line":721,"address":[],"length":0,"stats":{"Line":0}},{"line":722,"address":[],"length":0,"stats":{"Line":0}},{"line":726,"address":[],"length":0,"stats":{"Line":0}},{"line":745,"address":[],"length":0,"stats":{"Line":0}},{"line":746,"address":[],"length":0,"stats":{"Line":0}},{"line":747,"address":[],"length":0,"stats":{"Line":0}},{"line":748,"address":[],"length":0,"stats":{"Line":0}},{"line":752,"address":[],"length":0,"stats":{"Line":0}},{"line":755,"address":[],"length":0,"stats":{"Line":0}},{"line":756,"address":[],"length":0,"stats":{"Line":0}},{"line":758,"address":[],"length":0,"stats":{"Line":0}},{"line":759,"address":[],"length":0,"stats":{"Line":0}},{"line":762,"address":[],"length":0,"stats":{"Line":0}},{"line":763,"address":[],"length":0,"stats":{"Line":0}},{"line":765,"address":[],"length":0,"stats":{"Line":0}},{"line":766,"address":[],"length":0,"stats":{"Line":0}},{"line":782,"address":[],"length":0,"stats":{"Line":0}},{"line":783,"address":[],"length":0,"stats":{"Line":0}},{"line":786,"address":[],"length":0,"stats":{"Line":0}},{"line":787,"address":[],"length":0,"stats":{"Line":0}},{"line":790,"address":[],"length":0,"stats":{"Line":0}},{"line":791,"address":[],"length":0,"stats":{"Line":0}},{"line":792,"address":[],"length":0,"stats":{"Line":0}},{"line":794,"address":[],"length":0,"stats":{"Line":0}},{"line":795,"address":[],"length":0,"stats":{"Line":0}},{"line":798,"address":[],"length":0,"stats":{"Line":0}},{"line":799,"address":[],"length":0,"stats":{"Line":0}},{"line":800,"address":[],"length":0,"stats":{"Line":0}},{"line":833,"address":[],"length":0,"stats":{"Line":0}},{"line":836,"address":[],"length":0,"stats":{"Line":0}},{"line":853,"address":[],"length":0,"stats":{"Line":0}},{"line":854,"address":[],"length":0,"stats":{"Line":0}},{"line":855,"address":[],"length":0,"stats":{"Line":0}},{"line":856,"address":[],"length":0,"stats":{"Line":0}},{"line":860,"address":[],"length":0,"stats":{"Line":0}},{"line":863,"address":[],"length":0,"stats":{"Line":0}},{"line":864,"address":[],"length":0,"stats":{"Line":0}},{"line":866,"address":[],"length":0,"stats":{"Line":0}},{"line":867,"address":[],"length":0,"stats":{"Line":0}},{"line":870,"address":[],"length":0,"stats":{"Line":0}},{"line":871,"address":[],"length":0,"stats":{"Line":0}},{"line":873,"address":[],"length":0,"stats":{"Line":0}},{"line":874,"address":[],"length":0,"stats":{"Line":0}},{"line":876,"address":[],"length":0,"stats":{"Line":0}},{"line":880,"address":[],"length":0,"stats":{"Line":0}},{"line":881,"address":[],"length":0,"stats":{"Line":0}},{"line":882,"address":[],"length":0,"stats":{"Line":0}},{"line":884,"address":[],"length":0,"stats":{"Line":0}},{"line":900,"address":[],"length":0,"stats":{"Line":0}},{"line":901,"address":[],"length":0,"stats":{"Line":0}},{"line":903,"address":[],"length":0,"stats":{"Line":0}},{"line":906,"address":[],"length":0,"stats":{"Line":0}},{"line":907,"address":[],"length":0,"stats":{"Line":0}},{"line":922,"address":[],"length":0,"stats":{"Line":0}},{"line":923,"address":[],"length":0,"stats":{"Line":0}},{"line":925,"address":[],"length":0,"stats":{"Line":0}},{"line":928,"address":[],"length":0,"stats":{"Line":0}},{"line":929,"address":[],"length":0,"stats":{"Line":0}},{"line":932,"address":[],"length":0,"stats":{"Line":0}},{"line":933,"address":[],"length":0,"stats":{"Line":0}},{"line":935,"address":[],"length":0,"stats":{"Line":0}},{"line":938,"address":[],"length":0,"stats":{"Line":0}},{"line":939,"address":[],"length":0,"stats":{"Line":0}},{"line":940,"address":[],"length":0,"stats":{"Line":0}},{"line":941,"address":[],"length":0,"stats":{"Line":0}},{"line":944,"address":[],"length":0,"stats":{"Line":0}},{"line":945,"address":[],"length":0,"stats":{"Line":0}},{"line":948,"address":[],"length":0,"stats":{"Line":0}},{"line":949,"address":[],"length":0,"stats":{"Line":0}},{"line":950,"address":[],"length":0,"stats":{"Line":0}},{"line":951,"address":[],"length":0,"stats":{"Line":0}},{"line":953,"address":[],"length":0,"stats":{"Line":0}},{"line":956,"address":[],"length":0,"stats":{"Line":0}},{"line":959,"address":[],"length":0,"stats":{"Line":0}},{"line":960,"address":[],"length":0,"stats":{"Line":0}},{"line":962,"address":[],"length":0,"stats":{"Line":0}},{"line":963,"address":[],"length":0,"stats":{"Line":0}},{"line":975,"address":[],"length":0,"stats":{"Line":0}},{"line":976,"address":[],"length":0,"stats":{"Line":0}},{"line":977,"address":[],"length":0,"stats":{"Line":0}},{"line":978,"address":[],"length":0,"stats":{"Line":0}},{"line":979,"address":[],"length":0,"stats":{"Line":0}},{"line":980,"address":[],"length":0,"stats":{"Line":0}},{"line":983,"address":[],"length":0,"stats":{"Line":0}},{"line":985,"address":[],"length":0,"stats":{"Line":0}},{"line":986,"address":[],"length":0,"stats":{"Line":0}},{"line":987,"address":[],"length":0,"stats":{"Line":0}},{"line":988,"address":[],"length":0,"stats":{"Line":0}},{"line":989,"address":[],"length":0,"stats":{"Line":0}},{"line":991,"address":[],"length":0,"stats":{"Line":0}},{"line":1004,"address":[],"length":0,"stats":{"Line":0}},{"line":1005,"address":[],"length":0,"stats":{"Line":0}},{"line":1006,"address":[],"length":0,"stats":{"Line":0}},{"line":1019,"address":[],"length":0,"stats":{"Line":0}},{"line":1020,"address":[],"length":0,"stats":{"Line":0}},{"line":1022,"address":[],"length":0,"stats":{"Line":0}},{"line":1023,"address":[],"length":0,"stats":{"Line":0}},{"line":1026,"address":[],"length":0,"stats":{"Line":0}},{"line":1039,"address":[],"length":0,"stats":{"Line":0}},{"line":1040,"address":[],"length":0,"stats":{"Line":0}},{"line":1042,"address":[],"length":0,"stats":{"Line":0}},{"line":1043,"address":[],"length":0,"stats":{"Line":0}},{"line":1047,"address":[],"length":0,"stats":{"Line":0}},{"line":1049,"address":[],"length":0,"stats":{"Line":0}},{"line":1062,"address":[],"length":0,"stats":{"Line":0}},{"line":1064,"address":[],"length":0,"stats":{"Line":0}},{"line":1066,"address":[],"length":0,"stats":{"Line":0}},{"line":1067,"address":[],"length":0,"stats":{"Line":0}},{"line":1068,"address":[],"length":0,"stats":{"Line":0}},{"line":1069,"address":[],"length":0,"stats":{"Line":0}},{"line":1074,"address":[],"length":0,"stats":{"Line":0}},{"line":1075,"address":[],"length":0,"stats":{"Line":0}},{"line":1077,"address":[],"length":0,"stats":{"Line":0}},{"line":1080,"address":[],"length":0,"stats":{"Line":0}},{"line":1081,"address":[],"length":0,"stats":{"Line":0}},{"line":1082,"address":[],"length":0,"stats":{"Line":0}},{"line":1083,"address":[],"length":0,"stats":{"Line":0}},{"line":1091,"address":[],"length":0,"stats":{"Line":0}},{"line":1113,"address":[],"length":0,"stats":{"Line":0}},{"line":1114,"address":[],"length":0,"stats":{"Line":0}},{"line":1117,"address":[],"length":0,"stats":{"Line":0}},{"line":1118,"address":[],"length":0,"stats":{"Line":0}},{"line":1122,"address":[],"length":0,"stats":{"Line":0}},{"line":1124,"address":[],"length":0,"stats":{"Line":0}},{"line":1132,"address":[],"length":0,"stats":{"Line":0}},{"line":1133,"address":[],"length":0,"stats":{"Line":0}},{"line":1135,"address":[],"length":0,"stats":{"Line":0}},{"line":1136,"address":[],"length":0,"stats":{"Line":0}},{"line":1137,"address":[],"length":0,"stats":{"Line":0}},{"line":1138,"address":[],"length":0,"stats":{"Line":0}},{"line":1141,"address":[],"length":0,"stats":{"Line":0}},{"line":1159,"address":[],"length":0,"stats":{"Line":0}},{"line":1163,"address":[],"length":0,"stats":{"Line":0}},{"line":1181,"address":[],"length":0,"stats":{"Line":0}},{"line":1185,"address":[],"length":0,"stats":{"Line":0}},{"line":1202,"address":[],"length":0,"stats":{"Line":0}},{"line":1207,"address":[],"length":0,"stats":{"Line":0}},{"line":1210,"address":[],"length":0,"stats":{"Line":0}},{"line":1211,"address":[],"length":0,"stats":{"Line":0}},{"line":1214,"address":[],"length":0,"stats":{"Line":0}},{"line":1220,"address":[],"length":0,"stats":{"Line":0}},{"line":1221,"address":[],"length":0,"stats":{"Line":0}},{"line":1224,"address":[],"length":0,"stats":{"Line":0}},{"line":1227,"address":[],"length":0,"stats":{"Line":0}},{"line":1228,"address":[],"length":0,"stats":{"Line":0}},{"line":1231,"address":[],"length":0,"stats":{"Line":0}},{"line":1232,"address":[],"length":0,"stats":{"Line":0}},{"line":1235,"address":[],"length":0,"stats":{"Line":0}},{"line":1238,"address":[],"length":0,"stats":{"Line":0}},{"line":1240,"address":[],"length":0,"stats":{"Line":0}},{"line":1243,"address":[],"length":0,"stats":{"Line":0}},{"line":1244,"address":[],"length":0,"stats":{"Line":0}},{"line":1245,"address":[],"length":0,"stats":{"Line":0}},{"line":1246,"address":[],"length":0,"stats":{"Line":0}},{"line":1247,"address":[],"length":0,"stats":{"Line":0}},{"line":1248,"address":[],"length":0,"stats":{"Line":0}},{"line":1249,"address":[],"length":0,"stats":{"Line":0}},{"line":1252,"address":[],"length":0,"stats":{"Line":0}},{"line":1254,"address":[],"length":0,"stats":{"Line":0}},{"line":1257,"address":[],"length":0,"stats":{"Line":0}},{"line":1271,"address":[],"length":0,"stats":{"Line":0}},{"line":1272,"address":[],"length":0,"stats":{"Line":0}},{"line":1274,"address":[],"length":0,"stats":{"Line":0}},{"line":1313,"address":[],"length":0,"stats":{"Line":0}},{"line":1315,"address":[],"length":0,"stats":{"Line":0}},{"line":1317,"address":[],"length":0,"stats":{"Line":0}},{"line":1319,"address":[],"length":0,"stats":{"Line":0}},{"line":1320,"address":[],"length":0,"stats":{"Line":0}},{"line":1323,"address":[],"length":0,"stats":{"Line":0}},{"line":1326,"address":[],"length":0,"stats":{"Line":0}},{"line":1327,"address":[],"length":0,"stats":{"Line":0}},{"line":1332,"address":[],"length":0,"stats":{"Line":0}},{"line":1333,"address":[],"length":0,"stats":{"Line":0}},{"line":1336,"address":[],"length":0,"stats":{"Line":0}},{"line":1337,"address":[],"length":0,"stats":{"Line":0}},{"line":1338,"address":[],"length":0,"stats":{"Line":0}},{"line":1343,"address":[],"length":0,"stats":{"Line":0}},{"line":1345,"address":[],"length":0,"stats":{"Line":0}},{"line":1348,"address":[],"length":0,"stats":{"Line":0}},{"line":1349,"address":[],"length":0,"stats":{"Line":0}},{"line":1352,"address":[],"length":0,"stats":{"Line":0}},{"line":1353,"address":[],"length":0,"stats":{"Line":0}},{"line":1356,"address":[],"length":0,"stats":{"Line":0}},{"line":1359,"address":[],"length":0,"stats":{"Line":0}},{"line":1360,"address":[],"length":0,"stats":{"Line":0}},{"line":1361,"address":[],"length":0,"stats":{"Line":0}},{"line":1364,"address":[],"length":0,"stats":{"Line":0}},{"line":1367,"address":[],"length":0,"stats":{"Line":0}},{"line":1368,"address":[],"length":0,"stats":{"Line":0}},{"line":1369,"address":[],"length":0,"stats":{"Line":0}},{"line":1372,"address":[],"length":0,"stats":{"Line":0}},{"line":1373,"address":[],"length":0,"stats":{"Line":0}},{"line":1374,"address":[],"length":0,"stats":{"Line":0}},{"line":1379,"address":[],"length":0,"stats":{"Line":0}},{"line":1381,"address":[],"length":0,"stats":{"Line":0}},{"line":1384,"address":[],"length":0,"stats":{"Line":0}},{"line":1385,"address":[],"length":0,"stats":{"Line":0}},{"line":1386,"address":[],"length":0,"stats":{"Line":0}},{"line":1388,"address":[],"length":0,"stats":{"Line":0}},{"line":1389,"address":[],"length":0,"stats":{"Line":0}},{"line":1392,"address":[],"length":0,"stats":{"Line":0}},{"line":1394,"address":[],"length":0,"stats":{"Line":0}},{"line":1396,"address":[],"length":0,"stats":{"Line":0}},{"line":1397,"address":[],"length":0,"stats":{"Line":0}},{"line":1400,"address":[],"length":0,"stats":{"Line":0}},{"line":1401,"address":[],"length":0,"stats":{"Line":0}},{"line":1404,"address":[],"length":0,"stats":{"Line":0}},{"line":1405,"address":[],"length":0,"stats":{"Line":0}},{"line":1406,"address":[],"length":0,"stats":{"Line":0}},{"line":1407,"address":[],"length":0,"stats":{"Line":0}},{"line":1408,"address":[],"length":0,"stats":{"Line":0}},{"line":1415,"address":[],"length":0,"stats":{"Line":0}},{"line":1416,"address":[],"length":0,"stats":{"Line":0}},{"line":1418,"address":[],"length":0,"stats":{"Line":0}},{"line":1421,"address":[],"length":0,"stats":{"Line":0}},{"line":1424,"address":[],"length":0,"stats":{"Line":0}},{"line":1427,"address":[],"length":0,"stats":{"Line":0}},{"line":1428,"address":[],"length":0,"stats":{"Line":0}},{"line":1429,"address":[],"length":0,"stats":{"Line":0}},{"line":1430,"address":[],"length":0,"stats":{"Line":0}},{"line":1435,"address":[],"length":0,"stats":{"Line":0}},{"line":1437,"address":[],"length":0,"stats":{"Line":0}},{"line":1438,"address":[],"length":0,"stats":{"Line":0}},{"line":1441,"address":[],"length":0,"stats":{"Line":0}},{"line":1442,"address":[],"length":0,"stats":{"Line":0}},{"line":1445,"address":[],"length":0,"stats":{"Line":0}},{"line":1446,"address":[],"length":0,"stats":{"Line":0}},{"line":1447,"address":[],"length":0,"stats":{"Line":0}},{"line":1448,"address":[],"length":0,"stats":{"Line":0}},{"line":1449,"address":[],"length":0,"stats":{"Line":0}},{"line":1456,"address":[],"length":0,"stats":{"Line":0}},{"line":1457,"address":[],"length":0,"stats":{"Line":0}},{"line":1459,"address":[],"length":0,"stats":{"Line":0}},{"line":1462,"address":[],"length":0,"stats":{"Line":0}},{"line":1465,"address":[],"length":0,"stats":{"Line":0}},{"line":1468,"address":[],"length":0,"stats":{"Line":0}},{"line":1510,"address":[],"length":0,"stats":{"Line":0}},{"line":1511,"address":[],"length":0,"stats":{"Line":0}},{"line":1512,"address":[],"length":0,"stats":{"Line":0}},{"line":1515,"address":[],"length":0,"stats":{"Line":0}},{"line":1516,"address":[],"length":0,"stats":{"Line":0}},{"line":1517,"address":[],"length":0,"stats":{"Line":0}},{"line":1520,"address":[],"length":0,"stats":{"Line":0}},{"line":1523,"address":[],"length":0,"stats":{"Line":0}},{"line":1524,"address":[],"length":0,"stats":{"Line":0}},{"line":1525,"address":[],"length":0,"stats":{"Line":0}},{"line":1526,"address":[],"length":0,"stats":{"Line":0}},{"line":1527,"address":[],"length":0,"stats":{"Line":0}},{"line":1528,"address":[],"length":0,"stats":{"Line":0}},{"line":1529,"address":[],"length":0,"stats":{"Line":0}},{"line":1530,"address":[],"length":0,"stats":{"Line":0}},{"line":1532,"address":[],"length":0,"stats":{"Line":0}},{"line":1535,"address":[],"length":0,"stats":{"Line":0}},{"line":1537,"address":[],"length":0,"stats":{"Line":0}},{"line":1539,"address":[],"length":0,"stats":{"Line":0}},{"line":1540,"address":[],"length":0,"stats":{"Line":0}},{"line":1542,"address":[],"length":0,"stats":{"Line":0}},{"line":1543,"address":[],"length":0,"stats":{"Line":0}},{"line":1546,"address":[],"length":0,"stats":{"Line":0}},{"line":1549,"address":[],"length":0,"stats":{"Line":0}},{"line":1550,"address":[],"length":0,"stats":{"Line":0}},{"line":1551,"address":[],"length":0,"stats":{"Line":0}},{"line":1555,"address":[],"length":0,"stats":{"Line":0}},{"line":1558,"address":[],"length":0,"stats":{"Line":0}},{"line":1559,"address":[],"length":0,"stats":{"Line":0}},{"line":1562,"address":[],"length":0,"stats":{"Line":0}},{"line":1564,"address":[],"length":0,"stats":{"Line":0}},{"line":1565,"address":[],"length":0,"stats":{"Line":0}},{"line":1577,"address":[],"length":0,"stats":{"Line":0}},{"line":1578,"address":[],"length":0,"stats":{"Line":0}},{"line":1617,"address":[],"length":0,"stats":{"Line":0}},{"line":1618,"address":[],"length":0,"stats":{"Line":0}},{"line":1619,"address":[],"length":0,"stats":{"Line":0}},{"line":1622,"address":[],"length":0,"stats":{"Line":0}},{"line":1623,"address":[],"length":0,"stats":{"Line":0}},{"line":1624,"address":[],"length":0,"stats":{"Line":0}},{"line":1627,"address":[],"length":0,"stats":{"Line":0}},{"line":1628,"address":[],"length":0,"stats":{"Line":0}},{"line":1631,"address":[],"length":0,"stats":{"Line":0}},{"line":1634,"address":[],"length":0,"stats":{"Line":0}},{"line":1635,"address":[],"length":0,"stats":{"Line":0}},{"line":1636,"address":[],"length":0,"stats":{"Line":0}},{"line":1640,"address":[],"length":0,"stats":{"Line":0}},{"line":1641,"address":[],"length":0,"stats":{"Line":0}},{"line":1642,"address":[],"length":0,"stats":{"Line":0}},{"line":1643,"address":[],"length":0,"stats":{"Line":0}},{"line":1644,"address":[],"length":0,"stats":{"Line":0}},{"line":1645,"address":[],"length":0,"stats":{"Line":0}},{"line":1646,"address":[],"length":0,"stats":{"Line":0}},{"line":1647,"address":[],"length":0,"stats":{"Line":0}},{"line":1649,"address":[],"length":0,"stats":{"Line":0}},{"line":1652,"address":[],"length":0,"stats":{"Line":0}},{"line":1654,"address":[],"length":0,"stats":{"Line":0}},{"line":1656,"address":[],"length":0,"stats":{"Line":0}},{"line":1657,"address":[],"length":0,"stats":{"Line":0}},{"line":1659,"address":[],"length":0,"stats":{"Line":0}},{"line":1660,"address":[],"length":0,"stats":{"Line":0}},{"line":1663,"address":[],"length":0,"stats":{"Line":0}},{"line":1664,"address":[],"length":0,"stats":{"Line":0}},{"line":1668,"address":[],"length":0,"stats":{"Line":0}},{"line":1671,"address":[],"length":0,"stats":{"Line":0}},{"line":1672,"address":[],"length":0,"stats":{"Line":0}},{"line":1674,"address":[],"length":0,"stats":{"Line":0}},{"line":1678,"address":[],"length":0,"stats":{"Line":0}},{"line":1681,"address":[],"length":0,"stats":{"Line":0}},{"line":1682,"address":[],"length":0,"stats":{"Line":0}},{"line":1685,"address":[],"length":0,"stats":{"Line":0}},{"line":1687,"address":[],"length":0,"stats":{"Line":0}},{"line":1688,"address":[],"length":0,"stats":{"Line":0}},{"line":1700,"address":[],"length":0,"stats":{"Line":0}},{"line":1701,"address":[],"length":0,"stats":{"Line":0}},{"line":1735,"address":[],"length":0,"stats":{"Line":0}},{"line":1736,"address":[],"length":0,"stats":{"Line":0}},{"line":1737,"address":[],"length":0,"stats":{"Line":0}},{"line":1740,"address":[],"length":0,"stats":{"Line":0}},{"line":1741,"address":[],"length":0,"stats":{"Line":0}},{"line":1744,"address":[],"length":0,"stats":{"Line":0}},{"line":1745,"address":[],"length":0,"stats":{"Line":0}},{"line":1746,"address":[],"length":0,"stats":{"Line":0}},{"line":1747,"address":[],"length":0,"stats":{"Line":0}},{"line":1748,"address":[],"length":0,"stats":{"Line":0}},{"line":1749,"address":[],"length":0,"stats":{"Line":0}},{"line":1750,"address":[],"length":0,"stats":{"Line":0}},{"line":1751,"address":[],"length":0,"stats":{"Line":0}},{"line":1755,"address":[],"length":0,"stats":{"Line":0}},{"line":1757,"address":[],"length":0,"stats":{"Line":0}},{"line":1759,"address":[],"length":0,"stats":{"Line":0}},{"line":1760,"address":[],"length":0,"stats":{"Line":0}},{"line":1762,"address":[],"length":0,"stats":{"Line":0}},{"line":1763,"address":[],"length":0,"stats":{"Line":0}},{"line":1767,"address":[],"length":0,"stats":{"Line":0}},{"line":1769,"address":[],"length":0,"stats":{"Line":0}},{"line":1770,"address":[],"length":0,"stats":{"Line":0}},{"line":1772,"address":[],"length":0,"stats":{"Line":0}},{"line":1774,"address":[],"length":0,"stats":{"Line":0}},{"line":1775,"address":[],"length":0,"stats":{"Line":0}},{"line":1796,"address":[],"length":0,"stats":{"Line":0}},{"line":1805,"address":[],"length":0,"stats":{"Line":0}},{"line":1808,"address":[],"length":0,"stats":{"Line":0}},{"line":1809,"address":[],"length":0,"stats":{"Line":0}},{"line":1812,"address":[],"length":0,"stats":{"Line":0}},{"line":1815,"address":[],"length":0,"stats":{"Line":0}},{"line":1816,"address":[],"length":0,"stats":{"Line":0}},{"line":1817,"address":[],"length":0,"stats":{"Line":0}},{"line":1818,"address":[],"length":0,"stats":{"Line":0}},{"line":1819,"address":[],"length":0,"stats":{"Line":0}},{"line":1820,"address":[],"length":0,"stats":{"Line":0}},{"line":1821,"address":[],"length":0,"stats":{"Line":0}},{"line":1823,"address":[],"length":0,"stats":{"Line":0}},{"line":1827,"address":[],"length":0,"stats":{"Line":0}},{"line":1828,"address":[],"length":0,"stats":{"Line":0}},{"line":1829,"address":[],"length":0,"stats":{"Line":0}},{"line":1830,"address":[],"length":0,"stats":{"Line":0}},{"line":1832,"address":[],"length":0,"stats":{"Line":0}},{"line":1834,"address":[],"length":0,"stats":{"Line":0}},{"line":1835,"address":[],"length":0,"stats":{"Line":0}},{"line":1836,"address":[],"length":0,"stats":{"Line":0}},{"line":1838,"address":[],"length":0,"stats":{"Line":0}},{"line":1839,"address":[],"length":0,"stats":{"Line":0}},{"line":1840,"address":[],"length":0,"stats":{"Line":0}},{"line":1841,"address":[],"length":0,"stats":{"Line":0}},{"line":1842,"address":[],"length":0,"stats":{"Line":0}},{"line":1843,"address":[],"length":0,"stats":{"Line":0}},{"line":1844,"address":[],"length":0,"stats":{"Line":0}},{"line":1846,"address":[],"length":0,"stats":{"Line":0}},{"line":1847,"address":[],"length":0,"stats":{"Line":0}},{"line":1848,"address":[],"length":0,"stats":{"Line":0}},{"line":1850,"address":[],"length":0,"stats":{"Line":0}},{"line":1851,"address":[],"length":0,"stats":{"Line":0}},{"line":1852,"address":[],"length":0,"stats":{"Line":0}},{"line":1858,"address":[],"length":0,"stats":{"Line":0}},{"line":1859,"address":[],"length":0,"stats":{"Line":0}},{"line":1860,"address":[],"length":0,"stats":{"Line":0}},{"line":1862,"address":[],"length":0,"stats":{"Line":0}},{"line":1863,"address":[],"length":0,"stats":{"Line":0}},{"line":1867,"address":[],"length":0,"stats":{"Line":0}},{"line":1868,"address":[],"length":0,"stats":{"Line":0}},{"line":1869,"address":[],"length":0,"stats":{"Line":0}},{"line":1872,"address":[],"length":0,"stats":{"Line":0}},{"line":1873,"address":[],"length":0,"stats":{"Line":0}},{"line":1874,"address":[],"length":0,"stats":{"Line":0}},{"line":1875,"address":[],"length":0,"stats":{"Line":0}},{"line":1876,"address":[],"length":0,"stats":{"Line":0}},{"line":1878,"address":[],"length":0,"stats":{"Line":0}},{"line":1879,"address":[],"length":0,"stats":{"Line":0}},{"line":1884,"address":[],"length":0,"stats":{"Line":0}},{"line":1887,"address":[],"length":0,"stats":{"Line":0}},{"line":1889,"address":[],"length":0,"stats":{"Line":0}},{"line":1894,"address":[],"length":0,"stats":{"Line":0}},{"line":1895,"address":[],"length":0,"stats":{"Line":0}},{"line":1898,"address":[],"length":0,"stats":{"Line":0}},{"line":1917,"address":[],"length":0,"stats":{"Line":0}},{"line":1918,"address":[],"length":0,"stats":{"Line":0}},{"line":1920,"address":[],"length":0,"stats":{"Line":0}},{"line":1921,"address":[],"length":0,"stats":{"Line":0}},{"line":1922,"address":[],"length":0,"stats":{"Line":0}},{"line":1925,"address":[],"length":0,"stats":{"Line":0}},{"line":1926,"address":[],"length":0,"stats":{"Line":0}},{"line":1928,"address":[],"length":0,"stats":{"Line":0}},{"line":1947,"address":[],"length":0,"stats":{"Line":0}},{"line":1948,"address":[],"length":0,"stats":{"Line":0}},{"line":1951,"address":[],"length":0,"stats":{"Line":0}},{"line":1953,"address":[],"length":0,"stats":{"Line":0}},{"line":1954,"address":[],"length":0,"stats":{"Line":0}},{"line":1957,"address":[],"length":0,"stats":{"Line":0}},{"line":1958,"address":[],"length":0,"stats":{"Line":0}},{"line":1960,"address":[],"length":0,"stats":{"Line":0}},{"line":1977,"address":[],"length":0,"stats":{"Line":0}},{"line":1978,"address":[],"length":0,"stats":{"Line":0}},{"line":1980,"address":[],"length":0,"stats":{"Line":0}},{"line":1981,"address":[],"length":0,"stats":{"Line":0}},{"line":1984,"address":[],"length":0,"stats":{"Line":0}},{"line":1985,"address":[],"length":0,"stats":{"Line":0}},{"line":1986,"address":[],"length":0,"stats":{"Line":0}},{"line":1987,"address":[],"length":0,"stats":{"Line":0}},{"line":1989,"address":[],"length":0,"stats":{"Line":0}},{"line":1990,"address":[],"length":0,"stats":{"Line":0}},{"line":1991,"address":[],"length":0,"stats":{"Line":0}},{"line":1992,"address":[],"length":0,"stats":{"Line":0}},{"line":1996,"address":[],"length":0,"stats":{"Line":0}},{"line":1997,"address":[],"length":0,"stats":{"Line":0}},{"line":1999,"address":[],"length":0,"stats":{"Line":0}},{"line":2001,"address":[],"length":0,"stats":{"Line":0}},{"line":2004,"address":[],"length":0,"stats":{"Line":0}},{"line":2007,"address":[],"length":0,"stats":{"Line":0}},{"line":2010,"address":[],"length":0,"stats":{"Line":0}},{"line":2016,"address":[],"length":0,"stats":{"Line":0}},{"line":2018,"address":[],"length":0,"stats":{"Line":0}},{"line":2019,"address":[],"length":0,"stats":{"Line":0}},{"line":2020,"address":[],"length":0,"stats":{"Line":0}},{"line":2021,"address":[],"length":0,"stats":{"Line":0}},{"line":2024,"address":[],"length":0,"stats":{"Line":0}},{"line":2025,"address":[],"length":0,"stats":{"Line":0}},{"line":2030,"address":[],"length":0,"stats":{"Line":0}},{"line":2031,"address":[],"length":0,"stats":{"Line":0}}],"covered":24,"coverable":623},{"path":["/","Users","julian","projects","physna","pcli2","src","tenant_cache.rs"],"content":"//! Cache for tenant information to avoid repeated API calls\n//!\n//! This cache stores tenant data locally to avoid expensive API calls when\n//! checking tenant information. It caches the list of available tenants\n//! for the current user.\n\nuse std::path::PathBuf;\nuse tracing::{debug, trace, warn};\nuse crate::model::TenantSetting;\nuse crate::cache::CacheError;\n\n/// Cache for tenant information to avoid repeated API calls\n#[derive(serde::Serialize, serde::Deserialize)]\npub struct TenantCache {\n    /// Map of tenant UUID to cached tenant setting\n    pub tenants: Vec\u003cTenantSetting\u003e,\n    /// Unix timestamp when the cache was last updated (for future use)\n    #[serde(rename = \"lastUpdated\")]\n    pub last_updated_timestamp: Option\u003cu64\u003e,\n}\n\nimpl TenantCache {\n    /// Create a new empty tenant cache\n    pub fn new() -\u003e Self {\n        Self {\n            tenants: Vec::new(),\n            last_updated_timestamp: Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs()),\n        }\n    }\n\n    /// Check if cache is expired (default expiration: 1 hour)\n    pub fn is_expired(\u0026self) -\u003e bool {\n        if let Some(timestamp) = self.last_updated_timestamp {\n            let now = std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs();\n            // Cache expires after 1 hour (3600 seconds)\n            now - timestamp \u003e 3600\n        } else {\n            true // If no timestamp, treat as expired\n        }\n    }\n\n    /// Get the default cache file path\n    ///\n    /// # Returns\n    /// * `Ok(PathBuf)` - The path to the tenant cache file\n    /// * `Err` - If there was an error getting the cache directory\n    fn get_cache_file_path() -\u003e Result\u003cPathBuf, CacheError\u003e {\n        // Check for PCLI2_CACHE_DIR environment variable first\n        if let Ok(cache_dir_str) = std::env::var(\"PCLI2_CACHE_DIR\") {\n            let mut cache_path = PathBuf::from(cache_dir_str);\n            cache_path.push(\"tenant_cache.json\");\n            return Ok(cache_path);\n        }\n\n        let mut path = dirs::cache_dir().ok_or_else(|| {\n            CacheError::Other(\"Could not determine cache directory\".to_string())\n        })?;\n        path.push(\"pcli2\");\n        path.push(\"tenant_cache.json\");\n        Ok(path)\n    }\n\n    /// Load cache from file\n    ///\n    /// # Returns\n    /// * `Ok(TenantCache)` - The loaded cache\n    /// * `Err` - If there was an error loading the cache\n    pub fn load() -\u003e Result\u003cTenantCache, CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n\n        if !path.exists() {\n            debug!(\"No tenant cache file found, creating new cache\");\n            return Ok(Self::new());\n        }\n\n        let data = std::fs::read_to_string(path)?;\n        let cache: TenantCache = serde_json::from_str(\u0026data)?;\n\n        debug!(\"Loaded tenant cache from file\");\n        Ok(cache)\n    }\n\n    /// Save cache to file\n    ///\n    /// # Returns\n    /// * `Ok(())` - If the cache was successfully saved\n    /// * `Err` - If there was an error saving the cache\n    pub fn save(\u0026self) -\u003e Result\u003c(), CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n        \n        // Create cache directory if it doesn't exist\n        if let Some(parent) = path.parent() {\n            std::fs::create_dir_all(parent)?;\n        }\n\n        let cache_to_save = Self {\n            tenants: self.tenants.clone(),\n            last_updated_timestamp: self.last_updated_timestamp,\n        };\n\n        let data = serde_json::to_string_pretty(\u0026cache_to_save)?;\n        std::fs::write(path, data)?;\n        debug!(\"Saved tenant cache to file\");\n        Ok(())\n    }\n\n    /// Get all tenants from cache, fetching from API if not cached or expired\n    ///\n    /// # Arguments\n    /// * `api` - Reference to the API client to use for fetching if needed\n    /// * `refresh` - Whether to force refresh the cache\n    ///\n    /// # Returns\n    /// * `Ok(Vec\u003cTenantSetting\u003e)` - The list of tenants (from cache or API)\n    pub async fn get_all_tenants(\n        api: \u0026mut crate::physna_v3::PhysnaApiClient,\n        refresh: bool,\n    ) -\u003e Result\u003cVec\u003cTenantSetting\u003e, crate::physna_v3::ApiError\u003e {\n        if refresh {\n            trace!(\"Force refresh requested, fetching tenants from API\");\n            let tenants = api.list_tenants().await?;\n            // Update cache\n            let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n            cache.tenants = tenants.clone();\n            cache.last_updated_timestamp = Some(std::time::SystemTime::now()\n                .duration_since(std::time::UNIX_EPOCH)\n                .unwrap()\n                .as_secs());\n            if let Err(e) = cache.save() {\n                warn!(\"Failed to save tenant cache: {}\", e);\n            }\n            return Ok(tenants);\n        }\n\n        let mut cache = Self::load().unwrap_or_else(|_| Self::new());\n\n        // Check if we have cached data and if it's still valid (not expired)\n        if !cache.tenants.is_empty() \u0026\u0026 !cache.is_expired() {\n            trace!(\"Using existing cache for tenants\");\n            return Ok(cache.tenants.clone());\n        }\n\n        trace!(\"Cache expired or empty, fetching tenants from API\");\n        let tenants = api.list_tenants().await?;\n\n        // Update cache\n        cache.tenants = tenants.clone();\n        cache.last_updated_timestamp = Some(std::time::SystemTime::now()\n            .duration_since(std::time::UNIX_EPOCH)\n            .unwrap()\n            .as_secs());\n        if let Err(e) = cache.save() {\n            warn!(\"Failed to save tenant cache: {}\", e);\n        }\n\n        Ok(tenants)\n    }\n\n    /// Get cached tenants if available and not expired\n    ///\n    /// # Returns\n    /// * `Some(Vec\u003cTenantSetting\u003e)` - If tenants are cached and not expired\n    /// * `None` - If tenants are not cached or are expired\n    pub fn get_cached_tenants(\u0026self) -\u003e Option\u003cVec\u003cTenantSetting\u003e\u003e {\n        if !self.tenants.is_empty() \u0026\u0026 !self.is_expired() {\n            Some(self.tenants.clone())\n        } else {\n            None\n        }\n    }\n\n    /// Invalidate cache for all tenants\n    ///\n    /// This method clears the cached tenant list.\n    pub fn invalidate_all() -\u003e Result\u003c(), CacheError\u003e {\n        let path = Self::get_cache_file_path()?;\n        if path.exists() {\n            std::fs::remove_file(\u0026path)?;\n            trace!(\"Invalidated all tenant cache\");\n        }\n        Ok(())\n    }\n}\n\nimpl Default for TenantCache {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_tenant_cache_creation() {\n        let cache = TenantCache::new();\n        assert!(cache.tenants.is_empty());\n        assert!(cache.last_updated_timestamp.is_some());\n    }\n\n    #[test]\n    fn test_tenant_cache_is_expired_initially_false() {\n        let cache = TenantCache::new();\n        // A new cache shouldn't be expired immediately\n        assert!(!cache.is_expired());\n    }\n\n    #[test]\n    fn test_tenant_cache_creation_has_timestamp() {\n        let cache = TenantCache::new();\n        assert!(cache.last_updated_timestamp.is_some());\n    }\n}","traces":[{"line":24,"address":[],"length":0,"stats":{"Line":3}},{"line":26,"address":[],"length":0,"stats":{"Line":6}},{"line":27,"address":[],"length":0,"stats":{"Line":6}},{"line":35,"address":[],"length":0,"stats":{"Line":5}},{"line":36,"address":[],"length":0,"stats":{"Line":10}},{"line":37,"address":[],"length":0,"stats":{"Line":15}},{"line":38,"address":[],"length":0,"stats":{"Line":5}},{"line":42,"address":[],"length":0,"stats":{"Line":5}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":53,"address":[],"length":0,"stats":{"Line":4}},{"line":55,"address":[],"length":0,"stats":{"Line":4}},{"line":56,"address":[],"length":0,"stats":{"Line":0}},{"line":57,"address":[],"length":0,"stats":{"Line":0}},{"line":58,"address":[],"length":0,"stats":{"Line":0}},{"line":61,"address":[],"length":0,"stats":{"Line":12}},{"line":62,"address":[],"length":0,"stats":{"Line":0}},{"line":64,"address":[],"length":0,"stats":{"Line":8}},{"line":65,"address":[],"length":0,"stats":{"Line":8}},{"line":66,"address":[],"length":0,"stats":{"Line":4}},{"line":74,"address":[],"length":0,"stats":{"Line":4}},{"line":75,"address":[],"length":0,"stats":{"Line":8}},{"line":77,"address":[],"length":0,"stats":{"Line":4}},{"line":78,"address":[],"length":0,"stats":{"Line":0}},{"line":79,"address":[],"length":0,"stats":{"Line":0}},{"line":82,"address":[],"length":0,"stats":{"Line":12}},{"line":83,"address":[],"length":0,"stats":{"Line":16}},{"line":85,"address":[],"length":0,"stats":{"Line":4}},{"line":86,"address":[],"length":0,"stats":{"Line":4}},{"line":94,"address":[],"length":0,"stats":{"Line":0}},{"line":95,"address":[],"length":0,"stats":{"Line":0}},{"line":98,"address":[],"length":0,"stats":{"Line":0}},{"line":99,"address":[],"length":0,"stats":{"Line":0}},{"line":103,"address":[],"length":0,"stats":{"Line":0}},{"line":104,"address":[],"length":0,"stats":{"Line":0}},{"line":107,"address":[],"length":0,"stats":{"Line":0}},{"line":108,"address":[],"length":0,"stats":{"Line":0}},{"line":109,"address":[],"length":0,"stats":{"Line":0}},{"line":110,"address":[],"length":0,"stats":{"Line":0}},{"line":121,"address":[],"length":0,"stats":{"Line":4}},{"line":125,"address":[],"length":0,"stats":{"Line":4}},{"line":126,"address":[],"length":0,"stats":{"Line":0}},{"line":127,"address":[],"length":0,"stats":{"Line":0}},{"line":129,"address":[],"length":0,"stats":{"Line":0}},{"line":130,"address":[],"length":0,"stats":{"Line":0}},{"line":131,"address":[],"length":0,"stats":{"Line":0}},{"line":132,"address":[],"length":0,"stats":{"Line":0}},{"line":133,"address":[],"length":0,"stats":{"Line":0}},{"line":134,"address":[],"length":0,"stats":{"Line":0}},{"line":135,"address":[],"length":0,"stats":{"Line":0}},{"line":136,"address":[],"length":0,"stats":{"Line":0}},{"line":138,"address":[],"length":0,"stats":{"Line":0}},{"line":141,"address":[],"length":0,"stats":{"Line":12}},{"line":144,"address":[],"length":0,"stats":{"Line":8}},{"line":145,"address":[],"length":0,"stats":{"Line":4}},{"line":146,"address":[],"length":0,"stats":{"Line":4}},{"line":149,"address":[],"length":0,"stats":{"Line":0}},{"line":150,"address":[],"length":0,"stats":{"Line":0}},{"line":153,"address":[],"length":0,"stats":{"Line":0}},{"line":154,"address":[],"length":0,"stats":{"Line":0}},{"line":155,"address":[],"length":0,"stats":{"Line":0}},{"line":156,"address":[],"length":0,"stats":{"Line":0}},{"line":157,"address":[],"length":0,"stats":{"Line":0}},{"line":158,"address":[],"length":0,"stats":{"Line":0}},{"line":159,"address":[],"length":0,"stats":{"Line":0}},{"line":162,"address":[],"length":0,"stats":{"Line":0}},{"line":170,"address":[],"length":0,"stats":{"Line":0}},{"line":171,"address":[],"length":0,"stats":{"Line":0}},{"line":172,"address":[],"length":0,"stats":{"Line":0}},{"line":174,"address":[],"length":0,"stats":{"Line":0}},{"line":181,"address":[],"length":0,"stats":{"Line":0}},{"line":182,"address":[],"length":0,"stats":{"Line":0}},{"line":183,"address":[],"length":0,"stats":{"Line":0}},{"line":184,"address":[],"length":0,"stats":{"Line":0}},{"line":185,"address":[],"length":0,"stats":{"Line":0}},{"line":187,"address":[],"length":0,"stats":{"Line":0}},{"line":192,"address":[],"length":0,"stats":{"Line":0}},{"line":193,"address":[],"length":0,"stats":{"Line":0}}],"covered":27,"coverable":77},{"path":["/","Users","julian","projects","physna","pcli2","tests","asset_tests.rs"],"content":"//! Integration tests for the asset command functionality.\n//!\n//! These tests verify that the asset commands work correctly with different\n//! options and formats, ensuring the CLI interface behaves as expected.\n\n#[cfg(test)]\nmod tests {\n    use assert_cmd::Command;\n    use predicates::prelude::*;\n\n    /// Test that the asset list command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows available options like --format, --pretty, and --headers\n    #[test]\n    fn test_asset_list_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"list\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"List all assets\"))\n            .stdout(predicate::str::contains(\"--format\"))\n            .stdout(predicate::str::contains(\"--pretty\"))\n            .stdout(predicate::str::contains(\"--headers\"));\n    }\n\n    /// Test that the asset get command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows available options like --format, --pretty, and --headers\n    #[test]\n    fn test_asset_get_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Get asset details\"))\n            .stdout(predicate::str::contains(\"--format\"))\n            .stdout(predicate::str::contains(\"--pretty\"))\n            .stdout(predicate::str::contains(\"--headers\"));\n    }\n\n    /// Test that the asset create command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --file and --folder-path or --folder-uuid\n    #[test]\n    fn test_asset_create_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"create\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Create a new asset by uploading a file\"))\n            .stdout(predicate::str::contains(\"--file\"))\n            .stdout(predicate::str::contains(\"--folder-path\"));\n    }\n\n    /// Test that the asset create-batch command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --files\n    #[test]\n    fn test_asset_create_batch_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"create-batch\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Create multiple assets by uploading files\"))\n            .stdout(predicate::str::contains(\"--files\"));\n    }\n\n    /// Test that the asset delete command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --uuid or --path\n    #[test]\n    fn test_asset_delete_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"delete\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Delete an asset\"))\n            .stdout(predicate::str::contains(\"--uuid\"))\n            .stdout(predicate::str::contains(\"--path\"));\n    }\n\n    /// Test that the asset download command displays help information correctly\n    /// when the --help flag is provided.\n    ///\n    /// This test verifies that:\n    /// - The command exits successfully\n    /// - Help text contains the command description\n    /// - Help text shows required parameters like --uuid or --path\n    #[test]\n    fn test_asset_download_command_help() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"download\")\n            .arg(\"--help\");\n\n        cmd.assert()\n            .success()\n            .stdout(predicate::str::contains(\"Download asset file\"))\n            .stdout(predicate::str::contains(\"--uuid\"))\n            .stdout(predicate::str::contains(\"--path\"));\n    }\n\n\n    /// Test that all supported output formats are accepted by the asset get command.\n    ///\n    /// This test verifies that:\n    /// - Each supported format (json, csv) is accepted as a valid argument\n    /// - Commands with valid formats execute (may fail for other reasons like API access, but not format-related)\n    /// - The tree format is not supported for asset get command\n    #[test]\n    fn test_asset_get_command_supported_formats() {\n        // Test that supported formats are accepted by the CLI\n        let formats = vec![\"json\", \"csv\"];\n\n        for format in formats {\n            let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n            cmd.arg(\"asset\")\n                .arg(\"get\")\n                .arg(\"--uuid\")\n                .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test format acceptance\n                .arg(\"--format\")\n                .arg(format);\n\n            // For invalid UUID, we expect an error but not a format-related error\n            cmd.assert()\n                .failure();  // Will fail due to API access but not format-related\n        }\n\n        // Test that tree format is not supported (should fail)\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")\n            .arg(\"--format\")\n            .arg(\"tree\");\n\n        cmd.assert()\n            .failure()\n            .stderr(predicate::str::contains(\"invalid value 'tree'\"));\n    }\n\n\n\n    /// Test that the asset get command supports --pretty flag with JSON format.\n    ///\n    /// This test verifies that:\n    /// - The command accepts the --pretty flag\n    /// - The command processes the flag without format-related errors (may fail for other reasons)\n    #[test]\n    fn test_asset_get_command_pretty_format() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test flag acceptance\n            .arg(\"--format\")\n            .arg(\"json\")\n            .arg(\"--pretty\");\n\n        // Should fail due to invalid UUID but should accept the format flags\n        cmd.assert()\n            .failure();  // Will fail due to API access but should accept the flag\n    }\n\n    /// Test that the asset get command supports --headers flag with CSV format.\n    ///\n    /// This test verifies that:\n    /// - The command accepts the --headers flag\n    /// - The command processes the flag without format-related errors (may fail for other reasons)\n    #[test]\n    fn test_asset_get_command_headers_format() {\n        let mut cmd = Command::cargo_bin(\"pcli2\").unwrap();\n        cmd.arg(\"asset\")\n            .arg(\"get\")\n            .arg(\"--uuid\")\n            .arg(\"00000000-0000-0000-0000-000000000000\")  // Invalid UUID to test flag acceptance\n            .arg(\"--format\")\n            .arg(\"csv\")\n            .arg(\"--headers\");\n\n        // Should fail due to invalid UUID but should accept the format flags\n        cmd.assert()\n            .failure();  // Will fail due to API access but should accept the flag\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","Users","julian","projects","physna","pcli2","tests","folder_list_test.rs"],"content":"//! Integration tests for the folder list command functionality.\\n//!\\n//! These tests verify that the folder list command works correctly with different\\n//! options and formats, ensuring the CLI interface behaves as expected.\\n\\n#[cfg(test)]\\nmod tests {\\n    use assert_cmd::Command;\\n    use predicates::prelude::*;\\n\\n    /// Test that the folder list command displays help information correctly\\n    /// when the --help flag is provided.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Help text contains the command description\\n    /// - Help text shows available options like --format and --tenant\\n    #[test]\\n    fn test_folder_list_command_help() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--help\\\");\\n        \\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::contains(\\\"List all folders\\\"))\\n            .stdout(predicate::str::contains(\\\"--format\\\"))\\n            .stdout(predicate::str::contains(\\\"--tenant\\\"));\\n    }\\n\\n    /// Test that the folder list command works without explicitly providing\\n    /// a tenant parameter.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output is in JSON format (default)\\n    /// - Output contains expected JSON structure with name and path fields\\n    #[test]\\n    fn test_folder_list_command_requires_tenant() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\");\\n        \\n        // When no tenant is provided, it should either show an error or list folders if there's a default\\n        // Based on the test output, it seems to be listing folders (which means there's a default tenant)\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::contains(\\\"[\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"name\\\\\\\"\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"path\\\\\\\"\\\"));\\n    }\\n\\n    /// Test that all supported output formats are accepted by the folder list command.\\n    ///\\n    /// This test verifies that:\\n    /// - Each supported format (json, csv, tree) is accepted as a valid argument\\n    /// - Commands with valid formats execute successfully\\n    /// - Appropriate error messages are shown for invalid tenants\\n    #[test]\\n    fn test_folder_list_command_supported_formats() {\\n        // Test that all supported formats are accepted by the CLI\\n        let formats = vec![\\\"json\\\", \\\"csv\\\", \\\"tree\\\"];\\n        \\n        for format in formats {\\n            let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n            cmd.arg(\\\"folder\\\")\\n                .arg(\\\"list\\\")\\n                .arg(\\\"--tenant\\\")\\n                .arg(\\\"test-tenant\\\")\\n                .arg(\\\"--format\\\")\\n                .arg(format);\\n            \\n            // For invalid tenant, we expect an error message about building folder hierarchy\\n            cmd.assert()\\n                .success()\\n                .stderr(predicate::str::contains(\\\"Error building folder hierarchy\\\"));\\n        }\\n    }\\n    \\n    /// Test that the folder list command produces correctly formatted JSON output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output starts with a JSON array opening bracket\\n    /// - Output contains the expected JSON field names\\n    #[test]\\n    fn test_folder_list_command_json_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"json\\\");\\n        \\n        // Should return JSON formatted folder list\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::starts_with(\\\"[\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"name\\\\\\\"\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\\\\"path\\\\\\\"\\\"));\\n    }\\n    \\n    /// Test that the folder list command produces correctly formatted CSV output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully\\n    /// - Output starts with the expected CSV header row\\n    /// - Output contains at least one newline character\\n    #[test]\\n    fn test_folder_list_command_csv_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"csv\\\");\\n        \\n        // Should return CSV formatted folder list\\n        cmd.assert()\\n            .success()\\n            .stdout(predicate::str::starts_with(\\\"NAME,PATH\\\"))\\n            .stdout(predicate::str::contains(\\\"\\\\n\\\"));\\n    }\\n    \\n    /// Test that the folder list command works with tree format output.\\n    ///\\n    /// This test verifies that:\\n    /// - The command exits successfully when using tree format\\n    #[test]\\n    fn test_folder_list_command_tree_format() {\\n        let mut cmd = Command::cargo_bin(\\\"pcli2\\\").unwrap();\\n        cmd.arg(\\\"folder\\\")\\n            .arg(\\\"list\\\")\\n            .arg(\\\"--format\\\")\\n            .arg(\\\"tree\\\");\\n        \\n        // Tree format should also return data (though implementation may vary)\\n        cmd.assert()\\n            .success();\\n    }\\n}","traces":[],"covered":0,"coverable":0}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      },
    };
  });

  return [...folders, ...files.filter(file => file.path.length === 1)];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener('hashchange', () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.slice(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(
      ({current}) => {
        return {current: [...current, file.path[0]]};
      },
      () => this.updateHash(),
    );
  }

  back(file) {
    this.setState(
      ({current}) => {
        return {current: current.slice(0, current.length - 1)};
      },
      () => this.updateHash(),
    );
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e(
    'div',
    {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e(
      'table',
      {className: 'files-list'},
      e('thead', {className: 'files-list__head'}, e('tr', null, e('th', null, 'Path'), e('th', null, 'Coverage'))),
      e(
        'tbody',
        {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile})),
      ),
    ),
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? (file.covered / file.coverable) * 100 : -1;
  const coverageDelta =
    file.prevRun && (file.covered / file.coverable) * 100 - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'tr',
    {
      className:
        'files-list__file' +
        (coverage >= 0 && coverage < 50 ? ' files-list__file_low' : '') +
        (coverage >= 50 && coverage < 80 ? ' files-list__file_medium' : '') +
        (coverage >= 80 ? ' files-list__file_high' : '') +
        (file.is_folder ? ' files-list__file_folder' : ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e(
      'td',
      null,
      file.covered + ' / ' + file.coverable + (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
    ),
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'}, e(FileHeader, {file, onBack}), e(FileContent, {file}));
}

function FileHeader({file, onBack}) {
  const coverage = (file.covered / file.coverable) * 100;
  const coverageDelta = file.prevRun && coverage - (file.prevRun.covered / file.prevRun.coverable) * 100;

  return e(
    'div',
    {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e(
      'div',
      {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable + (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e(
        'span',
        {title: 'Change from the previous run'},
        coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : '',
      ),
      e('input', {id: 'theme-toggle', type: 'checkbox', hidden: true}),
      e('label', {for: 'theme-toggle', id: 'theme-toggle-label'}, 'üåô'),
    ),
  );
}

function FileContent({file}) {
  return e(
    'pre',
    {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      const nbHit = covered? trace.stats.Line: 0;
      return e(
        'div',
        { className: 'code-text-container' },
        e(
          'code',
          {
            className: 'code-line' + (covered ? ' code-line_covered' : '') + (uncovered ? ' code-line_uncovered' : ''),
          },
          line
        ),
        e(
          'div',
          { className: 'cover-indicator' + (covered? ' check-cover': '') + (uncovered? ' no-cover': '')},
          e(
            'div',
            { className: (covered? 'stat-line-hit': '')},
            covered? nbHit: ""
          )
        )
      );
    }),
  );
}

(function () {
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData &&
    previousData.files.forEach(file => {
      const path = file.path.slice(commonPath.length).join('/');
      prevFilesMap.set(path, file);
    });

  const files = data.files.map(file => {
    const path = file.path.slice(commonPath.length);
    const {covered = 0, coverable = 0} = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: {covered, coverable},
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    },
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));

  const toggle = document.getElementById('theme-toggle');
  const label = document.getElementById('theme-toggle-label');
  label.textContent = 'üåô';

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      document.documentElement.setAttribute('data-theme', 'dark');
      label.textContent = '‚òÄÔ∏è';
    } else {
      document.documentElement.removeAttribute('data-theme');
      label.textContent = 'üåô';
    }
  });
})();
</script>
</body>
</html>